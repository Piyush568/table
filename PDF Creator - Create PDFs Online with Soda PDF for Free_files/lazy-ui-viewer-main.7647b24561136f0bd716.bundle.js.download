webpackJsonp_name_([46,50,155,187,327],{"+FfS":function(e,t,n){"use strict";var o=d(n("HSQo")),r=d(n("Xxa5")),a=d(n("exGp")),i=d(n("/jXN")),u=d(n("C3UN")),l=d(n("VmtT")),c=d(n("b8L+")),s=d(n("iArn"));function d(e){return e&&e.__esModule?e:{default:e}}n("WAbE"),n("2geq"),n("Vr1d"),n("IVIe"),n("h6+/"),n("7ABf"),n("TuET"),n("w1D8");var f=u.default.pdfDocumentMode,g=u.default.pdfDocumentView,p=u.default.pdfAction,v=l.default.availableZoomValues,m="ui-viewer-documentview-factory-module",h="ui-viewer-documentview-factory";i.default.module(m,["pdf-manager-module","ui-viewer-rulers-module","ui-viewer-magnifier-module","bl-annot-handler-module","chain-module"]).factory(h,["$rootScope","$timeout","$q","$injector","ui-helper-factory","pdf-manager-factory","ui-viewer-pagerender-service","ui-viewer-layouts-factory","ui-viewer-inputhandlers-factory","ui-viewer-rulers-factory","ui-viewer-magnifier-factory","bl-annot-handler-factory","chain-factory",function(e,t,i,l,d,m,h,y,P,B,w,b,S){var k={},x=d.getDialogFactory(),L=d.ondemand.getUiActionsFactory,T=function(){return n.e(151).then(n.bind(null,"+F0r")).then(function(){return l.get("ui-viewer-popup-annotation-manager-factory")})},C=function(){return Promise.all([n.e(148),n.e(163),n.e(151)]).then(n.bind(null,"dRf2")).then(function(){return l.get("ui-viewer-popup-textedit-manager-factory")})},R=function(){var e="ui-urlsecurity-factory";if(!k[e]||!1===k[e])return n.e(328).then(n.bind(null,"uVK5")).then(function(){var t=l.get(""+e);if(t)return k[e]=!0,t}).catch(function(t){throw new Error("couldn't load: "+e+", "+t)});var t=l.get(""+e);return t?i.when(t):i.reject("couldn't load: "+e)},D=null,E=null;T().then(function(e){E=e}).catch();var A=null;C().then(function(e){A=e}).catch();var M="allow",V="block",I=function(){var e="bl-selection-factory";return null!=D?i.when(D):n("L0wd")("./"+e).then(function(){var t=l.get(""+e);return t&&(D=t),D}).catch(function(t){throw new Error("couldn't load: "+e+", "+t)})}(),F=function(t){var n=this,l=this,d=t,k=null,D=null,F=null,O=c.default.size(),z=!1,H=!1,$=!1,N=!1,U=B.createInstance(l),_=w.createInstance(l),j=0,W=u.default.BLCursorType.kBLCursorArrow,Z=null,q=!1,X=!1,G=!1,K={pageIndex:-1,top:c.default.point(),bottom:c.default.point()},Y=c.default.point();l.isEsl=function(){return q},l.setEsl=function(t){q=t,e.$broadcast("event-document-esl-changed",{id:l.document.id,isEsl:q})},l.isInSbS=function(t){if(isUndefinedOrNull(t))return X;X=t,e.$broadcast("event-document-isInSbS-changed",l.document)},l.sbSSyncScroll=function(t){if(isUndefinedOrNull(t))return G;G=t,e.$broadcast("event-document-sbSSyncScroll-changed",l.document)},l.document=d,l.getDocument=function(){return d},l.inputHandlers=[],l.renderTargetCallbacks=[],l.resetViewHandler=function(){var e=l.inputHandlers.first();e&&e.second&&e.second.reset&&e.second.reset()},l.fireEvent_OnActiveToolChanged=function(t){for(var n=0;n<l.inputHandlers.length;n++){var o=l.inputHandlers[n].second;o&&o.onActiveToolChanged&&o.onActiveToolChanged(t)}e.$broadcast("event-document-active-tool-changed",{documentView:l,toolName:t})},l.fireEvent_OnSelectionChanged=function(t){e.$broadcast("event-document-selection-changed",{documentView:l,selection:t})},l.fireEvent_OnScrollPositionChanged=function(t,n){l.renderTargetCallbacks.forEach(function(e){e&&e.onScrollPositionChanged&&e.onScrollPositionChanged(t,n)}),e.$broadcast("event-document-view-scroll-position-changed",{documentView:l,bar:t,pos:n})},l.fireEvent_OnScrollVisibilityChanged=function(e,t){l.renderTargetCallbacks.forEach(function(n){n&&n.onScrollVisibilityChanged&&n.onScrollVisibilityChanged(e,t)})},l.fireEvent_OnScrollChanged=function(e,t){l.renderTargetCallbacks.forEach(function(n){n&&n.onScrollChanged&&n.onScrollChanged(e,t)})},l.fireEvent_OnScrollRangeChanged=function(e,t){l.renderTargetCallbacks.forEach(function(n){n&&n.onScrollRangeChanged&&n.onScrollRangeChanged(e,t)})},l.fireEvent_OnScrollSizeChanged=function(e,t){l.renderTargetCallbacks.forEach(function(n){n&&n.onScrollSizeChanged&&n.onScrollSizeChanged(e,t)})},l.fireEvent_OnDrawUpdated=function(){l.renderTargetCallbacks.forEach(function(e){e&&e.onDrawUpdated&&e.onDrawUpdated()})},l.fireEvent_OnCaretPositionChanged=function(e,t){l.renderTargetCallbacks.forEach(function(n){n&&n.onCaretPositionChanged&&n.onCaretPositionChanged(e,t)})},l.fireEvent_OnDraw=function(e){},l.fireEvent_OnShowContextMenu=function(e,t,n){l.renderTargetCallbacks.forEach(function(o){o&&o.onShowContextMenu&&o.onShowContextMenu(e,t,n)})},l.fireEvent_OnHideContextMenu=function(e){l.renderTargetCallbacks.forEach(function(t){t&&t.onHideContextMenu&&t.onHideContextMenu(e)})},l.fireEvent_OnAnimationStarted=function(){e.$broadcast("event-document-view-animation-started",{documentView:l})},l.fireEvent_OnAnimationCompleted=function(){e.$broadcast("event-document-view-animation-completed",{documentView:l})},l.currentScrollCoef=1,l.virtual=[],l.layoutRect=c.default.rect(),l.resizeView=function(e){isUndefinedOrNull(e)&&(e=c.default.size());var t=e.copy();O.isEqual(t)||(O=t,l.updateLayoutRect()),l.invalidate()},l.getViewSize=function(){return O},l.updateLayoutRect=function(){if(l.layoutRect=H?c.default.rect(B.RULER_WIDTH,B.RULER_WIDTH,O.width,O.height):c.default.rect(0,0,O.width,O.height),Z){var e=l.layoutRect.getSize();Z.resizeView(e),isUndefinedOrNull(U)||U.update()}},l.setFocusPage=function(e){isUndefinedOrNull(Z)||(Z.setFocusPage(e),l.invalidate())},l.getFocusPage=function(){var e=-1;return isUndefinedOrNull(Z)||(e=Z.getFocusPage()),e},l.getPageAtPoint=function(e){var t=-1;return isUndefinedOrNull(Z)||(t=Z.getPageAtPoint(e)),t},l.mapPointToPage=function(e,t){var n=c.default.point();if(!isUndefinedOrNull(Z)){var o=l.layoutRect.getOrigin(),r=c.default.point(t.x-o.x,t.y-o.y);n=Z.mapPointToPage(e,r)}return n},l.mapPointToDevice=function(e,t){var n=c.default.point();if(!isUndefinedOrNull(Z)){n=Z.mapPointToDevice(e,t);var o=l.layoutRect.getOrigin();n.offset(o.x,o.y)}return n},l.mapQuadToDevice=function(e,t){var n=l.mapPointToDevice(e,t.tl),o=l.mapPointToDevice(e,t.tr),r=l.mapPointToDevice(e,t.bl),a=l.mapPointToDevice(e,t.br);return c.default.quadFromPoints(n,o,r,a)},l.mapRectToPage=function(e,t){var n=c.default.rect();if(!isUndefinedOrNull(Z)){var o=l.layoutRect.getOrigin(),r=t.copy();r.offset(-o.x,-o.y),n=Z.mapRectToPage(e,r)}return n},l.mapRectToDevice=function(e,t){var n=c.default.rect();if(!isUndefinedOrNull(Z)){n=Z.mapRectToDevice(e,t);var o=l.layoutRect.getOrigin();n.offset(o.x,o.y)}return n},l.goToPageRect=function(t,n,o){if(Z){Z.goToPageRect(t,n,o);var r=l.getDocument();e.$broadcast("event-document-view-changed",r)}},l.goToPrevPage=function(){Z.goToPrevPage()},l.goToNextPage=function(){Z.goToNextPage()},l.processScrollEvent=function(e,t,n){Z&&Z.processScrollEvent(e,t,n)},l.focusAnnot=function(e,t,n){for(var o=0;o<l.inputHandlers.length;o++){var r=l.inputHandlers[o].second;if(r&&r.focusAnnot&&r.focusAnnot(e,t,n))break}return!0},l.selectAnnotation=function(e,t){var n=l.getDocument().getPageIndex(e);i.all([l.hidePopupAnnotation(),l.hidePopupTextEdit()]).then(function(){l.goToPageRect(n,t.rect),l.focusAnnot(n,t)})},l.pushInputHandler=function(e,t){if(l.inputHandlers.length>0){var n=l.inputHandlers[0].second;if(n&&e!==l.inputHandlers[0].first){var o=!1;n.removed&&(o=n.removed()),o&&(n.terminate(),l.inputHandlers.shift())}}l.inputHandlers.unshift({first:e,second:t});var r=t.getToolName();l.fireEvent_OnActiveToolChanged(r)},l.getActiveToolName=function(){return l.inputHandlers&&l.inputHandlers.length>0?l.inputHandlers[0].second.getToolName():null},l.getActiveTool=function(){return 0===l.inputHandlers.length?null:l.inputHandlers[0].first},l.getMarkupType=function(){return l.inputHandlers&&l.inputHandlers.length>0?l.inputHandlers[0].second.getMarkupType&&l.inputHandlers[0].second.getMarkupType():null},l.setActiveTool=function(){var e=(0,a.default)(r.default.mark(function e(t,n){var o,a,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.setCursor(u.default.BLCursorType.kBLCursorArrow),"AddTextMarkupAnnot"!==t&&"AddTextAnnot"!==t&&"AddPencilAnnot"!==t&&"AddStampAnnot"!==t&&"AddLinkAnnot"!==t&&"Whiteout"!==t&&"AddShapeAnnot"!==t&&"AddMeasurementAnnot"!==t&&"AddMeasurementCalibration"!==t||(l.setHighlight(null),l.resetSelection(!0)),"AnnotOrder"===t?l.setViewState(u.default.PDPageRenderFlags.kPDPageRenderOrderAnnots,0):l.setViewState(0,u.default.PDPageRenderFlags.kPDPageRenderOrderAnnots),o=l.getActiveTool(),t!==o){e.next=6;break}return e.abrupt("return");case 6:if(["textFieldCreate","checkBoxCreate","radioButtonCreate","listBoxCreate","comboBoxCreate","pushButtonCreate","submitButtonCreate","emailButtonCreate","printButtonCreate"].indexOf(t)>=0&&(l.setHighlight(null),l.resetSelection(null)),"TypeText"!==t||"edit"===o){e.next=11;break}return e.next=11,l.setActiveTool("edit");case 11:return e.next=13,P.createInstance(t,l);case 13:if(a=e.sent){e.next=17;break}return console.log("An error occured while changing the active tool"),e.abrupt("return");case 17:if("view"===t||"select"===t||"edit"===t||"AnnotOrder"===t){for(l.setHighlight(null),l.setSelection(null),N=!0;l.inputHandlers.length>0;)(i=l.inputHandlers.shift().second)&&i.terminate();l.invalidate()}a.initialize(n),l.pushInputHandler(t,a);case 20:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),l.setLayout=function(t){var n=l.getDocument();if(n.isLoaded&&F!==t){F=t;var o=y.createInstance(t);if(o){var r=n.pageSelectedIndex,a=null,i=l.layoutRect.getSize();try{if(Z&&(r=l.getFocusPage(),!isUndefinedOrNull(r)&&r>=0)){var u=c.default.rect(0,0,i.width,i.height);a=Z.mapRectToPage(r,u)}}catch(e){}Z&&Z.dispose&&Z.dispose(),Z=o;var s={hasCoverPage:n.documentView===g.facingConverPage||n.documentView===g.facingContinuousConverPage};Z.initialize(l,s),Z.resizeView(i),Z.zoomTo(n.pageView,n.zoom),Z.setPagesRotation(n.rotate),!isUndefinedOrNull(r)&&r>=0&&l.goToPageRect(r,a,0),n.documentView=t,e.$broadcast("event-document-view-changed",n)}}},l.getLayout=function(){return F},l.showContextMenu=function(e,t,n){l.fireEvent_OnShowContextMenu(e,t,n)},l.hideContextMenu=function(e){l.fireEvent_OnHideContextMenu(e)},l.showPopupAnnotation=function(){var e=(0,a.default)(r.default.mark(function e(t,n,o,a){var i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:i=e.sent,t.isMarkup()&&t.type!==u.default.pdfAnnotationType.freeText&&i.showPopupAnnotation(l.document,t,n,o,l,a);case 4:case"end":return e.stop()}},e,this)}));return function(t,n,o,r){return e.apply(this,arguments)}}(),l.hidePopupAnnotation=(0,a.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return t=e.sent,e.abrupt("return",t.closeActivePopupAnnotationDialog());case 4:case"end":return e.stop()}},e,this)})),l.showPopupTextEdit=function(){var e=(0,a.default)(r.default.mark(function e(t,n){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:e.sent.showPopupTextEdit(t,n,l);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),l.hidePopupTextEdit=(0,a.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return t=e.sent,e.abrupt("return",t.closeActivePopupTextEditDialog());case 4:case"end":return e.stop()}},e,this)})),l.requestPermissions=function(e,n,o){return m.documentRequestPermissions(t,e,n,o)},l.getVisibleRange=function(){return Z?Z.getVisibleRange():{startPage:-1,endPage:-1}},l.getVisiblePages=function(){return Z?Z.getVisiblePages():[]},l.getPagesRotation=function(){return l.document.rotate},l.getZoom=function(){return l.document.zoom},l.setZoom=function(e,t){isUndefinedOrNull(t)&&(t=u.default.pdfPageView.none),(t||e)&&t!==u.default.pdfPageView.actualSize||(t=u.default.pdfPageView.none,e=1),Z.zoomTo(t,s.default.floorZoom(e))},l.zoomIn=function(){for(var e=l.getDocument(),t=0,n=v.length;t<n;++t){var o=v[t];if(e.zoom<o){l.setZoom(o);break}}},l.zoomOut=function(){for(var e=l.getDocument(),t=saveSlice(v).reverse(),n=0,o=t.length;n<o;++n){var r=t[n];if(e.zoom>r){l.setZoom(r);break}}},l.setPageView=function(e){l.setZoom(null,e)},l.rotate=function(e){var t=l.getDocument();(e=(t.rotate+e)%360)<0&&(e=360+e),t.rotate!==e&&(Z.setPagesRotation(e),l.invalidate())},l.setGridEnabled=function(t){if(z!==t){var n=l.getDocument();z=t,l.updateLayoutRect(),l.invalidate(),e.$broadcast("event-document-gridstate-changed",n)}},l.isGridEnabled=function(){return z},l.setMagnifierEnabled=function(e){$!==e&&(Y=c.default.point(),$=e,l.invalidate())},l.isMagnifierEnabled=function(){return $&&!isUndefinedOrNull(_)&&_.isEnabled()},l.setRulersEnabled=function(t){if(H!==t){var n=l.getDocument();H=t,n.isRulersEnabled=t,l.updateLayoutRect(),l.invalidate(),e.$broadcast("event-document-rulerstate-changed",n)}},l.isRulersEnabled=function(){return H},l.getHorzGuideCoords=function(){return U.getHorzGuides()},l.getVertGuideCoords=function(){return U.getVertGuides()},l.runActions=function(){var e=(0,a.default)(r.default.mark(function e(t){var n,o,u,c,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],isArray(t)){e.next=3;break}return e.abrupt("return");case 3:o=0,u=t.length;case 4:if(!(o<u)){e.next=22;break}if(c=t[o],!isUndefinedOrNull(c)){e.next=8;break}return e.abrupt("return");case 8:e.t0=c.type,e.next=e.t0===p.openWebPage?11:e.t0===p.goToPage?16:e.t0===p.js?18:19;break;case 11:return e.next=13,R();case 13:return(s=e.sent).check(c.value,M)?n.push({method:function(e){window.open(e,"_blank")},value:c.value}):s.check(c.value,V)?n.push({method:function(e){var t=i.defer(),n={action:{value:e}};return x.then(function(e){e.dialog.urlSecurityBlock.show({name:"Security Block",model:n,callbacks:[{text:"Help",preventClose:!0,callback:function(){var e=(0,a.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:t.openUserGuideRedirect();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{text:"Ok"}],onClose:function(){t.resolve()}})}),t.promise},value:c.value}):n.push({method:function(e){var t=i.defer();return x.then(function(n){n.dialog.urlSecurityWarning.show({value:e,urlSecurityFactoryPromise:R,onClose:function(){t.resolve()}})}),t.promise},value:c.value}),e.abrupt("break",19);case 16:return l.goToPageRect(c.value),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:++o,e.next=4;break;case 22:n.length&&S.execute(n).then(function(){});case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l.isHighlightForms=function(){return 0!=(l.getViewState()&u.default.PDPageRenderFlags.kPDPageRenderHighlightAnnots)},l.getViewState=function(){return j},l.setViewState=function(t,n){isUndefinedOrNull(t)&&(t=0),isUndefinedOrNull(n)&&(n=0),j=(j|t)&~n;var o=l.getDocument();(o.viewState=j,e.$broadcast("event-document-viewstate-changed",o),!0===o.isLoaded)&&(0!=(l.getViewState()&u.default.PDPageRenderFlags.kPDPageRenderSkipMarkupAnnots)&&(l.hidePopupAnnotation(),l.resetSelection(!0),l.setHighlight(null)),l.invalidate())},l.updateLayerStates=function(e){l.getDocument().updateLayerStates(e),l.setHighlight(null),l.resetSelection(!0),l.invalidate(),Z.oCConfigChanged()},l.updatePages=function(e,t){l.resetSelection(!0);var n=l.getFocusPage(),o=void 0;if(Z&&!isUndefinedOrNull(n)&&n>=0){var r=n,a=e.length;switch(t){case u.default.PDPageOperation.kPDInsertPages:for(o=0;o<a;++o)e[o]<=r&&++r;break;case u.default.PDPageOperation.kPDDeletePages:for(o=a;o>0;--o)e[o-1]<=r&&--r;break;case u.default.PDPageOperation.kPDMovePages:var i=!1;for(o=1;o<a;++o)if(e[o]===r){r=e[0]+o;for(var c=a;c>1;--c)e[c-1]<r&&--r;i=!0;break}if(!i){for(o=a;o>1;--o)e[o-1]<=r&&--r;for(o=1;o<a;++o)e[0]+o<=r&&++r}}Z&&Z.updatePages();var s=l.getDocument().getPagesCount();n=Math.max(0,Math.min(s-1,r)),l.goToPageRect(n,null,0)}for(o=0;o<l.inputHandlers.length;o++){var d=l.inputHandlers[o].second;d&&d.onPagesChanged&&d.onPagesChanged()}};var Q=null;l.setActive=function(e){var t=e,n=l.getFocusPage();if(t){Q=null}else Q||(l.resetSelection(!0),i.all([l.hidePopupAnnotation(),l.hidePopupTextEdit()]).then(function(){var e=l.layoutRect.getSize();Z&&!isUndefinedOrNull(n)&&n>=0&&(Q=Z.mapRectToPage(n,c.default.rect(0,0,e.width,e.height)))}))},l.setSelection=function(e,t){var n=!1;k!==e&&(n=!0,K.pageIndex=-1,ae(),Y=c.default.point(),k=e,l.invalidate(),l.fireEvent_OnSelectionChanged(k),t&&t()),i.all([l.hidePopupAnnotation(),l.hidePopupTextEdit()]).then(function(){n&&l.invalidate()})},l.getSelection=function(){return k},l.resetSelection=function(e){N=!0;for(var t=!1;l.inputHandlers.length>1;)l.inputHandlers[0].second.terminate(),l.inputHandlers.shift(),t=!0;if(l.setSelection(null),l.inputHandlers.length>0){var n=l.inputHandlers[0].second.getToolName();if(e)(l.getActiveTool()!==n||t)&&l.fireEvent_OnActiveToolChanged(n)}l.invalidate()},l.setHighlight=function(e){D!==e&&(D=e,l.invalidate())},l.setHighlightNamed=function(){var e=(0,a.default)(r.default.mark(function e(t,n){var o,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I;case 2:o=e.sent,(a=o.createSelection(t))&&(a.init(l,n),l.setHighlight(a));case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),l.setSelectionNamed=function(){var e=(0,a.default)(r.default.mark(function e(t,n){var o,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I;case 2:if(o=e.sent,a=o.createSelection(t)){e.next=6;break}return e.abrupt("return",null);case 6:return a.init(l,n),e.abrupt("return",l.setSelection(a));case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),l.setSelectionAndTool=function(){var e=(0,a.default)(r.default.mark(function e(t,n,o){var a,i,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I;case 2:if(a=e.sent,i=a.createSelection(t)){e.next=6;break}return e.abrupt("return",null);case 6:return i.init(l,n),e.next=9,P.createInstance(t,l);case 9:return(u=e.sent)&&(u.initialize(n),l.pushInputHandler(t,u)),l.setSelection(i,o),e.abrupt("return",u);case 13:case"end":return e.stop()}},e,this)}));return function(t,n,o){return e.apply(this,arguments)}}(),l.goToSelection=function(){if(k&&k.getDestination){var e=k.getDestination();l.goToPageRect(e.pPageIndex,e.pRect,u.default.BLRectFlags.kBLRectDontScrollVisible)}},l.invalidate=function(){l.fireEvent_OnDrawUpdated()};var J=function(e,t,n){var o=l.getDocument(),r=o.getPage(t);if(r){e.fillRect(n,"#FFFFFF");var a=n.copy();a.inflate(.5,.5),e.strokeRect(a,"#ABABAB",1);var i=r.getRotate(o.rotate);h.draw(e,l,t,n,i,0===i)}},ee=function(e,t){var n=l.getDocument().getPage(t),o=0;if(n){var r=n.annotations;if(r)for(var a=0;a<r.length;a++){var i=r[a];if(i&&i.rect&&window.isUndefinedOrNull(i.parentIndex)){i.isWidget()&&(i.order=++o);var u=b.createInstance(i);u&&u.draw(e,i,l.getViewState(),l)}}}},te=function(e,t,n){!isUndefinedOrNull(U)&&z&&U.drawGridOnPage(e,t),isUndefinedOrNull(k)||k.draw(e,t),isUndefinedOrNull(D)||D.drawHighlight(e,t);for(var o=0;o<l.inputHandlers.length;o++){var r=l.inputHandlers[o].second;r&&r.onDraw&&r.onDraw(e,t)}};l.getLayoutOffset=function(){var e=c.default.point();if(Z.getOffset){H&&(e=l.layoutRect.getOrigin());var t=Z.getOffset();e.offset(-t.x,-t.y)}return e},l.tempDraw=function(t,n){var o=l.getVisiblePages();if(o){for(var r=l.getActiveToolName()===f.select,a=0,i=o.length;a<i;a++){var u=o[a].index;if(J(t,u,o[a].pageRect),r){var c=o[a];c&&c.isLoaded&&e.$broadcast("event-document-visible-page-text-blocks-draw",{documentView:l,page:c})}}if(t.popState(),t.setCTM(n),t.pushState(),ge.length>0)for(var s=function(e,n){me(t,o[e].index,function(){ge.forEach(function(n,r){n(t,o[e].index)})})},d=0,g=o.length;d<g;d++)s(d);for(var p=function(e,n){me(t,o[e].index,function(){ee(t,o[e].index)})},v=0,m=o.length;v<m;v++)p(v);for(var h=function(e,n){me(t,o[e].index,function(){te(t,o[e].index)})},y=0,P=o.length;y<P;y++)h(y);t.popState()}};var ne=function(e,t){Z&&Z.draw&&Z.draw(e,j,t)};l.draw=function(e){if(e.clear(),E&&E.onDrawUpdated(l),A&&A.onDrawUpdated(l),Z){var t=e.getCTM();if(e.pushState(),H){var n=l.layoutRect.copy();e.clipRect(n);var o=l.layoutRect.getOrigin();e.translateCTM(o.x,o.y),ne(e,t)}else ne(e,t);e.popState(),e.setCTM(t),H&&!isUndefinedOrNull(U)&&U.draw(e),$&&!isUndefinedOrNull(_)&&_.draw(e,Y)}l.fireEvent_OnDraw(e),ae()};var oe=function(e){return!(!H||isUndefinedOrNull(U))&&U.handleEvent(e)},re=function(e){return!(!$||isUndefinedOrNull(_))&&_.handleEvent(e)};function ae(){var e=c.default.point(),t=c.default.point();-1!==K.pageIndex&&(e=l.mapPointToDevice(K.pageIndex,K.top),t=l.mapPointToDevice(K.pageIndex,K.bottom)),l.fireEvent_OnCaretPositionChanged(e,t)}l.onCaretPositionChanged=function(e){K=e,ae()},l.onMagnifierPositionChanged=function(e){l.isMagnifierEnabled()&&(Y=e,l.invalidate())};var ie=[];function ue(e){var t=i.all((e||[]).concat(ie)).then(function(e){return ie.length?ue(e):e});return ie=[],t}l.dispatchEvent=function(){var e=(0,a.default)(r.default.mark(function e(t,n,o){var a,u,c,s,d,f,g,p,v;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,u=null,a=i.defer(),u=a.promise,e.next=6,ue();case 6:if(c=!1,(c=oe(t))||(c=re(t)),c){e.next=47;break}!1,N=!1,s=0;case 13:if(s===l.inputHandlers.length){e.next=46;break}if(!(d=l.inputHandlers[s].second)){e.next=44;break}return ie.push(u),e.next=19,d.handleEvent(t);case 19:if(c=e.sent,!N){e.next=23;break}return c=!0,e.abrupt("break",46);case 23:if(!d.isFinished()){e.next=41;break}d.terminate(),f=-1,g=0;case 28:if(!(g<l.inputHandlers.length)){e.next=37;break}if(p=l.inputHandlers[s],!(p.second.constructor.name===d.constructor.name)){e.next=34;break}return f=g,e.abrupt("break",37);case 34:g++,e.next=28;break;case 37:-1!=f&&l.inputHandlers.splice(f,1),l.inputHandlers.length>0&&(v=l.inputHandlers[s].second.getToolName(),l.getActiveTool()!==v&&l.fireEvent_OnActiveToolChanged(v),l.inputHandlers[s].second.restoreSelection()),e.next=42;break;case 41:++s;case 42:if(!c){e.next=44;break}return e.abrupt("break",46);case 44:e.next=13;break;case 46:c||(c=l.handleUnhandledEvent(t));case 47:return a&&a.resolve(),e.abrupt("return",c);case 49:case"end":return e.stop()}},e,this)}));return function(t,n,o){return e.apply(this,arguments)}}();var le=new Date,ce=c.default.point(),se=!1,de=function(e){var t=c.default.point(ce.x-e.x,ce.y-e.y);return Math.abs(t.x)>5||Math.abs(t.y)>5},fe=function(t,n){if(deviceDetect.isPhone())switch(n){case u.default.BLInputEventType.kBLInputEventPointerPressed:le=new Date,ce=t.copy(),se=!1;break;case u.default.BLInputEventType.kBLInputEventPointerReleased:!se&&(new Date).getTime()-le.getTime()<500&&((se=de(t))||e.$broadcast("event-fullscreen-toggle"));break;case u.default.BLInputEventType.kBLInputEventPointerMoved:se=de(t)}};l.handleUnhandledEvent=function(e){switch(e.type){case u.default.BLInputEventType.kBLInputEventPointerPressed:return e.pointerArgs.button===u.default.BLPointerButton.kBLPointerButtonLeft&&l.pointerPressed(e.pointerArgs.position),!0;case u.default.BLInputEventType.kBLInputEventPointerReleased:return e.pointerArgs.button===u.default.BLPointerButton.kBLPointerButtonLeft&&l.pointerReleased(e.pointerArgs.position),!0;case u.default.BLInputEventType.kBLInputEventPointerMoved:return l.pointerMoved(e.pointerArgs.position),!0;case u.default.BLInputEventType.kBLInputEventWheelChanged:if(u.default.BLFlagIsSet(e.wheelArgs.flags,u.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var t=l.getZoom()*(1+1.5*e.wheelArgs.delta/10);Z.zoomTo(u.default.pdfPageView.none,s.default.floorZoom(t),e.wheelArgs.position)}else{var n=e.wheelArgs.delta;if(0!==n){var o=1*n;l.pointerWheel(e.wheelArgs.position,o)}}return!0;case u.default.BLInputEventType.kBLInputEventKeyPressed:var r=e.keyArgs.keycode;if(r===u.default.kBLKey.kBLKey_Z&&u.default.BLFlagIsSet(e.keyArgs.flags,u.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed))return m.undoCurrentDocument(),!0;if(r===u.default.kBLKey.kBLKey_Y&&u.default.BLFlagIsSet(e.keyArgs.flags,u.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed))return m.redoCurrentDocument(),!0;if(r===u.default.kBLKey.kBLKey_G&&u.default.BLFlagIsSet(e.keyArgs.flags,u.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed))return l.setGridEnabled(!z),!0;break;case u.default.BLInputEventType.kBLInputEventCommand:return function(e){var t=e.commandArgs.command;if("PinchStart"==t){pe=l.getZoom();var n=new Date;return ve=n.getTime(),!0}if("Pinch"==t){var o=new Date,r=o.getTime();if(r-ve>=16){ve=r;var a=Math.max(v[0],Math.min(pe*e.commandArgs.scale,v[v.length-1]));l.setZoom(a)}return!0}if("PinchEnd"==t)return pe=l.getZoom(),!0;return!1}(e)}return!1},l.pointerPressed=function(e){fe(e,u.default.BLInputEventType.kBLInputEventPointerPressed),Z&&Z.pointerPressed&&Z.pointerPressed(e)},l.pointerReleased=function(e){fe(e,u.default.BLInputEventType.kBLInputEventPointerReleased),Z&&Z.pointerReleased&&Z.pointerReleased(e)},l.pointerMoved=function(e){fe(e,u.default.BLInputEventType.kBLInputEventPointerMoved),Z&&Z.pointerMoved&&Z.pointerMoved(e)},l.pointerWheel=function(e,t){var n=l.layoutRect.getOrigin(),o=c.default.point(e.x-n.x,e.y-n.y);Z&&Z.pointerWheel&&Z.pointerWheel(o,t)};var ge=[];l.subscribeEvent_OnDrawPageView=function(e){~ge.indexOf(e)||ge.push(e)},l.unSubscribeEvent_OnDrawPageView=function(e){~ge.indexOf(e)&&ge.splice(e,1)},l.layoutCallbacks={onAnimationStarted:function(){l.fireEvent_OnAnimationStarted()},onAnimationCompleted:function(){l.fireEvent_OnAnimationCompleted()},onDrawUpdated:function(){l.invalidate()},onDrawPageView:function(e,t){ge.forEach(function(n,o){n(t,e)}),ee(t,e),te(t,e)},onScrollVisibilityChanged:function(e,t){l.fireEvent_OnScrollVisibilityChanged(e,t)},onScrollChanged:function(e,t){U.update(),l.fireEvent_OnScrollChanged(e,t)},onScrollRangeChanged:function(e,t){U.update(),l.fireEvent_OnScrollRangeChanged(e,t)},onScrollSizeChanged:function(e,t){l.fireEvent_OnScrollSizeChanged(e,t)},onScrollPositionChanged:function(e,t){U.update(),l.fireEvent_OnScrollPositionChanged(e,t)},onZoomChanged:function(t,n){window.deviceDetect.isPhone()||l.hidePopupAnnotation(),U.update();var o=l.getDocument();o.zoom=s.default.floorZoom(n),o.pageView=1===n?u.default.pdfPageView.actualSize:t,e.$broadcast("event-document-zoom-changed",o),e.$broadcast("event-document-page-view-changed",o)},onRotateChanged:function(e){U.update(),l.getDocument().rotate=e},onFocusPageChanged:function(t){U.update();var n=l.getDocument();n.pageSelectedIndex=t,e.$broadcast("event-document-page-selected-index-changed",n)},onVisibleRangeChanged:function(){var t=(0,a.default)(r.default.mark(function t(n,o){var a,i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:return a=t.sent,t.next=5,C();case 5:i=t.sent,a.onVisibleRangeChanged(l,n,o),i.onVisibleRangeChanged(l,n,o),e.$broadcast("event-document-visible-range-changing",{documentView:l,documentId:l.document.id,from:n,to:o,isUsingVisibleRangeNavigation:Z.isUsingVisibleRangeNavigation()});case 9:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},l.loadPageContent=function(e){var t=l.getDocument();return m.loadPageContent(t.id,e).then(function(){l.invalidate()})},l.setCursor=function(e){W!==e&&(W=e)},l.selectText=function(t,n,o,r){l.setActiveTool(u.default.pdfDocumentMode.select),l.goToPageRect(t,r);var a={selectedIndex:t,startIndex:n,endIndex:n+o.length};e.$broadcast("ui-event-document-view-select-text-changed",{documentView:l,data:a})},l.getCursor=function(){return W},l.isLoadedChanged=function(){l.document.isLoaded&&(l.setLayout(l.document.documentView),l.setActiveTool(f.view))},l.dispose=function(){for(;l.inputHandlers.length>0;)l.inputHandlers[0].second.terminate(),l.inputHandlers.shift();k=null,D=null,l.hidePopupAnnotation(),l.hidePopupTextEdit(),Z&&Z.dispose&&Z.dispose(),Z=null,d=null,U=null,_=null,ge=[]},l.initialize=function(e,t){l.resizeView(e),t.clear()},l.mapFieldRectToPage=function(e,t){var o=n.getDocument().getPage(e);if(!o)return null;var r=o.getPageToDevSpaceMatrix(.75,0).invert(),a=c.default.rect(t.left,t.top,t.left+t.width,t.top+t.height);return r.mapRect(a)};var pe=-1,ve=0;function me(e,t,n){e.pushState();var o=l.getDocument().getPage(t),r=c.default.point(o.virtualLeft,o.virtualTop);e.translateCTM(r.x,r.y);var a=l.getLayoutOffset();e.translateCTM(a.x,a.y);var i=o.getPageToDevSpaceMatrix(l.getZoom(),l.getPagesRotation());e.concatCTM(i),n(),e.popState()}(0,o.default)(l,{hasDocumentMode:{get:function(){return l.inputHandlers.length>1}}})};return{createInstance:function(e){return new F(e)}}}]),mainApp.factory(h,getConstructor(m,h,"factory"))},"1reG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.module=void 0;var o=c(n("Xxa5")),r=c(n("exGp")),a=c(n("/jXN")),i=c(n("7t+N"));n("isVG"),n("+FfS"),n("JRKk"),n("aA0F");var u=c(n("b8L+")),l=c(n("Zite"));function c(e){return e&&e.__esModule?e:{default:e}}var s="ui-viewer-directive-module",d=a.default.module(s,["ui-helper-module","ui-viewer-documentview-factory-module","ui-viewer-tabs-module"]);t.module=d,d.directive("documentViewLayer",["$rootScope","$state",function(e,t){return{template:'<div class="canvas document-view-container"><progress-layer ng-document-view="documentView"></progress-layer><render-target ng-document-view="documentView"></render-target><popup-layer ng-document-view="documentView"></popup-layer></div>',replace:!0,scope:{documentView:"="},link:function(e){}}}]),d.directive("documentTabView",["$rootScope","$state","$timeout","ui-viewer-tabs-factory","ui-helper-factory",function(e,t,n,o,r){var a=r.getPdfViewerFactory();return{template:function(e,t){return'<div class="canvas">                                        <document-view-layer ng-class="{\'left-view\': documentView2}" document-view="documentView1"></document-view-layer>                                         <document-view-layer class="right-view" ng-show="documentView2" document-view="documentView2"></document-view-layer>                                    </div>'},replace:!0,scope:{},link:function(e){var t=function(t){n(function(){var n=void 0;if(t&&(n=t.getDocument()),isUndefinedOrNull(n))e.documentView1=e.documentView2=null;else{var r=o.getDocumentTab(n.id);r?a.then(function(t){e.documentView1=t.getDocumentView(r.first),e.documentView2=t.getDocumentView(r.second)}):e.documentView1=e.documentView2=null}})},r=function(e,n){t(n)};e.$on("event-document-view-selected",r),e.$on("event-document-view-refreshed",r),e.$on("event-document-view-closed",function(n,o){e.documentView2!=o&&e.documentView1!=o||a.then(function(e){t(e.getCurrentDocumentView())})}),e.$on("$destroy",function(){})}}}]),d.directive("popupControl",["$rootScope","$document","$compile",function(e,t,n){return{template:'<section class="annotation-popup" ng-style="{\'display\': \'block\', \'left\': model.left + \'px\', \'top\': model.top + \'px\', \'width\': model.width + \'px\', \'height\': model.height + \'px\' }">                                    <div class="top-block noSelection">                                    </div>                                    <div class="bottom-block">                                    </div>                                    <a class="btn-close" ng-click="closeCallback()"></a>                                    <a class="gripper-left"></a>                                    <a class="gripper-right"></a>                                    <a class="btn-md std-btn noSelection" ng-show="model.onApply" ng-class="{\'disabled\': !model.isChanged}" ng-click="model.isChanged && model.onApply()" translate="Apply"></a>                                </section>',scope:{model:"=ngModel",closeCallback:"="},link:function(e,o,r){function a(){var e=o.closest(".document-view-container"),t=e.width(),n=e.height();return u.default.size(t,n)}o=(0,i.default)(o),e.model.headerTemplate&&o.find(".top-block").append(n(e.model.headerTemplate)(e)),e.model.bodyTemplate&&o.find(".bottom-block").append(n(e.model.bodyTemplate)(e)),e.model.onInit&&e.model.onInit(o),o.find(".top-block").on("touchstart",l.default.eventHandler),o.find(".top-block").on("mousedown",function(n){var o=u.default.point(),r=0,i=0,c=function(t){var n=t.pageX-o.x,l=t.pageY-o.y;e.model.setCursorPosition(u.default.point((r+n)*devicePixelRatio,(i+l)*devicePixelRatio),a()),e.$digest()};n.preventDefault&&n.preventDefault(),o=u.default.point(n.pageX,n.pageY),r=e.model.left,i=e.model.top,t.on("mousemove",c),t.on("touchmove",l.default.eventHandler),t.on("mouseup",function e(){t.off("mousemove",c),t.off("touchmove",l.default.eventHandler),t.off("mouseup",e),t.off("touchend",l.default.eventHandler)}),t.on("touchend",l.default.eventHandler)}),o.find(".gripper-left").on("touchstart",l.default.eventHandler),o.find(".gripper-left").on("mousedown",function(n){var o=u.default.point(),r=0,i=0,c=0,s=function(t){var n=o.x-t.pageX,l=t.pageY-o.y;e.model.resizeLeftBottom(u.default.size(r,i),n,l,c,a()),e.$digest()};n.preventDefault&&n.preventDefault(),o=u.default.point(n.pageX,n.pageY),r=e.model.width,i=e.model.height,c=e.model.left,t.on("mousemove",s),t.on("touchmove",l.default.eventHandler),t.on("mouseup",function e(){t.off("mousemove",s),t.off("touchmove",l.default.eventHandler),t.off("mouseup",e),t.off("touchend",l.default.eventHandler)}),t.on("touchend",l.default.eventHandler)}),o.find(".gripper-right").on("touchstart",l.default.eventHandler),o.find(".gripper-right").on("mousedown",function(n){var o=u.default.point(),r=0,i=0,c=function(t){var n=t.pageX-o.x,l=t.pageY-o.y;e.model.resize(u.default.size(r+n,i+l),a()),e.$digest()};n.preventDefault&&n.preventDefault(),o=u.default.point(n.pageX,n.pageY),r=e.model.width,i=e.model.height,t.on("mousemove",c),t.on("touchmove",l.default.eventHandler),t.on("mouseup",function e(){t.off("mousemove",c),t.off("touchmove",l.default.eventHandler),t.off("mouseup",e),t.off("touchend",l.default.eventHandler)}),t.on("touchend",l.default.eventHandler)}),o.show()}}}]),d.directive("popupLayer",["$rootScope","$document","$timeout","$compile","$injector",function(e,t,a,i,u){return{template:'<popup-control style="display:none" close-callback="popup.closeCallback" ng-model="popup.dialog" ng-repeat="popup in popupControls"></popup-control>',scope:{documentView:"=ngDocumentView"},link:function(){var t=(0,r.default)(o.default.mark(function t(r,a,i){var l,c,s,d,f,g;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(148),n.e(163),n.e(151)]).then(n.bind(null,"dRf2")).then(function(){return u.get("ui-viewer-popup-textedit-manager-factory")});case 2:return l=t.sent,t.next=5,n.e(151).then(n.bind(null,"+F0r")).then(function(){return u.get("ui-viewer-popup-annotation-manager-factory")});case 5:c=t.sent,r.popupControls=[],r.popupTextEditManagerFactory=l,r.popupAnnotationManagerFactory=c,s=function(){r.popupControls=[]},d=function(e,t){e&&r.documentView&&e.getDocument()===r.documentView.getDocument()&&r.popupControls.push({dialog:e,closeCallback:t})},r.$watch("popupTextEditManagerFactory.popupDialog",function(e,t){s(a),e&&d(e,function(){l.closeActivePopupTextEditDialog(!0)})}),r.$watch("popupAnnotationManagerFactory.popupDialog",function(e,t){s(a),e&&d(e,function(){c.closeActivePopupAnnotationDialog(!0)})}),f=e.$on("event-document-selected",function(e,t){s(a)}),g=e.$on("event-document-selection-changed",function(e,t){var n=t.documentView;//!
!isUndefinedOrNull(n)&&r.documentView}),r.$watch("documentView",function(e,t){e!==t&&s(a)}),r.$on("$destroy",function(){f(),g()});case 17:case"end":return t.stop()}},t,this)}));return function(e,n,o){return t.apply(this,arguments)}}()}}]),d.directive("progressLayer",["$rootScope","$state","ui-viewer-factory","ui-viewer-progress-factory",function(e,t,n,o){return{template:'<div class="viewer-lazy-container view-cursor" ng-class="uiViewerFactory.getDocumentMode(documentProgressStack.id)">                                    <div class="progressLayer">                                        <div name="progress-layer-item" class="info-block noSelection {{progress.status}}" ng-animate="\'animate\'" ng-repeat="progress in documentProgressStack.progressItems" ng-style="{\'top\': (40 * $index) + \'px\'}">                                            <div class="container-preloader">                                                <ul class="radius-loader">                                                    <li class="loader-line"></li>                                                </ul>                                            </div>                                                        <div class="text-block">                                                            <span ng-if="progress.isProcessing && progress.progressValue && progress.progressValue > 0">{{progress.progressValue}}%&nbsp;&nbsp;&nbsp;</span><span translate="{{progress.text}}"></span>                                                        </div>                                                        <div class="btn-block">                                                            <a name="progress-layer-button" class="btn std-btn" ng-if="progress.callbacks.showCancelBtn && !progress.callbacks.close" ng-click="progress.callbacks.cancel(progress)" translate="Cancel" name="processing-document-cancel-button"></a>                                                            <a name="progress-layer-button" class="btn std-btn" ng-if="progress.callbacks.refresh" ng-click="progress.callbacks.refresh(progress)" translate="Refresh" name="processing-document-refresh-button"></a>                                                            <a name="progress-layer-button" class="btn-close icon-font" ng-if="progress.callbacks.close" ng-click="progress.callbacks.close(progress)"></a>                                                        </div>                                                    </div>                                                </div>                                            </div>',replace:!0,scope:{documentView:"=ngDocumentView"},link:function(e){e.uiViewerFactory=n,e.$watch("documentView",function(t,n){t!==n&&(e.documentProgressStack=isUndefinedOrNull(t)?null:o.documents[t.getDocument().id])})}}}]),mainApp.directive("documentTabView",getConstructor(s,"documentTabView","directive")),mainApp.directive("documentViewLayer",getConstructor(s,"documentViewLayer","directive")),mainApp.directive("popupLayer",getConstructor(s,"popupLayer","directive")),mainApp.directive("popupControl",getConstructor(s,"popupControl","directive")),mainApp.directive("progressLayer",getConstructor(s,"progressLayer","directive"))},"2QMS":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.module=void 0;var o=c(n("Xxa5")),r=c(n("exGp")),a=c(n("/jXN")),i=c(n("7t+N"));n("isVG"),n("+FfS"),n("JRKk");var u=c(n("b8L+")),l=c(n("Zite"));function c(e){return e&&e.__esModule?e:{default:e}}var s="ui-viewer-mobile-directive-module",d=a.default.module(s,["ui-helper-module","ui-viewer-documentview-factory-module"]);t.module=d,d.directive("documentViewLayer",["$rootScope","$state",function(e,t){return{template:'<div class="canvas document-view-container"><progress-layer ng-document-view="documentView"></progress-layer><render-target ng-document-view="documentView"></render-target><popup-layer ng-document-view="documentView"></popup-layer></div>',replace:!0,scope:{documentView:"="},link:function(e){}}}]),d.directive("documentTabView",["$rootScope","$state","$timeout","ui-helper-factory",function(e,t,n,o){var r=o.getPdfViewerFactory();return{template:function(e,t){return'<div class="canvas">\n<document-view-layer document-view="documentView1"></document-view-layer> \n</div>'},replace:!0,scope:{},link:function(e){var t=function(t,o){!function(t){n(function(){var n=void 0;t&&(n=t.getDocument()),isUndefinedOrNull(n)?e.documentView1=e.documentView2=null:r.then(function(t){e.documentView1=t.getDocumentView(n.id)})})}(o)};e.$on("event-document-view-selected",t),e.$on("event-document-view-refreshed",t),e.$on("event-document-view-closed",function(e,t){}),e.$on("$destroy",function(){})}}}]),d.directive("popupControl",["$rootScope","$document","$compile","$timeout",function(e,t,n,o){return{template:'<section class="annotation-popup add-comment" ng-class="{\'text-editor\': model.type === \'popupTextBlockDlg\', \'text-view\': model.type === \'popupViewAnnotDlg\'}" ng-style="{\'display\': \'block\', \'left\': 0 + \'px\', \'top\': 0 + \'px\', \'width\': 100 + \'%\', \'height\': model.height + 100 + \'px\' }">                                    <div class="top-block noSelection">                                    </div>                                    <div class="bottom-block">                                   <div class="actions-wrap">                                    <div class="bottom-actions align-items-center" ng-if="model.onApply">                                      <a class="circle-btn no-shadow circle-btn--close">                                        <span class="font-icon font-icon-cross-thin" ng-click="closeCallback()"></span>                                      </a>                                      <a class="circle-btn no-shadow lg-size confirm noSelection" ng-show="model.onApply" ng-class="{\'disabled\': !model.isChanged}" ng-click="model.isChanged && applyText()">                                        <span class="font-icon font-icon-check-thin"></span>                                      </a>                                    </div>                                    </div>                                    </div>                                    <a class="btn-close" ng-click="closeCallback()"></a>                                    \x3c!--<a class="gripper-left"></a>                                    <a class="gripper-right"></a>--\x3e                                </section>',scope:{model:"=ngModel",closeCallback:"="},link:function(e,o,r){if(e.applyText=function(){e.model.onApply(),e.closeCallback()},o=(0,i.default)(o),e.model.headerTemplate&&o.find(".top-block").append(n(e.model.headerTemplate)(e)),e.model.bodyTemplate){var a=o.find(".bottom-block"),c=n(e.model.bodyTemplate)(e);a.append(c)}function s(){var e=o.closest(".document-view-container"),t=e.width(),n=e.height();return u.default.size(t,n)}e.model.onInit&&e.model.onInit(o),o.find(".top-block").on("touchstart",l.default.eventHandler),o.find(".top-block").on("mousedown",function(n){var o=u.default.point(),r=0,a=0,i=function(t){var n=t.pageX-o.x,i=t.pageY-o.y;e.model.setCursorPosition(u.default.point((r+n)*devicePixelRatio,(a+i)*devicePixelRatio),s()),e.$digest()};n.preventDefault&&n.preventDefault(),o=u.default.point(n.pageX,n.pageY),r=e.model.left,a=e.model.top,t.on("mousemove",i),t.on("touchmove",l.default.eventHandler),t.on("mouseup",function e(){t.off("mousemove",i),t.off("touchmove",l.default.eventHandler),t.off("mouseup",e),t.off("touchend",l.default.eventHandler)}),t.on("touchend",l.default.eventHandler)}),o.find(".gripper-left").on("touchstart",l.default.eventHandler),o.find(".gripper-left").on("mousedown",function(n){var o=u.default.point(),r=0,a=0,i=0,c=function(t){var n=o.x-t.pageX,l=t.pageY-o.y;e.model.resizeLeftBottom(u.default.size(r,a),n,l,i,s()),e.$digest()};n.preventDefault&&n.preventDefault(),o=u.default.point(n.pageX,n.pageY),r=e.model.width,a=e.model.height,i=e.model.left,t.on("mousemove",c),t.on("touchmove",l.default.eventHandler),t.on("mouseup",function e(){t.off("mousemove",c),t.off("touchmove",l.default.eventHandler),t.off("mouseup",e),t.off("touchend",l.default.eventHandler)}),t.on("touchend",l.default.eventHandler)}),o.find(".gripper-right").on("touchstart",l.default.eventHandler),o.find(".gripper-right").on("mousedown",function(n){var o=u.default.point(),r=0,a=0,i=function(t){var n=t.pageX-o.x,i=t.pageY-o.y;e.model.resize(u.default.size(r+n,a+i),s()),e.$digest()};n.preventDefault&&n.preventDefault(),o=u.default.point(n.pageX,n.pageY),r=e.model.width,a=e.model.height,t.on("mousemove",i),t.on("touchmove",l.default.eventHandler),t.on("mouseup",function e(){t.off("mousemove",i),t.off("touchmove",l.default.eventHandler),t.off("mouseup",e),t.off("touchend",l.default.eventHandler)}),t.on("touchend",l.default.eventHandler)}),o.show()}}}]),d.directive("popupLayer",["$rootScope","$document","$timeout","$compile","$injector",function(e,t,a,i,u){return{template:'<popup-control style="display:none" close-callback="popup.closeCallback" ng-model="popup.dialog" ng-repeat="popup in popupControls" custom-autofocus="{{popup.dialog.type === \'popupViewAnnotDlg\'}}" ng-lost-focus="onLostFocus(popup.dialog)" tabindex="0"></popup-control>',scope:{documentView:"=ngDocumentView"},link:function(t,i,l){var c=this;a((0,r.default)(o.default.mark(function r(){var a,l,s,d,f,g;return o.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.all([n.e(148),n.e(163),n.e(151)]).then(n.bind(null,"dRf2")).then(function(){return u.get("ui-viewer-popup-textedit-manager-factory")});case 2:return a=o.sent,o.next=5,n.e(151).then(n.bind(null,"+F0r")).then(function(){return u.get("ui-viewer-popup-annotation-manager-factory")});case 5:l=o.sent,t.popupControls=[],t.popupTextEditManagerFactory=a,t.popupAnnotationManagerFactory=l,t.onLostFocus=function(e){e&&"popupViewAnnotDlg"===e.type&&(t.popupAnnotationManagerFactory.popupDialog=null)},s=function(){t.popupControls=[]},d=function(e,n){e&&t.documentView&&e.getDocument()===t.documentView.getDocument()&&t.popupControls.push({dialog:e,closeCallback:n})},t.$watch("popupTextEditManagerFactory.popupDialog",function(e,n){s(i),e&&d(e,function(){a.closeActivePopupTextEditDialog(!0),t.documentView.resetViewHandler()})}),t.$watch("popupAnnotationManagerFactory.popupDialog",function(e,n){s(i),e&&d(e,function(){l.closeActivePopupAnnotationDialog(!0),t.documentView.resetViewHandler()})}),f=e.$on("event-document-selected",function(e,t){s(i)}),g=e.$on("event-document-selection-changed",function(e,n){var o=n.documentView;//!
!isUndefinedOrNull(o)&&t.documentView}),t.$watch("documentView",function(e,t){e!==t&&s(i)}),t.$on("$destroy",function(){f(),g()});case 18:case"end":return o.stop()}},r,c)})))}}}]),d.directive("progressLayer",["$rootScope","$state","$timeout","ui-viewer-factory","ui-viewer-progress-factory",function(e,t,n,o,r){return{template:'<div class="viewer-lazy-container view-cursor actions-panel" ng-class="uiViewerFactory.getDocumentMode(documentProgressStack.id)">                                    <div class="progressLayer">                                        <div name="progress-layer-item" class="info-block noSelection" ng-animate="\'animate\'" ng-repeat="progress in documentProgressStack.progressItems" ng-style="{\'top\': (40 * $index) + \'px\'}">                                            <div class="container-preloader">                                                <ul class="page-preloader">                                                    <li class="page-preloader__item">                                                        <div class="page-preloader__item-circle"></div>                                                    </li>                                                    <li class="page-preloader__item">                                                        <div class="page-preloader__item-circle"></div>                                                    </li>                                                    <li class="page-preloader__item">                                                        <div class="page-preloader__item-circle"></div>                                                    </li>                                                    <li class="page-preloader__item">                                                        <div class="page-preloader__item-circle"></div>                                                    </li>                                                    <li class="page-preloader__item">                                                        <div class="page-preloader__item-circle"></div>                                                    </li>                                                </ul>                                            </div>                                                        <div class="text-block">                                                            <span ng-if="progress.isProcessing && progress.progressValue && progress.progressValue > 0">{{progress.progressValue}}%&nbsp;</span><span translate="{{progress.text}}"></span>                                                        </div>                                                        <a class="status-icon-wrap">                                                          <span class="font-icon {{progress.status ? progress.status : \'success\'}}"                                                               ng-class="{\'font-icon-close\': progress.status === \'error\', \'font-icon-bullet-check\': progress.status === null}"></span>                                                        </a>                                                        <span style="display: none;" ng-init="onClose(progress.callbacks.close, progress)" ng-if="progress.callbacks.close"></span>                                                        \x3c!--<a name="progress-layer-button" class="btn-close icon-font" ng-if="progress.callbacks.close" ng-click="progress.callbacks.close(progress)"><span class="font-icon font-icon-close"></span></a>--\x3e                                                        \x3c!-- <a name="progress-layer-button" class="btn std-btn" ng-if="progress.callbacks.showCancelBtn" ng-click="progress.callbacks.cancel(progress)" name="processing-document-cancel-button"> </a>--\x3e                                                        <a name="progress-layer-button" class="btn std-btn" ng-if="progress.callbacks.refresh" ng-click="progress.callbacks.refresh(progress)" translate="Refresh" name="processing-document-refresh-button"></a>                                                    </div>                                                </div>                                            </div>',replace:!0,scope:{documentView:"=ngDocumentView"},link:function(e){e.uiViewerFactory=o,e.$watch("documentView",function(t,n){t!==n&&(e.documentProgressStack=isUndefinedOrNull(t)?null:r.documents[t.getDocument().id])}),e.onClose=function(e,t){e&&t&&n(function(){e(t)},3e3)}}}}]),mainApp.directive("documentTabView",getConstructor(s,"documentTabView","directive")),mainApp.directive("documentViewLayer",getConstructor(s,"documentViewLayer","directive")),mainApp.directive("popupLayer",getConstructor(s,"popupLayer","directive")),mainApp.directive("popupControl",getConstructor(s,"popupControl","directive")),mainApp.directive("progressLayer",getConstructor(s,"progressLayer","directive"))},"2geq":function(e,t,n){"use strict";var o=u(n("/jXN")),r=u(n("7t+N")),a=u(n("C3UN")),i=(u(n("VmtT")),u(n("b8L+")));function u(e){return e&&e.__esModule?e:{default:e}}n("PfLl"),n("AJ2H"),n("isVG");var l="ui-viewer-pagerender-service-module",c="ui-viewer-pagerender-service";o.default.module(l,["ui-helper-module","pdf-model-module","ui-viewer-progressring-module"]).factory(c,["$rootScope","$timeout","$q","$cacheFactory","ui-helper-factory","pdf-model-factory","ui-viewer-progressring-factory",function(e,t,n,o,u,l,c){var s={},d=o("ui-viewer-pagerender-service-cache"),f=guid.newGuid(),g=0,p=function(e){return r.default.param({documentId:e.documentId,index:e.index,salt:e.salt})},v=function(e){return{pageSalt:e.pageSalt,viewState:e.viewState,zoom:e.zoom}},m=function(e){return l.downloadJsonPage(e).then(function(e){var t=i.default.point(),n=e.headers?e.headers("X-PDF-Image-X"):0,o=e.headers?e.headers("X-PDF-Image-Y"):0;return n&&(t.x=parseInt(n)),o&&(t.y=parseInt(o)),{blob:e.data,position:t}}).then(function(e){var t=n.defer(),o=new window.FileReader;return o.readAsDataURL(new Blob([e.blob],{type:"image/png"})),o.onloadstart=function(){},o.onprogress=function(){},o.onabort=function(){},o.onerror=function(){},o.onloadend=function(){var n=o.result,r=new Image;r.onload=function(){t.resolve({img:r,position:e.position})},r.src=n},t.promise}).catch(function(e){})},h={},y=[],P=function(e){d.remove(e.key);var t=y.indexOf(e);t>-1&&y.splice(t,1)},B=function(e,t,n,o){for(void 0===d.get(e)&&y.splice(0,0,{key:e,docId:n,pageIndex:o}),d.put(e,void 0===t?null:t);y.length>50&&y.length>0;)P(y[y.length-1])},w=function(e){var t=y.filter(function(t){return t.key===e});if(isArray(t)&&t.length>0){var n=t[0],o=y.indexOf(n);o>0&&(y.splice(o,1),y.splice(0,0,n))}return d.get(e)},b=function(e){var t=y.filter(e);if(isArray(t))for(var n=0,o=t.length;n<o;n++){var r=t[n];r&&P(r)}},S=function(e,t,n){if(t&&e){var o=h[t.index.toString()];if(o&&(n||r.default.param(t)===r.default.param(o))){var a=p(t),i=v(t);delete h[t.index.toString()],B(a,{image:e,cacheOptions:i},t.documentId,t.index)}}},k=function(o,i,u){t(function(){var t=h[o.index.toString()];if(t&&r.default.param(t)===r.default.param(o)){var u=i.getDocument().documentView===a.default.pdfDocumentView.flipper?4:0,l=i.getVisibleRange();if(o.index<l.startPage-u||o.index>l.endPage+u)delete h[o.index.toString()];else{var c=p(o),s=v(o),d=w(c);d&&d.image&&r.default.param(s)===r.default.param(d.cacheOptions)?delete h[o.index.toString()]:n.reject().catch(function(){m(o).then(function(e){S(e.img,o);var t=i.getDocument(),n=t?t.getPage(o.index):null;n&&!1===n.isLoaded&&!n.isLoading&&(n.isLoading=!0,i.loadPageContent(n).finally(function(){n.isLoading=!1})),i&&i.invalidate(),g=0}).catch(function(){delete h[o.index.toString()],++g<=10?i&&i.invalidate():e.$broadcast("event-document-render-error",{id:guid.newGuid(),document:{id:i.getDocument().id},callback:function(){g=0,i&&i.invalidate()}})})})}}},100)};s.getCachedData=function(e,t){var n=e.getDocument(),o=n.getPage(t);if(!o)return null;var u=n.zoom,l={documentId:n.id,index:t,salt:f},c=p(l),s=null,d=u*(s=o.getPageToDevSpaceMatrix(1,0,0).mapRect(o.getPageBox())).min_x(),g=u*s.min_y();s=i.default.rect(d,g,d+u*s.getWidth(),d+u*s.getHeight()),s=i.default.adjustRect(s),l.pageSalt=o.salt,l.viewState=e.getViewState()&~a.default.PDPageRenderFlags.kPDPageRenderHighlightAnnots,l.zoom=u;var m=v(l),y=w(c);if(y&&y.image&&r.default.param(m)===r.default.param(y.cacheOptions))return{img:y.image,size:i.default.size(y.image.width,y.image.height)};var P=y&&y.image&&y.cacheOptions.pageSalt===l.pageSalt;return function(e,t,n){if(e){var o=h[e.index.toString()];o&&r.default.param(o)===r.default.param(e)||(h[e.index.toString()]=e,k(e,t))}}(l,e),P?{img:y.image,size:i.default.size(s.width,s.height)}:null};s.drawProgressRing=function(e,t){t.getWidth()<=80||t.getHeight()<=80||c.draw(e,t.getCenter(),"#0072C6")},s.draw=function(e,t,n,o,r,a){var u=s.getCachedData(t,n);if(u){var l=u.img;e.pushState(),e.clipRect(o),isUndefinedOrNull(a)||e.setImageSmoothingEnabled(a);var c=u.size,d=o.copy();if(0===r)e.fillBitmap(i.default.rect(d.left,d.top,d.left+c.width,d.top+c.height),l);else{var f=e.getCTM();e.setCTM(i.default.matrix());var p=d.getCenter();e.concatCTM(f),e.translateCTM(p.x,p.y),e.rotateCTM(i.default.degreeToRadian(r));var v=i.default.rect(0,0,c.width,c.height);v.offset(-i.default.castFloatToInt(c.width/2),-i.default.castFloatToInt(c.height/2)),e.fillBitmap(v,l),e.setCTM(f)}e.popState()}else{if(g>10)return;s.drawProgressRing(e,o),t&&t.invalidate()}};return s.updatePartOfImage=function(e,t,o,u){var l=e.getPage(t);if(!l||!o)return n.reject();var c={documentId:e.id,index:t,salt:f};c.rect=o.join(";"),c.pageSalt=l.salt,c.viewState=e.viewState&~a.default.PDPageRenderFlags.kPDPageRenderHighlightAnnots,c.zoom=e.zoom;var s=v(c),d=p(c),g=w(d);if(!g)return n.reject();if(g&&g.cacheOptions){if(g.cacheOptions.pageSalt!==u)return n.reject();g.cacheOptions.pageSalt=s.pageSalt}return m(c).then(function(e){return e.img&&g&&g.image&&g.cacheOptions?r.default.param(g.cacheOptions)!==r.default.param(s)?n.reject():function(e,t,o){var r=n.defer();if(e&&t){o||(o=i.default.point());var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var u=a.getContext("2d");u.drawImage(e,0,0),u.drawImage(t,o.x,o.y);var l=new Image;l.onload=function(){r.resolve(l)},l.src=a.toDataURL()}else r.reject();return r.promise}(g.image,e.img,e.position):n.reject()}).then(function(e){return e?(B(d,{image:e,cacheOptions:s},c.documentId,c.index),!0):n.reject()}).catch(function(){g&&g.cacheOptions&&(g.cacheOptions.pageSalt=u)})},s.removeNotVisiblePagesFromCache=function(e){var t=e.getVisibleRange(),n=e.getDocument().id,o=t.startPage-0,r=t.endPage+0;b(function(e){return e.docId===n&&(e.pageIndex<o||e.pageIndex>r)})},e.$on("event-document-selected",function(e,t){h={}}),e.$on("event-document-closed",function(e,t){if(t){var n=t.id;b(function(e){return e.docId===n})}}),u.itemLazyLoader.makeReady("ui-viewer-pagerender-service.js"),s}]),mainApp.factory(c,getConstructor(l,c,"factory"))},"7ABf":function(e,t,n){"use strict";var o=u(n("VmtT")),r=u(n("b8L+")),a=u(n("C3UN")),i=(u(n("iArn")),u(n("IZAc")));function u(e){return e&&e.__esModule?e:{default:e}}var l="ui-viewer-magnifier-factory";angular.module("ui-viewer-magnifier-module",["transformer-painter-module","ui-usersettings-module"]).factory(l,["$rootScope","transformer-painter-service","ui-usersettings-factory","authentication-service",function(e,t,n,u){var l=function(e){var n=u.defaultPreferences,l=e,c=r.default.point(100,140),s=c.copy(),d=100,f=(i.default.createInstance("#FFFFFFFF"),i.default.createInstance("#FF000000")),g=o.default.LookAndFeel.TransformerAnchorRadius+10,p=!1,v=!1,m=r.default.point();function h(){return r.default.point(c.x+d,c.y-d)}function y(){return r.default.point(c.x+d,c.y+d)}this.isEnabled=function(){return n.Measurement["Enable magnifier"]},this.draw=function(e,n){var o=n.copy();if(!isUndefinedOrNull(o)){var a=c.x,u=c.y,l=b();if(!o.isEqual(r.default.point())){var s=e.getCTM();e.setCTM(null),e.scaleArea(o.x,o.y,2*d,l,a-d,u-d),e.setCTM(s)}t.drawCircle(e,null,f,r.default.point(a,u),d),t.drawLine(e,r.default.point(a-10,u),r.default.point(a+10,u),f),t.drawLine(e,r.default.point(a,u-10),r.default.point(a,u+10),f),[{fillColor:"#3688dc",anchorRadius:g,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8,position:h(),text:""},{fillColor:"#3688dc",anchorRadius:g,shadow:!0,font:"14px icomoon",textColor:"#ffffff",textOffsetX:-7,textOffsetY:6,position:y(),text:""}].forEach(function(n){t.drawMarker(e,n.fillColor,i.default.createInstance("#FF0A0A0A"),n.position,n.anchorRadius,n)})}},this.update=function(){};var P=function(e,t,n){var o=r.default.point(e.x-t.x,e.y-t.y);return n*n>=o.x*o.x+o.y*o.y};this.handleEvent=function(e){switch(e.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(e.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft){var t=!1,n=e.pointerArgs.position;if(P(n,h(),g)?(m=n,p=!0,t=!0):P(n,y(),g)&&(v=!0,t=!0),t)return l.invalidate(),!0}break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(e.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft){var o=!1;if(p?(m=r.default.point(),s=c.copy(),p=!1,o=!0):v&&(v=!1,o=!0),o)return l.invalidate(),!0}break;case a.default.BLInputEventType.kBLInputEventPointerMoved:var i=!1,u=e.pointerArgs.position;if(p?(c=r.default.point(s.x+(u.x-m.x),s.y+(u.y-m.y)),i=!0):v&&(d=Math.min(u.x-c.x,u.y-c.y),d=Math.max(50,d),d=Math.min(400,d),i=!0),i)return l.invalidate(),!0;if(P(u,h(),g))return w(),l.setCursor(a.default.BLCursorType.kBLCursorMove),!0;if(P(u,y(),g))return w(),l.setCursor(a.default.BLCursorType.kBLCursorScale_NW),!0;!function(){if(!B)return;l.setCursor(B),B=null}();break;case a.default.BLInputEventType.kBLInputEventWheelChanged:if(P(e.wheelArgs.position,r.default.point(c.x,c.y),d)&&a.default.BLFlagIsSet(e.wheelArgs.flags,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed))return d+=e.wheelArgs.delta>0?10:-10,d=Math.max(50,d),d=Math.min(400,d),l.invalidate(),!0}if(e&&e.pointerArgs&&e.pointerArgs.position){var f=e.pointerArgs.position;if(P(f,r.default.point(c.x,c.y),d)){var S=b(),k=r.default.point(c.x+(f.x-c.x)/S,c.y+(f.y-c.y)/S);e.pointerArgs.position=k}}return!1};var B=void 0;function w(){B||(B=l.getCursor())}function b(){return n.Measurement["Magnifier zoom level"]}};return{createInstance:function(e){return new l(e)}}}]),window.mainApp.factory(l,getConstructor("ui-viewer-magnifier-module",l,"factory"))},AJ2H:function(e,t,n){"use strict";var o=a(n("/jXN")),r=a(n("b8L+"));function a(e){return e&&e.__esModule?e:{default:e}}var i="ui-viewer-progressring-factory";o.default.module("ui-viewer-progressring-module",[]).factory(i,["$rootScope","$timeout","$q",function(e,t,n){var o={},a=function(e,t,n,o){var a=n.copy();a.offset(-o/2,-o/2);var i=r.default.rect(a.x,a.y,a.x+o,a.y+o);e.fillEllipse(i,t)};return o.draw=function(e,t,n){!function(e,t,n,o,i){for(var u=[-.8,-.4,0,.4,.8],l=[-.4,-.2,0,.2,.4];i>=2.6;)i-=2.6;for(var c=0;c<5;++c){var s=u[c]+(2*i-1.3),d=(1.5*s+Math.cos(1.2*s))*(1.2/1.5)+l[c],f=r.default.point(n.x-o*Math.cos(d),n.y-o*Math.sin(d));a(e,t,f,4)}}(e,n,t,20,(new Date).getMilliseconds()/450)},o}]),mainApp.factory(i,getConstructor("ui-viewer-progressring-module",i,"factory"))},AkeB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.module=void 0;var o=i(n("Xxa5")),r=i(n("exGp"));n("ENIg");var a=i(n("/jXN"));function i(e){return e&&e.__esModule?e:{default:e}}n("FIVQ");var u="images/symbol-defs-startpage.svg",l="ui-viewer-startpage-controller",c="ui-viewer-startpage-factory",s="ui-viewer-startpage-module",d=a.default.module(s,["ui-viewer-startpage-factory-module","authentication-module"]);function f(e,t,n,a,i,l,c,s,d){var f=i.ondemand.getUmActionsFactory(),g=i.ondemand.getUiActionsFactory,p=i.ondemand.getRecentFactory,v=i.getUserSettingsFactory,m=i.ondemand.getOpenComputerFactory(),h=i.getPdfFeatureFactory(),y=function(n){n&&(e.factory.openDocument(n),t.$emit("event-home-page-comment","comments"))},P=function(n){n&&(e.factory.openDocument(n),t.$emit("event-home-page-protect","secure"))},B=function(e,t){m.then(function(n){n.upload(e,t)})},w=function(){t.$emit("event-home-open",{id:"open"})};e.templateUrl=c.viewer.startpage.uri,e.factory=l,p().then(function(t){e.recentFactory=t}),v().then(function(t){e.userSettingsFactory=t}),e.authenticationService=d,e.getHomeState=function(){return isUndefinedOrNull(e.factory.forceState)?d.isAuthenticated()||!0===a.getObject("skipIntroPdf")?"recent":"intro":e.factory.forceState},e.goToState=function(e){n.transitionTo(e,{})},e.closeIntroPdf=function(){a.putObject("skipIntroPdf",!0,{expires:generateCookiesExpireDate()})},e.gotoPage=function(e){s.action(e)},e.signUp=(0,r.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:e.sent.openSignUpPanel();case 4:case"end":return e.stop()}},e,this)})),e.joinLink=(0,r.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:e.sent.joinLink();case 4:case"end":return e.stop()}},e,this)})),e.openSupportPage=(0,r.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:e.sent.openSupportPage();case 4:case"end":return e.stop()}},e,this)})),e.productTour=(0,r.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:e.sent.productTour();case 4:case"end":return e.stop()}},e,this)})),e.openKnowledgeBasePage=(0,r.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:e.sent.openKnowledgeBasePage();case 4:case"end":return e.stop()}},e,this)})),e.links=[{id:"open",text:"Open",svg:{xlinkHref:u+"#icon-open-pdf-40x40"},fileTypes:".pdf,.docx,.doc,.rtf,.xlsx,.xls,.pptx,.ppt,.html,.htm,.txt,.png,.jpg,.jpeg,.gif,.bmp,.tif,.tiff,.cbr,.cbz,.epub,.wwf,.fdf",onClick:w,onUpload:B},{id:"home-page-convert-to-pdf",uiSref:"sitemenu-create-fromfile",text:"Convert to PDF",svg:{xlinkHref:u+"#icon-convert-to-pdf"}},{id:"home-page-create-combinefiles",uiSref:"sitemenu-create-combinefiles",text:"Merge files to PDF",svg:{xlinkHref:u+"#icon-merge"}},{id:"home-page-create-fromurl",uiSref:"sitemenu-create-fromurl",text:"URL to PDF",svg:{xlinkHref:u+"#icon-from-url"}},{id:"home-page-pdf-to-word",uiSref:"sitemenu-convert-pdf2word",text:"PDF to Word",svg:{xlinkHref:u+"#icon-pdf-to-word"}},{id:"home-page-pdf-to-excel",uiSref:"sitemenu-convert-pdf2excel",text:"PDF to Excel",svg:{xlinkHref:u+"#icon-pdf-to-excel"}},{id:"home-page-comment",text:"Add Comments",svg:{xlinkHref:u+"#icon-comment"},fileTypes:".pdf,.docx,.doc,.rtf,.xlsx,.xls,.pptx,.ppt,.html,.htm,.txt,.png,.jpg,.jpeg,.gif,.bmp,.tif,.tiff,.cbr,.cbz,.epub,.wwf,.fdf",requiredFeature:"Comment",onClick:function(){var t=(0,r.default)(o.default.mark(function t(n){var r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h;case 2:if(t.sent.isFeaturePermitted("Comment",!0)){t.next=5;break}return t.abrupt("return");case 5:(r=e.factory.getCurrentDocumentId())?y(r):w();case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onUpload:function(e){B(e,y)}},{id:"home-page-protect",text:"Protect your PDF",svg:{xlinkHref:u+"#icon-protect"},fileTypes:".pdf,.docx,.doc,.rtf,.xlsx,.xls,.pptx,.ppt,.html,.htm,.txt,.png,.jpg,.jpeg,.gif,.bmp,.tif,.tiff,.cbr,.cbz,.epub,.wwf,.fdf",requiredFeature:"Secure",onClick:function(){var t=(0,r.default)(o.default.mark(function t(n){var r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h;case 2:if(t.sent.isFeaturePermitted("Secure",!0)){t.next=5;break}return t.abrupt("return");case 5:(r=e.factory.getCurrentDocumentId())?P(r):w();case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onUpload:function(e){B(e,P)}}],e.$watch("recentFactory.recentDocuments",function(e,t){window.isArray(e)})}function g(e,t,n){var o=n.getPdfFeatureFactory(),r=null,a=null;n.itemLazyLoader.isReadyExt("ribbonbar-core-template").then(function(){r=t.get("pdf-manager-factory")}),o.then(function(e){a=e});var i={isVisible:!0,homeExpanded:!0,workWithAction:function(e){"home"==e&&"custom"==i.forceState&&(i.homeExpanded=!i.homeExpanded)},combineStateData:{title:"Merge Files with Soda PDF",description:"Use Soda PDF to merge multiple PDF files and images into a single PDF file.",button:"MERGE FILES NOW"},unSelectDocument:function(){r&&r.unSelectDocument()},getCurrentDocumentId:function(){return r?r.currentDocumentId:null},openDocument:function(e){e&&r&&r.openDocument(e)},isDisabled:function(e){if(!e)return!1;if(!e.requiredFeature)return!1;var t=!!i.getCurrentDocumentId();return t||a&&!a.isFeaturePermitted(e.requiredFeature)}};return e.$on("event-document-selected",function(e,t){r&&(i.isVisible=null==r.currentDocumentId)}),e.$on("event-ui-home-tab",function(e,t){i.isVisible=!0}),n.itemLazyLoader.makeReady(c),i}t.module=d,d.controller(l,f),f.$inject=["$scope","$rootScope","$state","$cookies","ui-helper-factory","ui-viewer-startpage-factory","ui-settings-factory","ui-sitemenu-factory","authentication-service"],d.factory(c,g),g.$inject=["$rootScope","$injector","ui-helper-factory"],mainApp.controller(l,getConstructor(s,l,"controller")),mainApp.factory(c,getConstructor(s,c,"factory"))},FsMB:function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(n("C3UN"));n("WpsX");var r="ui-viewer-layouts-3dview-factory-module",a="ui-viewer-layouts-3dview-factory";angular.module(r,["bl-flipper-view-factory-module"]).factory(a,["$rootScope","bl-flipper-view-factory",function(e,t){var n={};return n.createInstance=function(){return new function(){var e=null,n=null,r=0,a=this,i={onDrawPageView:function(t,n){e&&e.onDrawPageView&&e.onDrawPageView(t,n)},onPageRenderStarted:function(){0==r++&&e&&e.onAnimationStarted&&e.onAnimationStarted()},onPageRenderCompleted:function(){var t=r--;1===t&&e&&e.onAnimationCompleted&&e.onAnimationCompleted(),t<1&&console.log("Animation timer is dead!")},onPageRenderUpdated:function(){},onFocusPageChanged:function(t){e&&e.onFocusPageChanged&&e.onFocusPageChanged(t)},onVisibleRangeChanged:function(t){e&&e.onVisibleRangeChanged&&e.onVisibleRangeChanged(t.startPage,t.endPage)},onZoomChanged:function(t,n){e&&e.onZoomChanged&&e.onZoomChanged(t,n)}};a.initialize=function(r){e=r.layoutCallbacks,n=t.createInstance(r,i,r.setCursor),e.onScrollVisibilityChanged(o.default.BLScrollBarType.kBLScrollBarHorz,!1),e.onScrollVisibilityChanged(o.default.BLScrollBarType.kBLScrollBarVert,!1)},a.dispose=function(){n.dispose(),e=null},a.resizeView=function(e){e&&0!==e.width&&0!==e.height&&n.resizeView(e)},a.getVisibleRange=function(){var e=n.getLeftPageIndex(),t=n.getRitePageIndex();return-1===e&&(e=t),-1===t&&(t=e),{startPage:e,endPage:t}},a.isUsingVisibleRangeNavigation=function(){return!0},a.getFocusPage=function(){var e=n.getLeftPageIndex();return-1===e&&(e=n.getRitePageIndex()),e},a.goToPageRect=function(e,t,o){n.goToPage(e)},a.goToPrevPage=function(){n.goToPrevPage()},a.goToNextPage=function(){n.goToNextPage()},a.getPageAtPoint=function(e){return n.getPageAtPoint(e)},a.mapPointToPage=function(e,t){return n.mapPointToPage(e,t)},a.mapPointToDevice=function(e,t){return n.mapPointToDevice(e,t)},a.mapRectToPage=function(e,t){return n.mapRectToPage(e,t)},a.mapRectToDevice=function(e,t){return n.mapRectToDevice(e,t)},a.zoomTo=function(e,t,n){},a.setPagesRotation=function(t){n.setPagesRotation(t),e.onRotateChanged&&e.onRotateChanged(t)},a.updatePages=function(){n.updatePages()},a.draw=function(e,t){n.draw(e,t)},a.pointerPressed=function(e){n.pointerPressed(e)},a.pointerReleased=function(e){n.pointerReleased(e)},a.pointerMoved=function(e){n.pointerMoved(e)},a.pointerWheel=function(e,t){t>0?a.goToNextPage():t<0&&a.goToPrevPage()},a.setFocusPage=function(e){},a.processScrollEvent=function(e,t,r){switch(t){case o.default.BLScrollEvent.kBLScrollHome:a.goToPageRect(0,null,0);break;case o.default.BLScrollEvent.kBLScrollEnd:if(n){var i=n.getNumPages();i&&a.goToPageRect(i-1,null,0)}break;case o.default.BLScrollEvent.kBLScrollStepPlus:a.goToNextPage();break;case o.default.BLScrollEvent.kBLScrollStepMinus:a.goToPrevPage();break;case o.default.BLScrollEvent.kBLScrollPagePlus:a.goToNextPage();break;case o.default.BLScrollEvent.kBLScrollPageMinus:a.goToPrevPage();break;case o.default.BLScrollEvent.kBLScrollPos:case o.default.BLScrollEvent.kBLScrollSliderReleased:}},a.oCConfigChanged=function(){},a.getVisiblePages=function(){return[]}}},n}]),mainApp.factory(a,getConstructor(r,a,"factory"))},IVIe:function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(n("7t+N"));n("zqe9");var r="ui-viewer-inputhandlers-factory";angular.module("ui-viewer-inputhandlers-module",["ui-viewer-inputhandlers-view-module"]).factory(r,["$q","$injector","ui-viewer-inputhandlers-view-factory",function(e,t,r){var a={},i=null,u=null,l=null,c=null,s=null,d=null,f=null,g=null,p=null,v=null,m=null,h=null,y=null,P=null,B=null,w=null,b=null,S=null,k=null,x=null,L=null,T=null,C=null,R=null,D=null,E=null,A=null,M=null,V=null,I=null,F=function(r){var a=e.defer(),F=a.promise;switch(r){case"select":if(i){a.resolve(i);break}n.e(151).then(n.bind(null,"r/N8")).then(function(){angular.element(document.body).injector().invoke(["$compile","$rootScope",function(e,t){var n=(0,o.default)("#text-layer-container"),r=angular.element(n.html('<text-layer ng-mousedown="onTextLayerClick()" ng-click="onTextLayerClick()" ng-document-view="ngDocumentView"></text-layer>')).scope();if(r){e(n)(r||t);r.$digest()}}]),i=t.get("ui-viewer-inputhandlers-select-factory"),a.resolve(i)}).catch(function(e){console.log(e),a.reject(e)});break;case"edit":if(u){a.resolve(u);break}Promise.all([n.e(148),n.e(151),n.e(0),n.e(165)]).then(n.bind(null,"EE8V")).then(function(){u=t.get("ui-viewer-inputhandlers-edit-factory"),a.resolve(u)}).catch(function(e){console.log(e),a.reject(e)});break;case"AnnotEdit":if(l){a.resolve(l);break}Promise.all([n.e(148),n.e(149)]).then(n.bind(null,"zNji")).then(function(){l=t.get("bl-edit-annotedit-inputhandler-factory"),a.resolve(l)}).catch(function(e){console.log(e),a.reject(e)});break;case"AnnotOrder":if(c){a.resolve(c);break}n.e(173).then(n.bind(null,"869N")).then(function(){c=t.get("bl-order-annotorder-factory"),a.resolve(c)}).catch(function(e){console.log(e),a.reject(e)});break;case"LineAnnotEdit":if(s){a.resolve(s);break}n.e(148).then(n.bind(null,"tneH")).then(function(){s=t.get("bl-edit-lineannotedit-inputhandler-factory"),a.resolve(s)}).catch(function(e){console.log(e),a.reject(e)});break;case"StampAnnotEdit":if(d){a.resolve(d);break}Promise.all([n.e(148),n.e(149)]).then(n.bind(null,"hfco")).then(function(){d=t.get("bl-edit-stampannotedit-inputhandler-factory"),a.resolve(d)}).catch(function(e){console.log(e),a.reject(e)});break;case"WidgetEdit":if(f){a.resolve(f);break}Promise.all([n.e(148),n.e(149)]).then(n.bind(null,"AkK3")).then(function(){f=t.get("bl-edit-widgetannotedit-inputhandler-factory"),a.resolve(f)}).catch(function(e){console.log(e),a.reject(e)});break;case"PolyLine":if(g){a.resolve(g);break}n.e(148).then(n.bind(null,"4KtE")).then(function(){g=t.get("bl-edit-polylineannotedit-inputhandler-factory"),a.resolve(g)}).catch(function(e){console.log(e),a.reject(e)});break;case"Transform":if(p){a.resolve(p);break}n.e(148).then(n.bind(null,"GPFL")).then(function(){p=t.get("bl-edit-transformer-inputhandler-factory"),a.resolve(p)}).catch(function(e){console.log(e),a.reject(e)});break;case"TextEdit":if(v){a.resolve(v);break}Promise.all([n.e(148),n.e(151),n.e(175)]).then(n.bind(null,"MKPA")).then(function(){v=t.get("bl-edit-textedit-inputhandler-factory"),a.resolve(v)}).catch(function(e){console.log(e),a.reject(e)});break;case"ClipCreate":if(m){a.resolve(m);break}n.e(148).then(n.bind(null,"WaUD")).then(function(){m=t.get("bl-edit-clip-create-inputhandler-factory"),a.resolve(m)}).catch(function(e){console.log(e),a.reject(e)});break;case"ClipEdit":if(h){a.resolve(h);break}n.e(148).then(n.bind(null,"HONZ")).then(function(){h=t.get("bl-edit-clip-edit-inputhandler-factory"),a.resolve(h)}).catch(function(e){console.log(e),a.reject(e)});break;case"ImageCrop":if(y){a.resolve(y);break}n.e(148).then(n.bind(null,"YKqI")).then(function(){y=t.get("bl-edit-image-crop-inputhandler-factory"),a.resolve(y)}).catch(function(e){console.log(e),a.reject(e)});break;case"TypeText":if(P){a.resolve(P);break}Promise.all([n.e(148),n.e(151)]).then(n.bind(null,"ldO7")).then(function(){P=t.get("bl-edit-typetext-inputhandler-factory"),a.resolve(P)}).catch(function(e){console.log(e),a.reject(e)});break;case"AddTextMarkupAnnot":if(B){a.resolve(B);break}Promise.all([n.e(148),n.e(166)]).then(n.bind(null,"2FGV")).then(function(){B=t.get("bl-addtextmarkup-inputhandler-factory"),a.resolve(B)}).catch(function(e){console.log(e),a.reject(e)});break;case"AddTextAnnot":if(w){a.resolve(w);break}n.e(168).then(n.bind(null,"Qyht")).then(function(){w=t.get("bl-addtextannotation-inputhandler-factory"),a.resolve(w)}).catch(function(e){console.log(e),a.reject(e)});break;case"AddPencilAnnot":if(b){a.resolve(b);break}n.e(170).then(n.bind(null,"6Iwz")).then(function(){b=t.get("bl-addpencilannotation-inputhandler-factory"),a.resolve(b)}).catch(function(e){console.log(e),a.reject(e)});break;case"AddStampAnnot":if(S){a.resolve(S);break}n.e(169).then(n.bind(null,"v/Z9")).then(function(){S=t.get("bl-addstampannotation-inputhandler-factory"),a.resolve(S)}).catch(function(e){console.log(e),a.reject(e)});break;case"AddLinkAnnot":if(k){a.resolve(k);break}n.e(174).then(n.bind(null,"aID6")).then(function(){k=t.get("bl-addlinkannotation-inputhandler-factory"),a.resolve(k)}).catch(function(e){console.log(e),a.reject(e)});break;case"AddShapeAnnot":if(x){a.resolve(x);break}n.e(164).then(n.bind(null,"HiTN")).then(function(){x=t.get("bl-addshapennotation-inputhandler-factory"),a.resolve(x)}).catch(function(e){console.log(e),a.reject(e)});break;case"AddMeasurementAnnot":if(L){a.resolve(L);break}Promise.all([n.e(148),n.e(172)]).then(n.bind(null,"MZ8i")).then(function(){L=t.get("bl-addmeasureannotation-inputhandler-factory"),a.resolve(L)}).catch(function(e){console.log(e),a.reject(e)});break;case"AddMeasurementCalibration":if(T){a.resolve(T);break}Promise.all([n.e(148),n.e(171)]).then(n.bind(null,"axuR")).then(function(){T=t.get("bl-addmeasurecalibration-inputhandler-factory"),a.resolve(T)}).catch(function(e){console.log(e),a.reject(e)});break;case"Whiteout":if(C){a.resolve(C);break}Promise.all([n.e(148),n.e(167)]).then(n.bind(null,"jSr6")).then(function(){C=t.get("bl-whiteout-inputhandler-factory"),a.resolve(C)}).catch(function(e){console.log(e),a.reject(e)});break;case"RedactionCreate":if(R){a.resolve(R);break}n.e(148).then(n.bind(null,"UYNB")).then(function(){R=t.get("bl-redaction-create-inputhandler-factory"),a.resolve(R)}).catch(function(e){console.log(e),a.reject(e)});break;case"EditEslSignature":if(D){a.resolve(D);break}Promise.all([n.e(148),n.e(290)]).then(n.bind(null,"QMfc")).then(function(){D=t.get("esl-edit-esl-signature-inputhandler-factory"),a.resolve(D)}).catch(function(e){console.log(e),a.reject(e)});break;case"EditEslForm":if(E){a.resolve(E);break}n.e(291).then(n.bind(null,"dpIH")).then(function(){E=t.get("esl-edit-esl-form-inputhandler-factory"),a.resolve(E)}).catch(function(e){console.log(e),a.reject(e)});break;case"EslComboBox":if(A){a.resolve(A);break}n.e(390).then(n.bind(null,"evzX")).then(function(){A=t.get("esl-combobox-inputhandler-factory"),a.resolve(A)}).catch(function(e){console.log(e),a.reject(e)});break;case"ComboBox":if(A){a.resolve(A);break}n.e(387).then(n.bind(null,"1fyn")).then(function(){A=t.get("form-combobox-inputhandler-factory"),a.resolve(A)}).catch(function(e){console.log(e),a.reject(e)});break;case"ListBox":if(M){a.resolve(M);break}n.e(386).then(n.bind(null,"/fMI")).then(function(){M=t.get("form-listbox-inputhandler-factory"),a.resolve(M)}).catch(function(e){console.log(e),a.reject(e)});break;case"EslListBox":if(M){a.resolve(M);break}n.e(389).then(n.bind(null,"3cSI")).then(function(){M=t.get("esl-listbox-inputhandler-factory"),a.resolve(M)}).catch(function(e){console.log(e),a.reject(e)});break;case"EslTextField":if(V){a.resolve(V);break}n.e(388).then(n.bind(null,"4BNm")).then(function(){V=t.get("esl-textfield-inputhandler-factory"),a.resolve(V)}).catch(function(e){console.log(e),a.reject(e)});break;case"TextField":if(V){a.resolve(V);break}n.e(385).then(n.bind(null,"Eh3H")).then(function(){V=t.get("form-textfield-inputhandler-factory"),a.resolve(V)}).catch(function(e){console.log(e),a.reject(e)});break;case"widgetcreate":if(I){a.resolve(I);break}Promise.all([n.e(148),n.e(151)]).then(n.bind(null,"rJ0u")).then(function(){I=t.get("ui-viewer-inputhandlers-widgetcreate-factory"),a.resolve(I)}).catch(function(e){console.log(e),a.reject(e)})}return F};return a.createInstance=function(t,n){var a=null;switch((0,o.default)("#clienSizeElement").css({zIndex:0}),t){case"view":a=e.when(r);break;case"select":a=F("select"),(0,o.default)("#clienSizeElement").css({zIndex:1});break;case"edit":a=F("edit");break;case"AnnotEdit":a=F("AnnotEdit");break;case"AnnotOrder":a=F("AnnotOrder");break;case"LineAnnotEdit":a=F("LineAnnotEdit");break;case"StampAnnotEdit":a=F("StampAnnotEdit");break;case"WidgetEdit":a=F("WidgetEdit");break;case"PolyLine":a=F("PolyLine");break;case"Transform":a=F("Transform");break;case"TextEdit":a=F("TextEdit");break;case"ClipCreate":a=F("ClipCreate");break;case"ClipEdit":a=F("ClipEdit");break;case"ImageCrop":a=F("ImageCrop");break;case"TypeText":a=F("TypeText");break;case"AddTextMarkupAnnot":a=F("AddTextMarkupAnnot");break;case"AddTextAnnot":a=F("AddTextAnnot");break;case"AddPencilAnnot":a=F("AddPencilAnnot");break;case"AddStampAnnot":a=F("AddStampAnnot");break;case"AddLinkAnnot":a=F("AddLinkAnnot");break;case"AddShapeAnnot":a=F("AddShapeAnnot");break;case"AddMeasurementAnnot":a=F("AddMeasurementAnnot");break;case"AddMeasurementCalibration":a=F("AddMeasurementCalibration");break;case"Whiteout":a=F("Whiteout");break;case"RedactionCreate":a=F("RedactionCreate");break;case"EditEslSignature":a=F("EditEslSignature");break;case"EditEslForm":a=F("EditEslForm");break;case"EslComboBox":a=F("EslComboBox");break;case"EslListBox":a=F("EslListBox");break;case"EslTextField":a=F("EslTextField");break;case"WidgetComboBox":a=F("ComboBox");break;case"WidgetListBox":a=F("ListBox");break;case"WidgetTextField":a=F("TextField");break;default:-1!==t.indexOf("Create",this.length-"Create".length)&&(a=F("widgetcreate"))}return isNull(a)?null:a.then(function(e){return e.createInstance(t,n)})},a}]),window.mainApp.factory(r,getConstructor("ui-viewer-inputhandlers-module",r,"factory"))},JARy:function(e,t,n){"use strict";var o=l(n("HSQo")),r=l(n("C3UN")),a=l(n("IZAc")),i=l(n("3Ejq")),u=l(n("SWEh"));function l(e){return e&&e.__esModule?e:{default:e}}var c="ui-viewer-textedit-factory";angular.module("ui-viewer-textedit-module",[]).factory(c,["$rootScope","ui-usersettings-factory","pdf-manager-factory",function(e,t,n){var l=function(e){return{id:e.family,text:e.family,format:function(e){return e===r.default.FontFormat.Type1?"t1":e===r.default.FontFormat.TrueType?"tt":e===r.default.FontFormat.Type3?"t3":""}(e.format),value:e}},c=[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72],s={documents:{},getFontSizes:function(){return saveSlice(c)},getFontSizesDropDown:function(){for(var e=this.getFontSizes(),t=new Array(e.length),n=0,o=e.length;n<o;++n){var r=e[n];t[n]={id:r,text:r,value:r}}return t},setSelectedFont:function(e,t){if(e){var n=s.documents[e.id];n&&(n.selectedFont=t)}},getSelectedFont:function(e){if(!e)return null;var t=s.documents[e.id];return t?t.selectedFont:null},getRibbonBarFontCollection:function(e){if(!e)return null;var t=s.documents[e.id];return t?t.ribbonBarFontCollection:null}};s.rgbColors=u.default.rgbaColors;var d=function(u){var c=s.documents[u.id];c||(c={id:u.id},s.documents[u.id]=c),c.font=u.fonts,c.selectedFont=new function(t,u,l,c,s){var d=this,f=isUndefinedOrNull(t)?{}:t,g=isUndefinedOrNull(u)?{id:12,text:12}:u,p=!isUndefinedOrNull(l)&&l,v=!isUndefinedOrNull(c)&&c,m=isUndefinedOrNull(s)?a.default.createInstance():s,h=function(t){e.$broadcast("event-document-selected-font-changed",{document:n.currentDocument(),font:d,propertyName:t})};d.toPdfFont=function(){var e=r.default.FontStyle.Regular;return p&&v?e=r.default.FontStyle.BoldItalic:p?e=r.default.FontStyle.Bold:v&&(e=r.default.FontStyle.Italic),i.default.createInstance({F:f.value.family,f:f.value.format,C:m.toString(!0,!1),S:g.id,s:e})},(0,o.default)(this,{descriptor:{get:function(){return f},set:function(e){f!=e&&(f=e,p=v=!1,h("descriptor"))}},size:{get:function(){return g},set:function(e){g!=e&&(g=e,h("size"))}},isBold:{get:function(){return p},set:function(e){p!=e&&(p=e,h("isBold"))}},isItalic:{get:function(){return v},set:function(e){v!=e&&(v=e,h("isItalic"))}},color:{get:function(){return m},set:function(e){m.toString()!=e.toString()&&(m=e,h("color"))}}})};var d=t.settings.font.size;c.selectedFont.size={id:d,text:d},c.font&&(c.ribbonBarFontCollection=function(e){var t={document:[],system:[]};if(!e)return t;var n=s.documents[e.id];if(!n)return t;if(!n.font)return t;if(n.font.document)for(var o=0;o<n.font.document.length;o++)t.document.push(new l(n.font.document[o]));if(n.font.system)for(o=0;o<n.font.system.length;o++)t.system.push(new l(n.font.system[o]));return t}(u),c.selectedFont&&c.ribbonBarFontCollection&&c.ribbonBarFontCollection.system&&(c.selectedFont.descriptor=c.ribbonBarFontCollection.system.first(function(e){return e.value&&e.value.family===t.settings.font.family&&e.value.format===t.settings.font.format}),c.selectedFont.descriptor||(c.selectedFont.descriptor=c.ribbonBarFontCollection.system[0]))),c.isLoaded=u.isLoaded},f=n.documents||[];return function(){for(var e=0;e<f.length;e++){var t=f[e];s.documents[t.id]={id:t.id},d(t)}}(),e.$on("event-document-added",function(e,t){s.documents[t.id]={id:t.id}}),e.$on("event-document-loaded",function(e,t){d(t)}),e.$on("event-document-closed",function(e,t){delete s.documents[t.id]}),s}]),window.mainApp.factory(c,getConstructor("ui-viewer-textedit-module",c,"factory"))},JRKk:function(e,t,n){"use strict";var o=a(n("HSQo")),r=a(n("7t+N"));function a(e){return e&&e.__esModule?e:{default:e}}var i="ui-viewer-progress-factory-module",u="ui-viewer-progress-factory";angular.module(i,[]).factory(u,["$rootScope","$q","pdf-manager-factory",function(e,t,n){var a=function(t,n,r,a){(0,o.default)(this,{documentId:{value:a,writable:!0},id:{value:t,writable:!1},text:{value:n,writable:!0},status:{value:r,writable:!0},progressValue:{value:parseFloat(0).toFixed(1),writable:!0},isProcessing:{value:!1,writable:!0},callbacks:{value:{},writable:!0}}),e.$broadcast("event-document-longop-progress-new",{documentId:this.documentId,progressId:this.id})},i=function(t){var o,i=this;i.id=t.id,i.progressItems=[],i.addProgress=function(e){i.progressItems.push(e),i.progressItems.length>1&&i.progressItems.splice(0,i.progressItems.length-1)},i.isExists=function(e){return i.progressItems.first(function(t){return t.id===e})},i.addOrEditProgress=function(t,n,o,r){var u=i.isExists(t);return u?(u.text=n,u.status=o||null):(u=new a(t,n,o,i.id),i.addProgress(u)),r||e.$broadcast("event-document-error-status-remove",{document:{id:i.id}}),"error-paywall"==o&&i.removeProgress(u),u},i.addOrEditErrorProgress=function(e,t,n){return i.addOrEditProgress(e,t,n,!0)},i.removeProgress=function(t){var n=i.progressItems.indexOf(t);-1!=n&&i.progressItems.splice(n,1),e.$broadcast("event-document-error-status-remove",{document:{id:i.id}})},i.removeProgressAndCloseDocument=function(e){i.removeProgress(e),e.documentId&&n.closeDocument(e.documentId,!0)},i.clear=function(){i.progressItems=[]};i.addLoadingProgress=function(){o=guid.newGuid();var e=new a(o,"Loading pages ...","in-progress",i.id);e.isProcessing=!0,i.addProgress(e)},i.removeLoadingProgress=function(){if(o){var e=function(e){var t=r.default.map(i.progressItems,function(t){return t.id===e?t:null});return t&&t.length>0?t[0]:null}(o);e&&(e.isProcessing=!1,i.removeProgress(e)),o=void 0}}},u={documents:{}},l=function(e){var n=t.defer(),o=u.documents[e.document.id];return o?n.resolve(o):n.reject(),n.promise};u.calc=function(e){return l(e)},e.$on("event-document-added",function(e,t){!function(e){var t=u.documents[e.id];t||((t=new i(e)).addLoadingProgress(),u.documents[e.id]=t)}(t)}),e.$on("event-document-loaded",function(e,t){l({document:t}).then(function(e){e.removeLoadingProgress()})}),e.$on("event-document-closed",function(e,t){delete u.documents[t.id]});e.$on("event-document-longop-progress-update",function(e,t){t&&!0===t.wasCanceled||t.progressId&&l(t).then(function(e){!0===t.isError&&(text="Error",status="error");var n=e.isExists(t.progressId);if(n){var o=parseFloat(100*t.progress).toFixed(1);n.progressValue=o,n.callbacks||(n.callbacks={showCancelBtn:!1}),t.cancel&&(n.callbacks.showCancelBtn=!0,n.callbacks.cancel=function(){n.callbacks.showCancelBtn=!1;t.cancel&&t.cancel(!0).then(function(t){e.removeProgress(n)})})}})}),e.$on("event-document-command-progress",function(e,t){l(t).then(function(e){var n=t.text,o=!0===t.pre?"in-progress":null;!0===t.isError&&(n="Error",o=!0===t.isPaywall?"error-paywall":"error");var r=e.addOrEditProgress(t.commandId,n,o);r&&(r.isProcessing=!0===t.pre,r.callbacks=!0===t.pre?{}:{close:e.removeProgress})})}),e.$on("event-document-convert-complete",function(e,t){l(t).then(function(e){var n=e.addOrEditProgress(t.id,"Done","done");n&&(n.callbacks={close:function(t){e.removeProgress(t)}})})}),e.$on("event-document-convert-in-process",function(e,t){l(t).then(function(e){var n=e.addOrEditProgress(t.id,"Converting... "+t.progress+"%","in-progress");n&&(n.callbacks={showCancelBtn:!1},t.cancel&&(n.callbacks.showCancelBtn=!0,n.callbacks.cancel=function(o){n.callbacks.showCancelBtn=!1,e.removeProgress(o),t.cancel&&t.cancel()}))})}),e.$on("event-document-convert-cancel",function(e,t){l(t).then(function(e){var n=e.isExists(t.id);n&&n.callbacks&&n.callbacks.cancel&&n.callbacks.cancel(n)})}),e.$on("event-document-convert-error",function(e,t){l(t).then(function(e){var n=e.addOrEditErrorProgress(t.id,"Error","error");n&&(n.documentId=t.document.id,n.callbacks={close:function(t){e.removeProgress(t)}})})}),e.$on("event-document-render-error",function(e,t){l(t).then(function(e){var n=e.addOrEditProgress(t.id,"Error","error");n&&(n.documentId=t.document.id,n.callbacks={refresh:function(n){e.removeProgress(n),t.callback&&t.callback()}})})}),e.$on("event-document-create-complete",function(e,t){l(t).then(function(e){var n=e.addOrEditProgress(t.id,"Done","done");n&&(n.callbacks={close:function(t){e.removeProgress(t)}})})}),e.$on("event-document-create-in-process",function(e,t){l(t).then(function(e){e.removeLoadingProgress();var n=e.addOrEditProgress(t.id,"Creating... "+t.progress+"%","in-progress");n&&(n.documentId=t.document.id,n.callbacks={showCancelBtn:!1},t.cancel&&(n.callbacks.showCancelBtn=!0,n.callbacks.cancel=function(o){n.callbacks.showCancelBtn=!1,t.cancel&&t.cancel(),e.removeProgressAndCloseDocument(o)}))})}),e.$on("event-document-create-error",function(e,t){l(t).then(function(e){var n=e.addOrEditErrorProgress(t.id,"Error","error");n&&(n.documentId=t.document.id,n.callbacks={close:function(t){e.removeProgressAndCloseDocument(t)}})})}),e.$on("event-document-recognize-complete",function(e,t){l(t).then(function(e){var n=e.addOrEditProgress(t.id,"Document has been recognized","done");n&&(n.callbacks={close:function(t){e.removeProgress(t)}})})}),e.$on("event-document-recognize-in-process",function(e,t){l(t).then(function(e){e.removeLoadingProgress();var n=e.addOrEditProgress(t.id,t.progress+"%  Recognizing document... ","in-progress");n&&(n.documentId=t.document.id,n.callbacks={showCancelBtn:!1},t.cancel&&(n.callbacks.showCancelBtn=!0,n.callbacks.cancel=function(o){n.callbacks.showCancelBtn=!1,t.cancel&&t.cancel(),t.isNew?e.removeProgressAndCloseDocument(o):e.removeProgress(o)}))})}),e.$on("event-document-recognize-error",function(e,t){l(t).then(function(e){var n=e.addOrEditErrorProgress(t.id,t.text||"Error","error");n&&(n.documentId=t.document.id,n.callbacks={close:function(n){t.isNew?e.removeProgressAndCloseDocument(n):e.removeProgress(n)}})})});return u}]),window.mainApp.factory(u,getConstructor(i,u,"factory"))},LeRi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.module=void 0;var o=l(n("Xxa5")),r=l(n("exGp")),a=l(n("OvRC")),i=l(n("/jXN"));n("isVG"),n("+FfS"),n("HNRF");var u=l(n("C3UN"));function l(e){return e&&e.__esModule?e:{default:e}}var c=i.default.module("ui-viewer-module",["ui-activity-monitor-service-module","ui-helper-module","ui-viewer-documentview-factory-module"]);function s(e,t,n,i,l,c,s){var d=this;new l;var f={documentViews:(0,a.default)(null),currentDocumentId:null,getCurrentDocumentView:function(e,t){return f.currentDocumentId?f.getDocumentView(f.currentDocumentId,e,t):(t&&t(),null)},getDocumentView:function(e,t,n){var o=f.documentViews[e];return o?(t&&t(o),o):(n&&n(),null)},getDocumentMode:function(e){var t=f.getDocumentView(e);if(!t)return u.default.pdfDocumentMode.edit;var n=t.getActiveToolName();return n===u.default.pdfDocumentMode.view?u.default.pdfDocumentMode.view:n===u.default.pdfDocumentMode.select?u.default.pdfDocumentMode.select:u.default.pdfDocumentMode.edit}};return t.$on("event-document-added",function(e,n){f.documentViews[n.id]=s.createInstance(n),t.$broadcast("event-document-view-added",f.documentViews[n.id])}),t.$on("event-document-loaded",function(e,n){f.documentViews[n.id].isLoadedChanged(),t.$broadcast("event-document-view-loaded",f.documentViews[n.id])}),t.$on("event-document-selected",function(e,n){isUndefinedOrNull(n)?f.currentDocumentId=null:f.currentDocumentId=n.id,t.$broadcast("event-document-view-selected",f.getCurrentDocumentView())}),t.$on("event-document-pages-refreshed",function(e,t){var n=f.documentViews[t.document.id];n&&n.invalidate()}),t.$on("event-document-pages-updated",function(e,t){var n=f.documentViews[t.document.id];n&&n.updatePages(t.pagesRange,t.operation)}),t.$on("event-document-undo-redo",function(e,t){var n=f.documentViews[t.document.id];if(n){for(var o=0;o<n.inputHandlers.length;o++){var r=n.inputHandlers[o].second;r&&r.onUndoRedoChanged&&r.onUndoRedoChanged()}n.setHighlight(null),n.resetSelection(!0),n.invalidate(),deviceDetect.isPhone()&&n.setActiveTool("view")}}),t.$on("event-document-closed",function(e,n){var o=f.documentViews[n.id];o&&o.dispose(),delete f.documentViews[n.id],t.$broadcast("event-document-view-closed",o)}),f.init=(0,r.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,d)})),c.itemLazyLoader.makeReady("ui-viewer-factory"),f}t.module=c,c.factory("ui-viewer-factory",s),s.$inject=["$q","$rootScope","$timeout","$injector","ui-activity-monitor-service","ui-helper-factory","ui-viewer-documentview-factory"],mainApp.factory("ui-viewer-factory",getConstructor("ui-viewer-module","ui-viewer-factory","factory"))},O9Nw:function(e,t,n){"use strict";var o=l(n("HSQo")),r=l(n("/jXN")),a=l(n("b8L+")),i=l(n("C3UN")),u=l(n("iArn"));function l(e){return e&&e.__esModule?e:{default:e}}var c="ui-viewer-layouts-facing-continuous-factory-module",s="ui-viewer-layouts-facing-continuous-factory";r.default.module(c,[]).factory(s,["$rootScope",function(e){var t=function(){var e=[],t=a.default.point(),n=a.default.size(),r=a.default.size(),l=!1,c=i.default.pdfPageView.none,s=1,d=0,f=0,g={startPage:-1,endPage:-1},p=null,v=null,m=null,h=a.default.point(),y=!1,P=!1,B=this;B.getOffset=function(){return t.copy()};var w=function(e){isUndefinedOrNull(e)&&(e=!0),b(),S(),e&&x(),k()},b=function(){if(v){for(var e=0,t=6,o=v.pages,i=0,u=o.length;i<u;++i){var l=(m=o[i]).getPageToDevSpaceMatrix(s,d).mapRect(m.getPageBox()).floor().getSize(),c=l.width,f=l.height;m.position=a.default.point(0,0).floor(),m.pageRect=a.default.rect(m.position.x,m.position.y,m.position.x+c,m.position.y+f).floor()}var g=o.length,p=0;if(B.hasCoverPage){var m,h=t;(m=o[p++]).position.y=h,m.pageRect.offset(0,m.position.y),e=Math.max(e,m.pageRect.width+12),t+=m.pageRect.height+6}for(;p<g;){var y=o[p++],w=null;p<g&&(w=o[p++]),e=Math.max(e,2*Math.max(y?y.pageRect.width:0,w?w.pageRect.width:0)+18);var b=Math.max(y?y.pageRect.height:0,w?w.pageRect.height:0);if(P&&(w=[y,y=w][0]),y){h=t+(b-y.pageRect.height)/2;y.position.y=h,y.pageRect.offset(0,y.position.y)}if(w){h=t+(b-w.pageRect.height)/2;w.position.y=h,w.pageRect.offset(0,w.position.y)}t+=b+6}e=Math.max(e,n.width);var S=0;t<n.height&&(S=(n.height-t)/2);var k=0;if(B.hasCoverPage){var x=o[k++];c=x.pageRect.width;x.position.x=(e-c)/2,x.position.y+=S,x.pageRect.offset(x.position.x,S),x.pageRect=x.pageRect.floor(),x.virtualLeft=x.pageRect.left,x.virtualTop=x.pageRect.top}for(;k<g;){y=o[k++],w=null;if(k<g&&(w=o[k++]),P&&(w=[y,y=w][0]),y){c=y.pageRect.width;y.position.x=e/2-c-3,y.position.y+=S,y.pageRect.offset(y.position.x,S),y.pageRect=y.pageRect.floor(),y.virtualLeft=y.pageRect.left,y.virtualTop=y.pageRect.top}if(w){c=w.pageRect.width;w.position.x=e/2+3,w.position.y+=S,w.pageRect.offset(w.position.x,S),w.pageRect=w.pageRect.floor(),w.virtualLeft=w.pageRect.left,w.virtualTop=w.pageRect.top}}r=a.default.size(Math.max(n.width,e),Math.max(n.height,t)).floor()}},S=function(){if(v){if(r.width<n.width)t.x=a.default.castFloatToInt((r.width-n.width)/2);else{var o=C(i.default.BLScrollBarType.kBLScrollBarHorz),u=R(i.default.BLScrollBarType.kBLScrollBarHorz);t.x=Math.min(Math.max(t.x,o),u)}if(r.height<n.height)t.y=(r.height-n.height)/2;else{o=C(i.default.BLScrollBarType.kBLScrollBarVert),u=R(i.default.BLScrollBarType.kBLScrollBarVert);t.y=a.default.castFloatToInt(Math.min(Math.max(t.y,o),u))}for(var l=a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height),c=v.pages,s={startPage:Number.MAX_VALUE,endPage:0},d=0,f=c.length;d<f;++d){var m=c[d];l.hasIntersection(m.pageRect)&&(s.startPage=Math.min(s.startPage,d),s.endPage=Math.max(s.endPage,d))}e=saveSlice(c,s.startPage,s.endPage+1),s.startPage==g.startPage&&s.endPage==g.endPage||(g=s,p&&p.onVisibleRangeChanged(g.startPage,g.endPage)),p&&p.onDrawUpdated()}},k=function(){if(p){if(r.width>n.width){p.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarHorz,!0),p.onScrollRangeChanged(i.default.BLScrollBarType.kBLScrollBarHorz,r.width),p.onScrollSizeChanged(i.default.BLScrollBarType.kBLScrollBarHorz,n.width),p.onScrollPositionChanged(i.default.BLScrollBarType.kBLScrollBarHorz,t.x);var e={pos:t.x,size:n.width,range:r.width};p.onScrollChanged(i.default.BLScrollBarType.kBLScrollBarHorz,e)}else c===i.default.BLZoomType.kBLZoomFitHeight?(p.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarHorz,!0),p.onScrollRangeChanged(i.default.BLScrollBarType.kBLScrollBarHorz,1),p.onScrollSizeChanged(i.default.BLScrollBarType.kBLScrollBarHorz,1),p.onScrollPositionChanged(i.default.BLScrollBarType.kBLScrollBarHorz,0)):p.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarHorz,!1);if(r.height>n.height){p.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarVert,!0),p.onScrollRangeChanged(i.default.BLScrollBarType.kBLScrollBarVert,r.height),p.onScrollSizeChanged(i.default.BLScrollBarType.kBLScrollBarVert,n.height),p.onScrollPositionChanged(i.default.BLScrollBarType.kBLScrollBarVert,t.y);e={pos:t.y,size:n.height,range:r.height};p.onScrollChanged(i.default.BLScrollBarType.kBLScrollBarVert,e)}else c===i.default.BLZoomType.kBLZoomFitWidth?(p.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarVert,!0),p.onScrollRangeChanged(i.default.BLScrollBarType.kBLScrollBarVert,1),p.onScrollSizeChanged(i.default.BLScrollBarType.kBLScrollBarVert,1),p.onScrollPositionChanged(i.default.BLScrollBarType.kBLScrollBarVert,0)):p.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarVert,!1)}},x=function(){for(var o=a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height),r=-1,i=0,u=e,l=0,c=e.length;l<c;++l){var s=u[l].pageRect;if(o.hasIntersection(s)){var d=a.default.intersectRects(o,s).getArea();d>i&&(i=d,r=u[l].index)}}return r>=0&&r!=f&&(f=r,p&&p.onFocusPageChanged(f)),r},L=function(e,n){if(s!=e){var o=f,r=B.mapPointToPage(o,n);s=u.default.floorZoom(Math.min(Math.max(e,.1),2)),b();var a=B.mapPointToDevice(o,r);t.offset(a.x,a.y),t.offset(-n.x,-n.y),S(),x(),k()}p&&p.onZoomChanged(c,s)},T=function(e){if(c!==i.default.pdfPageView.none){var t=0,o=0;if(v){for(var r=0,a=v.getPagesCount();r<a;r++){var u=v.getPage(r).getDevSpacePageBox(1,d).getSize(),l=2*u.width;t<l&&(t=l);var s=u.height;o<s&&(o=s)}var f=(n.width-18-4)/t,g=(n.height-12-4)/o;switch(c){case i.default.pdfPageView.fitPage:L(Math.min(f,g),e);break;case i.default.pdfPageView.fitWidth:L(f,e);break;case i.default.pdfPageView.kBLZoomFitHeight:L(g,e)}}}};B.initialize=function(e,t){p=e.layoutCallbacks,v=e.document,m=e,c=v.pageView,s=1,d=0,f=v.pageSelectedIndex;var n=v.pageDirection;P=n===i.default.PDPageDirection.kPDPageDirectionR2L,t&&!0===t.hasCoverPage&&(l=t.hasCoverPage),w()},B.zoomTo=function(e,t,o){var r=o?o.copy():a.default.rect(0,0,n.width,n.height).getCenter();return c!=e&&(c=e,T(r)),c===i.default.pdfPageView.none&&(t<.1&&(t=.1),t>2&&(t=2),L(t,r)),!0},B.setPagesRotation=function(e){if(d!=e){var t=f;d=e,w(!1),B.goToPageRect(t),p&&p.onRotateChanged&&p.onRotateChanged(d)}};B.updatePages=function(){b()},B.mapPointToPage=function(e,n){var o=a.default.point(0,0),r=v.getPage(e);if(isUndefinedOrNull(r))return o;var i=r.getPageToDevSpaceMatrix(s,d).invert();if(!isUndefinedOrNull(i)){var u=a.default.point(n.x+t.x-r.position.x,n.y+t.y-r.position.y);o=i.mapPoint(u)}return o},B.mapRectToPage=function(e,n){var o=a.default.rect(),r=v.getPage(e);if(isUndefinedOrNull(r))return o;var i=r.getPageToDevSpaceMatrix(s,d).invert();if(!isUndefinedOrNull(i)){var u=a.default.rect(n.left+t.x-r.position.x,n.top+t.y-r.position.y,n.right+t.x-r.position.x,n.bottom+t.y-r.position.y);o=i.mapRect(u)}return o},B.mapPointToDevice=function(e,n){var o=a.default.point(),r=v.getPage(e);return r?((o=r.getPageToDevSpaceMatrix(s,d).mapPoint(n).floor()).offset(-t.x,-t.y),o.offset(r.position.x,r.position.y),o):o},B.mapRectToDevice=function(e,n){var o=a.default.rect(),r=v.getPage(e);return isUndefinedOrNull(r)?o:((o=r.getPageToDevSpaceMatrix(s,d).mapRect(n).round()).offset(-t.x,-t.y),o.offset(r.position.x,r.position.y),o)},B.goToPageRect=function(e,o,r){var u,l=v.pages;if(e>=l.length||e<0)return null;(isUndefinedOrNull(r)&&(r=0),f=e,p&&p.onFocusPageChanged(e),o)?(u=B.mapRectToDevice(e,o)).offset(t.x,t.y):(u=l[e].pageRect.copy()).inflate(6,6);if(r&i.default.BLRectFlags.kBLRectDontScrollVisible&&a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height).containsRect(u))return null;var c=u.left+(u.getWidth()-n.width)/2,s=u.top+(u.getHeight()-n.height)/2;return u.getWidth()>n.width&&(c=r&i.default.BLRectFlags.kBLRectPreferRightOverLeft?u.right-n.width:u.left),u.getHeight()>n.height&&(s=r&i.default.BLRectFlags.kBLRectPreferBottomOverTop?u.bottom-n.height:u.top),t.x=a.default.castFloatToInt(c),t.y=a.default.castFloatToInt(s),S(),k(),a.default.point(c,s)},B.goToNextPage=function(){var e=f;if(e<v.getPagesCount()-1){++e;var o=v.getPage(e).pageRect,r=a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height);r.left<=o.left&&r.right>=o.right&&e<v.getPagesCount()-1&&++e,B.goToPageRect(e,null,0)}},B.goToPrevPage=function(){var e=f;if(e>0){--e;var o=v.getPage(e).pageRect,r=a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height);r.left<=o.left&&r.right>=o.right&&e>0&&--e,B.goToPageRect(e,null,0)}},B.getPageAtPoint=function(e){for(var n=-1,o=v.pages,r=a.default.point(t.x+e.x,t.y+e.y),i=0,u=o.length;i<u;++i)if(o[i].pageRect.containsPoint(r)){n=i;break}return n},B.getVisibleRange=function(){return{startPage:g.startPage,endPage:g.endPage}},B.getFocusPage=function(){return f},B.setFocusPage=function(e){e<v.getPagesCount()&&e>=0&&(f=e,p&&p.onFocusPageChanged(e))};var C=function(e){return 0},R=function(e){return e==i.default.BLScrollBarType.kBLScrollBarHorz?r.width<n.width?0:r.width-n.width:r.height<n.height?0:r.height-n.height},D=function(e){return e===i.default.BLScrollBarType.kBLScrollBarHorz?t.x:t.y},E=function(e){return e===i.default.BLScrollBarType.kBLScrollBarHorz?n.width:n.height},A=function(e,n){var o=C(e),r=R(e),a=Math.min(Math.max(n,o),r);return a!==D(e)&&(function(e,n){e===i.default.BLScrollBarType.kBLScrollBarHorz?t.x=n:t.y=n}(e,a),S(),x(),p&&p.onScrollPositionChanged(e,a),!0)};B.processScrollEvent=function(e,t,n){switch(t){case i.default.BLScrollEvent.kBLScrollHome:A(e,C(e));break;case i.default.BLScrollEvent.kBLScrollEnd:A(e,R(e));break;case i.default.BLScrollEvent.kBLScrollStepPlus:A(e,D(e)+a.default.castFloatToInt(E(e)/10));break;case i.default.BLScrollEvent.kBLScrollStepMinus:A(e,D(e)-a.default.castFloatToInt(E(e)/10));break;case i.default.BLScrollEvent.kBLScrollPagePlus:A(e,D(e)+E(e));break;case i.default.BLScrollEvent.kBLScrollPageMinus:A(e,D(e)-E(e));break;case i.default.BLScrollEvent.kBLScrollPos:case i.default.BLScrollEvent.kBLScrollSliderReleased:A(e,n)}},B.pointerPressed=function(e){y||(h=a.default.point(t.x+e.x,t.y+e.y),y=!0)},B.pointerReleased=function(e){y=!1},B.pointerMoved=function(e){y&&(A(i.default.BLScrollBarType.kBLScrollBarHorz,h.x-e.x),A(i.default.BLScrollBarType.kBLScrollBarVert,h.y-e.y),h=a.default.point(t.x+e.x,t.y+e.y))},B.pointerWheel=function(e,t){for(var n=a.default.castFloatToInt(t);n>0;)B.processScrollEvent(i.default.BLScrollBarType.kBLScrollBarVert,i.default.BLScrollEvent.kBLScrollStepMinus,0),--n;for(;n<0;)B.processScrollEvent(i.default.BLScrollBarType.kBLScrollBarVert,i.default.BLScrollEvent.kBLScrollStepPlus,0),++n},B.draw=function(e,n,o){if(m){var r=t.copy();e.translateCTM(-r.x,-r.y),m.tempDraw(e,o),e.translateCTM(r.x,r.y)}},B.resizeView=function(e){if(e&&!e.isEmpty()&&!e.isEqual(n)&&(n=e,v)){var o=v.getPage(f).position.copy();o.offset(-t.x,-t.y),T(o),w()}},B.oCConfigChanged=function(){w()},B.getVisiblePages=function(){return e},B.isUsingVisibleRangeNavigation=function(){return!0},B.dispose=function(){p=null,v=null,m=null},(0,o.default)(this,{hasCoverPage:{get:function(){return l},set:function(e){l=e,w()}}})},n={createInstance:function(){return new t}};return n}]),mainApp.factory(s,getConstructor(c,s,"factory"))},Rf9i:function(e,t,n){"use strict";var o=l(n("Xxa5")),r=l(n("exGp")),a=l(n("/jXN")),i=l(n("C3UN")),u=l(n("b8L+"));function l(e){return e&&e.__esModule?e:{default:e}}n("XT+9");var c=i.default.BLPermReqObj,s=i.default.BLPermReqOp,d="ui-viewer-actions-factory";a.default.module("ui-viewer-actions-module",[]).factory(d,["$rootScope","$timeout","$q","$injector","ui-helper-factory","pdf-manager-factory","pdf-feature-factory",function(e,t,a,l,d,f,g){var p=d.ondemand.getInAppTrackingFactory,v=d.getDialogFactory(),m=d.ondemand.getOcrDialogFactory,h={},y=d.ondemand.getInsertModuleService,P={},B=function(e){return g.isFeaturePermitted(e,!0)},w=function(){var e=(0,r.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p();case 4:r=e.sent,(a=r.getInstance())&&a.onFeatureUsing(n,"ui-viewer-actions-factory",t.getDocument().id);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),b=function(e,t,n,o){return f.documentRequestPermissions(e,t,n,o)},S=function(e,t){if(!e||!t)return null;var n=e.getPageAtPoint(t);if(n<0)return null;var o=e.getDocument();return o?o.getPage(n):null};function k(e,t,n){if(B(t)&&(w(e,t),e)){var o={keyArgs:{}};o.type=i.default.BLInputEventType.kBLInputEventCommand,o.commandArgs={},o.commandArgs.command=n,e.dispatchEvent(o,null)}}P.switchPopupAnnotationVisibility=function(e,t){if(e&&t){var n=t.copy(),o=e.getPageAtPoint(n);if(!(o<0)){var r=e.getDocument();if(r){var a=r.getPage(o);if(a){var u=a.annotations;if(isUndefinedOrNull(u))return null;for(var l=e.getViewState(),c=e.mapPointToPage(o,n),s=0;s<u.length;s++){var d=u[s];if(d.isVisible){var f=d.rect;if(!isUndefinedOrNull(f)&&f.containsPoint(c)){if((l&i.default.PDPageRenderFlags.kPDPageRenderSkipMarkupAnnots)==i.default.PDPageRenderFlags.kPDPageRenderSkipMarkupAnnots&&d.isMarkup())continue;e.showPopupAnnotation(d,n,o);break}}}}}}}},P.switchPopupTextEditVisibility=function(e,t){if(e&&t){var n=t.copy();if(!(e.getPageAtPoint(n)<0)){var o=e.getSelection();if(o&&"TextEdit"==o.getType()){var r=o.getSelectionData();if(!b(e.getDocument(),i.default.BLPermReqObj.kBLPermReqObjContent,i.default.BLPermReqOp.kBLPermReqOpModify,!0))return;if(r){var a=r.getTextBlockTransformer();e.showPopupTextEdit(a,n)}}}}},P.switchPopupTextEditVisibilityExt=function(e){if(e){var t=e.getSelection();if(t&&"TextEdit"==t.getType()){var n=t.getSelectionData();if(!b(e.getDocument(),i.default.BLPermReqObj.kBLPermReqObjContent,i.default.BLPermReqOp.kBLPermReqOpModify,!0))return;if(n){var o=n.getTextBlockTransformer(),r=u.default.point();e.showPopupTextEdit(o,r)}}}},P.onCommandApply=function(e,t){return k(e,t,"Apply")},P.onCommandDelete=function(e,t){if(B(t)&&(w(e,t),e)){var n={keyArgs:{}};n.type=i.default.BLInputEventType.kBLInputEventKeyReleased,n.keyArgs.keycode=i.default.kBLKey.kBLKey_DELETE,n.keyArgs.flags=0,e.dispatchEvent(n,null)}},P.onCommandDeleteTB=function(e,t){return k(e,t,"Delete")},P.onCommandCopy=function(e,t){return k(e,t,"Copy")},P.onCommandPaste=function(e,t){return k(e,t,"Paste")},P.onCommandCut=function(e,t){return k(e,t,"Cut")},P.insertImage=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Edit.Image.InsertImage")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Edit.Image.InsertImage"),e.next=5,v;case 5:e.sent.dialog.insertImage.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.movePages=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Page.Pages.MovePages")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Page.Pages.MovePages"),e.next=5,v;case 5:e.sent.dialog.move.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.insertPages=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Page.Pages.InsertPages")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Page.Pages.InsertPages"),e.next=5,v;case 5:e.sent.dialog.insertPages.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.extractPages=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Page.Pages.ExtractPages")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Page.Pages.ExtractPages"),e.next=5,v;case 5:e.sent.dialog.extract.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.deletePages=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Page.Pages.DeletePages")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Page.Pages.DeletePages"),e.next=5,v;case 5:e.sent.dialog.delete.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.rotatePages=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Page.Pages.RotatePages")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Page.Pages.RotatePages"),e.next=5,v;case 5:e.sent.dialog.rotate.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.backgroundPages=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Page.Pages.Background")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Page.Pages.Background"),e.next=5,v;case 5:e.sent.dialog.background.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.pageNumberInsert=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Edit.Pages.InsertPagesNumbers")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Edit.Pages.InsertPagesNumbers"),e.next=5,v;case 5:e.sent.dialog.insertPageNumber.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.pageSizeSetup=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Page.Pages.PageSize")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Page.Pages.PageSize"),e.next=5,v;case 5:e.sent.dialog.pageSizeSetup.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.pageMarginSetup=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B("Page.Pages.PageMargin")){e.next=2;break}return e.abrupt("return");case 2:return w(t,"Page.Pages.PageMargin"),e.next=5,v;case 5:e.sent.dialog.pageMarginSetup.show();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.ocrPageRange=function(){var e=(0,r.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B(["OCR.PageRange","OCR-TESS.PageRange"])){e.next=2;break}return e.abrupt("return");case 2:return w(t,"OCR.PageRange"),e.next=5,m();case 5:e.sent.pageRange(S(t,n));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),P.addText=function(e,t){if(B("Edit.Text.TypeText")&&(w(e,"Edit.Text.TypeText"),e&&t&&b(e.getDocument(),c.kBLPermReqObjContent,s.kBLPermReqOpModify,!0)&&!(e.getPageAtPoint(t)<0)))try{(function(){var e="bl-editmodule-service";if(!h[e]||!1===h[e])return n("QM0e")("./"+e+".js").then(function(){var t=l.get(""+e);if(t)return h[e]=!0,t}).catch(function(t){throw new Error("couldn't load: "+e+", "+t)});var t=l.get(""+e);return t?a.when(t):a.reject("couldn't load: "+e)})().then(function(n){n.setupTextEditTool(e,t)})}catch(e){}},P.addNotes=function(e,t){if(B("Comment.AddStickerNote")&&(w(e,"Comment.AddStickerNote"),e&&t&&b(e.getDocument(),c.kBLPermReqObjAnnot,s.kBLPermReqOpModify,!0))){var n=e.getPageAtPoint(t);if(!(n<0)){var o={pageIndex:n,position:e.mapPointToPage(n,t)};f.documentCreateTextAnnotation(e.getDocument(),o)}}};var x=function(e,t,n){if(B("Edit.Links.InsertLinks")&&(w(e,"Edit.Links.InsertLinks"),e&&t&&b(e.getDocument(),c.kBLPermReqObjAnnot,s.kBLPermReqOpModify,!0))){var o=e.getPageAtPoint(t);if(!(o<0)){var r=e.getDocument();if(r){if(isUndefinedOrNull(n)){var a=u.default.size(25,15),i=e.mapPointToPage(o,t);n=u.default.rect(i.x,i.y,i.x+a.width,i.y+a.height)}var l={count:r.getPagesCount(),actions:[]};v.then(function(e){e.dialog.addAction.show({model:l,callbacks:[{text:"Ok",callback:function(){var e={pageIndex:o,rectangle:n,actions:l.actions};f.documentCreateLinkAnnotation(r,e)}},{text:"Close"}]})})}}}};return P.addLink=function(e,t){x(e,t)},P.createLink=function(e,t){if(e&&t){var n=e.getSelection();if(n){var o=null,r=n.getType();if("TextEdit"===r){var a=n.getSelectionData();a&&(o=a.getTextBlockTransformer())}else"Transform"===r&&(o=n.getSelectionData());if(!isUndefinedOrNull(o)){var i=o.getBounds();if(i){var u=i.getBound();x(e,t,u)}}}}},P.setClip=function(e,t){B("Edit.Image.EditClip")&&(w(e,"Edit.Image.EditClip"),e&&t&&b(e.getDocument(),c.kBLPermReqObjContent,s.kBLPermReqOpModify,!0)&&y().then(function(t){t.toggleClipEditMode(e)}))},P.extractImage=function(e,t){if(B("Page")&&(w(e,"Page"),e&&t&&b(e.getDocument(),c.kBLPermReqObjContent,s.kBLPermReqOpExtract))){var n=e.getSelection();if(n){var o=n.getSelectionData();if(o){var r=e.getDocument(),a=o.getElement(),i=o.getPageIndex();f.extractImage(r,a,i)}}}},P.autoOcr=function(e,t){if(B(["OCR.Auto","OCR-TESS.Auto"])&&(w(e,"OCR.Auto"),e&&t&&b(e.getDocument(),c.kBLPermReqObjContent,s.kBLPermReqOpExtract,!0))){var n=e.getSelection();if(n){var o=n.getSelectionData();if(o){var r=o.getElement(),a=o.getPageIndex(),i=e.getDocument();f.recognizeElement(i,r,a).then(function(){e.setHighlight(null),e.resetSelection(!0),e.invalidate()})}}}},P}]),window.mainApp.factory(d,getConstructor("ui-viewer-actions-module",d,"factory"))},VeeU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.module=void 0;var o=u(n("fZjL")),r=u(n("Xxa5")),a=u(n("exGp")),i=u(n("HSQo"));function u(e){return e&&e.__esModule?e:{default:e}}n("9P1b");var l="ui-viewer-tabs-module",c=angular.module(l,[]);function s(e,t,n,o,r){t.factory=o,t.selectDocument=function(e){o.selectDocumentFromController(e,t.outParams.tabsHideFrom)},t.closeDocument=function(e){e&&o.closeDocument(e)},e.$on("event-document-closed",function(e,t){null!==t&&t.isLoaded&&o.applyState(t)})}function d(e,t,n,u,l,c){var s=this,d=c.getAuthFactory(),f=c.getPdfManagerFactory(),g=function(e){var t=this,n=[];function o(e){n=isArray(e)?saveSlice(e):[]}o(e),(0,i.default)(t,{first:{get:function(){return n[0]}},second:{get:function(){return n[1]}},name:{get:function(){return isUndefinedOrNull(n[1])?p.documents[n[0]].name:u.instant("Side By Side View")}},isLoaded:{get:function(){return p.documents[n[0]].isLoaded&&(!!isUndefinedOrNull(n[1])||p.documents[n[1]].isLoaded)}},isError:{get:function(){return p.documents[n[0]].faulted||!isUndefinedOrNull(n[1])&&p.documents[n[1]].faulted}},isActive:{get:function(){return n[0]===p.currentDocumentId||!isUndefinedOrNull(n[1])&&n[1]===p.currentDocumentId}}}),t.getLength=function(){return n.length},t.hasDocumentId=function(e){return!!~n.indexOf(e)},t.removeDocumentId=function(e){var t=n.indexOf(e);~t&&n.splice(t,1)},t.valueOf=function(){return t.first},t.setIds=o},p={documents:{},documentTabs:[],currentDocumentId:null};function v(e){var t=p.documentTabs.filter(function(t){return t.hasDocumentId(e)})[0];if(t){if(t.removeDocumentId(e),0===t.getLength()){var n=p.documentTabs.indexOf(t);if(~n&&p.documentTabs.splice(n,1),p.documentTabs.length>0){var o=Math.min(Math.max(n-1,0),p.documentTabs.length-1);return p.documentTabs[o].first}return null}return t.first}return null}p.getDocumentTab=function(e){return p.documentTabs.filter(function(t){return t.hasDocumentId(e)})[0]},p.getDocumentTabIndex=function(e){var t=p.getDocumentTab(e);return t?p.documentTabs.indexOf(t):-1},p.combineDocsIntoTab=function(e,t){if(isArray(e)){for(var n=[],o=-1,r=0;r<e.length;r++){var a=e[r],i=p.getDocumentTab(a);if(i&&i.getLength()>0){var u=p.documentTabs.indexOf(i);~u&&(o=o<0?u:Math.min(u,o))}n.push(a)}if(n.forEach(v),n.length>0){var l=new g(n);!isUndefinedOrNull(t)&&t>=0&&(o=t),o=Math.max(o,0),o=Math.min(o,p.documentTabs.length),p.documentTabs.splice(o,0,l)}}},p.splitDocsFromTab=function(e){for(var t=0,n=p.getDocumentTab(e);n&&n.getLength()>1;)v(e),t=Math.max(p.documentTabs.indexOf(n),0),t=Math.min(p.documentTabs.length,t),p.documentTabs.splice(t,0,new g([e]))};(function(){var e=(0,a.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:e.sent.manualCloseAll();case 4:case"end":return e.stop()}},e,s)}))})(),function(){var e=(0,a.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:e.sent.manualCloseAll(t);case 4:case"end":return e.stop()}},e,this)}))}(),function(){var e=(0,a.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:e.sent.saveFile(t.id);case 4:case"end":return e.stop()}},e,this)}))}();return p.selectDocument=function(e){var t={id:e.id,options:e};t.options.action="select",n.transitionTo("document",t)},p.selectDocumentFromController=function(e,t){if(e){var n=p.documentTabs.filter(function(t){return t.hasDocumentId(e.id)})[0];if(n){var o=p.documentTabs.indexOf(n);t&&o>=t-1&&p.documentTabs.moveUp(n,o)}p.selectDocument(e)}},p.unSelectDocument=(0,a.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:e.sent.unSelectDocument();case 4:case"end":return e.stop()}},e,this)})),p.closeDocument=function(){var e=(0,a.default)(r.default.mark(function e(t){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:return n=e.sent,e.abrupt("return",n.closeDocument(t.id));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p.closeTab=function(){var e=(0,a.default)(r.default.mark(function e(n){var o,a,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isUndefinedOrNull(n)){e.next=2;break}return e.abrupt("return",t.when());case 2:return o=n.first,a=n.second,e.next=6,f;case 6:return i=e.sent,e.abrupt("return",i.closeDocument(o).then(function(){return a?i.closeDocument(a):t.when()}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p.applyState=function(){var e=(0,a.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:e.sent.currentDocumentId===t.id&&n.go("home");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p.systemTab=function(e){!1===n.is(e)&&n.transitionTo(e)},(0,i.default)(p,{currentDocument:{get:function(){return p.documents[p.currentDocumentId]}},documentsCount:{get:function(){return(0,o.default)(p.documents).length}}}),e.$on("event-document-added",function(e,t){p.documents[t.id]={id:t.id,name:isUndefinedOrNull(t.name)?"":t.name,isLoaded:!1},p.documentTabs.push(new g([t.id]))}),e.$on("event-document-loaded",function(e,t){p.currentDocumentId=t.id,p.documents[t.id]={id:t.id,name:t.name,createDate:t.createDate,modifyDate:t.modifyDate,author:t.author,creator:t.creator,producer:t.producer,title:t.title,size:t.size,isLoaded:t.isLoaded,isModified:t.isModified,isEsl:!1}}),e.$on("event-document-selected",function(e,t){p.currentDocumentId=isNull(t)?null:t.id}),e.$on("event-document-modified-changed",function(e,t){var n=p.documents[t.id];n&&(n.isModified=t.isModified)}),e.$on("event-document-closed",function(){var e=(0,a.default)(r.default.mark(function e(t,o){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(delete p.documents[o.id],a=v(o.id),!isUndefinedOrNull(a)){e.next=9;break}return e.next=5,d;case 5:!1===e.sent.isInProgress.authentication&&n.go("home"),e.next=10;break;case 9:p.currentDocumentId!==a&&p.selectDocument({id:a});case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()),e.$on("event-document-rename",function(e,t){p.documents[args.document.id]&&(p.documents[t.id].name=t.name)}),e.$on("event-document-create-error",function(e,t){p.documents[t.document.id]&&(p.documents[t.document.id].faulted=!0)}),e.$on("event-document-convert-error",function(e,t){p.documents[t.document.id]&&(p.documents[t.document.id].faulted=!0)}),e.$on("event-document-recognize-error",function(e,t){p.documents[t.document.id]&&(p.documents[t.document.id].faulted=!0)}),e.$on("event-document-error-status-remove",function(e,t){p.documents[t.document.id]&&(p.documents[t.document.id].faulted=!1)}),c.itemLazyLoader.makeReady("ui-viewer-tabs-factory.js"),p}t.module=c,c.controller("ui-viewer-tabs-controller",s),s.$inject=["$rootScope","$scope","$timeout","ui-viewer-tabs-factory","ui-settings-factory"],c.factory("ui-viewer-tabs-factory",d),d.$inject=["$rootScope","$q","$state","$translate","$timeout","ui-helper-factory"],c.directive("documentsDropDownList",["$timeout",function(e){return{restrict:"E",scope:{factory:"=",qaName:"@"},template:function(e,t){return['<div ng-class="{\'active\' : isExpanded}" ng-lost-focus="isExpanded=false" tabindex="10000">','<div class="file-name-block__string" ng-click="open()">','<span class="name">{{factory.currentDocument.name}}<span class="font-icon font-icon-arrow-down" ng-if="factory.documentsCount > 1"></span></span>',"</div>",'<ul ng-show="isExpanded" class="file-name-block__dropdown">','<li ng-repeat="document in factory.documents track by $index" ng-if="factory.currentDocument.id !== document.id" ng-click="select(document)">','<span class="name">{{ document.name }}</span>',"</li>","</ul>","</div>"].join("")},replace:!0,link:function(e,t,n){e.isExpanded=!1,e.open=function(){e.factory.documentsCount<=1?e.isExpanded=!1:e.isExpanded=!e.isExpanded},e.select=function(t){t&&(e.factory.selectDocument(t),e.isExpanded=!1)}}}}]),window.mainApp.controller("ui-viewer-tabs-controller",getConstructor(l,"ui-viewer-tabs-controller","controller")),window.mainApp.factory("ui-viewer-tabs-factory",getConstructor(l,"ui-viewer-tabs-factory","factory")),window.mainApp.directive("documentsDropDownList",getConstructor(l,"documentsDropDownList","directive"))},Vr1d:function(e,t,n){"use strict";var o=a(n("/jXN")),r=a(n("C3UN"));function a(e){return e&&e.__esModule?e:{default:e}}n("xaRj"),n("s/D7"),n("luhd"),n("O9Nw"),n("FsMB");var i="ui-viewer-layouts-factory-module",u="ui-viewer-layouts-factory",l=r.default.pdfDocumentView;o.default.module(i,["ui-viewer-layouts-single-factory-module","ui-viewer-layouts-continuous-factory-module","ui-viewer-layouts-facing-factory-module","ui-viewer-layouts-facing-continuous-factory-module","ui-viewer-layouts-3dview-factory-module"]).factory(u,["$rootScope","ui-viewer-layouts-single-factory","ui-viewer-layouts-continuous-factory","ui-viewer-layouts-facing-factory","ui-viewer-layouts-facing-continuous-factory","ui-viewer-layouts-3dview-factory",function(e,t,n,o,r,a){var i={createInstance:function(e){var i=null;switch(e){case l.single:i=t;break;case l.continuous:i=n;break;case l.facing:case l.facingConverPage:i=o;break;case l.facingContinuous:case l.facingContinuousConverPage:i=r;break;case l.flipper:i=a;break;default:return console.error("DocumentView createInstance is unknown: "+e),null}return i.createInstance()}};return i}]),mainApp.factory(u,getConstructor(i,u,"factory"))},Zite:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n("b8L+")),r=a(n("C3UN"));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e,t,n){isUndefinedOrNull(n)&&(n=0);var o=document.createEvent("MouseEvent");return o.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,n,null),o},u=null,l=o.default.point(),c=!1,s=!1,d=null,f=function(e){if(e){var t=g(e),n=o.default.point(l.x-t.x,l.y-t.y);if(Math.abs(n.x)<5&&Math.abs(n.y)<5)return}u&&(clearTimeout(u),u=null,l=o.default.point())},g=function(e){var t=e.pageX,n=e.pageY;return o.default.point(t,n)},p=!1,v={eventHandler:function(e){var t=(e.changedTouches||e.originalEvent.changedTouches)[0],n="";angular.element(document.body).injector().get("ui-viewer-factory");switch(e.type){case"touchstart":d={x:t.pageX,y:t.pageY},!1,p=!1,s=!1,!0===c?(s=!0,!1):!0,n="mousedown",function(e){f(),l=g(e);u=setTimeout(function(){if(!0!==p){c=!0;var t=angular.element(document.body),n=t.injector().get("ui-viewer-factory");setTimeout(function(){n.getCurrentDocumentView(function(n){var o=n.getActiveToolName(),a=t.injector().get("$q").defer(),u=a.promise;switch(o){case r.default.pdfDocumentMode.view:n.setActiveTool("edit").then(function(){a.resolve("edit")});break;case r.default.pdfDocumentMode.edit:n.getSelection()?a.resolve("already-edit"):a.resolve("edit")}u.then(function(t){if(t)switch(t){case"edit":setTimeout(function(){var t=i("mousedown",e,0);e.target.dispatchEvent(t),setTimeout(function(){var t=i("mouseup",e,0);e.target.dispatchEvent(t),setTimeout(function(){n.getSelection()||n.setActiveTool("view").then(function(){})},150)},150)},50)}}).catch(function(e){console.log(e)})})},0)}},450)}(t);var o=new Date;o.getTime();break;case"touchmove":var a={x:t.pageX,y:t.pageY},v=Math.abs(a.x-d.x),m=Math.abs(a.y-d.y),h=Math.max(v,m);if(!0===c&&!1===s)return;n="mousemove",e.preventDefault();(o=new Date).getTime();h>5&&(p=!0,n="mousemove",f(t));break;case"touchend":c=!1,n="mouseup",f();break;default:return}if("mousedown"===n){var y=i("mousemove",t);t.target.dispatchEvent(y)}var P=i(n,t);setTimeout(function(){t.target.dispatchEvent(P)},0),e.preventDefault()},mouseButtonsState:function(e){var t=0;if(!e)return t;if(e.shiftKey&&(t|=r.default.BLInputEventFlags.kBLInputEventFlagShiftPressed),e.ctrlKey&&(t|=r.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed),!(isIE||isEdge||isFirefox)||"mousemove"!==e.type&&"mouseenter"!==e.type&&"mouseleave"!==e.type){if(e.which)switch(e.which){case 1:t|=r.default.BLInputEventFlags.kBLInputEventFlagLButtonPressed;break;case 2:t|=r.default.BLInputEventFlags.kBLInputEventFlagMButtonPressed;break;case 3:t|=r.default.BLInputEventFlags.kBLInputEventFlagRButtonPressed}}else 1===e.buttons?t|=r.default.BLInputEventFlags.kBLInputEventFlagLButtonPressed:2===e.buttons?t|=r.default.BLInputEventFlags.kBLInputEventFlagRButtonPressed:4===e.buttons&&(t|=r.default.BLInputEventFlags.kBLInputEventFlagMButtonPressed);return t}};t.default=v},aA0F:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.module=void 0;var o=l(n("fZjL")),r=l(n("Xxa5")),a=l(n("exGp")),i=l(n("HSQo")),u=l(n("/jXN"));function l(e){return e&&e.__esModule?e:{default:e}}n("9P1b");var c="ui-viewer-tabs-module",s=u.default.module(c,["ui-settings-factory-module"]);function d(e,t,n,o,r){t.templateUrl=r.viewer.tabs.uri,t.factory=o,t.opentabs={},t.outParams={tabsHideFrom:0},e.$on("event-ui-system-tab",function(e,n){if(n&&n.tab)switch(n.tab){case"home":t.opentabs.auth=!1,t.homeTab();break;case"esign":t.esignTab()}}),e.$on("event-document-closed",function(e,t){null!==t&&t.isLoaded&&o.applyState(t)}),t.homeTab=function(){o.unSelectDocument(),e.$broadcast("event-ui-home-tab",{})},t.esignTab=function(){o.unSelectDocument(),e.$broadcast("event-ui-esign-tab",{})},t.documentName=function(){return new Date},t.selectDocument=function(e){o.selectDocumentFromController(e,t.outParams.tabsHideFrom)},t.closeDocument=function(e){e&&o.closeDocument(e)},t.showContextMenu=o.showContextMenu}function f(e,t,n,u,l,c,s){var d=this,f=c.getAuthFactory(),g=c.ondemand.getContextMenuFactory,p=!1,v=function(e){var t=this,n=[];function o(e){n=isArray(e)?saveSlice(e):[]}o(e),(0,i.default)(t,{first:{get:function(){return n[0]}},second:{get:function(){return n[1]}},name:{get:function(){return isUndefinedOrNull(n[1])?m.documents[n[0]].name:u.instant("Side By Side View")}},isLoaded:{get:function(){return m.documents[n[0]].isLoaded&&(!!isUndefinedOrNull(n[1])||m.documents[n[1]].isLoaded)}},isError:{get:function(){return m.documents[n[0]].faulted||!isUndefinedOrNull(n[1])&&m.documents[n[1]].faulted}},isActive:{get:function(){return n[0]===m.currentDocumentId||!isUndefinedOrNull(n[1])&&n[1]===m.currentDocumentId}},isEsl:{get:function(){return m.documents[n[0]].isEsl||!isUndefinedOrNull(n[1])&&m.documents[n[1]].isEsl}},isModified:{get:function(){return m.documents[n[0]].isModified||!isUndefinedOrNull(n[1])&&m.documents[n[1]].isModified}}}),t.getLength=function(){return n.length},t.hasDocumentId=function(e){return!!~n.indexOf(e)},t.removeDocumentId=function(e){var t=n.indexOf(e);~t&&n.splice(t,1)},t.valueOf=function(){return t.first},t.setIds=o},m={documents:{},documentTabs:[],currentDocumentId:null};function h(e){var t=m.documentTabs.filter(function(t){return t.hasDocumentId(e)})[0];if(t){if(t.removeDocumentId(e),0===t.getLength()){var n=m.documentTabs.indexOf(t);if(~n&&m.documentTabs.splice(n,1),m.documentTabs.length>0){var o=Math.min(Math.max(n-1,0),m.documentTabs.length-1);return m.documentTabs[o].first}return null}return t.first}return null}m.getDocumentTab=function(e){return m.documentTabs.filter(function(t){return t.hasDocumentId(e)})[0]},m.getDocumentTabIndex=function(e){var t=m.getDocumentTab(e);return t?m.documentTabs.indexOf(t):-1},m.combineDocsIntoTab=function(e,t){if(isArray(e)){for(var n=[],o=-1,r=0;r<e.length;r++){var a=e[r],i=m.getDocumentTab(a);if(i&&i.getLength()>0){var u=m.documentTabs.indexOf(i);~u&&(o=o<0?u:Math.min(u,o))}n.push(a)}if(n.forEach(h),n.length>0){var l=new v(n);!isUndefinedOrNull(t)&&t>=0&&(o=t),o=Math.max(o,0),o=Math.min(o,m.documentTabs.length),m.documentTabs.splice(o,0,l)}}},m.splitDocsFromTab=function(e){for(var t=0,n=m.getDocumentTab(e);n&&n.getLength()>1;)h(e),t=Math.max(m.documentTabs.indexOf(n),0),t=Math.min(m.documentTabs.length,t),m.documentTabs.splice(t,0,new v([e]))};var y=[],P=function(e){m.closeDocument(e)},B=function(e){s.manualCloseAll()},w=function(e){s.manualCloseAll(e)},b=function(e){s.saveFile(e.id)},S=function(e){n.transitionTo("sitemenu-properties")},k=function(){return 1===m.documentsCount()},x=function(e){return!e.isModified};return function(){var e=(0,a.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,y.push(t.createMenuItem("Close","close",P)),y.push(t.createMenuItem("Close All Documents","close-all-document",B,"",null,k)),y.push(t.createMenuItem("Close All But This","close-all-but-this",w,"",null,k)),y.push(t.createMenuItem("","divider")),y.push(t.createMenuItem("Save","save",b,"",null,x)),y.push(t.createMenuItem("","divider",null,"",null,x)),y.push(t.createMenuItem("Properties","properties",S)),t.register("doc-tabs",y),p=!0;case 12:case"end":return e.stop()}},e,d)}));return function(){return e.apply(this,arguments)}}()(),m.documentsCount=function(){return(0,o.default)(m.documents).length},m.selectDocument=function(e){var t={id:e.id,options:e};t.options.action="select",n.transitionTo("document",t)},m.selectDocumentFromController=function(e,t){if(e){var n=m.documentTabs.filter(function(t){return t.hasDocumentId(e.id)})[0];if(n){var o=m.documentTabs.indexOf(n);t&&o>=t-1&&m.documentTabs.moveUp(n,o)}m.selectDocument(e)}},m.unSelectDocument=function(){s.unSelectDocument()},m.closeDocument=function(e){return s.closeDocument(e.id)},m.closeTab=function(e){if(isUndefinedOrNull(e))return t.when();var n=e.first,o=e.second;return s.closeDocument(n).then(function(){return o?s.closeDocument(o):t.when()})},m.applyState=function(e){s.currentDocumentId===e.id&&n.go("home")},m.systemTab=function(e){!1===n.is(e)&&n.transitionTo(e)},m.showContextMenu=function(){var e=(0,a.default)(r.default.mark(function e(t,n){var o,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!t.second){e.next=2;break}return e.abrupt("return");case 2:if(o=m.documents[t.first]){e.next=5;break}return e.abrupt("return");case 5:return m.selectDocument(o),e.next=8,g();case 8:a=e.sent,!0===p&&a.show("doc-tabs",{x:n.clientX,y:n.clientY},o);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),e.$on("event-document-added",function(e,t){m.documents[t.id]={id:t.id,name:isUndefinedOrNull(t.name)?"":t.name,isLoaded:!1},m.documentTabs.push(new v([t.id]))}),e.$on("event-document-loaded",function(e,t){m.documents[t.id]={id:t.id,name:t.name,createDate:t.createDate,modifyDate:t.modifyDate,author:t.author,creator:t.creator,producer:t.producer,title:t.title,size:t.size,isLoaded:t.isLoaded,isModified:t.isModified,isEsl:!1}}),e.$on("event-document-selected",function(e,t){m.currentDocumentId=isNull(t)?null:t.id}),e.$on("event-document-modified-changed",function(e,t){m.documents[t.id].isModified=t.isModified}),e.$on("event-document-esl-changed",function(e,t){var n=m.documents[t.id];n&&(n.isEsl=t.isEsl)}),e.$on("event-document-closed",function(){var e=(0,a.default)(r.default.mark(function e(t,o){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(delete m.documents[o.id],a=h(o.id),!isUndefinedOrNull(a)){e.next=9;break}return e.next=5,f;case 5:!1===e.sent.isInProgress.authentication&&n.go("home",{r:"home"}),e.next=10;break;case 9:m.currentDocumentId!==a&&m.selectDocument({id:a});case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()),e.$on("event-document-rename",function(e,t){m.documents[t.id]&&(m.documents[t.id].name=t.name)}),e.$on("event-document-create-error",function(e,t){m.documents[t.document.id]&&(m.documents[t.document.id].faulted=!0)}),e.$on("event-document-convert-error",function(e,t){m.documents[t.document.id]&&(m.documents[t.document.id].faulted=!0)}),e.$on("event-document-recognize-error",function(e,t){m.documents[t.document.id]&&(m.documents[t.document.id].faulted=!0)}),e.$on("event-document-error-status-remove",function(e,t){m.documents[t.document.id]&&(m.documents[t.document.id].faulted=!1)}),c.itemLazyLoader.makeReady("ui-viewer-tabs-factory.js"),m}t.module=s,s.controller("ui-viewer-tabs-controller",d),d.$inject=["$rootScope","$scope","$timeout","ui-viewer-tabs-factory","ui-settings-factory"],s.factory("ui-viewer-tabs-factory",f),f.$inject=["$rootScope","$q","$state","$translate","$timeout","ui-helper-factory","pdf-manager-factory"],s.directive("responseTabControl",["$window","$rootScope","$timeout","ui-viewer-tabs-factory",function(e,t,n,o){return{restrict:"A",scope:{dynamicItemsCount:"=",params:"=params"},link:function(o,r,a){var i=r[0];function l(e){$(".top-menu-links ul.dropdown-menu li.collapsable-item").appendTo("ul.tabs");var t=$(".top-menu-links ul.tabs li.item"),n=$(".top-menu-links ul.tabs").width()-(e?$(".top-menu-links ul.tabs li.dd_menu").outerWidth(!0):0),r=0,a=0;if(t.each(function(e){var t=$(this).is(":visible")?$(this).outerWidth(!0):0;if(r+t>n)return!1;a=e,r+=t}),a<t.length-1){if(!e)return l(!0);o.params.tabsHideFrom=a,t.eq(a).nextAll("li.collapsable-item").appendTo(".top-menu-links ul.dropdown-menu"),$(".top-menu-links ul.tabs li.dd_menu").show(),0===$(".top-menu-links ul.dropdown-menu").width()&&$(".top-menu-links ul.tabs li.dd_menu").hide()}else o.params.tabsHideFrom=0,$(".top-menu-links ul.tabs li.dd_menu").hide()}$(".top-menu-links").on("click",".dropdown-toggle",function(){$(".dropdown-menu").toggle()}),$(".top-menu-links").on("blur",".dropdown-toggle",function(){n(function(){$(".dropdown-menu").hide()},200)}),u.default.element(e).bind("resize",function(){l()}),o.$watch(function(){return(!!r.length&&i.clientWidth)+"_"+o.dynamicItemsCount},function(e,t){l()}),t.$on("event-ui-resized",function(e,t){n(function(){l()},100)})}}}]).directive("ngRightClick",["$parse",function(e){return function(t,n,o){var r=e(o.ngRightClick);n.bind("contextmenu",function(e){e.preventDefault(),r(t,{$event:e})})}}]),mainApp.controller("ui-viewer-tabs-controller",getConstructor(c,"ui-viewer-tabs-controller","controller")),mainApp.directive("responseTabControl",getConstructor(c,"responseTabControl","directive")),mainApp.directive("ngRightClick",getConstructor(c,"ngRightClick","directive")),mainApp.factory("ui-viewer-tabs-factory",getConstructor(c,"ui-viewer-tabs-factory","factory"))},"h6+/":function(e,t,n){"use strict";var o=u(n("VmtT")),r=u(n("b8L+")),a=u(n("C3UN")),i=u(n("iArn"));function u(e){return e&&e.__esModule?e:{default:e}}var l="ui-viewer-rulers-factory";angular.module("ui-viewer-rulers-module",["transformer-painter-module","ui-usersettings-module"]).factory(l,["$rootScope","transformer-painter-service","ui-usersettings-factory",function(e,t,n){var u=function(e,t,n,o,a,i){if(o-n>30)for(var u=(o-n)/5,c=n,s=c+u,d=0;d<4;++d){var f=r.default.point(a,Math.floor(s)+.5),g=r.default.point(a-i,Math.floor(s)+.5);e.strokeLine(f,g,t,0),r.default.floatGt(i,1)&&(l(e,t,c,s,a,i/2,!0),l(e,t,s,s+u,a,i/2,!0)),c=s,s+=u}},l=function e(t,n,o,a,i,l,c){if(a-o>20){var s=o+(a-o)/2,d=r.default.point(i,Math.floor(s)+.5),f=r.default.point(i-l,Math.floor(s)+.5);t.strokeLine(d,f,n,0),r.default.floatGt(l,1)&&(c?(u(t,n,o,s,i,l/2),u(t,n,s,a,i,l/2)):(e(t,n,o,s,i,l/2,!1),e(t,n,s,a,i,l/2,!1)))}},c=function(e,t,n,o,a,i){if(o-n>30)for(var u=(o-n)/5,l=n,c=l+u,d=0;d<4;++d){var f=r.default.point(Math.floor(c)+.5,a),g=r.default.point(Math.floor(c)+.5,a-i);e.strokeLine(f,g,t,0),r.default.floatGt(i,1)&&(s(e,t,l,c,a,i/2,!0),s(e,t,c,c+u,a,i/2,!0)),l=c,c+=u}},s=function e(t,n,o,a,i,u,l){if(a-o>20){var s=o+(a-o)/2,d=r.default.point(Math.floor(s)+.5,i),f=r.default.point(Math.floor(s)+.5,i-u);t.strokeLine(d,f,n,0),r.default.floatGt(u,1)&&(l?(c(t,n,o,s,i,u/2),c(t,n,s,a,i,u/2)):(e(t,n,o,s,i,u/2,!1),e(t,n,s,a,i,u/2,!1)))}},d=function(e){var u=this,c=e,d=0,f=!1,g=0,p=[],v=0,m=!1,h=0,y=[],P=o.default.LookAndFeel.SnapGuidesColor,B=o.default.LookAndFeel.SnapActiveGuideColor;u.drawGridOnPage=function(e,u){var l=o.default.LookAndFeel.GridLinesColor,s=c.document.getPage(u).getPageBox();s.sort();var d,f=n.settings.layout.units,g=i.default.convert.to(f,a.default.Units.point,1),p=i.default.convert.to(f,a.default.Units.point,1);a.default.Units.inch;d=c.getZoom();for(var v=c.getViewSize(),m=r.default.rect(0,0,v.width,v.height),h=g;h*d>16;)h/=2;for(;h*d<8;)h*=2;for(var y=p;y*d>16;)y/=2;for(;y*d<8;)y*=2;if(o.default.LookAndFeel.GridShowOnlyDots);else{for(var P=c.mapRectToPage(u,m),B=s.left;B<=s.right;)B>=P.left&&B<=P.right&&t.drawLine(e,r.default.point(B,s.top),r.default.point(B,s.bottom),l),B+=h;for(var w=s.bottom;w>=s.top;)w>=P.top&&w<=P.bottom&&t.drawLine(e,r.default.point(s.left,w),r.default.point(s.right,w),l),w-=y}},u.draw=function(e){var o=c.getDocument(),u=c.getViewSize(),w=c.getZoom();!function(e,t,o,u,l){var c=t;e.fillRect(c,"#FFFFFF");var d=r.default.point(c.left,c.bottom-.5),f=r.default.point(c.right,c.bottom-.5);e.strokeLine(d,f,"#000000",0);var g=u;e.pushState(),e.clipRect(c);var p=n.settings.layout.units,v=96*i.default.convert.to(p,a.default.Units.inch,1),m=p!=a.default.Units.inch,h=v*o,y=g,P=1,B=h;if(m)for(;B<30&&!((B=(P*=5)*h)>=30);)B=(P*=2)*h;else for(;B<30;)B=(P*=2)*h;for(var w=c.bottom-2.5,b=0,S=y;S>c.left;)S-=B,b-=P;for(;S<=c.right;){var k=r.default.point(Math.floor(S)+.5,w),x=r.default.point(Math.floor(S)+.5,w-4);e.strokeLine(k,x,"#000000",0),e.pushState(),e.translateCTM(Math.floor(S),Math.floor(w-4-1));var L=b;e.fillText("9px Arial",L,"#000000"),e.popState(),s(e,"#000000",S,S+B,w,2,m),S+=B,b+=P}e.popState()}(e,r.default.rect(15,0,u.width,15),w,d),function(e,t,o,u,c){var s=t;e.fillRect(s,"#FFFFFF");var d=r.default.point(s.right-.5,s.top),f=r.default.point(s.right-.5,s.bottom);e.strokeLine(d,f,"#000000",0);var g=u;e.pushState(),e.clipRect(s);var p=n.settings.layout.units,v=96*i.default.convert.to(p,a.default.Units.inch,1),m=p!=a.default.Units.inch,h=v*o,y=g,P=1,B=h;if(m)for(;B<30&&!((B=(P*=5)*h)>=30);)B=(P*=2)*h;else for(;B<30;)B=(P*=2)*h;for(var w=s.right-2.5,b=0,S=y;S>s.left;)S-=B,b-=P;for(;S<=s.bottom;){var k=r.default.point(w,Math.floor(S)+.5),x=r.default.point(w-4,Math.floor(S)+.5);e.strokeLine(k,x,"#000000",0),e.pushState(),e.translateCTM(Math.floor(w-4-1),Math.floor(S)),e.rotateCTM(-Math.PI/2);var L=b;e.fillText("9px Arial",L,"#000000"),e.popState(),l(e,"#000000",S,S+B,w,2,m),S+=B,b+=P}e.popState()}(e,r.default.rect(0,15,15,u.height),w,v);var b=c.getFocusPage(),S=o.getPage(b),k=S.getPageBox(),x=c.getPagesRotation(),L=S.getPageToDevSpaceMatrix(1,x),T=L.invert();k=L.mapRect(k);for(var C=0,R=p.length;C<R;++C){var D=T.mapPoint(r.default.point(0,k.getHeight()-p[C])),E=c.mapPointToDevice(b,D),A=r.default.point(0,E.y),M=r.default.point(u.width,E.y);t.drawLine(e,A,M,P)}for(var V=0,I=y.length;V<I;++V){var F=T.mapPoint(r.default.point(y[V],0)),O=c.mapPointToDevice(b,F),z=r.default.point(O.x,0),H=r.default.point(O.x,u.height);t.drawLine(e,z,H,P)}if(f){var $=T.mapPoint(r.default.point(0,k.getHeight()-g)),N=c.mapPointToDevice(b,$),U=r.default.point(0,N.y),_=r.default.point(u.width,N.y);t.drawLine(e,U,_,B)}if(m){var j=T.mapPoint(r.default.point(h,0)),W=c.mapPointToDevice(b,j),Z=r.default.point(W.x,0),q=r.default.point(W.x,u.height);t.drawLine(e,Z,q,B)}},u.update=function(){var e=c.getDocument(),t=c.getFocusPage(),n=e.getPage(t).getPageBox(),o=c.mapRectToDevice(t,n);d=o.left,o.getWidth(),v=o.top,o.getHeight()},u.handleEvent=function(e){var t=c.getViewSize(),n=r.default.rect(0,0,t.width,15),o=r.default.rect(0,0,15,t.height),i=c.getDocument(),l=c.getFocusPage();switch(e.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(e.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft){var s=!1,d=e.pointerArgs.position,v=c.mapPointToPage(l,d),P=i.getPage(l),B=P.getPageBox(),w=c.getPagesRotation(),b=P.getPageToDevSpaceMatrix(1,w),S=b.invert();B=b.mapRect(B),v=b.mapPoint(v),n.containsPoint(d)&&(g=B.getHeight()-v.y,f=!0,s=!0),o.containsPoint(d)&&(h=v.x,m=!0,s=!0);for(var k=0,x=p.length;k<x;++k){var L=S.mapPoint(r.default.point(0,B.getHeight()-p[k])),T=c.mapPointToDevice(l,L);if(d.y+3>T.y&&d.y-3<=T.y){var C=p.indexOf(p[k]);C>-1&&p.splice(C,1),g=B.getHeight()-v.y,f=!0,s=!0;break}}for(var R=0,D=y.length;R<D;++R){var E=S.mapPoint(r.default.point(y[R],0)),A=c.mapPointToDevice(l,E);if(d.x+3>A.x&&d.x-3<=A.x){var M=y.indexOf(y[R]);M>-1&&y.splice(M,1),h=v.x,m=!0,s=!0;break}}if(s&&c.resetSelection(!0),u.updateCursor(l,d)&&(s=!0),s)return c.invalidate(),!0}break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(e.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft){var V=!1,I=e.pointerArgs.position,F=c.mapPointToPage(l,I),O=i.getPage(l),z=O.getPageBox(),H=c.getPagesRotation(),$=O.getPageToDevSpaceMatrix(1,H);$.invert();if(z=$.mapRect(z),F=$.mapPoint(F),f&&(g=z.getHeight()-F.y,15<I.y&&t.height>I.y&&p.push(g),f=!1,V=!0),m&&(h=F.x,15<I.x&&t.width>I.x&&y.push(h),m=!1,V=!0),u.updateCursor(l,I)&&(V=!0),V)return c.invalidate(),!0}break;case a.default.BLInputEventType.kBLInputEventPointerMoved:var N=!1,U=e.pointerArgs.position,_=c.mapPointToPage(l,U),j=i.getPage(l),W=j.getPageBox(),Z=c.getPagesRotation(),q=j.getPageToDevSpaceMatrix(1,Z);q.invert();if(W=q.mapRect(W),_=q.mapPoint(_),f&&(g=W.getHeight()-_.y,N=!0),m&&(h=_.x,N=!0),0==(e.pointerArgs.flags&a.default.BLInputEventFlags.kBLInputEventFlagLButtonPressed)&&u.updateCursor(l,U)&&(N=!0),N)return c.invalidate(),!0}return!1},u.updateCursor=function(e,t){if(f&&m)return c.setCursor(a.default.BLCursorType.kBLCursorMove),!0;if(f)return c.setCursor(a.default.BLCursorType.kBLCursorScale_N),!0;if(m)return c.setCursor(a.default.BLCursorType.kBLCursorScale_E),!0;var n=!1,o=!1,i=c.getDocument().getPage(e),u=i.getPageBox(),l=c.getPagesRotation(),s=i.getPageToDevSpaceMatrix(1,l),d=s.invert();u=s.mapRect(u);var g=c.getViewSize();if(r.default.rect(0,0,g.width,15).containsPoint(t))n=!0;else for(var v=0,h=p.length;v<h;++v){var P=d.mapPoint(r.default.point(0,u.getHeight()-p[v])),B=c.mapPointToDevice(e,P);if(t.y+3>B.y&&t.y-3<=B.y){n=!0;break}}if(r.default.rect(0,0,15,g.height).containsPoint(t))o=!0;else for(var w=0,b=y.length;w<b;++w){var S=d.mapPoint(r.default.point(y[w],0)),k=c.mapPointToDevice(e,S);if(t.x+3>k.x&&t.x-3<=k.x){o=!0;break}}return n&&o?(c.setCursor(a.default.BLCursorType.kBLCursorMove),!0):n?(c.setCursor(a.default.BLCursorType.kBLCursorScale_N),!0):!!o&&(c.setCursor(a.default.BLCursorType.kBLCursorScale_E),!0)},u.getHorzGuides=function(){return p},u.getVertGuides=function(){return y}};return{createInstance:function(e){return new d(e)},RULER_WIDTH:15}}]),window.mainApp.factory(l,getConstructor("ui-viewer-rulers-module",l,"factory"))},luhd:function(e,t,n){"use strict";var o=l(n("HSQo")),r=l(n("/jXN")),a=l(n("b8L+")),i=l(n("C3UN")),u=l(n("iArn"));function l(e){return e&&e.__esModule?e:{default:e}}var c="ui-viewer-layouts-facing-factory-module",s="ui-viewer-layouts-facing-factory";r.default.module(c,[]).factory(s,["$rootScope",function(e){var t=function(){var e=[],t=a.default.point(),n=a.default.size(),r=(a.default.size(),!1),l=i.default.pdfPageView.none,c=1,s=0,d=0,f={startPage:-1,endPage:-1},g=null,p=null,v=null,m=a.default.point(),h=!1,y=!1,P=this;P.getOffset=function(){return t.copy()};var B=function(){w(),b(),k(),S()},w=function(){var e=p.pages,t=e.length,o=function(e){return e?e.getPageToDevSpaceMatrix(c,s).mapRect(e.getPageBox()).floor().getSize():a.default.size()},r=0;if(P.hasCoverPage){var i=e[r++],u=o(i),l=u.width,d=u.height,f=((v=Math.max(2*l+18,n.width))-l)/2,g=((m=Math.max(d+12,n.height))-d)/2;i.position=a.default.point(f,g).floor(),i.pageRect=a.default.rect(f,g,f+l,g+d).floor(),i.virtualLeft=i.pageRect.left,i.virtualTop=i.pageRect.top}for(;r<t;){var v=0,m=0,h=e[r++],B=null;r<t&&(B=e[r++]),y&&(B=[h,h=B][0]);var w=h?o(h):a.default.size(),b=B?o(B):a.default.size();if(v=Math.max(n.width,2*Math.max(w.width,b.width)+18),m=Math.max(n.height,Math.max(w.height,b.height)+12),h){f=v/2-(l=w.width)-3,g=(m-(d=w.height))/2;h.position=a.default.point(f,g).floor(),h.pageRect=a.default.rect(f,g,f+l,g+d).floor(),h.virtualLeft=h.pageRect.left,h.virtualTop=h.pageRect.top}if(B){l=b.width,f=v/2+3,g=(m-(d=b.height))/2;B.position=a.default.point(f,g).floor(),B.pageRect=a.default.rect(f,g,f+l,g+d).floor(),B.virtualLeft=B.pageRect.left,B.virtualTop=B.pageRect.top}}},b=function(){if(p){var n=D(i.default.BLScrollBarType.kBLScrollBarHorz),o=E(i.default.BLScrollBarType.kBLScrollBarHorz);t.x=Math.min(Math.max(t.x,n),o);var r=D(i.default.BLScrollBarType.kBLScrollBarVert),a=E(i.default.BLScrollBarType.kBLScrollBarVert);t.y=Math.min(Math.max(t.y,r),a);var u=0,l=0,c=p.pages;P.hasCoverPage?d%2!=0?(u=d,l=Math.min(u+1,c.length-1)):(l=d,u=Math.max(l-1,0)):d%2==0?(u=d,l=Math.min(u+1,c.length-1)):(l=d,u=Math.max(l-1,0)),e=saveSlice(c,u,l+1),u==f.startPage&&l==f.endPage||(f={startPage:u,endPage:l}).startPage!=Number.MAX_VALUE&&g&&g.onVisibleRangeChanged(f.startPage,f.endPage),g&&g.onDrawUpdated()}},S=function(){if(g){var e=R();if(e.width>n.width){g.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarHorz,!0),g.onScrollRangeChanged(i.default.BLScrollBarType.kBLScrollBarHorz,e.width),g.onScrollSizeChanged(i.default.BLScrollBarType.kBLScrollBarHorz,n.width),g.onScrollPositionChanged(i.default.BLScrollBarType.kBLScrollBarHorz,t.x);var o={pos:t.x,size:n.width,range:e.width};g.onScrollChanged(i.default.BLScrollBarType.kBLScrollBarHorz,o)}else l===i.default.BLZoomType.kBLZoomFitHeight?(g.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarHorz,!0),g.onScrollRangeChanged(i.default.BLScrollBarType.kBLScrollBarHorz,1),g.onScrollSizeChanged(i.default.BLScrollBarType.kBLScrollBarHorz,1),g.onScrollPositionChanged(i.default.BLScrollBarType.kBLScrollBarHorz,0)):g.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarHorz,!1);if(e.height>n.height){g.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarVert,!0),g.onScrollRangeChanged(i.default.BLScrollBarType.kBLScrollBarVert,e.height),g.onScrollSizeChanged(i.default.BLScrollBarType.kBLScrollBarVert,n.height),g.onScrollPositionChanged(i.default.BLScrollBarType.kBLScrollBarVert,t.y);o={pos:t.y,size:n.height,range:e.height};g.onScrollChanged(i.default.BLScrollBarType.kBLScrollBarVert,o)}else l===i.default.BLZoomType.kBLZoomFitWidth?(g.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarVert,!0),g.onScrollRangeChanged(i.default.BLScrollBarType.kBLScrollBarVert,1),g.onScrollSizeChanged(i.default.BLScrollBarType.kBLScrollBarVert,1),g.onScrollPositionChanged(i.default.BLScrollBarType.kBLScrollBarVert,0)):g.onScrollVisibilityChanged(i.default.BLScrollBarType.kBLScrollBarVert,!1)}},k=function(){for(var o=a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height),r=0,i=0,u=e,l=0,c=e.length;l<c;++l){var s=u[l].pageRect;if(o.hasIntersection(s)){var f=a.default.intersectRects(o,s).getArea();f>i&&(i=f,r=u[l].index)}}r!=d&&(d=r,g&&g.onFocusPageChanged(d))},x=function(e,n){if(c!=e){var o=e/c,r=(t.x+n.x)*o,i=(t.y+n.y)*o,s=a.default.point(r,i).floor();s.offset(-n.x,-n.y),t=s,c=u.default.floorZoom(Math.min(Math.max(e,.1),2))}B(),g&&g.onZoomChanged(l,c)},L=function(t){if(l!==i.default.pdfPageView.none){for(var o=0,r=0,a=0,u=e.length;a<u;a++){var c=e[a].getDevSpacePageBox(1,s).getSize(),d=2*c.width;o<d&&(o=d);var f=c.height;r<f&&(r=f)}var g=(n.width-18-4)/o,p=(n.height-12-4)/r;switch(l){case i.default.pdfPageView.fitPage:x(Math.min(g,p),t);break;case i.default.pdfPageView.fitWidth:x(g,t);break;case i.default.pdfPageView.kBLZoomFitHeight:x(p,t)}}},T=function(e){var o=d;if(o<p.getPagesCount()-1){++o;var r=p.getPage(o).pageRect,i=a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height);if(i.left<=r.left&&i.right>=r.right)if(o<p.getPagesCount()-1)++o;else if(0!=o%2)return;P.goToPageRect(o,null,0)}},C=function(e){var o=d;if(o>0){--o;var r=p.getPage(o).pageRect,i=a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height);i.left<=r.left&&i.right>=r.right&&o>0&&--o,P.goToPageRect(o,null,0)}};P.initialize=function(e,t){g=e.layoutCallbacks,p=e.document,v=e,l=p.pageView,c=1,s=0,d=p.pageSelectedIndex;var n=p.pageDirection;y=n===i.default.PDPageDirection.kPDPageDirectionR2L,t&&!0===t.hasCoverPage&&(r=t.hasCoverPage),B()},P.zoomTo=function(e,t,o){var r=o?o.copy():a.default.rect(0,0,n.width,n.height).getCenter();return l!=e&&(l=e,L(r)),l===i.default.pdfPageView.none&&(t<.1&&(t=.1),t>2&&(t=2),x(t,r)),!0},P.setPagesRotation=function(e){s!=e&&(s=e,B(),g&&g.onRotateChanged&&g.onRotateChanged(s))};P.updatePages=function(){w()},P.mapPointToPage=function(e,n){var o=a.default.point(0,0),r=p.getPage(e);if(isUndefinedOrNull(r))return o;var i=r.getPageToDevSpaceMatrix(c,s).invert();if(!isUndefinedOrNull(i)){var u=a.default.point(n.x+t.x-r.position.x,n.y+t.y-r.position.y);o=i.mapPoint(u)}return o},P.mapRectToPage=function(e,n){var o=a.default.rect(),r=p.getPage(e);if(isUndefinedOrNull(r))return o;var i=r.getPageToDevSpaceMatrix(c,s).invert();if(!isUndefinedOrNull(i)){var u=a.default.rect(n.left+t.x-r.position.x,n.top+t.y-r.position.y,n.right+t.x-r.position.x,n.bottom+t.y-r.position.y);o=i.mapRect(u)}return o},P.mapPointToDevice=function(e,n){var o=a.default.point(),r=p.getPage(e);return r?((o=r.getPageToDevSpaceMatrix(c,s).mapPoint(n).floor()).offset(-t.x,-t.y),o.offset(r.position.x,r.position.y),o):o},P.mapRectToDevice=function(e,n){var o=a.default.rect(),r=p.getPage(e);return isUndefinedOrNull(r)?o:((o=r.getPageToDevSpaceMatrix(c,s).mapRect(n).round()).offset(-t.x,-t.y),o.offset(r.position.x,r.position.y),o)},P.goToPageRect=function(e,o,r){var u=p.pages;if(e>=u.length||e<0)return null;isUndefinedOrNull(r)&&(r=0);var l,c=d==e;(d=e,g&&g.onFocusPageChanged(e),o)?(l=P.mapRectToDevice(e,o)).offset(t.x,t.y):(l=u[e].pageRect.copy()).inflate(6,6);if(c&&r&i.default.BLRectFlags.kBLRectDontScrollVisible&&a.default.rect(t.x,t.y,t.x+n.width,t.y+n.height).containsRect(l))return null;var s=l.left+(l.getWidth()-n.width)/2,f=l.top+(l.getHeight()-n.height)/2;return l.getWidth()>n.width&&(s=r&i.default.BLRectFlags.kBLRectPreferRightOverLeft?l.right-n.width:l.left),l.getHeight()>n.height&&(f=r&i.default.BLRectFlags.kBLRectPreferBottomOverTop?l.bottom-n.height:l.top),t.x=a.default.castFloatToInt(s),t.y=a.default.castFloatToInt(f),b(),S(),a.default.point(s,f)},P.goToNextPage=function(){T()},P.goToPrevPage=function(){C()},P.getPageAtPoint=function(n){for(var o=-1,r=a.default.point(t.x+n.x,t.y+n.y),i=0,u=e.length;i<u;i++)if(e[i].pageRect.containsPoint(r)){o=e[i].index;break}return o},P.getVisibleRange=function(){return{startPage:f.startPage,endPage:f.endPage}},P.getFocusPage=function(){return d},P.setFocusPage=function(e){e<p.getPagesCount()&&e>=0&&(d=e,g&&g.onFocusPageChanged(e))};var R=function(){for(var t=a.default.size(),n=0,o=e.length;n<o;n++)t.height<e[n].pageRect.height&&(t.height=e[n].pageRect.height),t.width<e[n].pageRect.width&&(t.width=e[n].pageRect.width);return t.width*=2,t.width+=6*e.length+6,t.height+=12,t},D=function(e){return 0},E=function(e){var t=R();return e==i.default.BLScrollBarType.kBLScrollBarHorz?t.width<n.width?0:t.width-n.width:t.height<n.height?0:t.height-n.height},A=function(e){return e===i.default.BLScrollBarType.kBLScrollBarHorz?t.x:t.y},M=function(e){return e===i.default.BLScrollBarType.kBLScrollBarHorz?n.width:n.height},V=function(e,n){var o=D(e),r=E(e);if(0===r&&0===o)return!1;var a=Math.min(Math.max(n,o),r);return a!==A(e)&&(function(e,n){e===i.default.BLScrollBarType.kBLScrollBarHorz?t.x=n:t.y=n}(e,a),b(),k(),g&&g.onScrollPositionChanged(e,a),!0)};P.processScrollEvent=function(e,t,n){switch(t){case i.default.BLScrollEvent.kBLScrollHome:V(e,D(e));break;case i.default.BLScrollEvent.kBLScrollEnd:V(e,E(e));break;case i.default.BLScrollEvent.kBLScrollStepPlus:V(e,A(e)+a.default.castFloatToInt(M(e)/10))||T();break;case i.default.BLScrollEvent.kBLScrollStepMinus:V(e,A(e)-a.default.castFloatToInt(M(e)/10))||C(i.default.BLRectFlags.kBLRectPreferBottomOverTop);break;case i.default.BLScrollEvent.kBLScrollPagePlus:V(e,A(e)+M(e))||T();break;case i.default.BLScrollEvent.kBLScrollPageMinus:V(e,A(e)-M(e))||C(i.default.BLRectFlags.kBLRectPreferBottomOverTop);break;case i.default.BLScrollEvent.kBLScrollPos:case i.default.BLScrollEvent.kBLScrollSliderReleased:V(e,n)}},P.pointerPressed=function(e){h||(m=a.default.point(t.x+e.x,t.y+e.y),h=!0)},P.pointerReleased=function(e){h=!1},P.pointerMoved=function(e){h&&(V(i.default.BLScrollBarType.kBLScrollBarHorz,m.x-e.x),V(i.default.BLScrollBarType.kBLScrollBarVert,m.y-e.y),m=a.default.point(t.x+e.x,t.y+e.y))},P.pointerWheel=function(e,t){for(var n=a.default.castFloatToInt(t);n>0;)P.processScrollEvent(i.default.BLScrollBarType.kBLScrollBarVert,i.default.BLScrollEvent.kBLScrollStepMinus,0),--n;for(;n<0;)P.processScrollEvent(i.default.BLScrollBarType.kBLScrollBarVert,i.default.BLScrollEvent.kBLScrollStepPlus,0),++n},P.draw=function(e,n,o){if(v){var r=t.copy();e.translateCTM(-r.x,-r.y),v.tempDraw(e,o),e.translateCTM(r.x,r.y)}},P.resizeView=function(e){if(e&&!e.isEmpty()&&!e.isEqual(n)){n=e;var o=p.getPage(d).position.copy();o.offset(-t.x,-t.y),L(o),B()}},P.oCConfigChanged=function(){B()},P.getVisiblePages=function(){return e},P.isUsingVisibleRangeNavigation=function(){return!0},P.dispose=function(){g=null,p=null,v=null},(0,o.default)(this,{hasCoverPage:{get:function(){return r},set:function(e){r=e,B()}}})},n={createInstance:function(){return new t}};return n}]),mainApp.factory(s,getConstructor(c,s,"factory"))},"s/D7":function(e,t,n){"use strict";var o=u(n("/jXN")),r=u(n("b8L+")),a=u(n("C3UN")),i=u(n("iArn"));function u(e){return e&&e.__esModule?e:{default:e}}var l="ui-viewer-layouts-continuous-factory-module",c="ui-viewer-layouts-continuous-factory";o.default.module(l,[]).factory(c,["$rootScope",function(e){var t=function(){var e=[],t=r.default.point(),n=r.default.size(),o=r.default.size(),u=a.default.pdfPageView.none,l=1,c=0,s=0,d={startPage:-1,endPage:-1},f=null,g=null,p=null,v=r.default.point(),m=!1,h=this;h.getOffset=function(){return t.copy()};var y=function(e){isUndefinedOrNull(e)&&(e=!0),P(),b(),e&&k(),S()},P=function(){if(g){for(var t=0,a=6,i=g.pages,u=0,s=i.length;u<s;++u){var d=(y=i[u]).getPageToDevSpaceMatrix(l,c).mapRect(y.getPageBox()).floor().getSize(),f=d.width,p=d.height,v=a;y.position=r.default.point(0,v).floor(),y.pageRect=r.default.rect(y.position.x,y.position.y,y.position.x+f,y.position.y+p).floor(),e.find(function(e){return e.index===u})&&(t=Math.max(t,f+12)),a+=p+6}t=Math.max(t,n.width);var m=0;a<n.height&&(m=(n.height-a)/2);var h=0;for(s=i.length;h<s;++h){var y;f=(y=i[h]).pageRect.width;y.position.x=(t-f)/2,y.position.y+=m,y.position=y.position.floor(),y.pageRect.offset(y.position.x,m),y.pageRect=y.pageRect.floor(),y.virtualLeft=r.default.castFloatToInt(y.pageRect.left),y.virtualTop=r.default.castFloatToInt(y.pageRect.top)}o=r.default.size(Math.max(n.width,t),Math.max(n.height,a)).floor()}},B=void 0,w=void 0,b=function(){if(g){if(o.width<n.width)t.x=r.default.castFloatToInt((o.width-n.width)/2);else{var i=T(a.default.BLScrollBarType.kBLScrollBarHorz),u=C(a.default.BLScrollBarType.kBLScrollBarHorz);t.x=Math.min(Math.max(t.x,i),u)}if(o.height<n.height)t.y=(o.height-n.height)/2;else{i=T(a.default.BLScrollBarType.kBLScrollBarVert),u=C(a.default.BLScrollBarType.kBLScrollBarVert);t.y=r.default.castFloatToInt(Math.min(Math.max(t.y,i),u))}for(var l=r.default.rect(t.x,t.y,t.x+n.width,t.y+n.height),c=g.pages,s={startPage:Number.MAX_VALUE,endPage:0},p=0,v=c.length;p<v;++p){var m=c[p];l.hasIntersection(m.pageRect)&&(s.startPage=Math.min(s.startPage,p),s.endPage=Math.max(s.endPage,p))}e=saveSlice(c,s.startPage,s.endPage+1),s.startPage==d.startPage&&s.endPage==d.endPage||(d=s).startPage!=Number.MAX_VALUE&&f&&f.onVisibleRangeChanged(d.startPage,d.endPage),f&&f.onDrawUpdated()}},S=function(){if(f){if(o.width>n.width){f.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarHorz,!0),f.onScrollRangeChanged(a.default.BLScrollBarType.kBLScrollBarHorz,o.width),f.onScrollSizeChanged(a.default.BLScrollBarType.kBLScrollBarHorz,n.width),f.onScrollPositionChanged(a.default.BLScrollBarType.kBLScrollBarHorz,t.x);var e={pos:t.x,size:n.width,range:o.width};f.onScrollChanged(a.default.BLScrollBarType.kBLScrollBarHorz,e)}else u===a.default.BLZoomType.kBLZoomFitHeight?(f.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarHorz,!0),f.onScrollRangeChanged(a.default.BLScrollBarType.kBLScrollBarHorz,1),f.onScrollSizeChanged(a.default.BLScrollBarType.kBLScrollBarHorz,1),f.onScrollPositionChanged(a.default.BLScrollBarType.kBLScrollBarHorz,0)):f.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarHorz,!1);if(o.height>n.height){f.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarVert,!0),f.onScrollRangeChanged(a.default.BLScrollBarType.kBLScrollBarVert,o.height),f.onScrollSizeChanged(a.default.BLScrollBarType.kBLScrollBarVert,n.height),f.onScrollPositionChanged(a.default.BLScrollBarType.kBLScrollBarVert,t.y);e={pos:t.y,size:n.height,range:o.height};f.onScrollChanged(a.default.BLScrollBarType.kBLScrollBarVert,e)}else u===a.default.BLZoomType.kBLZoomFitWidth?(f.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarVert,!0),f.onScrollRangeChanged(a.default.BLScrollBarType.kBLScrollBarVert,1),f.onScrollSizeChanged(a.default.BLScrollBarType.kBLScrollBarVert,1),f.onScrollPositionChanged(a.default.BLScrollBarType.kBLScrollBarVert,0)):f.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarVert,!1)}},k=function(){for(var o=r.default.rect(t.x,t.y,t.x+n.width,t.y+n.height),i=0,l=0,d=e,p=0,v=e.length;p<v;++p){var m=d[p].pageRect;if(o.hasIntersection(m)){var h=r.default.intersectRects(o,m).getArea();h>l&&(l=h,i=d[p].index)}}i!=s&&(s=i,f&&f.onFocusPageChanged(s)),u===a.default.pdfPageView.fitWidth&&function(){for(var o=0,r=0,i=0,l=e.length;i<l;i++){var d=e[i].getDevSpacePageBox(1,c).getSize(),f=d.width;o<f&&(o=f);var p=d.height;r<p&&(r=p)}var v=(n.width-12-2)/o,m=(n.height-12-2)/r;if(v!==B||m!==w){B=v,w=m;var h=g.getPage(s);if(h){var y=h.position.copy();switch(y.offset(-t.x,-t.y),u){case a.default.pdfPageView.fitPage:x(Math.min(v,m),y);break;case a.default.pdfPageView.fitWidth:x(v,y);break;case a.default.pdfPageView.kBLZoomFitHeight:x(m,y)}}}}()},x=function(e,n){if(l!=e){var o=s,r=h.mapPointToPage(o,n);window.devicePixelRatio;l=i.default.floorZoom(Math.min(Math.max(e,.1),2)),P();var a=h.mapPointToDevice(o,r);t.offset(a.x,a.y),t.offset(-n.x,-n.y),b(),k(),S()}f&&f.onZoomChanged(u,l)},L=function(t){if(u!==a.default.pdfPageView.none&&!n.isAreaEmpty()&&g){var o=0,r=0,i=g.pages;if(u===a.default.pdfPageView.fitWidth){for(var l=0,s=e.length;l<s;l++){var d=e[l].getDevSpacePageBox(1,c).getSize(),f=d.width;o<f&&(o=f);var p=d.height;r<p&&(r=p)}0==o&&(o=i[0].getDevSpacePageBox(1,c).getSize().width),0==r&&(r=i[0].getDevSpacePageBox(1,c).getSize().height)}else for(var v=0,m=i.length;v<m;v++){var h=i[v].getDevSpacePageBox(1,c).getSize(),y=h.width;o<y&&(o=y);var P=h.height;r<P&&(r=P)}var B=n.width-12,w=n.height-12,b=(B-2)/(o=0==o?B-2:o),S=(w-2)/(r=0==r?w-2:r);switch(u){case a.default.pdfPageView.fitPage:x(Math.min(b,S),t);break;case a.default.pdfPageView.fitWidth:x(b,t);break;case a.default.pdfPageView.kBLZoomFitHeight:x(S,t)}}};h.initialize=function(e){f=e.layoutCallbacks,g=e.document,p=e,u=g.pageView,l=1,c=0,s=g.pageSelectedIndex,y()},h.zoomTo=function(e,t,o){var i=o?o.copy():r.default.rect(0,0,n.width,n.height).getCenter();return u!=e&&(u=e,L(i)),u===a.default.pdfPageView.none&&(t<.1&&(t=.1),t>2&&(t=2),x(t,i)),!0},h.setPagesRotation=function(e){if(c!=e){var t=s;c=e,y(!1),h.goToPageRect(t),f&&f.onRotateChanged&&f.onRotateChanged(c)}};h.updatePages=function(){P()},h.mapPointToPage=function(e,n){var o=r.default.point(0,0),a=g.getPage(e);if(isUndefinedOrNull(a))return o;var i=a.getPageToDevSpaceMatrix(l,c).invert();if(!isUndefinedOrNull(i)){var u=r.default.point(n.x+t.x,n.y+t.y);a.position&&u.offset(-a.position.x,-a.position.y),o=i.mapPoint(u)}return o},h.mapRectToPage=function(e,n){var o=r.default.rect(),a=g.getPage(e);if(isUndefinedOrNull(a))return o;var i=a.getPageToDevSpaceMatrix(l,c).invert();if(!isUndefinedOrNull(i)){var u=r.default.rect(n.left+t.x-a.position.x,n.top+t.y-a.position.y,n.right+t.x-a.position.x,n.bottom+t.y-a.position.y);o=i.mapRect(u)}return o},h.mapPointToDevice=function(e,n){var o=r.default.point(),a=g.getPage(e);return a?((o=a.getPageToDevSpaceMatrix(l,c).mapPoint(n).floor()).offset(-t.x,-t.y),o.offset(a.position.x,a.position.y),o):o},h.mapRectToDevice=function(e,n){var o=r.default.rect(),a=g.getPage(e);return isUndefinedOrNull(a)?o:((o=a.getPageToDevSpaceMatrix(l,c).mapRect(n).round()).offset(-t.x,-t.y),o.offset(a.position.x,a.position.y),o)},h.goToPageRect=function(e,o,i){var u,l=g.pages;if(e>=l.length||e<0)return null;(isUndefinedOrNull(i)&&(i=0),s=e,f&&f.onFocusPageChanged(e),o)?(u=h.mapRectToDevice(e,o)).offset(t.x,t.y):(u=l[e].pageRect.copy()).inflate(6,6);if(i&a.default.BLRectFlags.kBLRectDontScrollVisible&&r.default.rect(t.x,t.y,t.x+n.width,t.y+n.height).containsRect(u))return null;var c=u.left+(u.getWidth()-n.width)/2,d=u.top+(u.getHeight()-n.height)/2;return u.getWidth()>n.width&&(c=i&a.default.BLRectFlags.kBLRectPreferRightOverLeft?u.right-n.width:u.left),u.getHeight()>n.height&&(d=i&a.default.BLRectFlags.kBLRectPreferBottomOverTop?u.bottom-n.height:u.top),t.x=r.default.castFloatToInt(c),t.y=r.default.castFloatToInt(d),b(),S(),r.default.point(c,d)},h.goToNextPage=function(){s<g.getPagesCount()-1&&h.goToPageRect(s+1,null,0)},h.goToPrevPage=function(){s>0&&h.goToPageRect(s-1,null,0)},h.getPageAtPoint=function(e){for(var n=-1,o=g.pages,a=r.default.point(t.x+e.x,t.y+e.y),i=0,u=o.length;i<u;++i)if(o[i].pageRect.containsPoint(a)){n=i;break}return n},h.getPageAtScrollPosition=function(e){for(var t=g.pages,n=-1,o=0,r=t.length;o<r;++o){var a=t[o].pageRect;if(e>=a.top&&e<=a.bottom){n=o;break}}return n};var T=function(e){return 0},C=function(e){return e===a.default.BLScrollBarType.kBLScrollBarHorz?o.width<n.width?0:o.width-n.width:o.height<n.height?0:o.height-n.height},R=function(e){return e===a.default.BLScrollBarType.kBLScrollBarHorz?n.width:n.height},D=function(e){return e===a.default.BLScrollBarType.kBLScrollBarHorz?t.x:t.y},E=function(e,n){e==a.default.BLScrollBarType.kBLScrollBarHorz?t.x=n:t.y=n},A=function(o,i){var l=T(o),c=C(o),s=c,d=D(o),p=1,v=Math.min(Math.max(i,l),c);if(v!==D(o)){p=d<v?1:-1,E(o,v);var m=r.default.rect(t.x,t.y,t.x+n.width,t.y+n.height),h=-1,y=-1,P=e;if(P.length>0&&(h=P[0],y=P[P.length-1]),b(),k(),s!=(c=C(o))&&-1!==h&&-1!==y&&u===a.default.pdfPageView.fitWidth){var B=0,w=0;1===p?s>c?(B=g.pages[y.index].pageRect.bottom,w=m.height):(B=g.pages[h.index].pageRect.bottom,w=0):s>c?B=g.pages[h.index].pageRect.top:(B=g.pages[y.index].pageRect.top,w=m.height),v=B-w+7*p,v=Math.min(Math.max(v,l),c),E(o,v),b(),k()}return f&&f.onScrollPositionChanged(o,v),!0}return!1};h.resizeView=function(e){if(e&&!e.isEmpty()&&!e.isEqual(n)&&(n=e,g)){var o=g.getPage(s).position.copy();o.offset(-t.x,-t.y),L(o),y()}},h.getVisibleRange=function(){return{startPage:d.startPage,endPage:d.endPage}},h.getFocusPage=function(){return s},h.setFocusPage=function(e){e<g.getPagesCount()&&e>=0&&(s=e,f&&f.onFocusPageChanged(e))},h.processScrollEvent=function(e,t,n){switch(t){case a.default.BLScrollEvent.kBLScrollHome:A(e,T(e));break;case a.default.BLScrollEvent.kBLScrollEnd:A(e,C(e));break;case a.default.BLScrollEvent.kBLScrollStepPlus:A(e,D(e)+r.default.castFloatToInt(R(e)/10));break;case a.default.BLScrollEvent.kBLScrollStepMinus:A(e,D(e)-r.default.castFloatToInt(R(e)/10));break;case a.default.BLScrollEvent.kBLScrollPagePlus:A(e,D(e)+R(e));break;case a.default.BLScrollEvent.kBLScrollPageMinus:A(e,D(e)-R(e));break;case a.default.BLScrollEvent.kBLScrollPos:case a.default.BLScrollEvent.kBLScrollSliderReleased:A(e,n)}},h.pointerPressed=function(e){m||(v=r.default.point(t.x+e.x,t.y+e.y),m=!0)},h.pointerReleased=function(e){m=!1},h.pointerMoved=function(e){m&&(A(a.default.BLScrollBarType.kBLScrollBarHorz,v.x-e.x),A(a.default.BLScrollBarType.kBLScrollBarVert,v.y-e.y),v=r.default.point(t.x+e.x,t.y+e.y))},h.pointerWheel=function(e,t){for(var n=r.default.castFloatToInt(t);n>0;)h.processScrollEvent(a.default.BLScrollBarType.kBLScrollBarVert,a.default.BLScrollEvent.kBLScrollStepMinus,0),--n;for(;n<0;)h.processScrollEvent(a.default.BLScrollBarType.kBLScrollBarVert,a.default.BLScrollEvent.kBLScrollStepPlus,0),++n},h.draw=function(e,n,o){if(p){var r=t.copy();e.translateCTM(-r.x,-r.y),p.tempDraw(e,o),e.translateCTM(r.x,r.y)}},h.oCConfigChanged=function(){y()},h.getVisiblePages=function(){return e},h.isUsingVisibleRangeNavigation=function(){return!1},h.dispose=function(){f=null,g=null,p=null}},n={createInstance:function(){return new t}};return n}]),mainApp.factory(c,getConstructor(l,c,"factory"))},xaRj:function(e,t,n){"use strict";var o=u(n("/jXN")),r=u(n("b8L+")),a=u(n("C3UN")),i=u(n("iArn"));function u(e){return e&&e.__esModule?e:{default:e}}var l="ui-viewer-layouts-single-factory-module",c="ui-viewer-layouts-single-factory";o.default.module(l,[]).factory(c,["$rootScope",function(e){var t=function(){var e=[],t=r.default.point(),n=r.default.size(),o=(r.default.size(),{startPage:-1,endPage:-1}),u=a.default.pdfPageView.none,l=1,c=0,s=0,d=null,f=null,g=null,p=r.default.point(),v=!1,m=this,h=void 0,y=!1;m.getOffset=function(){return t.copy()};var P=function(){B(),S(),x()},B=function(){if(f)for(var e=f.pages,t=0,o=e.length;t<o;++t){var a=e[t],i=a.getPageToDevSpaceMatrix(l,c).mapRect(a.getPageBox()).floor(),u=i.width,s=i.height,d=Math.max(n.width,u+12),g=Math.max(n.height,s+12);a.position=r.default.point(),a.position.x=(d-u)/2,a.position.y=(g-s)/2,a.position=a.position.floor(),a.pageRect=r.default.rect(a.position.x,a.position.y,a.position.x+u,a.position.y+s).floor(),a.virtualLeft=r.default.castFloatToInt(a.pageRect.left),a.virtualTop=r.default.castFloatToInt(a.pageRect.top)}},w=void 0,b=void 0,S=function(){if(f){var n=R(a.default.BLScrollBarType.kBLScrollBarHorz),r=D(a.default.BLScrollBarType.kBLScrollBarHorz);t.x=Math.min(Math.max(t.x,n),r);var i=R(a.default.BLScrollBarType.kBLScrollBarVert),u=D(a.default.BLScrollBarType.kBLScrollBarVert);t.y=Math.min(Math.max(t.y,i),u);var l=f.pages;e=saveSlice(l,s,s+1),k(),s==o.startPage&&s==o.endPage||(o={startPage:s,endPage:s}).startPage!==Number.MAX_VALUE&&d&&d.onVisibleRangeChanged(o.startPage,o.endPage),d&&d.onDrawUpdated()}},k=function(){for(var o=0,r=0,i=0,l=e.length;i<l;i++){var d=e[i].getDevSpacePageBox(1,c).getSize(),g=d.width;o<g&&(o=g);var p=d.height;r<p&&(r=p)}var v=(n.width-12-2)/o,m=(n.height-12-2)/r;if(v!==w||m!==b){w=v,b=m;var h=f.getPage(s);if(h){var y=h.position.copy();switch(y.offset(-t.x,-t.y),u){case a.default.pdfPageView.fitPage:L(Math.min(v,m),y);break;case a.default.pdfPageView.fitWidth:L(v,y);break;case a.default.pdfPageView.kBLZoomFitHeight:L(m,y)}}}},x=function(){if(d){var e=C();if(e.width>n.width){d.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarHorz,!0),d.onScrollRangeChanged(a.default.BLScrollBarType.kBLScrollBarHorz,e.width),d.onScrollSizeChanged(a.default.BLScrollBarType.kBLScrollBarHorz,n.width),d.onScrollPositionChanged(a.default.BLScrollBarType.kBLScrollBarHorz,t.x);var o={pos:t.x,size:n.width,range:e.width};d.onScrollChanged(a.default.BLScrollBarType.kBLScrollBarHorz,o)}else u===a.default.BLZoomType.kBLZoomFitHeight?(d.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarHorz,!0),d.onScrollRangeChanged(a.default.BLScrollBarType.kBLScrollBarHorz,1),d.onScrollSizeChanged(a.default.BLScrollBarType.kBLScrollBarHorz,1),d.onScrollPositionChanged(a.default.BLScrollBarType.kBLScrollBarHorz,0)):d.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarHorz,!1);if(e.height>n.height){d.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarVert,!0),d.onScrollRangeChanged(a.default.BLScrollBarType.kBLScrollBarVert,e.height),d.onScrollSizeChanged(a.default.BLScrollBarType.kBLScrollBarVert,n.height),d.onScrollPositionChanged(a.default.BLScrollBarType.kBLScrollBarVert,t.y);o={pos:t.y,size:n.height,range:e.height};d.onScrollChanged(a.default.BLScrollBarType.kBLScrollBarVert,o)}else u===a.default.BLZoomType.kBLZoomFitWidth?(d.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarVert,!0),d.onScrollRangeChanged(a.default.BLScrollBarType.kBLScrollBarVert,1),d.onScrollSizeChanged(a.default.BLScrollBarType.kBLScrollBarVert,1),d.onScrollPositionChanged(a.default.BLScrollBarType.kBLScrollBarVert,0)):d.onScrollVisibilityChanged(a.default.BLScrollBarType.kBLScrollBarVert,!1)}},L=function(e,n){if(l!=e){var o=e/l,a=(t.x+n.x)*o,c=(t.y+n.y)*o,s=r.default.point(a,c).floor();s.offset(-n.x,-n.y),t=s,l=i.default.floorZoom(Math.min(Math.max(e,.1),2))}P(),d&&d.onZoomChanged(u,l)},T=function(e){if(u!==a.default.pdfPageView.none&&f){var t=f.getPage(s).getDevSpacePageBox(1,c).getSize(),o=n.width-12,r=n.height-12,i=(o-2)/t.width,l=(r-2)/t.height;switch(u){case a.default.pdfPageView.fitPage:L(Math.min(i,l),e);break;case a.default.pdfPageView.fitWidth:L(i,e);break;case a.default.pdfPageView.kBLZoomFitHeight:L(l,e)}}};m.initialize=function(e){d=e.layoutCallbacks,f=e.document,g=e,u=f.pageView,l=1,c=0,s=f.pageSelectedIndex,P()},m.resizeView=function(e){if(e&&!e.isEmpty()&&!e.isEqual(n)){if(n=e,!f)return;var o=f.getPage(s);if(o){var r=o.position.copy();r.offset(-t.x,-t.y),T(r),P()}}},m.zoomTo=function(e,t,o){var i=o?o.copy():r.default.rect(0,0,n.width,n.height).getCenter();return u!=e&&(u=e,T(i)),u===a.default.pdfPageView.none&&(t<.1&&(t=.1),t>2&&(t=2),L(t,i)),!0},m.setPagesRotation=function(e){c!=e&&(c=e,P(),d&&d.onRotateChanged&&d.onRotateChanged(c))};m.updatePages=function(){B()},m.mapPointToPage=function(e,n){var o=r.default.point(0,0);if(s==e){var a=f.getPage(e);if(isUndefinedOrNull(a))return o;var i=a.getPageToDevSpaceMatrix(l,c).invert();if(!isUndefinedOrNull(i)){var u=r.default.point(n.x+t.x-a.position.x,n.y+t.y-a.position.y);o=i.mapPoint(u)}}return o},m.mapRectToPage=function(e,n){var o=r.default.rect();if(s==e){var a=f.getPage(e);if(isUndefinedOrNull(a))return o;var i=a.getPageToDevSpaceMatrix(l,c).invert();if(!isUndefinedOrNull(i)){var u=r.default.rect(n.left+t.x-a.position.x,n.top+t.y-a.position.y,n.right+t.x-a.position.x,n.bottom+t.y-a.position.y);o=i.mapRect(u)}}return o},m.mapPointToDevice=function(e,n){var o=r.default.point();if(s==e){var a=f.getPage(e);if(!a)return o;(o=a.getPageToDevSpaceMatrix(l,c).mapPoint(n).floor()).offset(-t.x,-t.y),o.offset(a.position.x,a.position.y)}return o},m.mapRectToDevice=function(e,n){var o=r.default.rect();if(s==e){var a=f.getPage(e);if(isUndefinedOrNull(a))return o;(o=a.getPageToDevSpaceMatrix(l,c).mapRect(n).round()).offset(-t.x,-t.y),o.offset(a.position.x,a.position.y)}return o},m.goToPageRect=function(e,o,i){var l=f.pages;if(e>=l.length||e<0)return null;isUndefinedOrNull(i)&&(i=0);var c,g=s==e;(s=e,d&&d.onFocusPageChanged(e),o)?(c=m.mapRectToDevice(e,o)).offset(t.x,t.y):(c=l[e].pageRect.copy()).inflate(6,6);if(g&&i&a.default.BLRectFlags.kBLRectDontScrollVisible&&r.default.rect(t.x,t.y,t.x+n.width,t.y+n.height).containsRect(c))return null;var p=c.left+(c.getWidth()-n.width)/2,v=c.top+(c.getHeight()-n.height)/2;return c.getWidth()>n.width&&(p=i&a.default.BLRectFlags.kBLRectPreferRightOverLeft?c.right-n.width:c.left),c.getHeight()>n.height&&(v=i&a.default.BLRectFlags.kBLRectPreferBottomOverTop?c.bottom-n.height:c.top),t.x=r.default.castFloatToInt(p),t.y=r.default.castFloatToInt(v),g||u!=a.default.pdfPageView.fitPage||T(r.default.rect(0,0,n.width,n.height).getCenter()),S(),x(),r.default.point(p,v)},m.goToNextPage=function(){V(0)},m.goToPrevPage=function(){I(0)},m.getPageAtPoint=function(e){var n=-1,o=r.default.point(t.x+e.x,t.y+e.y),a=f.getPage(s);return a&&a.pageRect.containsPoint(o)&&(n=s),n},m.getVisibleRange=function(){return{startPage:o.startPage,endPage:o.endPage}},m.getFocusPage=function(){return s},m.setFocusPage=function(e){e<f.getPagesCount()&&e>=0&&(s=e,d&&d.onFocusPageChanged(e))};var C=function(){var e=f.getPage(s).pageRect.getSize();return e.width+=12,e.height+=12,e},R=function(e){return 0},D=function(e){var t=C();return e===a.default.BLScrollBarType.kBLScrollBarHorz?t.width<n.width?0:t.width-n.width:t.height<n.height?0:t.height-n.height},E=function(e){return e===a.default.BLScrollBarType.kBLScrollBarHorz?t.x:t.y},A=function(e){return e===a.default.BLScrollBarType.kBLScrollBarHorz?n.width:n.height},M=function(e,n){var o=R(e),r=D(e);if(0===r&&0===o)return!1;var i=Math.min(Math.max(n,o),r);return i!==E(e)&&(function(e,n){e===a.default.BLScrollBarType.kBLScrollBarHorz?t.x=n:t.y=n}(e,i),S(),d&&d.onScrollPositionChanged(e,i),!0)},V=function(e){s<f.getPagesCount()-1&&m.goToPageRect(s+1,null,e)},I=function(e){s>0&&m.goToPageRect(s-1,null,e)};m.processScrollEvent=function(e,o,i){switch(o){case a.default.BLScrollEvent.kBLScrollHome:M(e,R(e));break;case a.default.BLScrollEvent.kBLScrollEnd:M(e,D(e));break;case a.default.BLScrollEvent.kBLScrollStepPlus:M(e,E(e)+r.default.castFloatToInt(A(e)/10))||V(0);break;case a.default.BLScrollEvent.kBLScrollStepMinus:M(e,E(e)-r.default.castFloatToInt(A(e)/10))||I(a.default.BLRectFlags.kBLRectPreferBottomOverTop);break;case a.default.BLScrollEvent.kBLScrollPagePlus:M(e,E(e)+A(e))||V(0);break;case a.default.BLScrollEvent.kBLScrollPageMinus:M(e,E(e)-A(e))||I(a.default.BLRectFlags.kBLRectPreferBottomOverTop);break;case a.default.BLScrollEvent.kBLScrollPos:case a.default.BLScrollEvent.kBLScrollSliderReleased:M(e,i);break;case a.default.BLScrollEvent.kBLScrollPanStartLeft:case a.default.BLScrollEvent.kBLScrollPanStartRight:if(h=y=!1,g&&"edit"===g.getActiveToolName()&&!0===deviceDetect.isPhone())break;var u=r.default.rect(t.x+6,t.y+6,t.x-6+n.width,t.y-6+n.height),l=f.getPage(s).pageRect;switch(o){case a.default.BLScrollEvent.kBLScrollPanStartLeft:u.right>=l.right&&(y=!0);break;case a.default.BLScrollEvent.kBLScrollPanStartRight:u.left<=l.left&&(h=!0)}break;case a.default.BLScrollEvent.kBLScrollPanEnd:!0===h?m.goToPrevPage():!0===y&&m.goToNextPage(),h=y=!1}},m.pointerPressed=function(e){v||(p=r.default.point(t.x+e.x,t.y+e.y),v=!0)},m.pointerReleased=function(e){v=!1},m.pointerMoved=function(e){v&&(M(a.default.BLScrollBarType.kBLScrollBarHorz,p.x-e.x),M(a.default.BLScrollBarType.kBLScrollBarVert,p.y-e.y),p=r.default.point(t.x+e.x,t.y+e.y))},m.pointerWheel=function(e,t){for(var n=r.default.castFloatToInt(t);n>0;)m.processScrollEvent(a.default.BLScrollBarType.kBLScrollBarVert,a.default.BLScrollEvent.kBLScrollStepMinus,0),--n;for(;n<0;)m.processScrollEvent(a.default.BLScrollBarType.kBLScrollBarVert,a.default.BLScrollEvent.kBLScrollStepPlus,0),++n},m.draw=function(e,n,o){if(g){var r=t.copy();e.translateCTM(-r.x,-r.y),g.tempDraw(e,o),e.translateCTM(r.x,r.y)}},m.oCConfigChanged=function(){P()},m.getVisiblePages=function(){return e},m.isUsingVisibleRangeNavigation=function(){return!1},m.dispose=function(){d=null,f=null,g=null}},n={createInstance:function(){return new t}};return n}]),mainApp.factory(c,getConstructor(l,c,"factory"))},zqe9:function(e,t,n){"use strict";var o=a(n("b8L+")),r=a(n("C3UN"));function a(e){return e&&e.__esModule?e:{default:e}}n("X60V"),n("MwNu");var i="ui-viewer-inputhandlers-view-module",u="ui-viewer-inputhandlers-view-factory";angular.module(i,["bl-annotobject-module","esl-object-factory-module"]).factory(u,["$injector","bl-annotobject-factory","esl-object-factory",function(e,t,n){var a={},i=function(a){var i=this,u=a,l=!1,c=!1,s=o.default.point(),d=null,f=!1,g=null,p=null,v=function(e){return l&&(u.setCursor(r.default.BLCursorType.kBLCursorHand),u.pointerReleased(e),l=!1),!0},m=function(e,n){t.isEqual(g,e)||(g&&g.blur(),u.resetSelection(!0),(g=e)&&(g.focus(),n&&g.mouseUp(n.button,n.viewPt,n.flag)))},h=null,y=function(o){if(g&&g.hitTest(o))return g;var a=function(t){var o,r=null;if(-1!==(o=u.getPageAtPoint(t))){if(!h)try{h=e.get("esl-hand-service")}catch(e){}if(h)try{var a=h.select(u,t);a&&(r=n.createInstance(u,o,a))}catch(e){}}return r}(o);if(a)return a;var i=function(e){var n;if(-1!=(n=u.getPageAtPoint(e))){u.mapPointToPage(n,e);var o=u.document.getPage(n);if(!o)return null;var a=o.annotations;if(isUndefinedOrNull(a))return null;for(var i=u.getViewState(),l=0;l<a.length;l++){var c=a[l];if(c&&window.isUndefinedOrNull(c.parentIndex)&&c.type!==r.default.pdfAnnotationType.popup&&!window.isUndefinedOrNull(c.rect)&&c.isVisible&&(!c.acroform||0==(c.acroform.fieldFlags&r.default.pdfAcroformFlag.kAFPDFieldFlagReadOnly))){var s=t.createInstance(u,n,c);if(s&&s.hitTest(e)){if((i&r.default.PDPageRenderFlags.kPDPageRenderSkipMarkupAnnots)==r.default.PDPageRenderFlags.kPDPageRenderSkipMarkupAnnots&&c.isMarkup())continue;return s}}}}return null}(o);return i||null};this.initialize=function(){this.onActiveToolChanged=function(){g=null},this.onUndoRedoChanged=function(){g=null},this.onPagesChanged=function(){g=null},this.onDraw=function(e,t){g&&g.drawFocus(e,t)},l=!1},this.terminate=function(){l&&function(){var e=o.default.point(0,0);v(e)}(),g&&g.blur(),u=null},this.getToolName=function(){return"view"},this.isFinished=function(){return!1},this.handleEvent=function(e){if(e.type===r.default.BLInputEventType.kBLInputEventPointerMoved){if(Math.abs(e.pointerArgs.button.x-s.x)<1&&Math.abs(e.pointerArgs.button.y-s.y)<1)return!1;s=e.pointerArgs.button}switch(e.type){case r.default.BLInputEventType.kBLInputEventPointerPressed:if(e.pointerArgs.button===r.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(e.pointerArgs.position,e.pointerArgs.flags);if(e.pointerArgs.button===r.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(e.pointerArgs.position,e.pointerArgs.flags);break;case r.default.BLInputEventType.kBLInputEventPointerReleased:if(e.pointerArgs.button===r.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(e.pointerArgs.position,e.pointerArgs.flags);if(e.pointerArgs.button===r.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(e.pointerArgs.position,e.pointerArgs.flags);break;case r.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(e.pointerArgs.position,e.pointerArgs.flags);case r.default.BLInputEventType.kBLInputEventKeyPressed:return this.onKeyDown(e.keyArgs.keycode,e.keyArgs.flags);case r.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(e.keyArgs.keycode,e.keyArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(e,n,o){var r=null;return n&&-1!=e&&(r=t.createInstance(u,e,n)),m(r,o),!0},this.restoreSelection=function(){};var P=function(e,n,o){if(p=null,f){if(d){t.isEqual(g,d)||(g&&g.blur(),(g=d).focus());var r=y(n);t.isEqual(r,d)?d.mouseUp(e,n,o):(d.mouseExit(),d=r,r&&r.mouseEnter())}return f=!1,u.invalidate(),!0}var a=!1;c&&(c=!1,y(n)||(g&&g.blur(),g=null,a=!0));return a&&u.resetSelection(!1),!1},B=function(e,n,o){return p=n,d&&(t.isEqual(g,d)||u.resetSelection(!0),d.mouseDown(e,n,o))?(f=!0,!0):(c=!0,!1)};this.onLButtonDown=function(e,t){return!!B(r.default.BLPointerButton.kBLPointerButtonLeft,e,t)||function(e){return!l&&(u.setCursor(r.default.BLCursorType.kBLCursorDragHand),u.pointerPressed(e),l=!0,!0)}(e)},this.onLButtonUp=function(e,t){return!!P(r.default.BLPointerButton.kBLPointerButtonLeft,e,t)||!!l&&v(e)},this.onRButtonDown=function(e,t){return!!B(r.default.BLPointerButton.kBLPointerButtonRight,e,t)},this.onRButtonUp=function(e,t){return!!P(r.default.BLPointerButton.kBLPointerButtonRight,e,t)||(u.showContextMenu(r.default.ContextMenuType.Hand,e,0),!0)};this.onMouseMove=function(e,n){if(window.deviceDetect.isPhone()&&function(e,t){p&&p.x!==e.x&&(g=null,d=null,f=!1,p=null,i.onLButtonDown(e,t))}(e,n),f)return!0;if(c=!1,l)return function(e){return!!l&&(u.setCursor(r.default.BLCursorType.kBLCursorDragHand),u.pointerMoved(e),!0)}(e);var o=y(e);if(o)return d?t.isEqual(o,d)||(d.mouseExit(),d=o,o.mouseEnter()):(d=o,o.mouseEnter()),u.invalidate(),!0;if(d){var a=d;d=null,a.mouseExit()}return u.setCursor(r.default.BLCursorType.kBLCursorHand),u.pointerMoved(e),!0},this.onKeyUp=function(e,t){return e===r.default.kBLKey.kBLKey_TAB||!!g&&g.keyUp(e)};var w=function(){var e=u.getDocument();if(e){var n=e.pageSelectedIndex,o=0,r=null,a=e.getPage(n).annotations||[],i=function(){if(r){var e=t.createInstance(u,n,r);m(e),u.invalidate()}};return{next:function(){g&&t.isAnnotObject(g)?(o=g.getAnnotIndexOnPage(),++o>=a.length&&(o=0),r=a.length>0?a[o]:null):r=a.first(),i()},prev:function(){g&&t.isAnnotObject(g)?(o=g.getAnnotIndexOnPage(),--o<0&&(o=a.length-1),r=a.length>0?a[o]:null):r=a.last(),i()}}}};this.onKeyDown=function(e,t){return e===r.default.kBLKey.kBLKey_TAB?(0!=(t&r.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?w().prev():w().next(),!0):!!g&&g.keyDown(e)},this.reset=function(){g&&(g.blur(),g=null,d=null,u.resetSelection(null))}};return a.createInstance=function(e,t){return new i(t)},a}]),window.mainApp.factory(u,getConstructor(i,u,"factory"))}});