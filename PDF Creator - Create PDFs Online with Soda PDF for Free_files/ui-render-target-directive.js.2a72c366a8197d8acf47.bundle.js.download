webpackJsonp_name_([148,59,305,306,391,392,393,394,395,396,397,398,399],{"/UwL":function(t,e,n){"use strict";var r=d(n("OvRC")),a=d(n("b8L+")),o=d(n("C3UN")),i=d(n("VmtT")),l=d(n("IZAc")),u=d(n("3Ejq"));d(n("kHBY"));function d(t){return t&&t.__esModule?t:{default:t}}n("JARy"),n("Ij0n"),n("UF/7");var s="bl-text-edit-textfield-view-factory-module",c="bl-text-edit-textfield-view-factory";function f(t,e,n,d,s,c,f){var p={},g=function(p,g){var h=p,y=g,m=!1,v=l.default.createInstance("#FF000000"),T=[2],P=this;function b(t){if("\r"==t)t="\n";else if(t<" ")return null;return t}this.getModel=function(){return y},this.getPageIndex=function(){return y.getPageIndex()},this.getRect=function(){return y.getRect()},this.hitTest=function(t,e){return this.getPageIndex()==t&&this.getRect().containsPoint(e)},this.mouseDown=function(t,e){var n=k(t);return!!y.getRect().containsPoint(n)&&(m=!0,e&o.default.BLInputEventFlags.kBLInputEventFlagShiftPressed?y.setCaretAtPoint(n):y.setSelAtPoint(n),h.invalidate(),!0)},this.mouseUp=function(t,e){return m&&(m=!1),!1},this.mouseMove=function(t,e){var n=k(t);return m?(y.setCaretAtPoint(n),h.setCursor(o.default.BLCursorType.kBLCursorIBeam),h.invalidate(),!0):!!y.getRect().containsPoint(n)&&(h.setCursor(o.default.BLCursorType.kBLCursorIBeam),!0)},this.mouseWheel=function(t,e){return!1},this.keyDown=function(t,e){var n=R(e,o.default.BLInputEventFlags.kBLInputEventFlagShiftPressed),r=R(e,o.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed);switch(t){case o.default.kBLKey.kBLKey_LEFT:y.goLeft(n);break;case o.default.kBLKey.kBLKey_RIGHT:y.goRight(n);break;case o.default.kBLKey.kBLKey_UP:y.goUp(n);break;case o.default.kBLKey.kBLKey_DOWN:y.goDown(n);break;case o.default.kBLKey.kBLKey_HOME:r?y.goToFirst(n):y.goToHome(n);break;case o.default.kBLKey.kBLKey_END:r?y.goToLast(n):y.goToEnd(n);break;case o.default.kBLKey.kBLKey_BACK:y.onModify()&&y.delete(!0);break;case o.default.kBLKey.kBLKey_DELETE:y.onModify()&&y.delete(!1);break;case o.default.kBLKey.kBLKey_A:r&&y.selectAll();break;case o.default.kBLKey.kBLKey_C:r&&this.copy()}return h.invalidate(),!0},this.keyUp=function(t,e){return!0},this.charReceived=function(t){var e=b(t);return!isUndefinedOrNull(e)&&(y.onModify()&&(y.keyStroke(e),h.invalidate()),!0)},this.doubleClick=function(t,e){var n=k(t);return!!y.getRect().containsPoint(n)&&(y.selectWord(n),h.invalidate(),!0)},this.cut=function(){this.copy(),this.delete()},this.copy=function(){if(y.hasSelection()){var t=y.getSelectedText();window.copyTextToClipboard(t)}},this.paste=function(){var t=f.data;if(t){for(var e="",n=0;n<t.length;n++){var r=b(t.charAt(n));isUndefinedOrNull(r)||(e+=r)}y.onModify()&&(y.keyStroke(e),h.invalidate())}},this.delete=function(){y.onModify()&&(y.delete(!1),h.invalidate())},this.hasSelection=function(){return y.hasSelection()},this.draw=function(t,e){if(t==y.getPageIndex()){var r=y.getRect();e.pushState();var o=n.getViewToPageMatrix(h,t);e.concatCTM(o);var i=h.getDocument().getPage(t).getCropBox();e.clipRect(a.default.rect(0,0,i.width,i.height));var l=y.getRotate();0!==l&&(e.translateCTM(r.left,r.top),e.rotateCTM(-l),e.translateCTM(-r.left,-r.top)),n.drawField(e,y),S(e),window.deviceDetect.isPhone()&&function(t,e){e&&s.drawFrame(t,a.default.quadFromRect(e),null,v,T)}(e,r),e.popState()}},this.canUndo=function(){return y.canUndo()},this.canRedo=function(){return y.canRedo()},this.undo=function(){y.undo(),h.invalidate()},this.redo=function(){y.redo(),h.invalidate()},this.finalize=function(e){void 0===e&&(e=!0),y.clearUndoRedoStack(),e?y.commitChanges().catch(function(t){y.cancelChanges()}):y.cancelChanges(),h.setSelection(null),L(),t.$emit("event:widget-textfield-view-create",null)},this.commitChanges=function(){return y.commitChanges()},this.refresh=function(){y.refresh(),M(0,0)};var M=function(t,r){h.invalidate();var i=y.getCharQuad(r),l=a.default.rect(i.top_left().x,i.top_left().y,i.bottom_left().x,i.bottom_left().y),u=y.getRect(),d=a.default.rotationMatrix(-y.getRotate(),u.left_top()),s=d.mapPoint(l.left_top()),f=d.mapPoint(l.right_bottom());s=n.getViewToPageMatrix(h,y.getPageIndex()).mapPoint(s),f=n.getViewToPageMatrix(h,y.getPageIndex()).mapPoint(f);var p={};p.pageIndex=P.getPageIndex(),p.top=s,p.bottom=f,h.onCaretPositionChanged(p),o.default.BLSelectionOperations.kBLSelectionAllowPaste,t!=r?(o.default.BLSelectionOperations.kBLSelectionAllowCopy,o.default.BLSelectionOperations.kBLSelectionAllowCut):(~o.default.BLSelectionOperations.kBLSelectionAllowCopy,~o.default.BLSelectionOperations.kBLSelectionAllowCut);var g=y.getCurrentFont(),m=c.getSelectedFont(h.getDocument());if(null!==g&&null!==m){B=!0;var v=!1;if(m.size.id!==g.size&&(m.size={id:g.size,text:g.size},v=!0),m.descriptor.value.family!==g.originalFamily||m.descriptor.value.format!==g.format){var T=c.getRibbonBarFontCollection(h.getDocument());if(T){var b=T.document.first(function(t){return t.value.family===g.originalFamily&&t.value.format===g.format});b||(b=T.system.first(function(t){return t.value.family===g.originalFamily&&t.value.format===g.format})),b&&(m.descriptor=b,v=!0)}}m.isBold!==g.isBold()&&(m.isBold=!m.isBold,v=!0),m.isItalic!==g.isItalic()&&(m.isItalic=!m.isItalic,v=!0),m.color!==g.color&&(m.color=g.color,v=!0),v&&c.setSelectedFont(h.getDocument(),m),e(function(){B=!1})}},B=!1,L=t.$on("event-document-selected-font-changed",function(t,e){var n=e.document,a=h.getDocument();if(!isUndefinedOrNull(n)&&n.id===a.id&&!B){var i=c.getSelectedFont(a);if(!isUndefinedOrNull(i)){var l=(0,r.default)(null);switch(e.propertyName){case"descriptor":var d=u.default.createInstance({F:i.descriptor.value.family,f:i.descriptor.value.format});l.originalFamily=d.family,l.name=d.selectFamily,l.format=d.format;break;case"color":l.color=i.color.copy();break;case"size":l.size=i.size.id;break;case"isBold":case"isItalic":var s=o.default.GFontStyle.kGFontStyleRegular;i.isBold&&i.isItalic?s=o.default.GFontStyle.kGFontStyleBoldItalic:i.isBold?s=o.default.GFontStyle.kGFontStyleBold:i.isItalic&&(s=o.default.GFontStyle.kGFontStyleItalic),l.style=s;break;default:return}y.setFont(l),h.invalidate()}}}),S=function(t){var e=x();if(e){t.pushState();var n=y.getRect();t.clipRect(n);var r=i.default.LookAndFeel.TextCopySelectionColor;t.fillGeometry(e,r),t.popState()}},x=function(){var t=y.getSelectorPosition(),e=y.getCaretPosition();if(t==e)return null;t>e&&(e=[t,t=e][0]);for(var n=d.createGeometry(),r=a.default.rect(),o=0,i=t;i<e;i++){var l=y.getCharQuad(i);if(l.isRect()){var u=l.getBound();if(0==o)r=u;else if(a.default.isRectsOnSameLine(r,u,1))r.right=u.right;else{var s=r.copy();n.rectangle(s),r=u,o=1}++o}else{s=r.copy();n.rectangle(s),r=a.default.rect(),o=0,n.beginFigure(l.top_left()),n.lineTo(l.top_right()),n.lineTo(l.bottom_right()),n.lineTo(l.bottom_left()),n.endFigureClose()}}if(0!=o){s=r.copy();n.rectangle(s)}return n},k=function(t){var e=h.mapPointToPage(y.getPageIndex(),t);return e=function(t){if(0!==y.getRotate()){var e=y.getRect();t=a.default.rotationMatrix(y.getRotate(),a.default.point(e.left,e.top)).mapPoint(t)}return t}(e=n.getPageToViewMatrix(h,y.getPageIndex()).mapPoint(e))},R=function(t,e){return 0!=(t&e)};y.setOnSelChangedCallBack(M),this.refresh(),window.deviceDetect.isPhone()&&t.$emit("event:widget-textfield-view-create",{view:h,widget:y,pageIndex:this.getPageIndex(),isMultiline:!0})};return p.createInstance=function(t,e){return new g(t,e)},p}angular.module(s,["transformer-painter-module","bl-text-edit-renderer-service-module","geometry-factory-module","ui-viewer-textedit-module","bl-common-clipboard-data-factory-module"]).factory(c,f),f.$inject=["$rootScope","$timeout","bl-text-edit-renderer-service","geometry-factory","transformer-painter-service","ui-viewer-textedit-factory","bl-common-clipboard-data-factory"],window.mainApp.factory(c,getConstructor(s,c,"factory"))},"/zgi":function(t,e,n){"use strict";var r="bl-ocr-idrs-commands-factory";angular.module("bl-ocr-idrs-commands-module",[]).factory(r,["$q","$rootScope",function(t,e){return{createAddZoneCommand:function(t,e){return new function(t,e){var n=-1,r=e,a=t;this.do=function(){n=a.getCount(),a.insertZone(n,r)},this.undo=function(){a.removeZone(n)}}(t,e)},createInsertZoneCommand:function(t,e,n){return new function(t,e,n){var r=e,a=n,o=t;this.do=function(){o.insertZone(r,a)},this.undo=function(){o.removeZone(r)}}(t,e,n)},createRemoveZoneCommand:function(t,e){return new function(t,e){var n=e,r=null,a=t;this.do=function(){r=a.removeZone(n)},this.undo=function(){a.insertZone(n,r)}}(t,e)},createRemoveZonesCommand:function(t,e){return new function(t,e){var n=e,r=[],a=t;this.do=function(){var t=n.slice();t.sort(function(t,e){return e-t}),t.forEach(function(t,e,n){r.push(a.removeZone(t))})},this.undo=function(){var t=n.slice();t.sort();var e=r.length;t.forEach(function(t,n,o){a.insertZone(n,r[--e])}),r=[]}}(t,e)},createTransformZoneCommand:function(t,e,n){return new function(t,e,n){var r=e,a=n,o=t,i=null;this.do=function(){var t=o.getZone(r);i=t.clone(),t.transform(a)},this.undo=function(){o.replaceZone(r,i)}}(t,e,n)},createAddZoneSeparatorCommand:function(t,e,n){return new function(t,e,n){var r=t,a=e,o=-1,i=n,l=null;this.do=function(){var t=r.getZone(a);o=t.getSeparatorsCount(),l=t.clone(),t.insertSeparator(o,i)},this.undo=function(){r.replaceZone(a,l),o=-1}}(t,e,n)},createInsertZoneSeparatorCommand:function(t,e,n,r){return new function(t,e,n,r){var a=t,o=e,i=n,l=r,u=null;this.do=function(){var t=a.getZone(o);u=t.clone(),t.insertSeparator(i,l)},this.undo=function(){a.replaceZone(o,u)}}(t,e,n,r)},createRemoveZoneSeparatorCommand:function(t,e,n){return new function(t,e,n){var r=t,a=e,o=n,i=null;this.do=function(){var t=r.getZone(a);i=t.clone(),t.removeSeparator(o)},this.undo=function(){r.replaceZone(a,i)}}(t,e,n)}}}]),window.mainApp.factory(r,getConstructor("bl-ocr-idrs-commands-module",r,"factory"))},"0LmI":function(t,e,n){"use strict";var r=o(n("C3UN")),a=o(n("b8L+"));function o(t){return t&&t.__esModule?t:{default:t}}n("Rz7V"),n("UF/7");var i="bl-text-edit-textlayout-factory-module",l="bl-text-edit-textlayout-factory";function u(t,e,n){var o={},i=0,l=1,u=2,d=function(){var o=this,d=function(){this.start_index=0,this.num_phrases=0,this.advance=0},s=function(){this.words=[],this.num_symbols=0,this.length=0,this.height=0},c=a.default.rect(),f=a.default.rect(),p="",g=i,h=Number.MAX_VALUE,y=1.5,m=!0,v=!1,T=[],P=[],b=null,M=null;function B(e){return t.createInstance(y,e)}o.getRect=function(){return c.copy()},o.getText=function(){return p},o.getCharAtPos=function(t){for(var e=null,n=0,r=0;r<T.length;r++){var a=T[r]._text.length;if(n+a>t){e=T[r]._text[t-n];break}n+=a}return e},o.getPhraseAtPos=function(t){for(var e=null,n=0,r=0;r<T.length;r++){var a=T[r]._text.length;if(n+a>t){e=T[r];break}n+=a}return e},o.setFont=function(e,n,r){for(var a=[],o=!1,i=void 0,l=0,u=0;u<T.length;u++){var d=T[u],s=d._text.length;if(l+s<e||l>n)a.push(d),l+=s;else{var c=d._text,f=c.slice(0,Math.max(e-l,0));d._text=f,f.length>0&&"\r"!==f&&a.push(d),(i=d.getFont()).updateFont(r);var p=c.slice(Math.max(e-l,0),Math.max(n-l,0));if(p.length>0&&"\r"!==p)(g=t.createInstance(y,i))._text=p,a.push(g),o=!0;else!o&&l+s>n&&(a.push(B(i)),o=!0);var g,h=c.slice(Math.max(n-l,0),s);if(h.length>0&&"\r"!==h)(g=t.createInstance(y,d.getFont()))._text=h,a.push(g);l+=s}}0==a.length?(i||(i=T.length>0?T[T.length-1].getFont():t.createFontInstance()).updateFont(r),T=[B(i)]):T=a,m=!0,x(T,L().getWidth())},o.getPhrasesByPos=function(t,e){t>e&&(e=[t,t=e][0]);for(var n=[],r=0,a=0;a<T.length;a++){var o=T[a],i=o._text.length;if(r+i<t)r+=i;else{if(r>e)break;n.push(o),r+=i}}return n},o.keyStroke=function(t,e,n,r){for(var a=[],o=!1,i=0,l=0;l<T.length;l++){var u=T[l],d=u._text.length,s=!1;if(i+d<t||i>e)a.push(u),i+=d;else{var c=u._text.slice(0,Math.max(t-i,0));o||(c.length===u._text.length&&l+1<T.length&&(0===T[l+1]._text.length||"\r"===T[l+1]._text)?(T[l+1]._text=n+T[l+1]._text,s=!0):c+=n,o=!0),c+=u._text.slice(Math.max(e-i,0),d),i+=d,c.length>0&&(u._text=c,a.push(u)),s&&(a.push(T[l+1]),l++)}}if(0==a.length){var f=T.length>0?T[0].getFont():null;T=[B(f)]}else T=a;m=!0,x(T,L().getWidth())},o.getPhrases=function(){return saveSlice(T)},o.getLineHeightFactor=function(){return y},o.setQuadding=function(t){g!=t&&(g=t,m=!0)},o.getQuadding=function(){return g},o.getMargin=function(){return 0},o.setMaxLen=function(t){t!=h&&(t>0&&(h<=0||t<h)&&(p=p.spliceSlice(0,t)),h=t,m=!0)},o.getMaxLen=function(){return h},o.getSymbolsCount=function(){return p.length},o.getLinesCount=function(){return P.length},o.getFirstSymbol=function(t){if(t>=P.length)return p.length;for(var e=0,n=0;n<t;n++)e+=o.getNumSymbolsOnLine(n);return e},o.getNumSymbolsOnLine=function(t){return isUndefinedOrNull(t)||t>=P.length?0:P[t].num_symbols},o.getFirstSymbol=function(t){return isUndefinedOrNull(t)||0===t||t>=P.length?0:P.slice(0,t).reduce(function(t,e){return t+(e.num_symbols||0)},0)},o.getLineHeight=function(t){return isUndefinedOrNull(t)||t>=P.length?0:P[t].height},o.getLastSymbol=function(t){return t>=P.length?p.length:o.getFirstSymbol(t)+o.getNumSymbolsOnLine(t)-1},o.getLineWithSymbol=function(t){for(var e=0,n=0;n<P.length;++n)if((e+=o.getNumSymbolsOnLine(n))>t)return n;return o.getLinesCount()-1},o.getWordPositions=function(t){for(var e=0,n=0;n<T.length;n++){var r=T[n];if(r.getRect().containsPoint(t))return{caret:e+r._text.length,selector:e};e+=r._text.length}},o.getSymbolAtPoint=function(t){for(var e=o.getFirstSymbol(0),n=o.getLinesCount(),r=0;r<n;++r){var i=P[r],l=(c=T[i.words[0].start_index]).getRect();if(!a.default.floatLt(l.max_y(),t.y)){for(var u=0;u<i.words.length;u++)for(var d=i.words[u],s=0;s<d.num_phrases;s++){l=(c=T[d.start_index+s]).getRect();for(var c,f=c._text.length,g=l.min_x(),h=0;h<f;++h){var y=c.getSymbolRect(h).getWidth();if(g+=y,a.default.floatLt(t.x,g))return a.default.floatLt(t.x,g-.5*y)||a.default.floatEq(g,l.max_x())?e+h:e+ ++h}e+=f}return e-1}e+=i.num_symbols}return p.length-1},o.getCharQuad=function(t){for(var e=0,n=0;n<P.length;++n){var r=P[n].num_symbols;if(e+r>t)for(var o=0;o<P[n].words.length;o++)for(var i=P[n].words[o],l=0;l<i.num_phrases;++l){var u=T[i.start_index+l],d=u._text.length;if(e+d>t)return u.getSymbolQuad(t-e);e+=d}e+=r}var s,c=T.length-1,f=T[c];if(0==f._text.length){var p=(s=f.getRect()).min_x();s.left=s.right=p}else{var g=(s=f.getSymbolRect(f._text.length-1)).max_x();s.left=s.right=g}return a.default.quadFromRect(s)},o.getLineRect=function(t){var e;if(t<P.length)for(var n=P[t],r=0;r<n.words.length;r++)for(var o=n.words[r],i=0;i<o.num_phrases;++i){var l=T[o.start_index+i].getRect();e=e.isAreaEmpty()?l:a.default.unionRects(e,l)}return e},o.getMaxLineWidth=function(){for(var t=0,e=0;e<P.length;e++){var n=P[e];t<n.length&&(t=n.length)}return t},o.isNeedUpdate=function(){return m};var L=function(){var t=c.copy();return t.inflate(-0,-0),t};function S(e){var n=e.style;return n&&(n==r.default.GFontStyle.kGFontStyleBold?n=r.default.GFontStyle.kGFontStyleItalic:n==r.default.GFontStyle.kGFontStyleItalic&&(n=r.default.GFontStyle.kGFontStyleBold)),t.createFontInstance(e.size,e.selectFamily,e.family,n,e.color,e.format)}function x(e,n,r){if(m){var a=v?Math.max(f.width-c.left,n):n,o=L();P=[],T=[],p="";var i=o.min_x(),l=o.min_y(),u=new s,g=0;r||(e=function(e){return e.reduce(function(e,n){var r=void 0;if(n._text.indexOf(" ")>=0){r=[];for(var a=n._text.split(" "),o=0;o<a.length;o++){var i=a[o];if(i.length>0){var l=t.createInstance(y,n.getFont());l._text=i,r.push(l)}if(o<a.length-1||1===a.count){var u=t.createInstance(y,n.getFont());u._text=" ",r.push(u)}}}else r=n;return e.concat(r)},[])}(e=function(t){return t.reduce(function(t,e){if(0===t.length)return t.concat(e);var n=t[t.length-1];return!n._text.endsWith("\n")&&n.getFont().isEqual(e.getFont())?(n._text+=e._text,t):t.concat(e)},[])}(e=function(e){return e.reduce(function(e,n){n._text=n._text.replace(new RegExp("\r","g"),"");var r=void 0;if(n._text.indexOf("\n")>=0){r=[];for(var a=n._text.split("\n"),o=0;o<a.length;o++){var i=a[o],l=t.createInstance(y,n.getFont());l._text=i,o<a.length-1&&(l._text+="\n"),r.push(l)}}else r=n;return e.concat(r)},[])}(e))));for(var h=0;h<e.length;h++){var B=e[h],S=B.getFont(),R=t.createInstance(y,S);R.translate(i,l),T.push(R);var F=new d;F.start_index=T.length-1,F.num_phrases=1,F.advance=0,u.words.push(F);for(var A=B._text,E=0;E<A.length;E++){var _=A[E];_<" "&&"\r"!=_&&"\n"!=_&&(_=" "),R._text+=_;var I=R.getSymbolRect(R._text.length-1).getWidth();if(g+=I,F.advance+=I,i+=I,E==A.length-1&&"\n"==A[E]&&(k(u,n,g),i=o.min_x(),l+=u.height,(R=t.createInstance(y,S)).translate(i,l),T.push(R),(F=new d).start_index=T.length-1,F.num_phrases=1,F.advance=0,(u=new s).words.push(F),g=0),g>n){if(v&&g<a){n=g;continue}var O=0;if(!(u.words.length>1))return x(e,g,!0);O+=F.advance,g-=F.advance;var w=i-F.advance,N=l;u.words.pop(),k(u,n,g);for(var H=(i=o.min_x())-w,D=(l+=u.height)-N,j=0;j<F.num_phrases;++j){T[F.start_index+j].translate(H,D)}(u=new s).words.push(F),g=O,i+=O}}}k(u,n,g),m=!1,p=T.reduce(function(t,e){return t+(e._text||"")},"");var G=!1,U=P.reduce(function(t,e){return t+(e.height||0)},0);if(c.height<U&&(c.bottom+=U-c.height,G=!0),c.width<n&&(c.right+=n-c.width,G=!0),G&&M){var z=M.getTextBlock();z&&(z.rect=C(b,M.getPageIndex(),c),M.updateTransform())}}}function k(t,e,n){var r=F(g,e,n);t.length=n,t.num_symbols=0;for(var a=null,o=0;o<t.words.length;++o)for(var i=t.words[o],l=0;l<i.num_phrases;++l){var u=T[i.start_index+l];t.num_symbols+=u._text.length,u.translate(r,0);var d=u.getRect().height;t.height<d&&(t.height=u.getRect().height,a=u)}P.push(t);var s=T[i.start_index+i.num_phrases-1];if(R(s)&&t.num_symbols++,a)for(o=0;o<t.words.length;++o)for(i=t.words[o],l=0;l<i.num_phrases;++l){(u=T[i.start_index+l])!==a&&u.translate(0,t.height-u.getRect().height-a.getBottomOffset()+u.getBottomOffset())}}o.getSpans=function(){var t=[];return T.forEach(function(e,n){var a={text:e._text.replace(/\u200B/g,"").replace(/\uFEFF/g,"").replace(/\r/g,"")},o=e.getFont(),i=o.style;o.style==r.default.GFontStyle.kGFontStyleRegular?i=r.default.FontStyle.Regular:o.style==r.default.GFontStyle.kGFontStyleBold?i=r.default.FontStyle.Bold:o.style==r.default.GFontStyle.kGFontStyleItalic?i=r.default.FontStyle.Italic:o.style==r.default.GFontStyle.kGFontStyleBoldItalic&&(i=r.default.FontStyle.BoldItalic);var l={F:o.originalFamily,f:o.format,S:o.size,s:i,C:o.color.toHex(!0)};a.font=l,t.push(a)}),t},o.init=function(e,r,a){if(b=e,M=a){var o=M.getTextBlock();if(o){if(T=[],o.lines.forEach(function(e,n){var r=S(e.font),a=t.createInstance(y,r);a._text=e.text,a._text=a._text.replace(new RegExp("\r\n","g"),"\n"),a._text=a._text.replace(new RegExp("\r","g"),"\n"),n==o.lines.length-1&&(a._text=a._text.replace(/\n+$/,"")),T.push(a)}),0==T.length){var i=null,l=n.getSelectedFont(b.getDocument());null!=l&&(i=S(l.toPdfFont())),T.push(B(i))}c=A(b,r).mapRect(o.rect),f=A(b,r).mapRect(b.getDocument().getPage(r).getPageBox()),m=!0,v=!!o.iw,x(T,L().getWidth())}}};var R=function(t){return!t._text.endsWith("\n")&&!t._text.endsWith("\r")&&(t._text+="\r",!0)},F=function(t,e,n){switch(t){case i:return 0;case l:return.5*(e-n);case u:return e-n}return 0},A=function(t,n){return-1!==n?e.getPageToViewMatrix(t,n):a.default.matrix()},C=function(t,n,r){var o=function(t,n){return-1!==n?e.getViewToPageMatrix(t,n):a.default.matrix()}(t,n),i=a.default.quad();return i.tl=o.mapPoint(a.default.point(r.left,r.top)),i.tr=o.mapPoint(a.default.point(r.right,r.top)),i.bl=o.mapPoint(a.default.point(r.left,r.bottom)),i.br=o.mapPoint(a.default.point(r.right,r.bottom)),a.default.rect(i.tl.x,i.tl.y,i.br.x,i.br.y)}};return o.createInstance=function(){return new d},o}angular.module(i,["bl-text-edit-phrase-factory-module","bl-text-edit-renderer-service-module","ui-viewer-textedit-module"]).factory(l,u),u.$inject=["bl-text-edit-phrase-factory","bl-text-edit-renderer-service","ui-viewer-textedit-factory"],window.mainApp.factory(l,getConstructor(i,l,"factory"))},"0j8N":function(t,e,n){"use strict";var r=o(n("C3UN")),a=o(n("b8L+"));function o(t){return t&&t.__esModule?t:{default:t}}n("5UMD"),n("/zgi");var i="bl-ocr-idrs-transformer-factory";angular.module("bl-ocr-idrs-transformer-module",["bl-edit-utilites-module","bl-ocr-idrs-commands-module"]).factory(i,["$rootScope","bl-edit-utilites-service","bl-ocr-idrs-commands-factory",function(t,e,n){return{createInstance:function(t,o){return new function(t,o){var i=o,l=t,u=l.getZones(),d=u.getZone(i),s=a.default.identityMatrix(),c=s.copy(),f=r.default.TransformType.TRANSFORM_NONE,p=this;p.getBBox=function(){return d.getRect()},p.isPerformingOperation=function(){return f!=r.default.TransformType.TRANSFORM_NONE},p.getOperationType=function(){return f},p.startOperation=function(t){f=t,c=s.copy()},p.endOperation=function(){if(!s.isEqual(c)){var t=n.createTransformZoneCommand(u,i,c);l.do(t),c=a.default.identityMatrix(),s=a.default.identityMatrix()}f=r.default.TransformType.TRANSFORM_NONE},p.getTransform=function(){return s},p.setOperationTransform=function(t){var n=l.getContentSize().copy(),r=a.default.rect(0,0,n.width,n.height);c=e.correctCTMToRespectPageBox(r,p.getUserSpaceRect(),t)},p.getOperationTransform=function(){return c},p.getRotationOrigin=function(){return p.getBounds().getCenter()},p.getUserSpaceRect=function(){var t=a.default.quadFromRect(d.getRect());return s.invert().mapQuad(t).getBound()},p.getOperationBounds=function(){var t=a.default.quadFromRect(d.getRect()),e=s.invert();return c.mapQuad(e.mapQuad(t))},p.getBounds=function(){return a.default.quadFromRect(d.getRect())},p.hitTest=function(t){var e=s.invert();if(!e)return!1;var n=e.mapPoint(t);return p.getUserSpaceRect().containsPoint(n)},p.getZone=function(){return d},p.deleteZone=function(){var t=n.createRemoveZoneCommand(u,i);l.do(t)},p.getPosition_PropertyTest=function(){var t=f===r.default.TransformType.TRANSFORM_NONE?s.copy():c.copy();return g(t).position},p.getScaling_PropertyTest=function(){var t=f===r.default.TransformType.TRANSFORM_NONE?s.copy():c.copy();return g(t).scaling},p.getRotation_PropertyTest=function(){var t=f===r.default.TransformType.TRANSFORM_NONE?s.copy():c.copy();return g(t).rotation},p.setRotation=function(t){var e=g(s);e.rotation=t,s=h(e);var r=n.createTransformZoneCommand(u,i,a.default.rotationMatrix(t));l.do(r)};var g=function(t){var e={scaling:a.default.size(),rotation:0,shear:0,position:a.default.point()};e.scaling.width=Math.sqrt(t.a*t.a+t.b*t.b);var n=t.b/e.scaling.width,r=t.a/e.scaling.width;return e.rotation=Math.atan2(n,r),e.scaling.height=t.d*r-t.c*n,e.shear=(t.c+t.d-e.scaling.height*(r-n))/e.scaling.height*(r+n),e.position.x=t.e,e.position.y=t.f,e},h=function(t){return a.default.scalingMatrix(t.scaling.width,t.scaling.height).multiply(a.default.rotationMatrix(t.rotation)).multiply(a.default.translationMatrix(t.position.x,t.position.y))}}(t,o)}}}]),window.mainApp.factory(i,getConstructor("bl-ocr-idrs-transformer-module",i,"factory"))},"1c85":function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("C3UN"));function o(t){return t&&t.__esModule?t:{default:t}}n("ZqXQ"),n("5UMD");var i="bl-edit-multiselecttransformer-module",l="bl-edit-multiselecttransformer-factory";angular.module(i,["bl-edit-utilites-module","bl-edit-editobject-module","pdf-manager-module"]).factory(l,["$q","$rootScope","bl-edit-utilites-service","bl-edit-editobject-factory","pdf-manager-factory",function(t,e,n,o,i){return{createInstance:function(t,e,n,o){return new function(t,e,n,o){var i=t,l=e,u=(i.getPage(l),n),d=o,s=null,c=a.default.TransformType.TRANSFORM_NONE,f=r.default.identityMatrix(),p=f.copy(),g=r.default.rect(),h=function(){for(var t=!1,e=void 0,n=0;n<u.length;n++)e=u[n].getBounds(),t?g=r.default.unionRects(g,e.getBound()):(g=e.getBound(),t=!0)};h();var y=this;y.getDoc=function(){return i},y.getPageIndex=function(){return l},y.getObjects=function(){return u},y.removeObject=function(t){for(var e=u.length;e--;)if(e==t){var n=u.indexOf(t);n>-1&&u.splice(n,1),h();break}},y.isPerformingOperation=function(){return c!=a.default.TransformType.TRANSFORM_NONE},y.getOperationType=function(){return c},y.startOperation=function(t){c=t,p=f.copy()},y.endOperation=function(){s=null,f.isEqual(p),c=a.default.TransformType.TRANSFORM_NONE},y.getUserSpaceRect=function(){return g},y.getTransform=function(){return f},y.setOperationTransform=function(t){p=t},y.getOperationTransform=function(){return p},y.getRotationOrigin=function(){return y.getBounds().getCenter()},y.getOperationBounds=function(){var t=r.default.quadFromRect(y.getUserSpaceRect());return p.mapQuad(t)},y.getBounds=function(){var t=r.default.quadFromRect(y.getUserSpaceRect());return f.mapQuad(t)},y.hitTest=function(t){for(var e=0;e<u.length;e++)if(u[e].hitTestPoint(t))return!0;return!1},y.delete=function(){};var m=function(t){var e={scaling:r.default.size(),rotation:0,shear:0,position:r.default.point()};e.scaling.width=Math.sqrt(t.a*t.a+t.b*t.b);var n=t.b/e.scaling.width,a=t.a/e.scaling.width;return e.rotation=Math.atan2(n,a),e.scaling.height=t.d*a-t.c*n,e.shear=(t.c+t.d-e.scaling.height*(a-n))/e.scaling.height*(a+n),e.position.x=t.e,e.position.y=t.f,e};y.getPosition_PropertyTest=function(){var t=c===a.default.TransformType.TRANSFORM_NONE?f.copy():p.copy();return m(t).position},y.getRotation_PropertyTest=function(){var t=c===a.default.TransformType.TRANSFORM_NONE?f.copy():p.copy();return m(t).rotation},y.getScaling_PropertyTest=function(){var t=c===a.default.TransformType.TRANSFORM_NONE?f.copy():p.copy();return m(t).scaling},y.setSnapData=function(t){d=t},y.getSnapData=function(){return d},y.setSnapInfo=function(t){s=t},y.getSnapInfo=function(){return s}}(t,e,n,o)}}}]),window.mainApp.factory(l,getConstructor(i,l,"factory"))},"3Gts":function(t,e,n){"use strict";var r=l(n("b8L+")),a=l(n("iArn")),o=l(n("C3UN")),i=l(n("aqxP"));function l(t){return t&&t.__esModule?t:{default:t}}var u="bl-edit-input-snapdata-factory";angular.module("bl-edit-input-snapdata-module",["ui-usersettings-module"]).factory(u,["$rootScope","ui-usersettings-factory",function(t,e){var n=parseFloat("3.402823466e+38F"),l=function(t,e,n){return t>=e-n&&t<e+n},u=function(t,e,n,a){return{pointA:r.default.point(t,e),pointB:r.default.point(n,a)}},d=function(t,e){void 0===e&&(e=!1);var n=r.default.cloneRect(t);n.sort();var a=n.left,o=n.right,i=a+(o-a)/2,l=n.top,u=n.bottom;return{L:a,R:o,Cx:i,T:l,B:u,Cy:u+(l-u)/2,guide:e}},s=function(){var t=void 0,s=[];this.setPageBox=function(e){t=e},this.addRect=function(t,e){t&&s.push(d(t,e))},this.snapMove=function(c,f,p){var g=d(c),h=5/p.zoom,y=new function(){this.min_dx=0,this.min_abs_dx=n,this.min_dy=0,this.min_abs_dy=n,this.vert_snap_lines=[],this.horz_snap_lines=[],this.resetMinDx=function(t,e){this.min_dx=t,this.min_abs_dx=e,this.vert_snap_lines=[]},this.resetMinDy=function(t,e){this.min_dy=t,this.min_abs_dy=e,this.horz_snap_lines=[]},this.addVertLine=function(t,e,n){for(var a=0;a<this.vert_snap_lines.length;++a){var o=this.vert_snap_lines[a];if(r.default.floatEq(this.vert_snap_lines[a].pointA.x,t))return o.pointA.y=Math.min(o.pointA.y,e),void(o.pointB.y=Math.max(o.pointB.y,n))}this.vert_snap_lines.push(u(t,e,t,n))},this.addHorzLine=function(t,e,n){for(var a=0;a<this.horz_snap_lines.length;++a){var o=this.horz_snap_lines[a];if(r.default.floatEq(this.horz_snap_lines[a].pointA.y,t))return o.pointA.x=Math.min(o.pointA.x,e),void(o.pointB.x=Math.max(o.pointB.x,n))}this.horz_snap_lines.push(u(e,t,n,t))}},m=s;if(p.snapToGrid){for(var v=e.settings.layout.units,T=a.default.convert.to(v,o.default.Units.point,1),P=a.default.convert.to(v,o.default.Units.point,1),b=(o.default.Units.inch,T);b*p.zoom>16;)b/=2;for(;b*p.zoom<8;)b*=2;for(var M=P;M*p.zoom>16;)M/=2;for(;M*p.zoom<8;)M*=2;for(var B=t.left;B<=t.right;)m.push(d(r.default.rect(B,t.top,B,t.bottom),!0)),B+=b;for(var L=t.top;L>=t.bottom;)m.push(d(r.default.rect(t.left,L,t.right,L),!0)),L-=M}else m.push(d(t,!0));for(var S=[],x=[],k=[],R=[],F=.01/p.zoom,A=0;A!=m.length;++A){if(m[A].guide||(m[A].T<g.B&&m[A].B>g.T&&(m[A].R<g.L&&S.push(m[A]),m[A].L>g.R&&x.push(m[A])),m[A].L<g.R&&m[A].R>g.L&&(m[A].B<g.T&&k.push(m[A]),m[A].T>g.B&&R.push(m[A]))),l(g.L,m[A].L,h)){var C=m[A].L-g.L;(j=Math.abs(C))<=y.min_abs_dx+F&&(j<y.min_abs_dx-F&&y.resetMinDx(C,j),y.addVertLine(m[A].L,m[A].T,m[A].B))}if(l(g.R,m[A].R,h)){C=m[A].R-g.R;(j=Math.abs(C))<=y.min_abs_dx+F&&(j<y.min_abs_dx-F&&y.resetMinDx(C,j),y.addVertLine(m[A].R,m[A].T,m[A].B))}if(l(g.Cx,m[A].Cx,h)){C=m[A].Cx-g.Cx;(j=Math.abs(C))<=y.min_abs_dx+F&&(j<y.min_abs_dx-F&&y.resetMinDx(C,j),y.addVertLine(m[A].Cx,m[A].T,m[A].B))}if(l(g.T,m[A].T,h)){var E=m[A].T-g.T;(U=Math.abs(E))<=y.min_abs_dy+F&&(U<y.min_abs_dy-F&&y.resetMinDy(E,U),y.addHorzLine(m[A].T,m[A].L,m[A].R))}if(l(g.B,m[A].B,h)){E=m[A].B-g.B;(U=Math.abs(E))<=y.min_abs_dy+F&&(U<y.min_abs_dy-F&&y.resetMinDy(E,U),y.addHorzLine(m[A].B,m[A].L,m[A].R))}if(l(g.Cy,m[A].Cy,h)){E=m[A].Cy-g.Cy;(U=Math.abs(E))<=y.min_abs_dy+F&&(U<y.min_abs_dy-F&&y.resetMinDy(E,U),y.addHorzLine(m[A].Cy,m[A].L,m[A].R))}}var _=[];if(S.length>0){S.sort(function(t,e){return t.R>e.R?-1:t.R<e.R?1:0}),(G=[]).push(S[0]);var I=S[0].L;for(A=1;A<S.length;++A)S[A].R<I&&(G.push(S[A]),I=S[A].L);var O=0,w=0;if(G.length>=2){var N=G[0].L-G[1].R,H=G[0].T,D=G[0].B;for(A=1;A<G.length;++A){if(!r.default.floatEq(G[A-1].L-G[A].R,N)){G.length=A;break}G[A].T<H&&(H=G[A].T),G[A].B>D&&(D=G[A].B)}O=G[0].R+N,w=H+(D-H)/2}else O=G[0].R+10,w=G[0].Cy;if(l(g.L,O,h)){C=O-g.L;if((j=Math.abs(C))<=y.min_abs_dx+F){j<y.min_abs_dx-F&&y.resetMinDx(C,j),_.push(u(G[0].R,w,O,w));for(A=1;A<G.length;++A)_.push(u(G[A].R,w,G[A-1].L,w))}}}if(x.length>0){x.sort(function(t,e){return t.L<e.L?-1:t.L>e.L?1:0}),(G=[]).push(x[0]);for(I=x[0].R,A=1;A<x.length;++A)x[A].L>I&&(G.push(x[A]),I=x[A].R);O=0,w=0;if(G.length>=2){for(N=G[1].L-G[0].R,H=G[0].T,D=G[0].B,A=1;A<G.length;++A){if(!r.default.floatEq(G[A].L-G[A-1].R,N)){G.length=A;break}G[A].T<H&&(H=G[A].T),G[A].B>D&&(D=G[A].B)}O=G[0].L-N,w=H+(D-H)/2}else O=G[0].L-10,w=G[0].Cy;if(l(g.R,O,h)){var j;C=O-g.R;if((j=Math.abs(C))<=y.min_abs_dx+F){j<y.min_abs_dx-F&&y.resetMinDx(C,j),_.push(u(G[0].L,w,O,w));for(A=1;A<G.length;++A)_.push(u(G[A].L,w,G[A-1].R,w))}}}if(k.length>0){k.sort(function(t,e){return t.B>e.B?-1:t.B<e.B?1:0}),(G=[]).push(k[0]);for(I=k[0].T,A=1;A<k.length;++A)k[A].B<I&&(G.push(k[A]),I=k[A].T);O=0,w=0;if(G.length>=2){for(N=G[0].T-G[1].B,H=G[0].L,D=G[0].R,A=1;A<G.length;++A){if(!r.default.floatEq(G[A-1].T-G[A].B,N)){G.length=A;break}G[A].L<H&&(H=G[A].L),G[A].R>D&&(D=G[A].R)}O=G[0].B+N,w=H+(D-H)/2}else O=G[0].B+10,w=G[0].Cx;if(l(g.T,O,h)){E=O-g.T;if((U=Math.abs(E))<=y.min_abs_dy+F){U<y.min_abs_dy-F&&y.resetMinDy(E,U),_.push(u(w,G[0].B,w,O));for(A=1;A<G.length;++A)_.push(u(w,G[A].B,w,G[A-1].T))}}}if(R.length>0){var G;R.sort(function(t,e){return t.T<e.T?-1:t.T>e.T?1:0}),(G=[]).push(R[0]);for(I=R[0].B,A=1;A<R.length;++A)R[A].T>I&&(G.push(R[A]),I=R[A].B);O=0,w=0;if(G.length>=2){for(N=G[1].T-G[0].B,H=G[0].L,D=G[0].R,A=1;A<G.length;++A){if(!r.default.floatEq(G[A].T-G[A-1].B,N)){G.length=A;break}G[A].L<H&&(H=G[A].L),G[A].R>D&&(D=G[A].R)}O=G[0].T-N,w=H+(D-H)/2}else O=G[0].T-10,w=G[0].Cx;if(l(g.B,O,h)){var U;E=O-g.B;if((U=Math.abs(E))<=y.min_abs_dy+F){U<y.min_abs_dy-F&&y.resetMinDy(E,U),_.push(u(w,G[0].T,w,O));for(A=1;A<G.length;++A)_.push(u(w,G[A].T,w,G[A-1].B))}}}var z=r.default.point(f.x+y.min_dx,f.y+y.min_dy),V=g.L+y.min_dx,q=g.R+y.min_dx,Z=g.T+y.min_dy,W=g.B+y.min_dy,K=[];for(A=0;A<y.vert_snap_lines.length;++A){($=y.vert_snap_lines[A]).pointA.y=Math.min($.pointA.y,Z),$.pointB.y=Math.max($.pointB.y,W),K.push($)}for(A=0;A<y.horz_snap_lines.length;++A){var $;($=y.horz_snap_lines[A]).pointA.x=Math.min($.pointA.x,V),$.pointB.x=Math.max($.pointB.x,q),K.push($)}return{snappedAnchor:z,snapInfo:i.default.createSnapInfo(K,_,[])}}};return{createInstance:function(){return new s}}}]),window.mainApp.factory(u,getConstructor("bl-edit-input-snapdata-module",u,"factory"))},"3cyn":function(t,e,n){"use strict";var r=o(n("Xxa5")),a=o(n("exGp"));function o(t){return t&&t.__esModule?t:{default:t}}var i="bl-selecteditobjectservice-insert-module",l="bl-selecteditobjectservice-insert-factory";angular.module(i,["bl-insertmodule-module"]).factory(l,["$rootScope","ui-helper-factory",function(t,e){var n=e.ondemand.getInsertModuleService,o={};return o.selectObject=function(){var t=(0,a.default)(r.default.mark(function t(e,a,o){var i,l,u,d,s;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i={selected:!1,inputHandler:null},e&&a){t.next=3;break}return t.abrupt("return",i);case 3:if("Transform"===a.getObjectType()){t.next=5;break}return t.abrupt("return",i);case 5:if(l=a.getData(),u=l.getElement(),!((d=a.getPageIndex())<0)){t.next=10;break}return t.abrupt("return",i);case 10:return t.next=12,n();case 12:return s=t.sent,t.next=15,s.createAndSetTransformer(e,d,u,o);case 15:return i.inputHandler=t.sent,i.selected=!0,t.abrupt("return",i);case 18:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),o}]),window.mainApp.factory(l,getConstructor(i,l,"factory"))},"4KtE":function(t,e,n){"use strict";var r=l(n("b8L+")),a=l(n("C3UN")),o=l(n("VmtT")),i=l(n("Jrzz"));function l(t){return t&&t.__esModule?t:{default:t}}n("ibtX");var u="bl-edit-polylineannotedit-inputhandler-module",d="bl-edit-polylineannotedit-inputhandler-factory";angular.module(u,["bl-edit-annoteditobject-module"]).factory(d,["$rootScope","bl-edit-polylineannoteditobject-factory","authentication-service",function(t,e,n){n.defaultPreferences;var l={},u=function(t){var n=t,l=!1,u=null,d=!1,s=e.HandleType.kHandleNone,c=void 0,f=r.default.point(),p=void 0,g=void 0,h=function(){var t=u?u.getAnnot():null;return t&&t.isLocked},y=function(t,n,a,o){return function(t,e,n){return r.default.circleContainsPoint(t,e,n)}(n,a,o)?function(t,n){return{type:e.TransformType.kTransformMovePoint,handle:e.HandleType.kHandleNone,active:n,verticeIndex:t}}(t,a):null},m=function(t){var l,d=null,s=u.getPageIndex();if(!((l=n.getVisibleRange()).startPage<=s&&s<=l.endPage))return!1;var c=o.default.LookAndFeel.TransformerScaleZoneRadius;if(u.hasAnyCurrentEditMode(a.default.EditModes.MovePoint)&&(d=function(t,e,r,a){if(!window.isArray(t))return!1;for(var o=0;o<t.length;o++){var l=n.mapPointToDevice(e,i.default.verticeToPoint(t[o])),u=y(o,r,l,a);if(u)return u}return null}(u&&u.getVertices(),s,t,c)),d)return d;var f=function(t,e,n){var a=t.mapPointToDevice(e,n.tl),o=t.mapPointToDevice(e,n.tr),i=t.mapPointToDevice(e,n.bl),l=t.mapPointToDevice(e,n.br);return r.default.quadFromPoints(a,o,i,l)}(n,s,r.default.quadFromRect(u.getRect()));if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,f.top_left(),c))return d={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopLeft,active:f.top_left()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,f.top_right(),c))return d={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopRight,active:f.top_right()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Move)&&r.default.circleContainsPoint(t,f.top_right(),c))return d={type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleNone,active:f.top_right()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,f.bottom_left(),c))return d={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomLeft,active:f.bottom_left()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,f.bottom_right(),c))return d={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomRight,active:f.bottom_right()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(f.center_right(),f.center_left())>=3*c){if(r.default.circleContainsPoint(t,f.top_center(),c))return d={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopMiddle,active:f.top_center()};if(r.default.circleContainsPoint(t,f.bottom_center(),c))return d={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomMiddle,active:f.bottom_center()}}if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(f.top_center(),f.bottom_center())>=3*c){if(r.default.circleContainsPoint(t,f.center_left(),c))return d={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleLeftMiddle,active:f.center_left()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,f.center_right(),c))return d={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleRightMiddle,active:f.center_right()}}if(u.hasAnyCurrentEditMode(a.default.EditModes.Rotate)){var p=o.default.LookAndFeel.TransformerRotateZoneRadius;if(r.default.circleContainsPoint(t,f.top_left(),p))return d={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopLeft,active:f.top_left()};if(r.default.circleContainsPoint(t,f.top_right(),p))return d={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopRight,active:f.top_right()};if(r.default.circleContainsPoint(t,f.bottom_left(),p))return d={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomLeft,active:f.bottom_left()};if(r.default.circleContainsPoint(t,f.bottom_right(),p))return d={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomRight,active:f.bottom_right()};if(r.default.pointsDistance(f.center_right(),f.center_left())>=3*c){if(r.default.circleContainsPoint(t,f.top_center(),p))return d={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopMiddle,active:f.top_center()};if(r.default.circleContainsPoint(t,f.bottom_center(),p))return d={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomMiddle,active:f.bottom_center()}}if(r.default.pointsDistance(f.top_center(),f.bottom_center())>=3*c){if(r.default.circleContainsPoint(t,f.center_left(),p))return d={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleLeftMiddle,active:f.center_left()};if(r.default.circleContainsPoint(t,f.center_right(),p))return d={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleRightMiddle,active:f.center_right()}}}var g=n.mapPointToPage(s,t);return u.hitTest(g)?d=u.hasAnyCurrentEditMode(a.default.EditModes.Move)?{type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleNone,active:t}:{type:e.TransformType.kTransformNone,handle:e.HandleType.kHandleNone,active:t}:null},v=function(){return function(){if(u.getAnnotSubtype()===a.default.pdfAnnotationType.widget){var t=u.getAnnot();return t&&t.acroform&&t.acroform.type===a.default.pdfAcroformType.signature}return!1}()?a.default.ContextMenuType.Signature:u.getAnnotSubtype()===a.default.pdfAnnotationType.link?a.default.ContextMenuType.Link:a.default.ContextMenuType.Annotation},T=function(t,r,o){var i=a.default.BLCursorType.kBLCursorArrow;switch(t){case e.TransformType.kTransformMove:i=a.default.BLCursorType.kBLCursorMove;break;case e.TransformType.kTransformRotate:u.getAnnotSubtype()!=a.default.pdfAnnotationType.text&&(i=a.default.BLCursorType.kBLCursorRotate);break;case e.TransformType.kTransformScale:var l=n.getPagesRotation(),d=n.document,s=u.getPageIndex(),c=[[0,7,1,3,5,0,2,4,6],[0,5,7,1,3,6,0,2,4],[0,3,5,7,1,4,6,0,2],[0,1,3,5,7,2,4,6,0]][d.getPage(s).getRotate(l)/90][r];i=(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?a.default.BLCursorType.kBLCursorScaleProportional_N:a.default.BLCursorType.kBLCursorScale_N)+c}n.setCursor(i)},P=function(t,e){var a=u.getRect(),o=f.copy(),i=t.copy();if(!o.isEqual(i)){u.setSnapInfo(null);var l=r.default.point(i.x-o.x,i.y-o.y),d=a.copy();d.offset(l.x,l.y),u.setOperationRect(d),u.transrormObject(r.default.translationMatrix(l.x,l.y)),function(t,e,a,o){if(t){var i=u.getSnapData();if(i){var l;l=n.getZoom();var d=u.getOperationRect(),s=null,c=r.default.point(),f={zoom:l,snapToGrid:n.isGridEnabled()},p=i.snapMove(d,a,f);if(p&&(s=p.snapInfo,c=p.snappedAnchor),u.setSnapInfo(s),!c.isEqual(a)){var g=r.default.point(c.x-o.x,c.y-o.y),h=e.copy();h.offset(g.x,g.y),u.setOperationRect(h)}}}}(e,a,i,o),n.invalidate()}};this.initialize=function(t){u=t,n.setMagnifierEnabled(u&&u.getAnnot().enableMeasurement)},this.terminate=function(){n.setMagnifierEnabled(!1)},this.getToolName=function(){return"edit"},this.isFinished=function(){return d},this.handleEvent=function(t){switch(t.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerMoved:return n.isMagnifierEnabled()&&n.onMagnifierPositionChanged(t.pointerArgs.position),this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case a.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonDown=function(t,e){if(l)return!0;var r=u.getPageIndex(),o=m(t);if(!o)return d=!0,!1;if(h())return!1;if(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpModify,!0)){u.setOperation(o.type),s=o.handle,o.anchor,c=o.verticeIndex,p=u.getRect().getCenter(),g=0;var i=o.active.floor();f=n.mapPointToPage(r,i),n.invalidate()}return!0},this.onLButtonUp=function(t,r){if(l)return!0;if(u.getOperation()===e.TransformType.kTransformNone)return!1;if(h())return!0;l=!0;var a=m(t);return a&&T(a.type,a.handle,r),u.endOperation().finally(function(){l=!1,c=i.default.invalidIndex,n.invalidate()}),!0},this.onRButtonDown=function(t,e){return!!m(t)},this.onRButtonUp=function(t,e){return!!m(t)&&(n.showContextMenu(v(),t,a.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|a.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations),!0)},this.onMouseMove=function(t,o){if(l)return!0;if(h())return!!m(t);var d=n.mapPointToPage(u.getPageIndex(),t);switch(u.getOperation()){case e.TransformType.kTransformNone:var y=m(t);return!!y&&(n.setHighlight(null),T(y.type,y.handle,o),!0);case e.TransformType.kTransformMove:!function(t,n){P(t,!a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),T(e.TransformType.kTransformMove,s,n)}(d,o);break;case e.TransformType.kTransformScale:!function(t,o){var i=t.copy(),l=u.getRect(),d=Math.abs(l.getWidth()),c=Math.abs(l.getHeight());if(!r.default.floatEq(d,0)&&!r.default.floatEq(c,0)){var f=r.default.point(l.left,l.bottom),p=l.getCenter(),g=2*(i.x-f.x)/d,h=2*(i.y-f.y)/c;i.offset(-f.x,-f.y);var y=i.x/d,m=i.y/c,v=null;switch(s){case e.HandleType.kHandleLeftMiddle:v=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-y,1-y,f).multiply(r.default.translationMatrix(i.x,y*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-g,1-g,p):r.default.scalingMatrix(1-y,1,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopMiddle:v=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(m,m,f).multiply(r.default.translationMatrix((1-m)*d/2,0)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(h-1,h-1,p):r.default.scalingMatrix(1,m,f);break;case e.HandleType.kHandleRightMiddle:v=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(y,y,f).multiply(r.default.translationMatrix(0,(1-y)*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(g-1,g-1,p):r.default.scalingMatrix(y,1,f);break;case e.HandleType.kHandleBottomMiddle:v=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-m,1-m,f).multiply(r.default.translationMatrix(m*d/2,i.y)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-h,1-h,p):r.default.scalingMatrix(1,1-m,f).multiply(r.default.translationMatrix(0,i.y));break;case e.HandleType.kHandleTopLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var P=Math.min(1-y,m);v=r.default.scalingMatrix(P,P,f).multiply(r.default.translationMatrix((1-P)*d,0))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var b=Math.min(1-g,h-1);v=r.default.scalingMatrix(b,b,p)}else v=r.default.scalingMatrix(1-y,m,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var M=Math.min(y,m);v=r.default.scalingMatrix(M,M,f)}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var B=Math.min(g-1,h-1);v=r.default.scalingMatrix(B,B,p)}else v=r.default.scalingMatrix(y,m,f);break;case e.HandleType.kHandleBottomLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var L=Math.min(1-y,1-m);v=r.default.scalingMatrix(L,L,f).multiply(r.default.translationMatrix((1-L)*d,(1-L)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var S=Math.min(1-g,1-h);v=r.default.scalingMatrix(S,S,p)}else v=r.default.scalingMatrix(1-y,1-m,f).multiply(r.default.translationMatrix(i.x,i.y));break;case e.HandleType.kHandleBottomRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var x=Math.min(y,1-m);v=r.default.scalingMatrix(x,x,f).multiply(r.default.translationMatrix(0,(1-x)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var k=Math.min(g-1,1-h);v=r.default.scalingMatrix(k,k,p)}else v=r.default.scalingMatrix(y,1-m,f).multiply(r.default.translationMatrix(0,i.y))}v&&(u.setOperationRect(v.mapRect(l)),u.transrormObject(v)),n.invalidate(),T(e.TransformType.kTransformScale,s,o)}}(d,o);break;case e.TransformType.kTransformRotate:!function(t,o){if(!h()&&u){var i=p,l=f,d=t,c=r.default.point(l.x-i.x,l.y-i.y),y=r.default.point(d.x-i.x,d.y-i.y),m=r.default.vecAngleBetween(c,y);if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var v=g+m,P=r.default.degreeToRadian(45);m=(v=(v>0?v/P+.5:v/P-.5)*P)-g}var b=u.getRect().copy();b.offset(y.x,y.y),u.setOperationRect(b),u.transrormObject(r.default.rotationMatrix(m,i)),T(e.TransformType.kTransformRotate,s,o),n.invalidate()}}(d,o);break;case e.TransformType.kTransformMovePoint:!function(t,r){!h()&&u&&f!==t&&(c!==i.default.invalidIndex&&u.moveVertice(c,t),T(e.TransformType.kTransformMove,s,r),n.invalidate())}(d,o)}return!0},this.onKeyUp=function(t){return t==a.default.kBLKey.kBLKey_DELETE&&function(t){return!!l||!h()&&"Delete"==t&&(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpDelete,!0)&&(n.setSelection(null),u.delete(),d=!0),!0)}("Delete")}};return l.createInstance=function(t,e){return new u(e)},l}]),window.mainApp.factory(d,getConstructor(u,d,"factory"))},"5QSM":function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("oRGr"));function o(t){return t&&t.__esModule?t:{default:t}}n("VVVL");var i="bl-ocr-idrs-zone-factory";angular.module("bl-ocr-idrs-zone-module",["geometry-factory-module"]).factory(i,["$q","$rootScope","geometry-factory",function(t,e,n){var o=function(t){switch(t){case a.default.OcrZoneType.kOcrZoneNone:return a.default.OcrZoneColor.kHandAreaColor;case a.default.OcrZoneType.kOcrZoneText:return a.default.OcrZoneColor.kTextAreaColor;case a.default.OcrZoneType.kOcrZoneGraphic:return a.default.OcrZoneColor.kGraphicAreaColor;case a.default.OcrZoneType.kOcrZoneTable:return a.default.OcrZoneColor.kTableAreaColor;case a.default.OcrZoneType.kOcrZoneBarcode:return a.default.OcrZoneColor.kBarcodeAreaColor;case a.default.OcrZoneType.kOcrZoneHand:return a.default.OcrZoneColor.kHandAreaColor}return a.default.OcrZoneColor.kNoneAreaColor},i=function t(e){var i=null,l=[],u=[];i=e;for(var d=0,s=e.lines.length;d<s;d++)l.push(e.lines[d]);this.transform=function(t){i.isRectangle||c();var e=t.mapRect(i.rect.copy());i.rect=e.floor(),f(t),p(t)},this.hitTest=function(t){return!!i.rect.copy().containsPoint(t)},this.insertSeparator=function(t,e){t>u.length?console.log("Index out of range"):u.splice(t,0,e)},this.removeSeparator=function(t){t>=u.length?console.log("Index out of range"):u.splice(t,1)},this.getSeparatorsCount=function(){return u.length},this.getSeparator=function(t){return t>=u.length?(console.log("Index out of range"),null):u[t]},this.draw=function(t,e){t&&e&&(t.pushState(),g(t,e),i.isRectangle||h(t,e),y(t,e),t.popState())},this.getRect=function(){return i.rect.copy()},this.getType=function(){return i.type},this.getOcrZone=function(){return i},this.clone=function(){return new t(angular.copy(i))};var c=function(){l=[];var t=i.rect,e=[t.right,t.left,t.top],n=[t.left,t.right,t.bottom];l.push(n),l.push(e),i.lines=l,i.isRectangle=!0},f=function(t){for(var e=0,n=l.length;e<n;e++){var a=l[e],o=t.mapPoint(r.default.point(a[0],a[2])).floor(),i=t.mapPoint(r.default.point(a[1],a[2])).floor();a[0]=o.x,a[1]=i.x,a[2]=o.y}},p=function(t){for(var e=0,n=u.length;e<n;e++){var o=u[e];switch(o.type){case a.default.OcrZoneSeparatorType.kOcrZoneHorzSeparator:var i=t.mapPoint(r.default.point(0,o.position)).floor();o.position=i.y;break;case a.default.OcrZoneSeparatorType.kOcrZoneVertSeparator:var l=t.mapPoint(r.default.point(o.position,0)).floor();o.position=l.x}}},g=function(t,e){var n=o(i.type),r=e.mapRectToView(i.rect);t.strokeRect(r,n)},h=function(t,e){for(var a=o(i.type),u=parseInt("5F",16),d="rgba("+parseInt(a.substring(1,3),16)+", "+parseInt(a.substring(3,5),16)+", "+parseInt(a.substring(5,7),16)+", "+u/255+")",s=null,c=0,f=l.length;c<f;c++){var p=l[c],g=e.mapPointToView(r.default.point(p[0],p[2])).floor(),h=e.mapPointToView(r.default.point(p[1],p[2])).floor();g.offset(.5,.5),h.offset(.5,.5),s?s.lineTo(g):(s=n.createGeometry()).beginFigure(g),s.lineTo(h)}s&&(s.endFigureClose(),t.strokeGeometry(s,d,.5))},y=function(t,e){for(var l=o(i.type),d=0,s=u.length;d<s;d++){var c=u[d],f=r.default.point(),p=r.default.point();switch(c.type){case a.default.OcrZoneSeparatorType.kOcrZoneHorzSeparator:f=e.mapPointToView(r.default.point(i.rect.left,c.position)).floor(),p=e.mapPointToView(r.default.point(i.rect.right,c.position)).floor();break;case a.default.OcrZoneSeparatorType.kOcrZoneVertSeparator:f=e.mapPointToView(r.default.point(c.position,i.rect.top)).floor(),p=e.mapPointToView(r.default.point(c.position,i.rect.bottom)).floor()}f.offset(.5,.5),p.offset(.5,.5);var g=n.createGeometry();g.beginFigure(f),g.lineTo(p),g.endFigure(),t.strokeGeometry(g,l,1)}}};return{createInstance:function(t){return new i(t)},createZone:function(t,e){var n={};n.rect=t?t.copy():r.default.rect(),n.isRectangle=!0,n.type=e,n.lines=[];var a=[t.right,t.left,t.top],o=[t.left,t.right,t.bottom];return n.lines.push(a),n.lines.push(o),new i(n)},getZoneColor:o}}]),window.mainApp.factory(i,getConstructor("bl-ocr-idrs-zone-module",i,"factory"))},"5UMD":function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("b8L+"));var a="bl-edit-utilites-service";angular.module("bl-edit-utilites-module",[]).service(a,["$rootScope",function(t){var e={correctCTMToRespectPageBox:function(t,e,n){var a=n.mapQuad(r.default.quadFromRect(e));if(a.hasIntersectionRect(t))return n;var o=a.getBound();if(o.bottom>o.top){var i=o.bottom;o.bottom=o.top,o.top=i}var l=r.default.point(),u=o.getSize();return t.right>o.right&&o.left>t.left||(t.left>o.right?l.x=t.left-o.right+u.width:t.right<o.left&&(l.x=t.right-o.left-u.width)),t.top>o.top&&o.bottom>t.bottom||(t.bottom>o.top?l.y=t.bottom-o.top+u.height:t.top<o.bottom&&(l.y=t.top-o.bottom-u.height)),0==l.x&&0==l.y&&(t.left>o.left?l.x=t.left-o.left:t.right<o.right&&(l.x=t.right-o.right),t.top<o.top?l.y=t.top-o.top:t.bottom>o.bottom&&(l.y=t.bottom-o.bottom)),n.multiply(r.default.translationMatrix(l.x,l.y))},correctRectToRespectPageBox:function(t,e){if(e.hasIntersection(t))return e;var n=e.copy();if(n.bottom>n.top){var a=n.bottom;n.bottom=n.top,n.top=a}var o=r.default.point(),i=n.getSize();return t.right>n.right&&n.left>t.left||(t.left>n.right?o.x=t.left-n.right+i.width:t.right<n.left&&(o.x=t.right-n.left-i.width)),t.top>n.top&&n.bottom>t.bottom||(t.bottom>n.top?o.y=t.bottom-n.top+i.height:t.top<n.bottom&&(o.y=t.top-n.bottom-i.height)),0==o.x&&0==o.y&&(t.left>n.left?o.x=t.left-n.left:t.right<n.right&&(o.x=t.right-n.right),t.top<n.top?o.y=t.top-n.top:t.bottom>n.bottom&&(o.y=t.bottom-n.bottom)),n.offset(o.x,o.y),n},shouldSkipContainer:function(t){var e=!1;if(!isUndefinedOrNull(t.artifact)){var n=t.artifact;"Background"!==n&&"PageNumber"!==n&&"Watermark"!==n&&"BatesN"!==n&&"Header"!==n||(e=!0)}return e}};return e}]),window.mainApp.service(a,getConstructor("bl-edit-utilites-module",a,"service"))},"6Drf":function(t,e,n){"use strict";var r=o(n("eWOG")),a=o(n("b8L+"));function o(t){return t&&t.__esModule?t:{default:t}}n("v+Fc");var i="form-textlayout-factory";function l(t){var e={},n=0,o=1,i=2;return e.createInstance=function(o){return new function(o){var i,l,u=this,d=function(){this.start_index=0,this.num_phrases=0,this.advance=0},s=function(){this.words=[],this.num_symbols=0,this.length=0},c="",f=n,p=Number.MAX_VALUE,g=o,h=1,y=!1,m=!1,v=!1,T=0,P=!0,b=!1,M=[],B=[];u.setText=function(t){if(t){var e=t;p>0&&p<t.length&&(e=t.spliceSlice(0,p)),c!=e&&(c=e,P=!0)}},u.keyStroke=function(t,e,n){t<c.length&&e>t&&(c=c.substring(0,t)+c.substring(e,c.length));var r=Number.MAX_VALUE;if(p>0&&(r=p-c.length),0!=r){var a=n;r<n.length&&(a=n.spliceSlice(0,r)),t<c.length?c=[c.slice(0,t),a,c.slice(t)].join(""):c+=a,P=!0}},u.getText=function(){return c},u.setLineHeightFactor=function(t){h!=t&&(h=t,P=!0)},u.getLineHeightFactor=function(){return h},u.setQuadding=function(t){f!=t&&(f=t,P=!0)},u.getQuadding=function(){return f},u.setWordWrap=function(t){l!=t&&(l=t,P=!0)},u.getWordWrap=function(){return l},u.setBound=function(t){i!=t&&(i=t,P=!0)},u.getBound=function(){return i},u.setFontSize=function(t){g!=t&&(g=t,P=!0)},u.getFontSize=function(){return g},u.setMaxLen=function(t){t!=p&&(t>0&&(p<=0||t<p)&&(c=c.spliceSlice(0,t)),p=t,P=!0)},u.getMaxLen=function(){return p},u.getTopLine=function(){return T},u.setTopLine=function(t){if(v)T=0;else{var e=B.length-u.getMaxLinesCount();T=Math.max(Math.min(t,e),0),P=!0}},u.hasScroll=function(){return b},u.setMultiline=function(t){y!=t&&(y=t,P=!0)},u.isMultiline=function(){return y},u.setPassword=function(t){m!=t&&(m=t,P=!0)},u.isPassword=function(){return m},u.setComb=function(t){v!=t&&(v=t,P=!0)},u.isComb=function(){return v},u.getSymbolsCount=function(){return c.length},u.getLinesCount=function(){return B.length},u.getMaxLinesCount=function(){var t=h*g,e=parseInt(i.getHeight()/t);return Math.max(e,1)},u.getFirstSymbol=function(t){if(t>=B.length)return c.length;for(var e=0,n=0;n<t;n++)e+=u.getNumSymbolsOnLine(n);return e},u.getNumSymbolsOnLine=function(t){return t>=B.length?0:B[t].num_symbols},u.getLastSymbol=function(t){return t>=B.length?c.length:u.getFirstSymbol(t)+u.getNumSymbolsOnLine(t)-1},u.getLineWithSymbol=function(t){for(var e=0,n=0;n<B.length;++n)if((e+=u.getNumSymbolsOnLine(n))>t)return n;return u.getLinesCount()-1},u.getSymbolAtPoint=function(t){var e=T;e>0&&--e;var n=u.getFirstSymbol(e),r=T+u.getMaxLinesCount()+1,o=u.getLinesCount();(v||r>o)&&(r=o);for(var i=e;i<r;++i){var l=B[i],d=(g=M[l.words[0].start_index]).getRect();if(!a.default.floatLt(d.max_y(),t.y)){for(var s=0;s<l.words.length;s++)for(var f=l.words[s],p=0;p<f.num_phrases;p++){d=(g=M[f.start_index+p]).getRect();for(var g,h=g._text.length,y=d.min_x(),m=0;m<h;++m){var P=g.getSymbolRect(m).getWidth();if(y+=P,a.default.floatLt(t.x,y))return a.default.floatLt(t.x,y-.5*P)||a.default.floatEq(y,d.max_x())?n+m:n+ ++m}n+=h}if(!v)return i!=o-1?n-1:n}n+=l.num_symbols}return c.length},u.getCharQuad=function(t){for(var e=0,n=0;n<B.length;++n){var r=B[n].num_symbols;if(e+r>t)for(var o=0;o<B[n].words.length;o++)for(var i=B[n].words[o],l=0;l<i.num_phrases;++l){var u=M[i.start_index+l],d=u._text.length;if(e+d>t)return u.getSymbolQuad(t-e);e+=d}e+=r}var s,c=M.length-1,f=M[c];if(0==f._text.length){var p=(s=f.getRect()).min_x();s.left=s.right=p}else{var g=(s=f.getSymbolRect(f._text.length-1)).max_x();s.left=s.right=g}return a.default.quadFromRect(s)},u.getLineRect=function(t){var e;if(t<B.length)for(var n=B[t],r=0;r<n.words.length;r++)for(var o=n.words[r],i=0;i<o.num_phrases;++i){var l=M[o.start_index+i].getRect();e=e.isAreaEmpty()?l:a.default.unionRects(e,l)}return e},u.getMaxLineWidth=function(){for(var t=0,e=0;e<B.length;e++){var n=B[e];t<n.length&&(t=n.length)}return t},u.getLineHeight=function(){return h*g},u.isNeedUpdate=function(){return P},u.update=function(){if(P){var e=r.default.field.getFontName();M=[],B=[],b=!1;var n=0;v&&p>0&&(n=i.getWidth()/p);var o=a.default.rect(0,i.getHeight(),n,0);o.offset(i.min_x(),i.min_y());var f=h*g,L=T,S=i.min_x(),x=i.min_y();y?x-=L*f:x+=(i.getHeight()-g)/2;var k=t.createInstance(e,g);k.translate(S,x),M.push(k);var R=new d;R.start_index=0,R.num_phrases=1,R.advance=0;var F=new s;F.words.push(R);for(var A=0,C=c.replace(new RegExp("\r\n","g"),"\n"),E=0;E<C.length;E++){var _=m?"*":C[E];_<" "&&(_=" "),k._text+=_;var I=k.getSymbolRect(k._text.length-1).getWidth();if(A+=I,R.advance+=I,S+=I,v){if(A>n){var O=n/A;k.scale(O),A=k.getRect().getWidth()}F=u.finishLine(F,n,A),o.offset(n,0),S=o.min_x(),(k=t.createInstance(e,g)).translate(S,x),M.push(k),(R=new d).start_index=M.length-1,R.num_phrases=1,R.advance=0,(F=new s).words.push(R),A=0}if(y&&("\n"!=C[E]&&"\r"!=C[E]||(A-=I,R.advance-=I,S-=I,u.finishLine(F,i.getWidth(),A),S=i.min_x(),x+=f,(k=t.createInstance(e,g)).translate(S,x),M.push(k),(R=new d).start_index=M.length-1,R.num_phrases=1,R.advance=0,(F=new s).words.push(R),A=0),l&&A>i.getWidth())){var w=0;if(F.words.length>1){w+=R.advance,A-=R.advance;var N=S-R.advance,H=x;F.words.pop(),u.finishLine(F,i.getWidth(),A);for(var D=(S=i.min_x())-N,j=(x+=f)-H,G=0;G<R.num_phrases;++G)M[R.start_index+G].translate(D,j)}else{var U=t.createInstance(e,g);w+=I,A-=I,R.advance-=I,U._text+=k._text[k._text.length-1],k._text=k._text.slice(0,-1),u.finishLine(F,i.getWidth(),A),S=i.min_x(),x+=f,(k=U).translate(S,x),M.push(k),(R=new d).start_index=M.length-1,R.num_phrases=1,R.advance=w}(F=new s).words.push(R),A=w,S+=w}}u.finishLine(F,i.getWidth(),A);var z=B.length,V=u.getMaxLinesCount();P=!1,v||z<=V?(b=!1,0!=T&&(u.setTopLine(0),u.update())):(b=!0,0!=T&&z-T<V&&(u.setTopLine(z-V),u.update()))}},u.finishLine=function(t,n,r){var a=e.getLineOffset(f,n,r,v);t.length=r,t.num_symbols=0;for(var o=0;o<t.words.length;++o)for(var i=t.words[o],l=0;l<i.num_phrases;++l){var u=M[i.start_index+l];t.num_symbols+=u._text.length,u.translate(a,0)}B.push(t)}}(o)},e.getLineOffset=function(t,e,r,a){if(void 0===a&&(a=!1),a)return.5*(e-r);switch(t){case n:return 0;case o:return.5*(e-r);case i:return e-r}return 0},e}angular.module("form-textlayout-factory-module",[]).factory(i,l),l.$inject=["form-phrase-factory"],window.mainApp.factory(i,getConstructor("form-textlayout-factory-module",i,"factory"))},"8oiJ":function(t,e,n){"use strict";var r=i(n("Xxa5")),a=i(n("exGp")),o=i(n("C3UN"));function i(t){return t&&t.__esModule?t:{default:t}}n("v1ab"),n("mC++"),n("kKPk"),n("APB7"),n("sMjP");var l="bl-insertmodule-service";angular.module("bl-insertmodule-module",["bl-edit-module","bl-edit-graphicseditobject-module","bl-edit-image-crop-transformer-module","bl-edit-transformer-module","bl-edit-clip-edit-object-module"]).service(l,["$rootScope","bl-edit-service","bl-edit-graphicseditobject-factory","bl-edit-image-crop-transformer-factory","bl-edit-transformer-factory","bl-edit-clip-edit-object-factory",function(t,e,n,i,l,u){var d={};return d.createAndSetTransformer=function(){var t=(0,a.default)(r.default.mark(function t(a,o,i,u){var d,s,c,f,p;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d=null,a&&!(o<0)&&i){t.next=3;break}return t.abrupt("return",d);case 3:if(s=a.document){t.next=6;break}return t.abrupt("return",d);case 6:if(c=null,u||(f=n.createGraphicsEditObject(s,o,i),c=e.collectObjectSnapData(a,f)),p=l.createInstance(s,o,i,c),!u){t.next=13;break}a.setHighlightNamed("Transform",p),t.next=18;break;case 13:return a.resetSelection(!0),a.setHighlight(null),t.next=17,a.setSelectionAndTool("Transform",p);case 17:d=t.sent;case 18:return t.abrupt("return",d);case 19:case"end":return t.stop()}},t,this)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),d.toggleClipEditMode=function(t){if(t){var r=t.getDocument();if(r){var a=t.getSelection(),o=a.getSelectionData(),i=a.getType();if("Transform"===i){var d=o;if(!d)return;var s=d.getPageIndex(),c=d.getElement(),f=u.createCollectionInstance(r,s,c);t.setSelectionAndTool("ClipCreate",f)}else if("ClipCreate"===i){var p=o;if(!p)return;var g=p.getPageIndex(),h=p.getElement(),y=n.createGraphicsEditObject(r,g,h),m=e.collectObjectSnapData(t,y),v=l.createInstance(r,g,h,m);t.resetSelection(!0),t.setSelectionAndTool("Transform",v)}else if("ClipEdit"===i){var T=o;if(!T)return;var P=T.getPageIndex(),b=T.getElement(),M=n.createGraphicsEditObject(r,P,b),B=e.collectObjectSnapData(t,M),L=l.createInstance(r,P,b,B);t.resetSelection(!0),t.setSelectionAndTool("Transform",L)}}}},d.toggleImageCropMode=function(t){if(t){var r=t.getDocument();if(r){var a=t.getSelection(),u=a.getSelectionData(),d=a.getType();if("Transform"===d){var s=u;if(!s)return;var c=s.getPageIndex(),f=s.getElement();switch(f.type){case o.default.PDEElementType.kPDEElementInlineImage:break;case o.default.PDEElementType.kPDEElementXObject:if(f.xObjectType!=o.default.PDEXObjectType.kPDEXObjectImage)return;break;default:return}var p=i.createInstance(r,c,f);t.setSelectionAndTool("ImageCrop",p)}else if("ImageCrop"===d){var g=u;if(!g)return;g.applyCrop().then(function(a){var o=g.getPageIndex(),i=a||g.getElement(),u=n.createGraphicsEditObject(r,o,i),d=e.collectObjectSnapData(t,u),s=l.createInstance(r,o,i,d);t.resetSelection(!0),t.setSelectionAndTool("Transform",s)})}}}},d}]),window.mainApp.service(l,getConstructor("bl-insertmodule-module",l,"service"))},"9Dnc":function(t,e,n){"use strict";var r=i(n("C3UN")),a=i(n("VmtT")),o=i(n("IZAc"));function i(t){return t&&t.__esModule?t:{default:t}}n("Ij0n");var l="bl-edit-multiselectselection-module",u="bl-edit-multiselectselection-factory";angular.module(l,["transformer-painter-module"]).factory(u,["$rootScope","transformer-painter-service",function(t,e){a.default.LookAndFeel.SnapLinesColor,o.default.createInstance("#FFFFFFFF");return{createInstance:function(){return new function(){var t=null;this.init=function(e,n){t=n},this.getType=function(){return"MultiSelect"},this.getSelectionData=function(){return t},this.draw=function(n,i){if(i==t.getPageIndex()){var l=a.default.LookAndFeel.MultiTransformerFrameColor,u=a.default.LookAndFeel.SnapLinesColor,d=o.default.createInstance("#FFFFFFFF"),s=a.default.LookAndFeel.MultiTransformerObjectColor,c=null;if(t.isPerformingOperation()){var f=t.getBounds();e.drawFrame(n,f,null,l,[10]),c=t.getOperationBounds();var p=t.getSnapInfo();p&&e.drawSnapInfo(n,p,u)}else c=t.getBounds();for(var g=t.getObjects(),h=0;h<g.length;h++){var y=g[h].getBounds();e.drawFrame(n,y,s,l)}e.drawFrame(n,c,null,l);var m=[c.top_left(),c.top_right(),c.bottom_right(),c.bottom_left()],v=c.getCenter(),T=a.default.LookAndFeel.TransformerAnchorRadius,P=a.default.LookAndFeel.TransformerOriginRadius;if(t.isPerformingOperation())switch(t.getOperationType()){case r.default.TransformType.TRANSFORM_MOVE:break;case r.default.TransformType.TRANSFORM_ROTATE:case r.default.TransformType.TRANSFORM_SCALE:e.drawOrigin(n,d,l,v,T,P)}else for(var b=0;b<m.length;++b)e.drawMarker(n,d,l,m[b],T)}},this.hitTest=function(e,n){return e==t.getPageIndex()&&t.hitTest(n)},this.getDestination=function(){var e={};return e.pPageIndex=t.getPageIndex(),e.pRect=t.getBBox(),e}}}}}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},ATCw:function(t,e,n){"use strict";var r="bl-text-edit-textfield-selection-factory-module",a="bl-text-edit-textfield-selection-factory";function o(t){return{createInstance:function(){return new function(){var t=null;this.init=function(e,n){t=n},this.done=function(){},this.getType=function(){return"TextBlockEdit"},this.getSelectionData=function(){return t},this.draw=function(e,n){t.draw(n,e)},this.hitTest=function(e,n){return t.hitTest(e,n)},this.getDestination=function(){var e={};return e.pPageIndex=t.getPageIndex(),e.pRect=t.getRect(),e},this.getProperties=function(){return null}}}}}angular.module(r,[]).factory(a,o),o.$inject=["$rootScope"],window.mainApp.factory(a,getConstructor(r,a,"factory"))},Ad04:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("oRGr"));var a="bl-ocr-idrs-inputHandlerStack-module",o="bl-ocr-idrs-inputHandlerStack-factory";angular.module(a,[]).factory(o,["$q","$rootScope",function(t,e){return{createInstance:function(){return new function(){var t=this,n=[],a={onHandleTypeChanged:function(t){e.$broadcast("idrs-inputHandlerStack-handleType-changed",t)}},o=!1;t.events=function(){return a},t.getHandleType=function(){return n.length>0?n[0].getHandleType():r.default.InputHandlerType.kHandle},t.dispatchEvent=function(e){o=!1;for(var r=!1,i=!1,l=0;l<n.length&&!r;l++){var u=n[l];if(u){var d=u.handleEvent(e);if(i=d.isHandlerFinished,r=d.isHandled,o)return;if(i){var s=n.shift();s&&s.terminate&&s.terminate();var c=t.getHandleType();a.onHandleTypeChanged(c)}}if(r)break}},t.resetInputHandler=function(){o=!0;for(var e=0;e<n.length;){var r=n[e];if(r)if(r.isUndeletable())++e;else{var i=n.splice(e,1),l=i.length>0?i[0]:null;l&&l.terminate&&l.terminate()}}var u=t.getHandleType();a.onHandleTypeChanged(u)},t.pushInputHandler=function(e){n.unshift(e);var r=t.getHandleType();a.onHandleTypeChanged(r)},t.terminate=function(){for(var t=0;t<n.length;t++){var e=n[t];e&&e.terminate&&e.terminate()}}}}}}]),window.mainApp.factory(o,getConstructor(a,o,"factory"))},AkK3:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}n("RR7e");var l="bl-edit-widgetannotedit-inputhandler-module",u="bl-edit-widgetannotedit-inputhandler-factory";angular.module(l,["bl-edit-widgetannoteditobject-module"]).factory(u,["$rootScope","bl-edit-widgetannoteditobject-factory",function(t,e){var n={},i=function(t){var n=t,i=!1,l=null,u=!1,d=e.HandleType.kHandleNone,s=r.default.point(),c=function(){var t=l?l.getAnnot():null;return t&&t.isLocked},f=function(t){var i,u=l.getPageIndex();if(!((i=n.getVisibleRange()).startPage<=u&&u<=i.endPage))return!1;var d=o.default.LookAndFeel.TransformerScaleZoneRadius,s=function(t,e,n){var a=t.mapPointToDevice(e,n.tl),o=t.mapPointToDevice(e,n.tr),i=t.mapPointToDevice(e,n.bl),l=t.mapPointToDevice(e,n.br);return r.default.quadFromPoints(a,o,i,l)}(n,u,r.default.quadFromRect(l.getRect()));if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.top_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopLeft,active:s.top_left()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.top_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopRight,active:s.top_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Move)&&r.default.circleContainsPoint(t,s.top_right(),d))return{type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleTopRight,active:s.top_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.bottom_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomLeft,active:s.bottom_left()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.bottom_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomRight,active:s.bottom_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(s.center_right(),s.center_left())>=3*d){if(r.default.circleContainsPoint(t,s.top_center(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopMiddle,active:s.top_center()};if(r.default.circleContainsPoint(t,s.bottom_center(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomMiddle,active:s.bottom_center()}}if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(s.top_center(),s.bottom_center())>=3*d){if(r.default.circleContainsPoint(t,s.center_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleLeftMiddle,active:s.center_left()};if(r.default.circleContainsPoint(t,s.center_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleRightMiddle,active:s.center_right()}}var c=n.mapPointToPage(u,t);return l.hitTest(c)?l.hasAnyCurrentEditMode(a.default.EditModes.Move)?{type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleNone,active:t}:{type:e.TransformType.kTransformNone,handle:e.HandleType.kHandleNone,active:t}:null},p=function(t,r,o){var i=a.default.BLCursorType.kBLCursorArrow;switch(t){case e.TransformType.kTransformMove:i=a.default.BLCursorType.kBLCursorMove;break;case e.TransformType.kTransformRotate:l.getAnnotSubtype()!=a.default.pdfAnnotationType.text&&(i=a.default.BLCursorType.kBLCursorRotate);break;case e.TransformType.kTransformScale:if(l.getAnnotSubtype()!=a.default.pdfAnnotationType.text){var u=n.getPagesRotation(),d=n.document,s=l.getPageIndex(),c=[[0,7,1,3,5,0,2,4,6],[0,5,7,1,3,6,0,2,4],[0,3,5,7,1,4,6,0,2],[0,1,3,5,7,2,4,6,0]][d.getPage(s).getRotate(u)/90][r];i=(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?a.default.BLCursorType.kBLCursorScaleProportional_N:a.default.BLCursorType.kBLCursorScale_N)+c}}n.setCursor(i)},g=function(t,o){!function(t,e){var a=l.getRect(),o=s.copy(),i=t.copy();if(!o.isEqual(i)){l.setSnapInfo(null);var u=r.default.point(i.x-o.x,i.y-o.y),d=a.copy();if(d.offset(u.x,u.y),l.setOperationRect(d),e){var c=l.getSnapData();if(c){var f;f=n.getZoom();var p=l.getOperationRect(),g=null,h=r.default.point(),y={zoom:f,snapToGrid:n.isGridEnabled()},m=c.snapMove(p,i,y);if(m&&(g=m.snapInfo,h=m.snappedAnchor),l.setSnapInfo(g),!h.isEqual(i)){var v=r.default.point(h.x-o.x,h.y-o.y),T=a.copy();T.offset(v.x,v.y),l.setOperationRect(T)}}}n.invalidate()}}(t,!a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),p(e.TransformType.kTransformMove,d,o)},h=function(){return function(){if(l.getAnnotSubtype()===a.default.pdfAnnotationType.widget){var t=l.getAnnot();return t&&t.acroform&&t.acroform.type===a.default.pdfAcroformType.signature}return!1}()?a.default.ContextMenuType.Signature:a.default.ContextMenuType.Widget};this.initialize=function(t){l=t},this.terminate=function(){},this.getToolName=function(){return"edit"},this.isFinished=function(){return u},this.handleEvent=function(t){switch(t.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case a.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonDown=function(t,e){if(i)return!0;var r=l.getPageIndex(),o=(n.mapPointToPage(r,t),f(t));if(!o)return u=!0,!1;if(c())return!!o;if(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpModify,!0)){l.setOperation(o.type),d=o.handle;var p=o.active.floor();s=n.mapPointToPage(r,p),n.invalidate()}return!0},this.onLButtonUp=function(t,r){if(i)return!0;if(l.getOperation()==e.TransformType.kTransformNone)return!1;if(c())return!0;i=!0;var a=f(t);return a&&p(a.type,a.handle,r),l.endOperation().finally(function(){i=!1,n.invalidate()}),!0},this.onRButtonDown=function(t,e){return!!f(t)},this.onRButtonUp=function(t,e){if(f(t)){var r=a.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|a.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations;return function(){if(l.getAnnotSubtype()===a.default.pdfAnnotationType.widget){var t=l.getAnnot();return t&&t.acroform&&t.acroform.type===a.default.pdfAcroformType.choice}return!1}()&&(r|=a.default.BLSelectionOperations.kBLSelectionAllowOptList),n.showContextMenu(h(),t,r),!0}return!1},this.onMouseMove=function(t,o){if(i)return!0;if(c())return!!f(t);var u=n.mapPointToPage(l.getPageIndex(),t);switch(l.getOperation()){case e.TransformType.kTransformNone:var s=f(t);return!!s&&(n.setHighlight(null),p(s.type,s.handle,o),!0);case e.TransformType.kTransformMove:g(u,o);break;case e.TransformType.kTransformScale:l.getAnnotSubtype()!=a.default.pdfAnnotationType.text&&function(t,o){var i=t.copy(),u=l.getRect(),s=Math.abs(u.getWidth()),c=Math.abs(u.getHeight());if(!r.default.floatEq(s,0)&&!r.default.floatEq(c,0)){var f=r.default.point(u.left,u.bottom),g=u.getCenter(),h=2*(i.x-f.x)/s,y=2*(i.y-f.y)/c;i.offset(-f.x,-f.y);var m=i.x/s,v=i.y/c,T=null;switch(d){case e.HandleType.kHandleLeftMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-m,1-m,f).multiply(r.default.translationMatrix(i.x,m*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-h,1-h,g):r.default.scalingMatrix(1-m,1,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(v,v,f).multiply(r.default.translationMatrix((1-v)*s/2,0)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(y-1,y-1,g):r.default.scalingMatrix(1,v,f);break;case e.HandleType.kHandleRightMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(m,m,f).multiply(r.default.translationMatrix(0,(1-m)*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(h-1,h-1,g):r.default.scalingMatrix(m,1,f);break;case e.HandleType.kHandleBottomMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-v,1-v,f).multiply(r.default.translationMatrix(v*s/2,i.y)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-y,1-y,g):r.default.scalingMatrix(1,1-v,f).multiply(r.default.translationMatrix(0,i.y));break;case e.HandleType.kHandleTopLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var P=Math.min(1-m,v);T=r.default.scalingMatrix(P,P,f).multiply(r.default.translationMatrix((1-P)*s,0))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var b=Math.min(1-h,y-1);T=r.default.scalingMatrix(b,b,g)}else T=r.default.scalingMatrix(1-m,v,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var M=Math.min(m,v);T=r.default.scalingMatrix(M,M,f)}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var B=Math.min(h-1,y-1);T=r.default.scalingMatrix(B,B,g)}else T=r.default.scalingMatrix(m,v,f);break;case e.HandleType.kHandleBottomLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var L=Math.min(1-m,1-v);T=r.default.scalingMatrix(L,L,f).multiply(r.default.translationMatrix((1-L)*s,(1-L)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var S=Math.min(1-h,1-y);T=r.default.scalingMatrix(S,S,g)}else T=r.default.scalingMatrix(1-m,1-v,f).multiply(r.default.translationMatrix(i.x,i.y));break;case e.HandleType.kHandleBottomRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var x=Math.min(m,1-v);T=r.default.scalingMatrix(x,x,f).multiply(r.default.translationMatrix(0,(1-x)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var k=Math.min(h-1,1-y);T=r.default.scalingMatrix(k,k,g)}else T=r.default.scalingMatrix(m,1-v,f).multiply(r.default.translationMatrix(0,i.y))}T&&l.setOperationRect(T.mapRect(u)),n.invalidate(),p(e.TransformType.kTransformScale,d,o)}}(u,o)}return!0},this.onKeyUp=function(t){return t==a.default.kBLKey.kBLKey_DELETE&&function(t){return!!i||!c()&&"Delete"==t&&(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpDelete,!0)&&(n.setSelection(null),l.delete(),u=!0),!0)}("Delete")}};return n.createInstance=function(t,e){return new i(e)},n}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},BZtS:function(t,e,n){"use strict";var r=o(n("C3UN")),a=o(n("eWOG"));function o(t){return t&&t.__esModule?t:{default:t}}n("6Drf");var i="bl-widget-combobox-obj-factory-module",l="bl-widget-combobox-obj-factory";function u(t,e){var n={};return n.createInstance=function(n,o,i){return new function(n,o,i){var l,u,d,s,c,f,p,g=this,h=o,y=i,m=y.getStyle();if(r.default.pdfAcroformType.choice===m){s=y.getValue();var v=(y.options&&y.options.items?y.options.items:[]).indexOf(s);l=v,this.getWidget=function(){return y},this.canUndo=function(){return!1},this.canRedo=function(){return!1},this.undo=function(){},this.redo=function(){},this.clearUndoRedoStack=function(){},this.getRect=function(){return t.getFieldRect(y)},this.getPageIndex=function(){return h},this.setText=function(t){c.getText()!=t&&(c.setText(t),c.update())},this.getText=function(){return c.getText()},this.getNumChars=function(){return c.getText().length},this.isEditable=function(){return!1},this.getCharQuad=function(t){return c.getCharQuad(t)},this.selectAll=function(){this.setSelectorPosition(0),this.setCaretPosition(this.getNumChars())},this.setSelAtPoint=function(t){var e=c.getSymbolAtPoint(t);this.setSelectorPosition(e),this.setCaretPosition(e)},this.setSelectorAtPoint=function(t){var e=c.getSymbolAtPoint(t);this.setSelectorPosition(e)},this.setCaretAtPoint=function(t){var e=c.getSymbolAtPoint(t);this.setCaretPosition(e)},this.setCaretPosition=function(t){u!=t&&(u=t,p&&p(d,u))},this.setSelectorPosition=function(t){d!=t&&(d=t,p&&p(d,u))},this.hasSelection=function(){return d!=u},this.getSelectedText=function(){var t;if(this.hasSelection()){var e=d,n=u;e>n&&(n=[e,e=n][0]),t=this.getText().substring(e,n-e)}return t},this.getSelectorPosition=function(){return d},this.getCaretPosition=function(){return u},this.goLeft=function(t){var e=this.getCaretPosition();e>0&&this.setCaretPosition(--e),t||this.setSelectorPosition(e)},this.goRight=function(t){var e=this.getCaretPosition();e<this.getNumChars()&&this.setCaretPosition(++e),t||this.setSelectorPosition(e)},this.goToFirst=function(t){this.setCaretPosition(0),t||this.setSelectorPosition(0)},this.goToLast=function(t){var e=this.getNumChars();this.setCaretPosition(e),t||this.setSelectorPosition(e)},this.keyStroke=function(t,e,n){"number"==typeof t&&"number"==typeof e?(c.keyStroke(t,e,n),c.update()):P(n)},this.delete=function(t){var e=this.getSelectorPosition(),n=this.getCaretPosition();n<e&&(e=[n,n=e][0]),n==e&&(t?n>0&&this.setCaretPosition(n-1):this.setCaretPosition(n+1)),P("")},this.getNumOptions=function(){return(y.options&&y.options.items?y.options.items:[]).length},this.setSel=function(t){var e;(l=t)>=0&&l<this.getNumOptions()?(e=(y.options&&y.options.items?y.options.items:[])[l],y.setValue(e)):e=y.getValue(),c.setText(e),c.update()},this.setSelection=function(t){T(t),this.isEditable()&&this.selectAll()},this.getSelection=function(){return l},this.selectPrev=function(){var t=this.getNumOptions();if(t>0){var e=this.getSelection();-1==e?this.setSelection(t-1):e>0&&this.setSelection(--e)}},this.selectNext=function(){var t=this.getNumOptions();if(t>0){var e=this.getSelection();-1==e?this.setSelection(0):e<t-1&&this.setSelection(++e)}},this.selectFirst=function(){this.getNumOptions()>0&&this.setSelection(0)},this.selectLast=function(){var t=this.getNumOptions();t>0&&this.setSelection(t-1)},this.commitChanges=function(){return!0},this.cancelChanges=function(){this.setText(s)},this.onModify=function(){return!0},this.setOnSelChangedCallBack=function(t){p=t};var T=function(t){g.setSel(t)},P=function(t){var e=d,n=u;e>n&&(n=[e,e=n][0]),g.keyStroke(e,n,t),f=e+t.length,g.setSelectorPosition(f),g.setCaretPosition(f)},b=this.getRect();b.inflate(-a.default.comboBox.getMargin(),-a.default.comboBox.getMargin()),(c=e.createInstance(a.default.comboBox.getFontSize())).setText(s),c.setBound(b),c.update()}else console.error("Unsupported field type.")}(n,o,i)},n}angular.module(i,[]).factory(l,u),u.$inject=["bl-widget-renderer-service","form-textlayout-factory"],window.mainApp.factory(l,getConstructor(i,l,"factory"))},F1Q0:function(t,e,n){"use strict";var r=l(n("pFYg")),a=l(n("fZjL")),o=l(n("C3UN")),i=l(n("r/7/"));function l(t){return t&&t.__esModule?t:{default:t}}n("JARy");var u="bl-object-properties-factory";angular.module("bl-object-properties-module",["pdf-manager-module","ui-viewer-textedit-module"]).factory(u,["$rootScope","$q","pdf-manager-factory","ui-viewer-textedit-factory",function(t,e,n,l){var u={isValid:!0},d=function(e){var n=e.getFullPropData(),r=n.toHex&&n.toHex()?n.toHex(!0):n,o=window.HashCode.value(r),i=e.serverId,l="";if(isArray(i)){for(var d={},s=i.first(),c=i.length-1;c>=1;c--){var f=i[c];if(c>=i.length-1)l=f,d[f]=r;else{var p={};p[f]=d,d=p}}u[s]||(u[s]={}),e.hash!==o?u[s][l]=d[l]:u[s][l]&&(delete u[s][l],u[s]&&(0,a.default)(u[s]).length<=0&&delete u[s])}else e.hash!==o?u[i]=r:u[i]&&delete u[i];t.$broadcast("bl-object-properties-changeset-changed",{modified:(0,a.default)(u).length>1})},s=l.getFontSizesDropDown();return{createPropValue:function(t,e,n){return new function(t,e,n){var a=t,i={serverId:e,getFullPropData:function(){return a&&a.getFullPropData?a.getFullPropData():a.propType&&a.propType===o.default.objectPropertyType.opacity?a.val:a}},l=function(){return a.propType&&a.propType===o.default.objectPropertyType.opacity?Math.round(100*a.val):a},u=function(t){"object"===(void 0===t?"undefined":(0,r.default)(t))&&null!==t&&t.value&&!isArray(t)?a=t.value:a.propType&&a.propType===o.default.objectPropertyType.opacity?a.val=t/100:a=t,d(i)};isArray(n)&&(l=function(){for(var t=n.length,e=a,r=0;r<t;r++){var o=n[r];e.hasOwnProperty(o)&&(e=e[o])}return e},u=function(t){for(var e=n.length,o=a,l=0;l<e;l++){var u=n[l];if(o.hasOwnProperty(u)){if(l>=e-1){"object"===(void 0===t?"undefined":(0,r.default)(t))&&null!==t&&t.value&&!isArray(t)?o[u]=t.value:o[u]=t;break}o=o[u]}}d(i)}),Object.defineProperty(i,"value",{get:l,set:u});var s=i.getFullPropData();return i.hash=HashCode.value(s.toHex&&s.toHex()?s.toHex(!0):s),i}(t,e,n)},createProperty:function(t,e,r,a){return new function(t,e,r,a){var l=void 0,d=void 0,c=this;c.isValid=!1,isUndefinedOrNull(a)||(isArray(a)?l=a:"string"==typeof a&&(d=a,a===o.default.objectPropertyStyle.font&&t===o.default.objectPropertyType.select?n.currentDocument(function(t){l=t.fonts.getSystemFontsProps()}):l=a===o.default.objectPropertyStyle.fontSize?s:i.default[a]));var f={serverId:e.serverId,id:d||"",text:r||"",type:t,isAction:t===o.default.objectPropertyType.action||t===o.default.objectPropertyType.value||t===o.default.objectPropertyType.script||t===o.default.objectPropertyType.items,field:e,checked:!0,options:l||[],isCtrlVisible:!1,isEditable:t!==o.default.objectPropertyType.textlabel};return Object.defineProperty(f,"isValid",{get:function(){return c.isValid},set:function(t){u.isValid=t,c.isValid=t}}),f}(t,e,r,a)},createSubGroup:function(t,e){return new function(t,e){var n={text:t||"",checked:!0,props:e||[],addProperty:function(t){n.props.push(t)}};return n}(t,e)},createMainGroup:function(t){return new function(t){this.defaultTab=0,this.addToTabGroup=function(t,e){var n=this[t];isUndefinedOrNull(n)?this[t]={groups:[e]}:n.groups.push(e)},this.annotChangeCallback=function(){var n=e.defer();return u.isValid?(delete u.isValid,t&&t(u).then(function(){u={isValid:!0},n.resolve()},function(){n.reject("error")})):n.reject("invalid"),n.promise}}(t)}}}]),window.mainApp.factory(u,getConstructor("bl-object-properties-module",u,"factory"))},"FEK/":function(t,e,n){"use strict";var r=d(n("HSQo")),a=d(n("C3UN")),o=d(n("b8L+")),i=d(n("VmtT")),l=d(n("IZAc")),u=d(n("7mWT"));function d(t){return t&&t.__esModule?t:{default:t}}n("RR7e"),n("iMU4"),n("Ij0n"),n("F1Q0"),n("v1ab");var s="bl-edit-widgetannoteditselection-module",c="bl-edit-widgetannoteditselection-factory";angular.module(s,["bl-edit-baseannoteditselection-module","bl-edit-widgetannoteditobject-module","transformer-painter-module","bl-edit-module","bl-object-properties-module","pdf-manager-module"]).factory(c,["$rootScope","bl-edit-baseannoteditselection-factory","bl-edit-widgetannoteditobject-factory","transformer-painter-service","bl-edit-service","bl-object-properties-factory","pdf-manager-factory",function(t,e,n,d,s,c,f){var p=i.default.LookAndFeel.AnnotTransformerFrameColor,g=i.default.LookAndFeel.SnapLinesColor,h=l.default.createInstance("#FFFFFFFF");return{createInstance:function(){var t=e.createInstance();return t.draw=function(e,r){var l=t.AnnotEditObject_;if(r==l.getPageIndex()){var u=null;if(l.getOperation()==n.TransformType.kTransformNone)u=o.default.quadFromRect(l.getRect());else{var s=o.default.quadFromRect(l.getRect());d.drawFrame(e,s,null,p,[10]),u=o.default.quadFromRect(l.getOperationRect());var c=l.getSnapInfo();c&&d.drawSnapInfo(e,c,g)}if(d.drawFrame(e,u,null,p),l.getAnnotSubtype()!=a.default.pdfAnnotationType.text&&l.getOperation()==n.TransformType.kTransformNone){var f=i.default.LookAndFeel.TransformerAnchorRadius;if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&d.drawMarker(e,h,p,u.top_left(),f),l.hasAnyCurrentEditMode(a.default.EditModes.Move|a.default.EditModes.Resize|a.default.EditModes.Rotate))if(deviceDetect.isPhone()){var y={fillColor:"#3688dc",anchorRadius:f+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};l.hasAnyCurrentEditMode(a.default.EditModes.Move)?y.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Resize)?y.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&(y.text=""),d.drawMarker(e,y.fillColor,p,u.top_right(),y.anchorRadius,y)}else d.drawMarker(e,h,p,u.top_right(),f);l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&(d.drawMarker(e,h,p,u.bottom_right(),f),d.drawMarker(e,h,p,u.bottom_left(),f));var m=e.getCTM().mapQuad(u),v=i.default.LookAndFeel.TransformerScaleZoneRadius;l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&o.default.pointsDistance(m.center_right(),m.center_left())>=3*v&&(d.drawMarker(e,h,p,u.top_center(),f),d.drawMarker(e,h,p,u.bottom_center(),f)),l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&o.default.pointsDistance(m.top_center(),m.bottom_center())>=3*v&&(d.drawMarker(e,h,p,u.center_right(),f),d.drawMarker(e,h,p,u.center_left(),f))}}},t.getProperties=function(){var e=this.getSelectionData().getAnnot();e.acroform.type==a.default.pdfAcroformType.signature||(e.acroform.type,a.default.pdfAcroformType.unknown);var n=c.createMainGroup(function(n){return f.changeAnnotationProperties(t.DocumentView_.getDocument(),e,t.AnnotEditObject_.getPageIndex(),n)}),o={flags:e.flags,getFullPropData:function(){return this.flags}};(0,r.default)(o,{visible:{get:function(){return!(this.flags&a.default.pdfAnnotationFlag.Hidden||this.flags&a.default.pdfAnnotationFlag.NoView)},set:function(t){t?(this.flags&=~a.default.pdfAnnotationFlag.Hidden,this.flags&=~a.default.pdfAnnotationFlag.NoView):this.flags|=a.default.pdfAnnotationFlag.Hidden}},locked:{get:function(){return 0!=(this.flags&a.default.pdfAnnotationFlag.Locked)},set:function(t){t?this.flags|=a.default.pdfAnnotationFlag.Locked:this.flags&=~a.default.pdfAnnotationFlag.Locked}}});var i={flags:e.acroform.fieldFlags,getFullPropData:function(){return this.flags}};return(0,r.default)(i,{multiline:{get:function(){return 0!=(this.flags&a.default.pdfAcroformFlag.kAFPDTextFieldFlagMultiline)},set:function(t){t?this.flags|=a.default.pdfAcroformFlag.kAFPDTextFieldFlagMultiline:this.flags&=~a.default.pdfAcroformFlag.kAFPDTextFieldFlagMultiline}},password:{get:function(){return 0!=(this.flags&a.default.pdfAcroformFlag.kAFPDTextFieldFlagPassword)},set:function(t){t?this.flags|=a.default.pdfAcroformFlag.kAFPDTextFieldFlagPassword:this.flags&=~a.default.pdfAcroformFlag.kAFPDTextFieldFlagPassword}},readonly:{get:function(){return 0!=(this.flags&a.default.pdfAcroformFlag.kAFPDFieldFlagReadOnly)},set:function(t){t?this.flags|=a.default.pdfAcroformFlag.kAFPDFieldFlagReadOnly:this.flags&=~a.default.pdfAcroformFlag.kAFPDFieldFlagReadOnly}},noexport:{get:function(){return 0!=(this.flags&a.default.pdfAcroformFlag.kAFPDFieldFlagNoExport)},set:function(t){t?this.flags|=a.default.pdfAcroformFlag.kAFPDFieldFlagNoExport:this.flags&=~a.default.pdfAcroformFlag.kAFPDFieldFlagNoExport}},required:{get:function(){return 0!=(this.flags&a.default.pdfAcroformFlag.kAFPDFieldFlagRequired)},set:function(t){t?this.flags|=a.default.pdfAcroformFlag.kAFPDFieldFlagRequired:this.flags&=~a.default.pdfAcroformFlag.kAFPDFieldFlagRequired}},editable:{get:function(){return 0!=(this.flags&a.default.pdfAcroformFlag.kAFPDChoiceFieldFlagEdit)},set:function(t){t?this.flags|=a.default.pdfAcroformFlag.kAFPDChoiceFieldFlagEdit:this.flags&=~a.default.pdfAcroformFlag.kAFPDChoiceFieldFlagEdit}}}),function(){var t=c.createPropValue("Widget","T"),r=c.createProperty(a.default.objectPropertyType.textlabel,t,"Type"),i=e.acroform.fieldName,l=c.createPropValue(i,["field","N"]),u=c.createProperty(a.default.objectPropertyType.textedit,l,"Name"),d=c.createSubGroup("Type",[r,u]);n.addToTabGroup(a.default.objectPropertyGroupType.general,d);var s=new Date(e.modificationDate),f=c.createPropValue(s,"MD"),p=c.createProperty(a.default.objectPropertyType.textlabel,f,"Modified",a.default.objectPropertyStyle.dateTime),g=c.createPropValue(o,"F",["locked"]),h=c.createProperty(a.default.objectPropertyType.select,g,"Locked",a.default.objectPropertyStyle.bool),y=c.createSubGroup("Modify",[p,h]);n.addToTabGroup(a.default.objectPropertyGroupType.general,y)}(),function(){var t={W:e.borderStyle.width,S:e.borderStyle.style,D:e.borderStyle.dashPattern},r=c.createPropValue(t,"BS",["W"]),u=c.createProperty(a.default.objectPropertyType.number,r,"Width"),d=c.createPropValue(t,"BS",["S"]),s=c.createProperty(a.default.objectPropertyType.select,d,"Style",a.default.objectPropertyStyle.borderStyle),f={color:e.borderColor,getFullPropData:function(){return this.color.toString(!0)}},p=c.createPropValue(f,"BC",["color"]);p.isNone=e.isNoneBC;var g=c.createProperty(a.default.objectPropertyType.color,p,"Color","border-color"),h=c.createPropValue(o,"F",["visible"]),y=c.createProperty(a.default.objectPropertyType.select,h,"Visible",a.default.objectPropertyStyle.bool),m=e.highlightMode,v=c.createPropValue(m,"H"),T=c.createProperty(a.default.objectPropertyType.select,v,"Highlight",a.default.objectPropertyStyle.highlight),P=c.createSubGroup("Border",[u,s,g,y,T]);n.addToTabGroup(a.default.objectPropertyGroupType.appearance,P);var b=e.contentRotate,M=c.createPropValue(b,"r"),B=c.createProperty(a.default.objectPropertyType.select,M,"Rotate",a.default.objectPropertyStyle.rotate),L=c.createSubGroup("Rotate",[B]);n.addToTabGroup(a.default.objectPropertyGroupType.appearance,L);var S=e.acroform.uiFieldName,x=c.createPropValue(S,["field","Nu"]),k=c.createProperty(a.default.objectPropertyType.textedit,x,"Tooltip"),R=c.createSubGroup("Tooltip",[k]);n.addToTabGroup(a.default.objectPropertyGroupType.appearance,R);var F={color:e.backgroundColor,getFullPropData:function(){return this.color.toString(!0)}};Object.defineProperty(F,"transparent",{get:function(){return"none"===this.color||this.color.isTransparent()},set:function(t){this.color=l.default.createInstance(!0===t?"#00000000":"#FFFFFFFF")}});var A=c.createPropValue(F,"BG",["transparent"]),C=c.createProperty(a.default.objectPropertyType.select,A,"Transparent",a.default.objectPropertyStyle.bool),E=c.createPropValue(F,"BG",["color"]);E.isNone=e.isNoneBG;var _=c.createProperty(a.default.objectPropertyType.color,E,"Color","bg-color"),I=c.createSubGroup("Background",[C,_]);n.addToTabGroup(a.default.objectPropertyGroupType.appearance,I);var O=[];if(e.acroform.type==a.default.pdfAcroformType.text){var w=c.createPropValue(i,["field","F"],["multiline"]),N=c.createProperty(a.default.objectPropertyType.select,w,"Multiline",a.default.objectPropertyStyle.bool);O.push(N);var H=c.createPropValue(i,["field","F"],["password"]),D=c.createProperty(a.default.objectPropertyType.select,H,"Password",a.default.objectPropertyStyle.bool);O.push(D)}if(e.acroform.type==a.default.pdfAcroformType.text||e.acroform.type==a.default.pdfAcroformType.choice){var j=e.acroform.justification,G=c.createPropValue(j,["field","Q"]),U=c.createProperty(a.default.objectPropertyType.select,G,"Text Alignment",a.default.objectPropertyStyle.alignment);O.push(U)}if(O.length>0){var z=c.createSubGroup("Text",O);n.addToTabGroup(a.default.objectPropertyGroupType.appearance,z)}if(e.acroform.type==a.default.pdfAcroformType.button){var V=e.caption,q=c.createPropValue(V,"CA"),Z=c.createProperty(a.default.objectPropertyType.textedit,q,"Caption"),W=c.createSubGroup("Caption",[Z]);n.addToTabGroup(a.default.objectPropertyGroupType.appearance,W)}var K={F:e.font.family,S:e.font.size,C:e.font.color,s:e.font.style,getFullPropData:function(){return{F:this.F,S:this.S,C:this.C.toString(!0),s:this.s}}};Object.defineProperty(K,"color",{get:function(){return this.C},set:function(t){this.C=t}});var $=c.createSubGroup("Font"),Q=e.acroform.type==a.default.pdfAcroformType.text||e.acroform.type==a.default.pdfAcroformType.choice||e.acroform.type==a.default.pdfAcroformType.button&&e.acroform.isPush();if(Q){var J=c.createPropValue(K,"Fnt",["F"]),X=c.createProperty(a.default.objectPropertyType.select,J,"Type",a.default.objectPropertyStyle.font);$.addProperty(X)}var Y=c.createPropValue(K,"Fnt",["S"]),tt=c.createProperty(a.default.objectPropertyType.number,Y,"Size",a.default.objectPropertyStyle.font);$.addProperty(tt);var et=c.createPropValue(K,"Fnt",["color"]),nt=c.createProperty(a.default.objectPropertyType.color,et,"Font Color","fnt-color");if($.addProperty(nt),Q){var rt=c.createPropValue(K,"Fnt",["s"]),at=c.createProperty(a.default.objectPropertyType.select,rt,"Font Modifier",a.default.objectPropertyStyle.modifier);$.addProperty(at)}n.addToTabGroup(a.default.objectPropertyGroupType.appearance,$)}(),function(){var t=[],r=c.createPropValue(i,["field","F"],["readonly"]),o=c.createProperty(a.default.objectPropertyType.select,r,"Read Only",a.default.objectPropertyStyle.bool);t.push(o);var l=c.createPropValue(i,["field","F"],["noexport"]),u=c.createProperty(a.default.objectPropertyType.select,l,"No Export",a.default.objectPropertyStyle.bool);if(t.push(u),e.acroform.type!==a.default.pdfAcroformType.button||!e.acroform.isPush()){var d=c.createPropValue(i,["field","F"],["required"]),s=c.createProperty(a.default.objectPropertyType.select,d,"Required",a.default.objectPropertyStyle.bool);t.push(s)}if(e.acroform.type==a.default.pdfAcroformType.text){var f=e.acroform.maxlength,p=c.createPropValue(f,["field","ML"]),g=c.createProperty(a.default.objectPropertyType.number,p,"Length Limit");t.push(g)}if(e.acroform.type==a.default.pdfAcroformType.choice){if(0!=(e.acroform.fieldFlags&a.default.pdfAcroformFlag.kAFPDChoiceFieldFlagCombo)){var h=c.createPropValue(i,["field","F"],["editable"]),y=c.createProperty(a.default.objectPropertyType.select,h,"Editable",a.default.objectPropertyStyle.bool);t.push(y)}var m=e.acroform.items,v=c.createPropValue(m,["field","O"]),T=c.createProperty(a.default.objectPropertyType.value,v,"Options");t.push(T)}var P=c.createSubGroup("Value",t);n.addToTabGroup(a.default.objectPropertyGroupType.values,P)}(),function(){var t={actions:u.default.createInstanceCollection(e.mouseenterActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},r=c.createPropValue(t,"aE",["actions"]),o=c.createProperty(a.default.objectPropertyType.action,r,"Mouse Enter"),i={actions:u.default.createInstanceCollection(e.mouseleaveActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},l=c.createPropValue(i,"aX",["actions"]),d=c.createProperty(a.default.objectPropertyType.action,l,"Mouse Exit"),s={actions:u.default.createInstanceCollection(e.mousedownActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},f=c.createPropValue(s,"aD",["actions"]),p=c.createProperty(a.default.objectPropertyType.action,f,"Mouse Down"),g={actions:u.default.createInstanceCollection(e.mouseupActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},h=c.createPropValue(g,"aU",["actions"]),y=c.createProperty(a.default.objectPropertyType.action,h,"Mouse Up"),m={actions:u.default.createInstanceCollection(e.focusActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},v=c.createPropValue(m,"aFo",["actions"]),T=c.createProperty(a.default.objectPropertyType.action,v,"Focus"),P={actions:u.default.createInstanceCollection(e.blurActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},b=c.createPropValue(P,"aBl",["actions"]),M=c.createProperty(a.default.objectPropertyType.action,b,"Blur"),B=c.createSubGroup("Widget Events",[o,d,p,y,T,M]);if(e.acroform.type==a.default.pdfAcroformType.button){var L={actions:u.default.createInstanceCollection(e.clickActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},S=c.createPropValue(L,"a",["actions"]),x=c.createProperty(a.default.objectPropertyType.action,S,"Action");B.addProperty(x)}n.addToTabGroup(a.default.objectPropertyGroupType.events,B)}(),function(){if(e.acroform.type!==a.default.pdfAcroformType.button){var t={actions:u.default.createInstanceCollection(e.acroform.modifyActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},r=c.createPropValue(t,["field","aK"],["actions"]),o=c.createProperty(a.default.objectPropertyType.script,r,"Modify"),i={actions:u.default.createInstanceCollection(e.acroform.validateActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},l=c.createPropValue(i,["field","aV"],["actions"]),d=c.createProperty(a.default.objectPropertyType.script,l,"Validate"),s={actions:u.default.createInstanceCollection(e.acroform.calculateActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},f=c.createPropValue(s,["field","aC"],["actions"]),p=c.createProperty(a.default.objectPropertyType.script,f,"Calculate"),g={actions:u.default.createInstanceCollection(e.acroform.formatActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},h=c.createPropValue(g,["field","aF"],["actions"]),y=c.createProperty(a.default.objectPropertyType.script,h,"Format"),m=c.createSubGroup("Field Events",[o,d,p,y]);n.addToTabGroup(a.default.objectPropertyGroupType.events,m)}}(),e.acroform.type==a.default.pdfAcroformType.button&&e.acroform.isPush()?n.defaultTab=3:e.acroform.type==a.default.pdfAcroformType.choice&&(n.defaultTab=2),n},t},select:function(t,e,r,a){var o=null;if(!t||e<0||!r)return null;var i=t.document,l=null;a||(l=s.collectAnnotSnapData(t,e,r));var u=n.createInstance(i,e,r,l);return a?t.setHighlightNamed("WidgetEdit",u):o=t.setSelectionAndTool("WidgetEdit",u),o}}}]),window.mainApp.factory(c,getConstructor(s,c,"factory"))},GPFL:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}var l="bl-edit-transformer-inputhandler-module",u="bl-edit-transformer-inputhandler-factory";angular.module(l,[]).factory(u,["$rootScope",function(t){var e={},n=function(t){var e=t,n=null,i=!1,l=a.default.AnchorPlace.ANCHOR_NONE,u=0,d=r.default.point(),s=r.default.point(),c=function(t,e,n){var a=r.default.point(t.x-e.x,t.y-e.y);return n*n>=a.x*a.x+a.y*a.y},f=function(t,e,n){return t.mapPointToPage(e,n)},p=function(t,e,n){return t.mapPointToDevice(e,n)},g=function(t){a.default.TransformType.TRANSFORM_NONE,a.default.AnchorPlace.ANCHOR_NONE,r.default.point();var i,l=n.getPageIndex();if(!((i=e.getVisibleRange()).startPage<=l&&l<=i.endPage))return!1;var u=o.default.LookAndFeel.TransformerScaleZoneRadius,d=function(t,e,n){var a=p(t,e,n.tl),o=p(t,e,n.tr),i=p(t,e,n.bl),l=p(t,e,n.br);return r.default.quadFromPoints(a,o,i,l)}(e,l,n.getBounds());if(n.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&c(t,d.top_left(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP_LEFT,active:d.top_left()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&c(t,d.top_right(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:d.top_right()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Move)&&c(t,d.top_right(),u))return{type:a.default.TransformType.TRANSFORM_MOVE,anchor:a.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:d.top_right()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&c(t,d.bottom_left(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:d.bottom_left()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&c(t,d.bottom_right(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:d.bottom_right()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(d.center_right(),d.center_left())>=3*u){if(c(t,d.top_center(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP,active:d.top_center()};if(c(t,d.bottom_center(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM,active:d.bottom_center()}}if(n.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(d.top_center(),d.bottom_center())>=3*u){if(c(t,d.center_left(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_LEFT,active:d.center_left()};if(c(t,d.center_right(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_RIGHT,active:d.center_right()}}if(deviceDetect.isPhone()&&n.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&c(t,d.getCenter(),u))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_CENTER,active:d.getCenter()};var s=o.default.LookAndFeel.TransformerRotateZoneRadius;if(n.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&c(t,d.top_left(),s))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_TOP_LEFT,active:d.top_left()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&c(t,d.top_right(),s))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:d.top_right()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&c(t,d.bottom_left(),s))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:d.bottom_left()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&c(t,d.bottom_right(),s))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:d.bottom_right()};if(n.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.pointsDistance(d.center_right(),d.center_left())>=3*u){if(c(t,d.top_center(),s))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_TOP,active:d.top_center()};if(c(t,d.bottom_center(),s))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM,active:d.bottom_center()}}if(n.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.pointsDistance(d.top_center(),d.bottom_center())>=3*u){if(c(t,d.center_left(),s))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_LEFT,active:d.center_left()};if(c(t,d.center_right(),s))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_RIGHT,active:d.center_right()}}var g=f(e,l,t);if(n.hitTest(g)){return n.hasAnyCurrentEditMode(a.default.EditModes.Move)?{type:a.default.TransformType.TRANSFORM_MOVE,anchor:a.default.AnchorPlace.ANCHOR_NONE,active:t}:{type:a.default.TransformType.TRANSFORM_NONE,anchor:a.default.AnchorPlace.ANCHOR_NONE,active:t}}return null},h=function(t,o,i){var l=a.default.BLCursorType.kBLCursorArrow;switch(t){case a.default.TransformType.TRANSFORM_MOVE:l=a.default.BLCursorType.kBLCursorMove;break;case a.default.TransformType.TRANSFORM_ROTATE:l=a.default.BLCursorType.kBLCursorRotate;break;case a.default.TransformType.TRANSFORM_SCALE:for(var u=e.getPagesRotation(),d=r.default.degreeToRadian(u)+n.getRotation_PropertyTest();d>=Math.PI;)d-=Math.PI;var s=r.default.degreeToRadian(45),c=0;c=d>0?r.default.castFloatToInt(d/s+.5):r.default.castFloatToInt(d/s-.5);var f=e.document,p=n.getPageIndex(),g=[[6,0,2,4,7,1,5,3],[4,6,0,2,5,7,3,1],[2,4,6,0,3,5,1,7],[0,2,4,6,1,3,7,5]][f.getPage(p).rotate/90][o];(g=(g-c)%8)<0&&(g+=8),l=(a.default.BLFlagIsSet(i,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?a.default.BLCursorType.kBLCursorScaleProportional_N:a.default.BLCursorType.kBLCursorScale_N)+g}e.setCursor(l)},y=function(t,o){!function(t,a){var o=n.getTransform(),i=s.copy(),l=t.copy();if(!i.isEqual(l)){n.setSnapInfo(null);var u=r.default.point(l.x-i.x,l.y-i.y);if(n.setOperationTransform(o.multiply(r.default.translationMatrix(u.x,u.y))),a){var d=n.getSnapData();if(d){var c;c=e.getZoom();var f=n.getOperationBounds().getBound(),p=null,g=r.default.point(),h={zoom:c,snapToGrid:e.isGridEnabled()},y=d.snapMove(f,l,h);if(y&&(p=y.snapInfo,g=y.snappedAnchor),n.setSnapInfo(p),!g.isEqual(l)){var m=r.default.point(g.x-i.x,g.y-i.y);n.setOperationTransform(o.multiply(r.default.translationMatrix(m.x,m.y)))}}}e.invalidate()}}(t,!a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),h(a.default.TransformType.TRANSFORM_MOVE,l,o)},m=function(t,o){!function(t,o){var i=n.getTransform(),u=i.invert();if(u){var d=u.mapPoint(t),s=n.getUserSpaceRect(),c=s.getWidth(),f=s.getHeight();if(!r.default.floatEq(c,0)&&!r.default.floatEq(f,0)){var p=s.getOrigin(),g=s.getCenter(),h=2*(d.x-p.x)/c,y=2*(d.y-p.y)/f;d.offset(-p.x,-p.y);var m=d.x/c,v=d.y/f,T=null;switch(l){case a.default.AnchorPlace.ANCHOR_CENTER:var P=Math.max(1-h,y-1,h-1,1-y);T=r.default.scalingMatrix(P,P,g);break;case a.default.AnchorPlace.ANCHOR_LEFT:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-m,1-m,p).multiply(r.default.translationMatrix(d.x,m*f/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-h,1-h,g):r.default.scalingMatrix(1-m,1,p).multiply(r.default.translationMatrix(d.x,0));break;case a.default.AnchorPlace.ANCHOR_TOP:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(v,v,p).multiply(r.default.translationMatrix((1-v)*c/2,0)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(y-1,y-1,g):r.default.scalingMatrix(1,v,p);break;case a.default.AnchorPlace.ANCHOR_RIGHT:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(m,m,p).multiply(r.default.translationMatrix(0,(1-m)*f/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(h-1,h-1,g):r.default.scalingMatrix(m,1,p);break;case a.default.AnchorPlace.ANCHOR_BOTTOM:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-v,1-v,p).multiply(r.default.translationMatrix(v*c/2,d.y)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-y,1-y,g):r.default.scalingMatrix(1,1-v,p).multiply(r.default.translationMatrix(0,d.y));break;case a.default.AnchorPlace.ANCHOR_TOP_LEFT:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var b=Math.min(1-m,v);T=r.default.scalingMatrix(b,b,p).multiply(r.default.translationMatrix((1-b)*c,0))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var M=Math.min(1-h,y-1);T=r.default.scalingMatrix(M,M,g)}else T=r.default.scalingMatrix(1-m,v,p).multiply(r.default.translationMatrix(d.x,0));break;case a.default.AnchorPlace.ANCHOR_TOP_RIGHT:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var B=Math.min(m,v);T=r.default.scalingMatrix(B,B,p)}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var L=Math.min(h-1,y-1);T=r.default.scalingMatrix(L,L,g)}else T=r.default.scalingMatrix(m,v,p);break;case a.default.AnchorPlace.ANCHOR_BOTTOM_LEFT:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var S=Math.min(1-m,1-v);T=r.default.scalingMatrix(S,S,p).multiply(r.default.translationMatrix((1-S)*c,(1-S)*f))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var x=Math.min(1-h,1-y);T=r.default.scalingMatrix(x,x,g)}else T=r.default.scalingMatrix(1-m,1-v,p).multiply(r.default.translationMatrix(d.x,d.y));break;case a.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var k=Math.min(m,1-v);T=r.default.scalingMatrix(k,k,p).multiply(r.default.translationMatrix(0,(1-k)*f))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var R=Math.min(h-1,1-y);T=r.default.scalingMatrix(R,R,g)}else T=r.default.scalingMatrix(m,1-v,p).multiply(r.default.translationMatrix(0,d.y))}T&&(i=T.multiply(i),n.setOperationTransform(i)),e.invalidate()}}}(t,o),h(a.default.TransformType.TRANSFORM_SCALE,l,o)};this.initialize=function(t){n=t},this.terminate=function(){},this.getToolName=function(){return"edit"},this.isFinished=function(){return i},this.handleEvent=function(t){if(i)return!1;switch(t.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case a.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){i||e.setSelectionNamed("Transform",n)},this.onLButtonDown=function(t,o){f(e,n.getPageIndex(),t);var c=g(t);if(!c)return i=!0,!1;if(e.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjContent,a.default.BLPermReqOp.kBLPermReqOpModify,!0)){l=c.anchor,d=n.getRotationOrigin(),u=n.getRotation_PropertyTest(),n.startOperation(c.type);var p=r.default.point(r.default.castFloatToInt(c.active.x),r.default.castFloatToInt(c.active.y));s=f(e,n.getPageIndex(),p)}return!0},this.onLButtonUp=function(t,r){n.isPerformingOperation()&&(n.endOperation(),e.invalidate());var a=g(t);return!!a&&(h(a.type,a.anchor,r),e.invalidate(),!0)},this.onRButtonUp=function(t,r){if(g(t)){var o=a.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|a.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations,i=n.getElement(),l=i&&i.isImage()?a.default.ContextMenuType.Image:a.default.ContextMenuType.Transform;return e.showContextMenu(l,t,o),!0}return!1},this.onMouseMove=function(t,o){var i=f(e,n.getPageIndex(),t);switch(n.getOperationType()){case a.default.TransformType.TRANSFORM_NONE:var c=g(t);return!!c&&(e.setHighlight(null),h(c.type,c.anchor,o),!0);case a.default.TransformType.TRANSFORM_MOVE:y(i,o);break;case a.default.TransformType.TRANSFORM_SCALE:m(i,o);break;case a.default.TransformType.TRANSFORM_ROTATE:!function(t,o){var i=n.getTransform(),c=d.copy(),f=s.copy(),p=t.copy(),g=r.default.point(f.x-c.x,f.y-c.y),y=r.default.point(p.x-c.x,p.y-c.y),m=r.default.vecAngleBetween(g,y);if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var v=u+m,T=r.default.degreeToRadian(45);m=(v=(v>0?r.default.castFloatToInt(v/T+.5):r.default.castFloatToInt(v/T-.5))*T)-u}n.setOperationTransform(i.multiply(r.default.rotationMatrix(m,c))),e.invalidate(),h(a.default.TransformType.TRANSFORM_ROTATE,l,o)}(i,o)}return!0},this.onKeyUp=function(t,r){return t==a.default.kBLKey.kBLKey_DELETE&&function(t){return"Delete"==t&&(e.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjContent,a.default.BLPermReqOp.kBLPermReqOpDelete,!0)&&(e.setSelection(null),n.deleteElement(),i=!0),!0)}("Delete")}};return e.createInstance=function(t,e){return new n(e)},e}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},HONZ:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}var l="bl-edit-clip-edit-inputhandler-module",u="bl-edit-clip-edit-inputhandler-factory";angular.module(l,[]).factory(u,["$rootScope",function(t){var e={},n=function(t,e,n){var a=r.default.point(t.x-e.x,t.y-e.y);return n*n>=a.x*a.x+a.y*a.y},i=function(t,e,n){return t.mapPointToPage(e,n)},l=function(t,e,n){return t.mapPointToDevice(e,n)},u=function(t){var e=Math.sqrt(t.a*t.a+t.b*t.b),n=t.b/e,r=t.a/e;return Math.atan2(n,r)},d=function(t){var e=t,d=null,s=!1,c=a.default.AnchorPlace.ANCHOR_NONE,f=r.default.point(),p=r.default.point(),g=function(t){a.default.TransformType.TRANSFORM_NONE,a.default.AnchorPlace.ANCHOR_NONE,r.default.point();var u,s=d.getPageIndex();if(!((u=e.getVisibleRange()).startPage<=s&&s<=u.endPage))return!1;var c=o.default.LookAndFeel.TransformerScaleZoneRadius,f=function(t,e,n){var a=l(t,e,n.tl),o=l(t,e,n.tr),i=l(t,e,n.bl),u=l(t,e,n.br);return r.default.quadFromPoints(a,o,i,u)}(e,s,d.getBounds());if(d.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&n(t,f.top_left(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP_LEFT,active:f.top_left()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&n(t,f.top_right(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:f.top_right()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Move)&&n(t,f.top_right(),c))return{type:a.default.TransformType.TRANSFORM_MOVE,anchor:a.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:f.top_right()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&n(t,f.bottom_left(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:f.bottom_left()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&n(t,f.bottom_right(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:f.bottom_right()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&n(t,f.top_center(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP,active:f.top_center()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&n(t,f.bottom_center(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM,active:f.bottom_center()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&n(t,f.center_left(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_LEFT,active:f.center_left()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&n(t,f.center_right(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_RIGHT,active:f.center_right()};var p=o.default.LookAndFeel.TransformerRotateZoneRadius;if(d.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&n(t,f.top_left(),p))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_TOP_LEFT,active:f.top_left()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&n(t,f.top_right(),p))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:f.top_right()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&n(t,f.bottom_left(),p))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:f.bottom_left()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&n(t,f.bottom_right(),p))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:f.bottom_right()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&n(t,f.top_center(),p))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_TOP,active:f.top_center()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&n(t,f.bottom_center(),p))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM,active:f.bottom_center()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&n(t,f.center_left(),p))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_LEFT,active:f.center_left()};if(d.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&n(t,f.center_right(),p))return{type:a.default.TransformType.TRANSFORM_ROTATE,anchor:a.default.AnchorPlace.ANCHOR_RIGHT,active:f.center_right()};var g=i(e,s,t);return d.hitTest(g)?{type:d.hasAnyCurrentEditMode(a.default.EditModes.Move)?a.default.TransformType.TRANSFORM_MOVE:a.default.TransformType.TRANSFORM_NONE,anchor:a.default.AnchorPlace.ANCHOR_NONE,active:t}:null},h=function(t,n,o){var i=a.default.BLCursorType.kBLCursorArrow;switch(t){case a.default.TransformType.TRANSFORM_MOVE:i=a.default.BLCursorType.kBLCursorMove;break;case a.default.TransformType.TRANSFORM_ROTATE:i=a.default.BLCursorType.kBLCursorRotate;break;case a.default.TransformType.TRANSFORM_SCALE:for(var l=e.getPagesRotation(),s=r.default.degreeToRadian(l)+u(d.getOperationTransform());s>=Math.PI;)s-=Math.PI;var c=r.default.degreeToRadian(45),f=0;f=s>0?r.default.castFloatToInt(s/c+.5):r.default.castFloatToInt(s/c-.5);var p=e.document,g=d.getPageIndex(),h=[[6,0,2,4,7,1,5,3],[4,6,0,2,5,7,3,1],[2,4,6,0,3,5,1,7],[0,2,4,6,1,3,7,5]][p.getPage(g).rotate/90][n];(h=(h-f)%8)<0&&(h+=8),i=(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?a.default.BLCursorType.kBLCursorScaleProportional_N:a.default.BLCursorType.kBLCursorScale_N)+h}e.setCursor(i)},y=function(t,n){!function(t){var n=d.getTransform(),a=p.copy(),o=t.copy();if(!a.isEqual(o)){var i=r.default.point(o.x-a.x,o.y-a.y);d.setOperationTransform(n.multiply(r.default.translationMatrix(i.x,i.y))),e.invalidate()}}(t),h(a.default.TransformType.TRANSFORM_MOVE,c,n)},m=function(t,n){!function(t,n){var o=d.getTransform(),i=o.invert();if(i){var l=i.mapPoint(t),u=d.getUserSpaceRect(),s=u.getWidth(),f=u.getHeight();if(!r.default.floatEq(s,0)&&!r.default.floatEq(f,0)){var p=u.getOrigin(),g=u.getCenter(),h=2*(l.x-p.x)/s,y=2*(l.y-p.y)/f;l.offset(-p.x,-p.y);var m=l.x/s,v=l.y/f,T=null;switch(c){case a.default.AnchorPlace.ANCHOR_LEFT:T=a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-m,1-m,p).multiply(r.default.translationMatrix(l.x,m*f/2)):a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-h,1-h,g):r.default.scalingMatrix(1-m,1,p).multiply(r.default.translationMatrix(l.x,0));break;case a.default.AnchorPlace.ANCHOR_TOP:T=a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(v,v,p).multiply(r.default.translationMatrix((1-v)*s/2,0)):a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(y-1,y-1,g):r.default.scalingMatrix(1,v,p);break;case a.default.AnchorPlace.ANCHOR_RIGHT:T=a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(m,m,p).multiply(r.default.translationMatrix(0,(1-m)*f/2)):a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(h-1,h-1,g):r.default.scalingMatrix(m,1,p);break;case a.default.AnchorPlace.ANCHOR_BOTTOM:T=a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-v,1-v,p).multiply(r.default.translationMatrix(v*s/2,l.y)):a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-y,1-y,g):r.default.scalingMatrix(1,1-v,p).multiply(r.default.translationMatrix(0,l.y));break;case a.default.AnchorPlace.ANCHOR_TOP_LEFT:if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var P=Math.min(1-m,v);T=r.default.scalingMatrix(P,P,p).multiply(r.default.translationMatrix((1-P)*s,0))}else if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var b=Math.min(1-h,y-1);T=r.default.scalingMatrix(b,b,g)}else T=r.default.scalingMatrix(1-m,v,p).multiply(r.default.translationMatrix(l.x,0));break;case a.default.AnchorPlace.ANCHOR_TOP_RIGHT:if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var M=Math.min(m,v);T=r.default.scalingMatrix(M,M,p)}else if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var B=Math.min(h-1,y-1);T=r.default.scalingMatrix(B,B,g)}else T=r.default.scalingMatrix(m,v,p);break;case a.default.AnchorPlace.ANCHOR_BOTTOM_LEFT:if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var L=Math.min(1-m,1-v);T=r.default.scalingMatrix(L,L,p).multiply(r.default.translationMatrix((1-L)*s,(1-L)*f))}else if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var S=Math.min(1-h,1-y);T=r.default.scalingMatrix(S,S,g)}else T=r.default.scalingMatrix(1-m,1-v,p).multiply(r.default.translationMatrix(l.x,l.y));break;case a.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT:if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var x=Math.min(m,1-v);T=r.default.scalingMatrix(x,x,p).multiply(r.default.translationMatrix(0,(1-x)*f))}else if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var k=Math.min(h-1,1-y);T=r.default.scalingMatrix(k,k,g)}else T=r.default.scalingMatrix(m,1-v,p).multiply(r.default.translationMatrix(0,l.y))}T&&(o=T.multiply(o),d.setOperationTransform(o)),e.invalidate()}}}(t,n),h(a.default.TransformType.TRANSFORM_SCALE,c,n)};this.initialize=function(t){d=t},this.terminate=function(){e=null},this.getToolName=function(){return"ClipEdit"},this.isFinished=function(){return s},this.handleEvent=function(t){if(s)return!1;switch(t.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case a.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode);case a.default.BLInputEventType.kBLInputEventPointerDoubleClicked:return this.onDoubleClicked(t.pointerArgs.position,t.pointerArgs.flags)}return!1},this.onLButtonDown=function(t,n){i(e,d.getPageIndex(),t);var o=g(t);if(!o)return s=!0,!1;if(e.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjContent,a.default.BLPermReqOp.kBLPermReqOpModify,!0)){c=o.anchor,f=d.getBounds().getCenter(),d.startOperation(o.type);var l=r.default.point(r.default.castFloatToInt(o.active.x),r.default.castFloatToInt(o.active.y));p=i(e,d.getPageIndex(),l)}return!0},this.onLButtonUp=function(t,n){d.endOperation(),e.invalidate();var r=g(t);return!!r&&(h(r.type,r.anchor,n),e.invalidate(),!0)},this.onRButtonDown=function(t,e){return!!g(t)||(s=!0,!1)},this.onRButtonUp=function(t,n){return!!g(t)&&(e.showContextMenu(a.default.ContextMenuType.ClipEdit,t,a.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|a.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations),!0)},this.onMouseMove=function(t,n){var o=i(e,d.getPageIndex(),t);switch(d.getOperationType()){case a.default.TransformType.TRANSFORM_NONE:var l=g(t);return!!l&&(e.setHighlight(null),h(l.type,l.anchor,n),!0);case a.default.TransformType.TRANSFORM_MOVE:y(o,n);break;case a.default.TransformType.TRANSFORM_SCALE:m(o,n);break;case a.default.TransformType.TRANSFORM_ROTATE:!function(t,n){var o=d.getTransform(),i=f.copy(),l=p.copy(),s=t.copy(),g=r.default.point(l.x-i.x,l.y-i.y),y=r.default.point(s.x-i.x,s.y-i.y),m=r.default.vecAngleBetween(g,y);if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var v=u(o),T=v+m,P=r.default.degreeToRadian(45);m=(T=(T>0?r.default.castFloatToInt(T/P+.5):r.default.castFloatToInt(T/P-.5))*P)-v}d.setOperationTransform(o.multiply(r.default.rotationMatrix(m,i))),e.invalidate(),h(a.default.TransformType.TRANSFORM_ROTATE,c,n)}(o,n)}return!0},this.onDoubleClicked=function(t,e){return s=!0,!1},this.onKeyUp=function(t){return t==a.default.kBLKey.kBLKey_DELETE&&function(t){return"Delete"==t&&(e.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjContent,a.default.BLPermReqOp.kBLPermReqOpModify,!0)&&(e.setSelection(null),d.delete(),s=!0),!0)}("Delete")}};return e.createInstance=function(t,e){return new d(e)},e}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},INCx:function(t,e,n){t.exports={default:n("q3gF"),__esModule:!0}},JWAb:function(t,e,n){var r=n("kM2E");r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},Jqpr:function(t,e,n){"use strict";!function(t){t&&t.__esModule}(n("C3UN"));n("mC++"),n("5UMD");var r="bl-edit-compositeeditobject-item-multiselect-module",a="bl-edit-compositeeditobject-item-multiselect-factory";angular.module(r,["bl-edit-graphicseditobject-module","bl-edit-utilites-module"]).factory(a,["$rootScope","bl-edit-graphicseditobject-factory","bl-edit-utilites-service",function(t,e,n){var r={createCompositeEditObjectForPage:function(t,e,n){null},getSelectedObjectsOnPage:function(t,e){return null}};return r}]),window.mainApp.factory(a,getConstructor(r,a,"factory"))},Jrzz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n("INCx")),a=l(n("b8L+")),o=l(n("iArn")),i=l(n("C3UN"));function l(t){return t&&t.__esModule?t:{default:t}}var u={},d=function(t,e){var n=[];return n.push(function(t){var e={};return e.U=t.units?t.units:"",e.C=t.conversionFactor,"D"!=t.fractionalFormat?(e.F=t.fractionalFormat,16!=t.fractionalDenominator&&(e.D=t.fractionalDenominator)):100!=t.fractionalDenominator&&(e.D=t.fractionalDenominator),t.fractionalKeepLowZeros&&(e.FD=!0),e.RT=t.thousandsSeparator,e.RD=t.decimalSeparator,e.PS=t.prefix?t.prefix:" ",e.SS=t.suffix?t.suffix:"","S"!=t.unitsPosition&&(e.O=t.unitsPosition?unitsPosition:""),e}(t)),n},s=function(t){var e={};return e.units=t.units,e.conversionFactor=t.scaleFactor,e.thousandsSeparator=t.thousandsSeparator[0]?t.thousandsSeparator[0]:"",e.decimalSeparator=t.decimalSeparator[0]?t.decimalSeparator[0]:"",e.suffix=t.textAndUnitsSeparator[0]?t.textAndUnitsSeparator[0]:"",e.fractionalFormat="D",e.fractionalDenominator=100,e.fractionalKeepLowZeros=!1,e},c=function(t){var e=s(t.xArray),n=s(t.dArray),r=s(t.aArray),a={};return a.ratioString=t.scaleRatio,a.xFormat=e,a.xFormatSize=1,a.distanceFormat=n,a.distanceFormatSize=1,a.areaFormat=r,a.areaFormatSize=1,a.origin={x:0,y:0},function(t){if(t&&t.ratioString&&t.xFormat&&t.xFormatSize>0){var e={};e.R=t.ratioString,e.X=d(t.xFormat,t.xFormatSize),t.yFormat&&t.yFormatSize>0&&(e.Y=d(t.yFormat,t.yFormatSize)),t.distanceFormat&&t.distanceFormatSize>0&&(e.D=d(t.distanceFormat,t.distanceFormatSize)),t.areaFormat&&t.areaFormatSize>0&&(e.A=d(t.areaFormat,t.areaFormatSize)),t.angleFormat&&t.angleFormatSize>0&&(e.T=d(t.angleFormat,t.angleFormatSize)),t.slopeFormat&&t.slopeFormatSize>0&&(e.S=d(t.slopeFormat,t.slopeFormatSize));var n=[];return n.push(t.origin.x),n.push(t.origin.y),e.O=n,t.yFormatSize>0&&(e.CYX=t.cyx),e}return null}(a)},f=function(t){var e=function(t){var e=o.default.getUnitsName(t,!0),n={scaleFactor:1,units:e,thousandsSeparator:"",decimalSeparator:".",textAndUnitsSeparator:""},r={scaleFactor:1,units:"sq "+e,thousandsSeparator:"",decimalSeparator:".",textAndUnitsSeparator:""};return{scaleRatio:"1 "+e+" = 1 "+e,xArray:{scaleFactor:o.default.convert.to(i.default.Units.unit,t,1),units:e,thousandsSeparator:"",decimalSeparator:".",textAndUnitsSeparator:""},dArray:n,aArray:r}}(t);return c(e)},p=function(t){var e={};return t?(e.conversionFactor=t.C,e.units=t.U,e.fractionalFormat="D",t.F&&(e.fractionalFormat=t.F),e.fractionalDenominator="D"==e.fractionalFormat?100:16,e.fractionalKeepLowZeros=!1,t.FD&&(e.fractionalKeepLowZeros=t.FD),e.thousandsSeparator=",",t.RT&&(e.thousandsSeparator=t.RT),e.decimalSeparator=",",t.RD&&(e.decimalSeparator=t.RD),e.prefix=" ",t.PS&&t.PS.length>0&&(e.prefix=t.PS),e.suffix=" ",t.SS&&t.SS.length>0&&(e.suffix=t.SS),e.unitsPosition="S",t.O&&t.O.length>0&&(e.unitsPosition=t.O),e):null},g=function(t,e){for(var n=void 0;0!=t;)n=t,t=e%t,e=n;return e},h=function t(e,n){return(e=parseInt(e))<0?"-"+t(-e,n):e<1e3?e:""+t(e/1e3,n)+n+pad(e%1e3,3)};u.invalidIndex=-1,u.getPolygonAnnotationVertices=function(t){if(!window.isArray(t))return null;for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e},u.verticeToPoint=function(t){return window.isArray(t)?2!==t.length?null:a.default.point(t[0],t[1]):null},u.makeDistanceFormatString=function(t,e,n){var o,i,l=[a.default.point(0,0),t];e||(e=f(n));var u=function(t){var e=1,n=1,r=1;return t.CYX&&(e=t.CYX),t.X&&t.X.length>0&&t.X[0].C&&(n=t.X[0].C),r=n,t.Y&&t.Y.length>0&&t.Y[0].C&&(r=t.Y[0].C),{pX:n,pY:r*e}}(e);o=u.pX,i=u.pY;for(var d=0,s=l[0],c=1;c<l.length;++c){var y=l[c],m=o*(y.x-s.x),v=i*(y.y-s.y);d+=Math.sqrt(m*m+v*v),s=y}return function(t,e){var n=e,a="",o=n.length;if(o>=1)for(var i=t,l=o-1,u=0;u<o;++u){var d=n[u],s=p(d),c=parseFloat(i*s.conversionFactor),f=parseInt(c),y=!1,m="",v=Math.abs(c-f);if(0==v)y=!0;else if(u==l){switch(s.fractionalFormat){case"D":var T=parseInt(v*s.fractionalDenominator);if(0!=T){for(var P="",b=s.fractionalDenominator/10;T<b;)P+="0",b/=10;P+=T,s.fractionalKeepLowZeros||(P=P.replace(/0+$/,"")),0!=P.length&&(m=s.decimalSeparator+P)}break;case"F":var M=parseInt(s.fractionalDenominator),B=parseInt(v*s.fractionalDenominator);if(!s.fractionalKeepLowZeros){var L=g(B,M);B/=L,M/=L}m=" "+B+"/"+M;break;case"R":f=parseInt(Math.round(c));break;case"T":f=parseInt((0,r.default)(c))}y=!0}var S=h(f,s.thousandsSeparator)+m,x=s.prefix+s.units+s.suffix;if(a+="P"==s.unitsPosition?x+S:S+x,y)break;i=v}return a}(d,e.D)},e.default=u},KcDN:function(t,e,n){"use strict";var r=d(n("HSQo")),a=d(n("C3UN")),o=d(n("b8L+")),i=d(n("VmtT")),l=d(n("IZAc")),u=d(n("Jrzz"));function d(t){return t&&t.__esModule?t:{default:t}}n("tZNd"),n("iMU4"),n("Ij0n"),n("F1Q0");var s="bl-edit-lineannoteditselection-module",c="bl-edit-lineannoteditselection-factory";angular.module(s,["bl-edit-baseannoteditselection-module","bl-edit-lineannoteditobject-module","transformer-painter-module","bl-object-properties-module","pdf-manager-module"]).factory(c,["$rootScope","bl-edit-baseannoteditselection-factory","bl-edit-lineannoteditobject-factory","transformer-painter-service","bl-object-properties-factory","pdf-manager-factory","ui-usersettings-factory","geometry-factory","authentication-service",function(t,e,n,d,s,c,f,p,g){var h=i.default.LookAndFeel.AnnotTransformerFrameColor,y=l.default.createInstance("#FFFFFFFF"),m=[10],v=function(t,e,n){var r=function(t){if(!t)return"";var e=t.getOperationStartPoint(),n=t.getOperationEndPoint(),r=t.getAnnot(),a="",i=r.content.split("\n");2===i.length&&(a=i[0]);var l=u.default.makeDistanceFormatString(o.default.point(n.x-e.x,n.y-e.y),r.measure,f.settings.layout.units);return a.isNullOrWhiteSpace()?l:a+"\n"+l}(n),i=function(t){return t?t.createFontFace("Segoe UI",a.default.GFontStyle.kGFontStyleRegular,10):null}(e),l=function(t,e){if(!e)return null;var n=e.getOperationStartPoint(),r=e.getOperationEndPoint(),a=o.default.point(r.x,r.y),i=r.x<n.x?t.width+10:-10,l=r.y<n.y?t.height+10:-10;return o.default.point(a.x-i,-a.y+l)}(function t(e,n){var r=(t.calculateTextBoundCanvas||(t.calculateTextBoundCanvas=document.createElement("canvas"))).getContext("2d");r.font=e;var a=r.measureText(n);return o.default.size(a.width,parseInt(e.match(/\d+/)[0]))}(i,r),n);l&&(e.pushState(),e.concatCTM(o.default.reflectYMatrix()),e.translateCTM(l.x,l.y),e.fillText(i,r,t),e.popState())},T=function(t,e,n){t.beginFigure(e),t.lineTo(n),t.endFigure()};return{createInstance:function(){var t=e.createInstance();return t.draw=function(e,r){var l=t.AnnotEditObject_;if(r===l.getPageIndex()){var u=void 0;if(l.getOperation()!==n.TransformType.kTransformNone){if(l.getOperation()!==n.TransformType.kTransformMovePoint){var s=o.default.quadFromRect(l.getRect());d.drawFrame(e,s,null,h,m)}if(l.getOperation()===n.TransformType.kTransformMovePoint&&(l.getOperationHandle()===n.HandleType.kHandleLeaderLineStartPoint||l.getOperationHandle()===n.HandleType.kHandleLeaderLineEndPoint)){var c=function(t,e,n,r,a,i){var l=p.createGeometry();if(l){var u=l.getBound(null),d=o.default.rect(t.x,t.y,e.x,e.y),s=o.default.matrix();s=o.default.translationMatrix(d.min_x(),d.min_y()).multiply(s),s=o.default.scalingMatrix(d.getWidth()/u.getWidth(),d.getHeight()/u.getHeight()).multiply(s),s=o.default.translationMatrix(-u.min_x(),-u.min_y()).multiply(s);var c=l.transform(s);t.x>n.x&&(n=[t,t=n][0]);var f=r>=0?o.default.point(n.x-t.x,n.y-t.y):o.default.point(t.x-n.x,t.y-n.y),g=o.default.point(-f.y,f.x).vecNormalized(),h=o.default.point(t.x+g.x*i,t.y+g.y*i),y=o.default.point(n.x+g.x*i,n.y+g.y*i),m=Math.abs(r),v=o.default.point(h.x+g.x*m,h.y+g.y*m),P=o.default.point(y.x+g.x*m,y.y+g.y*m),b=o.default.point(v.x+g.x*a,v.y+g.y*a),M=o.default.point(P.x+g.x*a,P.y+g.y*a);return 0===r&&0===a||(T(c,h,b),T(c,y,M)),T(c,v,P),c.endFigureClose(),c}return null}(l.getStartPoint(),l.getEndPoint(),l.getOperationEndPoint(),l.getAnnot().leaderLineLength,5,0);c&&e.strokeGeometry(c,h,l.getAnnot().leaderLineLength,{dashPattern:m})}if(u=l.getOperationBounds(),l.getOperation()!==n.TransformType.kTransformMovePoint){var f=o.default.quadFromRect(u.getBound());d.drawFrame(e,f,null,null)}}else u=o.default.quadFromRect(l.getRect());l.getOperation()!==n.TransformType.kTransformMovePoint&&d.drawFrame(e,u,null,h);var g=i.default.LookAndFeel.TransformerAnchorRadius;if(l.getOperation()!==n.TransformType.kTransformNone){var P=u.getCenter(),b=i.default.LookAndFeel.TransformerOriginRadius;switch(l.getOperation()){case n.TransformType.kTransformMove:break;case n.TransformType.kTransformRotate:case n.TransformType.kTransformScale:d.drawOrigin(e,y,h,P,g,b)}l.getAnnot().enableMeasurement&&v(h,e,l);var M=l.getOperationStartPoint(),B=l.getOperationEndPoint();e.strokeLine(M,B,h,0,null)}else{if(l.hasAnyCurrentEditMode(a.default.EditModes.Move|a.default.EditModes.Resize|a.default.EditModes.Rotate))if(window.deviceDetect.isPhone()){var L={fillColor:"#3688dc",anchorRadius:g+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};l.hasAnyCurrentEditMode(a.default.EditModes.Move)?L.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Resize)?L.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&(L.text=""),d.drawMarker(e,L.fillColor,h,u.top_right(),g,L)}else d.drawMarker(e,y,h,u.top_right(),g);l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&(d.drawMarker(e,y,h,u.top_left(),g),d.drawMarker(e,y,h,u.bottom_right(),g),d.drawMarker(e,y,h,u.bottom_left(),g));var S=e.getCTM().mapQuad(u),x=i.default.LookAndFeel.TransformerScaleZoneRadius;o.default.pointsDistance(S.center_right(),S.center_left())>=3*x&&l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&(d.drawMarker(e,y,h,u.top_center(),g),d.drawMarker(e,y,h,u.bottom_center(),g)),o.default.pointsDistance(S.top_center(),S.bottom_center())>=3*x&&l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&(d.drawMarker(e,y,h,u.center_right(),g),d.drawMarker(e,y,h,u.center_left(),g)),l.hasAnyCurrentEditMode(a.default.EditModes.MovePoint)&&(d.drawMarker(e,y,h,l.getStartPoint(),g),d.drawMarker(e,y,h,l.getEndPoint(),g),l.getAnnot().enableMeasurement&&(d.drawMarker(e,y,h,l.getLeaderLineStartPoint(),g),d.drawMarker(e,y,h,l.getLeaderLineEndPoint(),g)))}}},t.getProperties=function(){var e=this.getSelectionData().getAnnot(),n=s.createMainGroup(function(n){return c.changeAnnotationProperties(t.DocumentView_.getDocument(),e,t.AnnotEditObject_.getPageIndex(),n)}),o={flags:e.flags,getFullPropData:function(){return this.flags}};return(0,r.default)(o,{locked:{get:function(){return 0!=(this.flags&a.default.pdfAnnotationFlag.Locked)},set:function(t){t?this.flags|=a.default.pdfAnnotationFlag.Locked:this.flags&=~a.default.pdfAnnotationFlag.Locked}}}),function(){var t=s.createPropValue("Line","T"),r=s.createProperty(a.default.objectPropertyType.textlabel,t,"Type"),i=s.createSubGroup("Type",[r]);n.addToTabGroup(a.default.objectPropertyGroupType.general,i);var l=e.titleText,u=s.createPropValue(l,"Tx"),d=s.createProperty(a.default.objectPropertyType.textedit,u,"Author"),c=e.subjectText,f=s.createPropValue(c,"SJ"),p=s.createProperty(a.default.objectPropertyType.textedit,f,"Subject"),g=s.createSubGroup("Info",[d,p]);n.addToTabGroup(a.default.objectPropertyGroupType.general,g);var h=new Date(e.modificationDate),y=s.createPropValue(h,"MD"),m=s.createProperty(a.default.objectPropertyType.textlabel,y,"Modified",a.default.objectPropertyStyle.dateTime),v=s.createPropValue(o,"F",["locked"]),T=s.createProperty(a.default.objectPropertyType.select,v,"Locked",a.default.objectPropertyStyle.bool),P=s.createSubGroup("Modify",[m,T]);n.addToTabGroup(a.default.objectPropertyGroupType.general,P)}(),function(){var t={W:e.borderStyle.width,S:e.borderStyle.style,D:e.borderStyle.dashPattern},r=s.createPropValue(t,"BS",["S"]),o=s.createProperty(a.default.objectPropertyType.select,r,"Style",a.default.objectPropertyStyle.borderStyle),i=s.createPropValue(t,"BS",["W"]),l=s.createProperty(a.default.objectPropertyType.number,i,"Width"),u=e.color,d=s.createPropValue(u,"C"),c=s.createProperty(a.default.objectPropertyType.color,d,"Color","annot-color"),f={propType:a.default.objectPropertyType.opacity,val:e.opacity},p=s.createPropValue(f,"CA"),g=s.createProperty(a.default.objectPropertyType.opacity,p,"Opacity"),h=s.createSubGroup("Line",[o,l,c,g]);n.addToTabGroup(a.default.objectPropertyGroupType.appearance,h)}(),n},t},select:function(t,e,r,a){var o=null;if(!t||e<0||!r)return null;var i=t.document,l=n.createInstance(i,e,r);return a?t.setHighlightNamed("LineAnnotEdit",l):o=t.setSelectionAndTool("LineAnnotEdit",l),o}}}]),window.mainApp.factory(c,getConstructor(s,c,"factory"))},Kopg:function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("C3UN"));function o(t){return t&&t.__esModule?t:{default:t}}n("ZqXQ"),n("5UMD"),n("k+uf");var i="bl-edit-texteditobject-factory";angular.module("bl-edit-texteditobject-module",["bl-edit-utilites-module","bl-edit-editobject-module","bl-edit-chariterator-module","pdf-manager-module"]).factory(i,["$q","$rootScope","bl-edit-utilites-service","bl-edit-editobject-factory","bl-edit-chariterator-factory","pdf-manager-factory",function(t,e,n,o,i,l){var u=function(t,e,n,a){var i=this,l=a,u=n,d=r.default.identityMatrix();!function(){var t={position:r.default.point(),size:r.default.size(),rotation:0,reflect:!1};t.position=l.rect.left_top(),t.size=l.rect.getSize(),t.rotation=l.rotate,t.reflect=l.reflect,d=function(t){var e=r.default.identityMatrix();return e=e.multiply(r.default.scalingMatrix(t.size.width,t.size.height)),t.reflect&&(e=e.multiply(r.default.reflectYMatrix())),e=(e=e.multiply(r.default.rotationMatrix(t.rotation))).multiply(r.default.translationMatrix(t.position.x,t.position.y))}(t)}(),i.prototype=o.createInstance(t,e),i.getPageIndex=function(){return i.prototype.getPageIndex()},i.getObjectType=function(){return"TextEdit"},i.hitTestPoint=function(t){return i.getBounds().containsPoint(t)},i.hitTestRect=function(t){return i.getBounds().hasIntersectionRect(t)},i.getObjectSpaceRect=function(){return r.default.rect(0,0,1,-1)},i.getCTM=function(){return d},i.applyEdit=function(){alert("textEditObject - applyEdit")},i.delete=function(){alert("textEditObject - delete")},i.getData=function(){return i},i.getActiveChar=function(){return u},i.getPDEElement=function(){return l},i.getBounds=function(){var t=i.getCTM(),e=i.getObjectSpaceRect();return t.mapQuad(r.default.quadFromRect(e))},i.compareInternals=function(t){return t&&t.getPDEElement()===i.getPDEElement()}},d={createEditObjectByCharIterator:function(t,e,n){if(!n)return null;var r=n.getTextBlock();return r?new u(t,e,n,r):null},createEditObjectByPagePoint:function(t,e,n,r){if(n.type==a.default.PDEElementType.kPDEElementText){var o=n.getItemAtPoint(r);if(o){var l=t.getPage(e),u=i.createCharIteratorForItemAtPoint(t,l,o,r);return u?d.createEditObjectByCharIterator(t,e,u):null}}return null},createTextEditObject:function(t,e,n){var r=t.getPage(e);if(!n)return null;var a=r.textBlocks.indexOf(n);if(a<0)return null;var o=i.createBeginCharIteratorForTextBlock(t,r,r.content,a);return o?d.createEditObjectByCharIterator(t,e,o):null}};return d}]),window.mainApp.factory(i,getConstructor("bl-edit-texteditobject-module",i,"factory"))},LYHW:function(t,e,n){"use strict";var r=i(n("Xxa5")),a=i(n("exGp")),o=i(n("C3UN"));function i(t){return t&&t.__esModule?t:{default:t}}n("r1RI");var l="bl-selecteditobjectservice-edit-module",u="bl-selecteditobjectservice-edit-factory";angular.module(l,["bl-editmodule-module"]).factory(u,["$rootScope","bl-editmodule-service",function(t,e){var n={};return n.selectObject=function(){var t=(0,a.default)(r.default.mark(function t(n,a,i){var l,u,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l={selected:!1,inputHandler:null},n&&a){t.next=3;break}return t.abrupt("return",l);case 3:if("TextEdit"===a.getObjectType()){t.next=5;break}return t.abrupt("return",l);case 5:return u=a.getData(),d=u.getActiveChar(),t.next=10,e.createAndSetCaret(n,d,i);case 10:return l.inputHandler=t.sent,l.selected=!0,n.setCursor(o.default.BLCursorType.kBLCursorIBeam),t.abrupt("return",l);case 14:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),n}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},MKPA:function(t,e,n){"use strict";var r=u(n("Xxa5")),a=u(n("exGp")),o=u(n("b8L+")),i=u(n("C3UN")),l=u(n("VmtT"));function u(t){return t&&t.__esModule?t:{default:t}}n("NMNB"),n("/UwL"),n("ATCw"),n("4TVJ"),n("UF/7");var d="bl-edit-textedit-inputhandler-module",s="bl-edit-textedit-inputhandler-factory";angular.module(d,["bl-edit-texteditobject-module","bl-edit-chariterator-module","bl-text-edit-textfield-obj-factory-module","bl-text-edit-textfield-view-factory-module","bl-text-edit-renderer-service-module","bl-text-edit-textfield-selection-factory-module","bl-text-edit-textfield-inputhandler-factory-module"]).factory(s,["$rootScope","$q","bl-edit-texteditobject-factory","bl-text-edit-textfield-obj-factory","bl-text-edit-textfield-view-factory","bl-text-edit-renderer-service","bl-text-edit-textfield-selection-factory","bl-text-edit-textfield-inputhandler-factory",function(t,e,n,u,d,s,c,f){var p={},g=function(t){var s=t,p=null,g=!1,h=i.default.AnchorPlace.ANCHOR_NONE,y=0,m=o.default.point(),v=o.default.point(),T=function(t,e,n){var r=o.default.point(t.x-e.x,t.y-e.y);return n*n>=r.x*r.x+r.y*r.y},P=function(t,e,n){return t.mapPointToPage(e,n)},b=function(t,e,n){return t.mapPointToDevice(e,n)},M=function(t){var e=B(t,0);return!(!p||!e)&&p.getPosition()},B=function(t,e){i.default.TransformType.TRANSFORM_NONE,i.default.AnchorPlace.ANCHOR_NONE,o.default.point();var n,r=p.getTextBlockTransformer(),a=r.getPageIndex();if(!((n=s.getVisibleRange()).startPage<=a&&a<=n.endPage))return!1;var u=i.default.TransformType.TRANSFORM_RESIZE_BLOCK;(i.default.BLFlagIsSet(e,i.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)||i.default.BLFlagIsSet(e,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed))&&(u=i.default.TransformType.TRANSFORM_SCALE);var d=l.default.LookAndFeel.TransformerScaleZoneRadius,c=function(t,e,n){var r=b(t,e,n.tl),a=b(t,e,n.tr),i=b(t,e,n.bl),l=b(t,e,n.br);return o.default.quadFromPoints(r,a,i,l)}(s,a,r.getBounds()),f=null,g=r.getAllActionButtons();if(g)for(var h in g)if(g.hasOwnProperty(h)){var y=g[h];if(y){var m=b(s,a,y.getPosition());if(T(t,m,y.anchorRadius)){(f=y).viewPoint=m;break}}}if(f)return{type:i.default.TransformType.TRANSFORM_HIT_ACTIONBUTTON,active:f.viewPoint};if(r.hasAnyCurrentEditMode(i.default.EditModes.Resize)&&T(t,c.top_left(),d))return{type:u,anchor:i.default.AnchorPlace.ANCHOR_TOP_LEFT,active:c.top_left()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Resize)&&T(t,c.top_right(),d))return{type:u,anchor:i.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:c.top_right()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Move)&&T(t,c.top_right(),d))return{type:i.default.TransformType.TRANSFORM_MOVE,anchor:i.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:c.top_right()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Resize)&&T(t,c.bottom_left(),d))return{type:u,anchor:i.default.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:c.bottom_left()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Resize)&&T(t,c.bottom_right(),d))return{type:u,anchor:i.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:c.bottom_right()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Resize)&&o.default.pointsDistance(c.center_right(),c.center_left())>=3*d){if(T(t,c.top_center(),d))return{type:u,anchor:i.default.AnchorPlace.ANCHOR_TOP,active:c.top_center()};if(T(t,c.bottom_center(),d))return{type:u,anchor:i.default.AnchorPlace.ANCHOR_BOTTOM,active:c.bottom_center()}}if(r.hasAnyCurrentEditMode(i.default.EditModes.Resize)&&o.default.pointsDistance(c.top_center(),c.bottom_center())>=3*d){if(T(t,c.center_left(),d))return{type:u,anchor:i.default.AnchorPlace.ANCHOR_LEFT,active:c.center_left()};if(T(t,c.center_right(),d))return{type:u,anchor:i.default.AnchorPlace.ANCHOR_RIGHT,active:c.center_right()}}var v=l.default.LookAndFeel.TransformerRotateZoneRadius;if(r.hasAnyCurrentEditMode(i.default.EditModes.Rotate)&&T(t,c.top_left(),v))return{type:i.default.TransformType.TRANSFORM_ROTATE,anchor:i.default.AnchorPlace.ANCHOR_TOP_LEFT,active:c.top_left()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Rotate)&&T(t,c.top_right(),v))return{type:i.default.TransformType.TRANSFORM_ROTATE,anchor:i.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:c.top_right()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Rotate)&&T(t,c.bottom_left(),v))return{type:i.default.TransformType.TRANSFORM_ROTATE,anchor:i.default.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:c.bottom_left()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Rotate)&&T(t,c.bottom_right(),v))return{type:i.default.TransformType.TRANSFORM_ROTATE,anchor:i.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:c.bottom_right()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Rotate)&&o.default.pointsDistance(c.center_right(),c.center_left())>=3*d){if(T(t,c.top_center(),v))return{type:i.default.TransformType.TRANSFORM_ROTATE,anchor:i.default.AnchorPlace.ANCHOR_TOP,active:c.top_center()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Rotate)&&T(t,c.bottom_center(),v))return{type:i.default.TransformType.TRANSFORM_ROTATE,anchor:i.default.AnchorPlace.ANCHOR_BOTTOM,active:c.bottom_center()}}if(r.hasAnyCurrentEditMode(i.default.EditModes.Rotate)&&o.default.pointsDistance(c.top_center(),c.bottom_center())>=3*d){if(T(t,c.center_left(),v))return{type:i.default.TransformType.TRANSFORM_ROTATE,anchor:i.default.AnchorPlace.ANCHOR_LEFT,active:c.center_left()};if(r.hasAnyCurrentEditMode(i.default.EditModes.Rotate)&&T(t,c.center_right(),v))return{type:i.default.TransformType.TRANSFORM_ROTATE,anchor:i.default.AnchorPlace.ANCHOR_RIGHT,active:c.center_right()}}var M=P(s,a,t);if(r.hitTest(M))return{type:r.hasAnyCurrentEditMode(i.default.EditModes.Move)?i.default.TransformType.TRANSFORM_MOVE:i.default.TransformType.TRANSFORM_NONE,anchor:i.default.AnchorPlace.ANCHOR_NONE,active:t};var B=r.getTransform().invert().mapPoint(M);return r.getUserSpaceRect().containsPoint(B)?{type:r.hasAnyCurrentEditMode(i.default.EditModes.Move)?i.default.TransformType.TRANSFORM_MOVE:i.default.TransformType.TRANSFORM_NONE,anchor:i.default.AnchorPlace.ANCHOR_NONE,active:t}:null},L=function(t,e,n){var r=i.default.BLCursorType.kBLCursorArrow;switch(t){case i.default.TransformType.TRANSFORM_MOVE:r=i.default.BLCursorType.kBLCursorMove;break;case i.default.TransformType.TRANSFORM_ROTATE:r=i.default.BLCursorType.kBLCursorRotate;break;case i.default.TransformType.TRANSFORM_SCALE:case i.default.TransformType.TRANSFORM_RESIZE_BLOCK:for(var a=p.getTextBlockTransformer(),l=s.getPagesRotation(),u=o.default.degreeToRadian(l)+a.getRotation_PropertyTest();u>=Math.PI;)u-=Math.PI;var d=o.default.degreeToRadian(45),c=0;c=u>0?o.default.castFloatToInt(u/d+.5):o.default.castFloatToInt(u/d-.5);var f=s.document,g=a.getPageIndex(),h=[[6,0,2,4,7,1,5,3],[4,6,0,2,5,7,3,1],[2,4,6,0,3,5,1,7],[0,2,4,6,1,3,7,5]][f.getPage(g).rotate/90][e];(h=(h-c)%8)<0&&(h+=8),r=(i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.default.BLCursorType.kBLCursorScaleProportional_N:i.default.BLCursorType.kBLCursorScale_N)+h}s.setCursor(r)},S=function(t,e,n){var r=t.getTransform(),a=v.copy(),l=e.copy();if(!a.isEqual(l)){t.setSnapInfo(null);var u=o.default.point(l.x-a.x,l.y-a.y);if(t.setOperationTransform(r.multiply(o.default.translationMatrix(u.x,u.y))),!i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var d=t.getSnapData();if(d){var c;c=s.getZoom();var f=t.getOperationBounds().getBound(),p=null,g=o.default.point(),y={zoom:c,snapToGrid:s.isGridEnabled()},m=d.snapMove(f,l,y);if(m&&(p=m.snapInfo,g=m.snappedAnchor),t.setSnapInfo(p),!g.isEqual(l)){var T=o.default.point(g.x-a.x,g.y-a.y);t.setOperationTransform(r.multiply(o.default.translationMatrix(T.x,T.y)))}}}s.invalidate()}L(i.default.TransformType.TRANSFORM_MOVE,h,n)},x=function(t,e,n){var r=t.getTransform(),a=m.copy(),l=v.copy(),u=e.copy(),d=o.default.point(l.x-a.x,l.y-a.y),c=o.default.point(u.x-a.x,u.y-a.y),f=o.default.vecAngleBetween(d,c);if(i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var p=y+f,g=o.default.degreeToRadian(45);f=(p=(p>0?o.default.castFloatToInt(p/g+.5):o.default.castFloatToInt(p/g-.5))*g)-y}t.setOperationTransform(r.multiply(o.default.rotationMatrix(f,a))),s.invalidate(),L(i.default.TransformType.TRANSFORM_ROTATE,h,n)},k=function(t,e,n,r){isUndefinedOrNull(r)&&(r=!1);var a=t.getTransform(),l=a.invert();if(l){var u=l.mapPoint(e),d=t.getUserSpaceRect(),c=d.getWidth(),f=d.getHeight();if(!o.default.floatEq(c,0)&&!o.default.floatEq(f,0)){var p=d.getOrigin(),g=d.getCenter(),y=2*(u.x-p.x)/c,m=2*(u.y-p.y)/f;u.offset(-p.x,-p.y);var v=u.x/c,T=u.y/f,P=null;switch(h){case i.default.AnchorPlace.ANCHOR_LEFT:P=r?i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?o.default.scalingMatrix(1-v,1-v,p).multiply(o.default.translationMatrix(u.x,v*f/2)):o.default.scalingMatrix(1-y,1-y,g):o.default.scalingMatrix(1-v,1,p).multiply(o.default.translationMatrix(u.x,0));break;case i.default.AnchorPlace.ANCHOR_TOP:P=r?i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?o.default.scalingMatrix(T,T,p).multiply(o.default.translationMatrix((1-T)*c/2,0)):o.default.scalingMatrix(m-1,m-1,g):o.default.scalingMatrix(1,T,p);break;case i.default.AnchorPlace.ANCHOR_RIGHT:P=r?i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?o.default.scalingMatrix(v,v,p).multiply(o.default.translationMatrix(0,(1-v)*f/2)):o.default.scalingMatrix(y-1,y-1,g):o.default.scalingMatrix(v,1,p);break;case i.default.AnchorPlace.ANCHOR_BOTTOM:P=r?i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?o.default.scalingMatrix(1-T,1-T,p).multiply(o.default.translationMatrix(T*c/2,u.y)):o.default.scalingMatrix(1-m,1-m,g):o.default.scalingMatrix(1,1-T,p).multiply(o.default.translationMatrix(0,u.y));break;case i.default.AnchorPlace.ANCHOR_TOP_LEFT:if(r)if(i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var b=Math.min(1-v,T);P=o.default.scalingMatrix(b,b,p).multiply(o.default.translationMatrix((1-b)*c,0))}else{var M=Math.min(1-y,m-1);P=o.default.scalingMatrix(M,M,g)}else P=o.default.scalingMatrix(1-v,T,p).multiply(o.default.translationMatrix(u.x,0));break;case i.default.AnchorPlace.ANCHOR_TOP_RIGHT:if(r)if(i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var B=Math.min(v,T);P=o.default.scalingMatrix(B,B,p)}else{var S=Math.min(y-1,m-1);P=o.default.scalingMatrix(S,S,g)}else P=o.default.scalingMatrix(v,T,p);break;case i.default.AnchorPlace.ANCHOR_BOTTOM_LEFT:if(r)if(i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var x=Math.min(1-v,1-T);P=o.default.scalingMatrix(x,x,p).multiply(o.default.translationMatrix((1-x)*c,(1-x)*f))}else{var k=Math.min(1-y,1-m);P=o.default.scalingMatrix(k,k,g)}else P=o.default.scalingMatrix(1-v,1-T,p).multiply(o.default.translationMatrix(u.x,u.y));break;case i.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT:if(r)if(i.default.BLFlagIsSet(n,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var R=Math.min(v,1-T);P=o.default.scalingMatrix(R,R,p).multiply(o.default.translationMatrix(0,(1-R)*f))}else{var F=Math.min(y-1,1-m);P=o.default.scalingMatrix(F,F,g)}else P=o.default.scalingMatrix(v,1-T,p).multiply(o.default.translationMatrix(0,u.y))}P&&(a=P.multiply(a),t.setOperationTransform(a)),s.invalidate(),L(i.default.TransformType.TRANSFORM_SCALE,h,n)}}},R=function(t){return"Delete"==t&&(s.requestPermissions(i.default.BLPermReqObj.kBLPermReqObjContent,i.default.BLPermReqOp.kBLPermReqOpDelete,!0)&&(s.setSelection(null),p.delete(),g=!0),!0)};this.initialize=function(t){p=t,g=!1,deviceDetect.isPhone()||function(){if(!p.handler){var t=p.getTextBlockTransformer();if(t&&t.getTextBlock()){var e=t.getPageIndex(),n=u.createInstance(s,e,t),r=d.createInstance(s,n),a=f.createInstance("TextBlockEdit",s);if(a){a.initialize(r);var o=c.createInstance();o&&o.init(s,r),p.handler={inputHandler:a,selection:o}}}}}()},this.terminate=function(){p&&p.terminate(),p=null,s=null},this.getToolName=function(){return"edit"},this.isFinished=function(){return g},this.handleEvent=function(t){if(g)return!1;var e=p.getTextBlockTransformer();if((!e||!e.isPerformingOperation())&&p.handler&&p.handleEvent(t))return!0;switch(t.type){case i.default.BLInputEventType.kBLInputEventCommand:return R(t.commandArgs.command);case i.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case i.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags);case i.default.BLInputEventType.kBLInputEventPointerDoubleClicked:return this.onDoubleClick(t.pointerArgs.position,t.pointerArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonDown=function(){var t=(0,a.default)(r.default.mark(function t(e,a){var l,u,d,c,f,T,b=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l=B(e,a))){t.next=13;break}if(!s.requestPermissions(i.default.BLPermReqObj.kBLPermReqObjContent,i.default.BLPermReqOp.kBLPermReqOpModify)){t.next=11;break}if(!(u=p.getTextBlockTransformer())){t.next=11;break}if(u.getBounds().bottom_center(),!deviceDetect.isPhone()){t.next=11;break}if(l.type!==i.default.TransformType.TRANSFORM_HIT_ACTIONBUTTON){t.next=11;break}return this.onRButtonDown(e),setTimeout(function(){b.onRButtonUp(e)},20),t.abrupt("return",!0);case 11:return s.requestPermissions(i.default.BLPermReqObj.kBLPermReqObjContent,i.default.BLPermReqOp.kBLPermReqOpModify,!0)&&(h=l.anchor,d=n.createEditObjectByCharIterator(s.getDocument(),p.getCurrentPage(),p.getPosition()),p.updateTextBlockTransformerSnapData(s,d),c=p.getTextBlockTransformer(),m=c.getRotationOrigin(),y=c.getRotation_PropertyTest(),c.startOperation(l.type),f=o.default.point(o.default.castFloatToInt(l.active.x),o.default.castFloatToInt(l.active.y)),v=P(s,c.getPageIndex(),f)),t.abrupt("return",!0);case 13:if(!i.default.BLFlagIsSet(a,i.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){t.next=16;break}return g=!0,t.abrupt("return",!1);case 16:if(T=M(e)){t.next=20;break}return g=!0,t.abrupt("return",!1);case 20:return!p.isTextBlockEmpty()&&i.default.BLFlagIsSet(a,i.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?(p.startSelecting(),p.moveTo(T),p.endSelecting()):p.moveTo(T),p.startSelecting(),s.goToSelection(),s.invalidate(),t.abrupt("return",!0);case 25:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),this.onLButtonUp=function(t,n){var r=p.getTextBlockTransformer();if(r.isPerformingOperation()){if(!p.isTextBlockEmpty()){var a=B(t,n);if(a&&s.requestPermissions(i.default.BLPermReqObj.kBLPermReqObjContent,i.default.BLPermReqOp.kBLPermReqOpModify,!1)){var l=o.default.point(a.active.x,a.active.y),u=P(s,r.getPageIndex(),l);v.isEqual(u)&&p.setSelectionStart(p.getPosition())}}r.endOperation(p.handler?p.handler.selection.getSelectionData().commitChanges:e.when).then(function(){try{p.handler&&p.handler.selection.getSelectionData().refresh()}catch(t){}p.notifyPositionChanged(),s.invalidate()}),p.notifyPositionChanged(),s.invalidate()}else p.isSelecting()&&(p.endSelecting(),p.notifyPositionChanged());return!0},this.onRButtonDown=function(t,e){return!(!M(t)&&!B(t,e))},this.onRButtonUp=function(t,e){var n=M(t);if(n){if(p.hasSelection()){var r=p.getSelectedRange();if(r.begin<=n&&n<r.end){var a=i.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|i.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations;return p.canMergeTextBlocks()&&(a|=i.default.BLSelectionOperations.kBLSelectionAllowMergeTextBlocks),s.showContextMenu(i.default.ContextMenuType.TextEdit,t,a),!0}}return p.moveTo(n),s.invalidate(),s.showContextMenu(i.default.ContextMenuType.TextEdit,t,i.default.BLSelectionOperations.kBLSelectionAllowPaste),!0}if(B(t,e)){var o=i.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|i.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations;return p.canMoveTextBlockFront()&&(o|=i.default.BLSelectionOperations.kBLSelectionAllowToFront|i.default.BLSelectionOperations.kBLSelectionAllowBringUp),p.canMoveTextBlockBack()&&(o|=i.default.BLSelectionOperations.kBLSelectionAllowToBack|i.default.BLSelectionOperations.kBLSelectionAllowBringDown),s.showContextMenu(i.default.ContextMenuType.TextEdit,t,o),!0}return!1},this.onMouseMove=function(t,e){var n=p.getTextBlockTransformer();if(n.isPerformingOperation()){n.getOperationType();return function(t,e,n){var r=P(s,t.getPageIndex(),e),a=!0;switch(t.getOperationType()){case i.default.TransformType.TRANSFORM_MOVE:S(t,r,n);break;case i.default.TransformType.TRANSFORM_SCALE:k(t,r,n,!0);break;case i.default.TransformType.TRANSFORM_RESIZE_BLOCK:k(t,r,n);break;case i.default.TransformType.TRANSFORM_ROTATE:x(t,r,n);break;default:a=!1}a&&s.hidePopupTextEdit()}(n,t,e),!0}if(p.isSelecting()){var r=M(t);return r&&(s.setCursor(i.default.BLCursorType.kBLCursorIBeam),p.moveTo(r),s.invalidate()),!0}var a=B(t,e);return!!a&&(s.setHighlight(null),L(a.type,a.anchor,i.default.BLFlagIsSet(e,i.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),!0)},this.onDoubleClick=function(){var t=(0,a.default)(r.default.mark(function t(e,n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.requestPermissions(i.default.BLPermReqObj.kBLPermReqObjContent,i.default.BLPermReqOp.kBLPermReqOpModify,!0)){t.next=2;break}return t.abrupt("return");case 2:if(!B(e,n)){t.next=6;break}return p.getTextBlockTransformer(),t.abrupt("return",!0);case 6:return t.abrupt("return",!1);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),this.onKeyUp=function(t){return t==i.default.kBLKey.kBLKey_DELETE?R("Delete"):t===i.default.kBLKey.kBLKey_ESCAPE&&(g=!0,!0)}};return p.createInstance=function(t,e){return new g(e)},p}]),window.mainApp.factory(s,getConstructor(d,s,"factory"))},NBi1:function(t,e,n){"use strict";n("Kopg");var r="bl-edit-compositeeditobject-item-text-module",a="bl-edit-compositeeditobject-item-text-factory";angular.module(r,["bl-edit-texteditobject-module"]).factory(a,["$rootScope","bl-edit-texteditobject-factory",function(t,e){var n={createCompositeEditObjectForPage:function(t,n,r){if(!t||-1==n)return null;var a=t.getPage(n).textBlocks;if(a)for(var o=0;o<a.length;++o){var i=a[o],l=e.createTextEditObject(t,n,i);l&&r.push(l)}return r},getSelectedObjectsOnPage:function(t,e){return null}};return n}]),window.mainApp.factory(a,getConstructor(r,a,"factory"))},NMNB:function(t,e,n){"use strict";var r=o(n("C3UN")),a=o(n("b8L+"));function o(t){return t&&t.__esModule?t:{default:t}}n("0LmI"),n("UF/7");var i="bl-text-edit-textfield-obj-factory-module",l="bl-text-edit-textfield-obj-factory";function u(t,e,n,o){var i={};return i.createInstance=function(e,i,l){return new function(e,i,l){var u,d,s=this,c=0,f=0,p=i,g=l,h=l.getTextBlock(),y=e,m=a.default.rect(),v=!1;function T(t,e){var n=f,r=c,a=u.getText().length;if((n=Math.min(n,a))>(r=Math.min(r,a))&&(r=[n,n=r][0]),r-n==1&&"\r"===u.getCharAtPos(n))do{e?n--:r++}while("\r"===u.getCharAtPos(e?n:r)&&r<a&&n>=0);var o=s.getLineWithChar(r);u.keyStroke(n,r,t,e),r=n+t.length;var i=s.getLineWithChar(r);"\n"!==t&&o<i?r++:"\n"===t&&o===i&&r--,s.setSelectorPosition(r,!0),s.setCaretPosition(r,!0),v=!0}Object.defineProperty(s,"annotRect",{get:function(){return h&&h.rect?h.rect.copy():a.default.rect()}}),Object.defineProperty(s,"value",{get:function(){return u.getText()}}),Object.defineProperty(s,"defaultValue",{get:function(){return u.getText()}}),s.getPageIndex=function(){return p},s.getRotate=function(){return h?h.rotate:0},s.canUndo=function(){return!1},s.canRedo=function(){return!1},s.undo=function(){},s.redo=function(){},s.clearUndoRedoStack=function(){},s.getRect=function(){return u.getRect()},s.getText=function(){return u.getText()},s.getNumChars=function(){return u.getText().length},s.getNumLines=function(){return u.getLinesCount()},s.getLineHeightFactor=function(){return u.getLineHeightFactor()},s.getPhrases=function(){return u.getPhrases()},s.getMargin=function(){return u.getMargin()},s.getLineWithChar=function(t){return u.getLineWithSymbol(t)},s.getFirstCharOnLine=function(t){return u.getFirstSymbol(t)},s.getLastCharOnLine=function(t){if(t==s.getNumLines()-1)return s.getNumChars();var e=s.getFirstCharOnLine(t+1);return--e},s.getCharQuad=function(t){return u.getCharQuad(t)},s.selectAll=function(){s.setSelectorPosition(0),s.setCaretPosition(s.getNumChars())},s.setSelAtPoint=function(t){var e=u.getSymbolAtPoint(t);s.setSelectorPosition(e),s.setCaretPosition(e)},s.setSelectorAtPoint=function(t){var e=u.getSymbolAtPoint(t);s.setSelectorPosition(e)},s.setCaretAtPoint=function(t){var e=u.getSymbolAtPoint(t);s.setCaretPosition(e)},s.setCaretPosition=function(t,e){(e||c!=t)&&((c=t)>0&&c===s.getNumChars()&&c--,d&&d(f,c))},s.setSelectorPosition=function(t,e){(e||f!=t)&&((f=t)>0&&f===s.getNumChars()&&f--,d&&d(f,c))},s.hasSelection=function(){return f!=c},s.getSelectedText=function(){var t;if(s.hasSelection()){var e=f,n=c;e>n&&(n=[e,e=n][0]),t=(t=u.getText().spliceSlice(e,n-e)).replace(new RegExp("\r","g"),"")}return t},s.getSelectorPosition=function(){return f},s.getCaretPosition=function(){return c},s.goLeft=function(t){var e=s.getCaretPosition();e>0&&s.setCaretPosition(--e),t||s.setSelectorPosition(e)},s.goRight=function(t){var e=s.getCaretPosition();e<s.getNumChars()&&s.setCaretPosition(++e),t||s.setSelectorPosition(e)},s.goUp=function(t){var e=s.getLineWithChar(c);if(0!=e){var n=s.getCharQuad(c).top_left();n.y-=u.getLineHeight(e-1)/2,s.setCaretAtPoint(n)}else s.setCaretPosition(0);t||s.setSelectorPosition(c)},s.goDown=function(t){var e=s.getLineWithChar(c);if(e<u.getLinesCount()-1){var n=s.getCharQuad(c).bottom_left();n.y+=u.getLineHeight(e+1)/2,s.setCaretAtPoint(n)}else s.setCaretPosition(u.getLastSymbol(e));t||s.setSelectorPosition(c)},s.goToFirst=function(t){s.setCaretPosition(0),t||s.setSelectorPosition(0)},s.goToLast=function(t){var e=s.getNumChars();s.setCaretPosition(e),t||s.setSelectorPosition(e)},s.goToHome=function(t){var e=c,n=s.getLineWithChar(e);e=s.getFirstCharOnLine(n),s.setCaretPosition(e),t||s.setSelectorPosition(e)},s.goToEnd=function(t){var e=c,n=s.getLineWithChar(e);e=s.getLastCharOnLine(n),s.setCaretPosition(e),t||s.setSelectorPosition(e)},s.selectWord=function(t){var e=u.getWordPositions(t);isUndefinedOrNull(e)||(s.setCaretPosition(e.caret),s.setSelectorPosition(e.selector))},s.keyStroke=function(t){T(t)},s.delete=function(t){var e=s.getSelectorPosition(),n=s.getCaretPosition();n<e&&(e=[n,n=e][0]),n==e&&(t?n>0&&s.setCaretPosition(n-1):s.setCaretPosition(n+1)),T("",t)},s.commitChanges=function(){if(!v)return t.when();var e=u.getSpans();return e?o.editText(y.getDocument(),p,h,e).then(function(){g.updateTransform()}):t.when()},s.cancelChanges=function(){h.rect.isEqual(m)||(h.rect=m.copy(),g.updateTransform())},s.onModify=function(){return y.requestPermissions(r.default.BLPermReqObj.kBLPermReqObjContent,r.default.BLPermReqOp.kBLPermReqOpModify,!0)},s.getCurrentFont=function(){var t=u.getPhraseAtPos(c>0?c-1:c);return isUndefinedOrNull(t)?null:t.getFont()},s.setOnSelChangedCallBack=function(t){d=t},s.setFont=function(t){var e=f,n=c,r=u.getText().length;(e=Math.min(e,r))>(n=Math.min(n,r))&&(n=[e,e=n][0]),u.setFont(e,n,t),v=!0},s.refresh=function(){m=h.rect.copy(),u.init(y,p,g),v=!1,s.setCaretPosition(0),s.setSelectorPosition(0)},u=n.createInstance(),s.refresh()}(e,i,l)},i}angular.module(i,["bl-text-edit-renderer-service-module","bl-text-edit-textlayout-factory-module","pdf-manager-module"]).factory(l,u),u.$inject=["$q","bl-text-edit-renderer-service","bl-text-edit-textlayout-factory","pdf-manager-factory"],window.mainApp.factory(l,getConstructor(i,l,"factory"))},PaWa:function(t,e,n){"use strict";var r=o(n("C3UN")),a=o(n("eWOG"));function o(t){return t&&t.__esModule?t:{default:t}}n("6Drf");var i="bl-widget-listbox-obj-factory-module",l="bl-widget-listbox-obj-factory";function u(t,e){var n={};return n.createInstance=function(n,o,i){return new function(n,o,i){var l,u,d=Number.MAX_VALUE,s=this,c=o,f=i,p=r.default.pdfAcroformType;this.getPageIndex=function(){return c},this.getBorderStyle=function(){return{width:1,style:r.default.PDAnnotBorderStyle.kPDAnnotBorderStyleSolid,dashArrayLen:0,dashArray:0}},this.getRotate=function(){return 0},this.getWidget=function(){return f},this.canUndo=function(){return!1},this.canRedo=function(){return!1},this.undo=function(){},this.redo=function(){},this.clearUndoRedoStack=function(){},this.getRect=function(){return t.getFieldRect(f)},this.doesNeedScroll=function(){return this.getNumLines()>this.getNumVisibleLines()},this.getNumLines=function(){return f.options&&f.options.items?f.options.items.length:0},this.getNumVisibleLines=function(){return u.getMaxLinesCount()},this.setTopLine=function(t){t<this.getNumLines()&&u.setTopLine(t)},this.getTopLine=function(){return u.getTopLine()},this.hitTestLine=function(t){u.isNeedUpdate()&&u.update();var e=u.getSymbolAtPoint(t),n=u.getLineWithSymbol(e);return n>=this.getNumLines()?-1:n},this.setSel=function(t){if(t>=0){d=t;var e=this.getNumLines();0==e?d=-1:d>=parseInt(e)&&(d=e-1);var n=u.getTopLine(),r=u.getMaxLinesCount();d<parseInt(n)&&u.setTopLine(d),d<parseInt(e)&&d>=parseInt(n)+r&&u.setTopLine(d-r+1)}else d=-1;var a=f.options&&f.options.items?f.options.items:[];a.length>t&&f.setValue(a[t])},this.setSelection=function(t){g(t)},this.getSelection=function(){return d},this.selectPrev=function(){var t=this.getNumLines();if(t>0){var e=this.getSelection();-1==e?this.setSelection(t-1):e>0&&this.setSelection(--e)}},this.selectNext=function(){var t=this.getNumLines();if(t>0){var e=this.getSelection();-1==e?this.setSelection(0):e<t-1&&this.setSelection(++e)}},this.selectFirst=function(){this.getNumLines()>0&&this.setSelection(0)},this.selectLast=function(){var t=this.getNumLines();t>0&&this.setSelection(t-1)},this.commitChanges=function(){return GetSelection(),(f.options&&f.options.items?f.options.items:[]).length,!0},this.cancelChanges=function(){},this.onModify=function(){return!0};var g=function(t){s.setSel(t)},h=f.getStyle();if(p.choice===h){l=f.getValue();var y=this.getRect();y.inflate(-a.default.listBox.getMargin(),-a.default.listBox.getMargin()),(u=e.createInstance(a.default.listBox.getFontSize())).setBound(y),u.setLineHeightFactor(a.default.listBox.getLineHeightFactor());for(var m="",v=f.options&&f.options.items?f.options.items:[],T=0;T<v.length;T++){var P=v[T];P&&P.length>0&&(m+="\n"),m+=P}u.setMultiline(!0),u.setWordWrap(!1),u.setText(m),u.update();var b=v.indexOf(l);-1!=b&&(d=b),Number.MAX_VALUE!=d&&(u.setTopLine(d),u.update())}else console.error("Unsupported field type.")}(n,o,i)},n}angular.module(i,[]).factory(l,u),u.$inject=["bl-widget-renderer-service","form-textlayout-factory"],window.mainApp.factory(l,getConstructor(i,l,"factory"))},RR7e:function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("C3UN"));function o(t){return t&&t.__esModule?t:{default:t}}n("5UMD");var i="bl-edit-widgetannoteditobject-module",l="bl-edit-widgetannoteditobject-factory";angular.module(i,["bl-edit-utilites-module","pdf-manager-module"]).factory(l,["$rootScope","$q","bl-edit-utilites-service","pdf-manager-factory",function(t,e,n,o){var i={kTransformNone:0,kTransformMove:1,kTransformScale:2,kTransformRotate:3};return{createInstance:function(t,l,u,d){return new function(t,l,u,d){var s=this,c=t,f=l,p=u,g=d,h=null,y=i.kTransformNone,m=r.default.rect();p&&p.rect&&(m=p.rect.copy());var v=c.getPage(f);s.getDoc=function(){return c},s.getPageIndex=function(){return f},s.getAnnot=function(){return p},s.getAnnotSubtype=function(){return p.type},s.getRect=function(){return p?p.rect:null},s.hitTest=function(t){var e=s.getRect();return!!e&&e.containsPoint(t)},s.setOperation=function(t){y=t},s.getOperation=function(){return y},s.setOperationRect=function(t){m=n.correctRectToRespectPageBox(v.getCropBox(),t)},s.getOperationRect=function(){return m},s.endOperation=function(){h=null;var t=s.getRect();if(m&&!m.isEqual(t)){var n=m.copy();return n.top<n.bottom&&(n.bottom=[n.top,n.top=n.bottom][0]),o.changeAnnotationProperties(c,p,f,{R:n.asArray()}).finally(function(){m=p.rect.copy(),y=i.kTransformNone})}return y=i.kTransformNone,e.when()},s.delete=function(){return o.deleteAnnotation(c,p,f)},s.getSnapData=function(){return g},s.setSnapInfo=function(t){h=t},s.getSnapInfo=function(){return h};var T=a.default.EditModes.Properties|a.default.EditModes.Move|a.default.EditModes.Resize|a.default.EditModes.Remove;p.isMarkup()&&p.type!==a.default.pdfAnnotationType.freeText&&(T|=a.default.EditModes.Comment);var P=deviceDetect.isPhone()?a.default.EditModes.Move:T;s.setCurrentEditMode=function(t){P=t},s.hasAnyCurrentEditMode=function(t){return!!(P&t)},s.hasAnyEditMode=function(t){return!!(T&t)}}(t,l,u,d)},TransformType:i,HandleType:{kHandleNone:0,kHandleTopLeft:1,kHandleTopRight:2,kHandleBottomRight:3,kHandleBottomLeft:4,kHandleTopMiddle:5,kHandleRightMiddle:6,kHandleBottomMiddle:7,kHandleLeftMiddle:8}}}]),window.mainApp.factory(l,getConstructor(i,l,"factory"))},Rz7V:function(t,e,n){"use strict";var r=l(n("fZjL")),a=l(n("b8L+")),o=l(n("C3UN")),i=l(n("IZAc"));function l(t){return t&&t.__esModule?t:{default:t}}var u="bl-text-edit-phrase-factory-module",d="bl-text-edit-phrase-factory";function s(t){var e=96/72,n={};return n.createInstance=function(t,r){return new function(t,r){var o=this,i=0,l=0,u=t;isUndefinedOrNull(r)&&(r=n.createFontInstance());var d=r;o._text="",o.bound=function(){var t=a.default.size(0,d.size*u/e);return o._text.length>0&&(t=c(o._text)),a.default.rect(i,l,i+t.width,l+t.height)},o.getRect=function(){return o.bound()},o.getSymbolRect=function(t){var e=a.default.rect();if(o._text.length>t){var n=0;if(t>0){var r=o._text.spliceSlice(0,t);n=(u=c(r)).width}r=o._text.spliceSlice(t,1);var u=c(r);return a.default.rect(n+i,l,n+i+u.width,l+u.height)}return e},o.getSymbolQuad=function(t){var e=o.getSymbolRect(t);return a.default.quadFromRect(e)},o.scale=function(t){},o.translate=function(t,e){i+=t,l+=e},o.getFont=function(){return d.copy()},o.isFontColorWhite=function(){return d.color.isWhite()},o.getBottomOffset=function(){return d.size/e*(u-1)/2},o.getText=function(){return o._text};var c=function(t){var n=(s.calculateTextBoundCanvas||(s.calculateTextBoundCanvas=document.createElement("canvas"))).getContext("2d");n.font=d.getRenderFontStr();var r=n.measureText(t).width,o=d.size/e*u;return a.default.size(r,o)}}(t,r)},n.createFontInstance=function(t,n,a,l,u,d){return new function t(n,a,l,u,d,s){var c=this;c.name=isUndefinedOrNull(a)?"Times New Roman, serif":a,c.originalFamily=isUndefinedOrNull(l)?"Times New Roman":l,c.style=isUndefinedOrNull(u)?o.default.GFontStyle.kGFontStyleRegular:u,c.size=isUndefinedOrNull(n)?12:n,c.color=isUndefinedOrNull(d)?i.default.createInstance("#FF000000"):d,c.format=isUndefinedOrNull(s)?o.default.FontFormat.TrueType:s;var f=void 0;function p(){var t="";switch(c.style){case o.default.GFontStyle.kGFontStyleRegular:t="";break;case o.default.GFontStyle.kGFontStyleBold:t="bold ";break;case o.default.GFontStyle.kGFontStyleItalic:t="italic ";break;case o.default.GFontStyle.kGFontStyleBoldItalic:t="italic bold "}f=t+c.size/e+"pt "+c.name}p(),c.getRenderFontStr=function(){return f},c.isItalic=function(){return c.style==o.default.GFontStyle.kGFontStyleItalic||c.style==o.default.GFontStyle.kGFontStyleBoldItalic},c.isBold=function(){return c.style==o.default.GFontStyle.kGFontStyleBold||c.style==o.default.GFontStyle.kGFontStyleBoldItalic},c.copy=function(){return new t(c.size,c.name,c.originalFamily,c.style,c.color.copy(),c.format)},c.updateFont=function(t){(0,r.default)(t).forEach(function(e){c[e]=t[e]}),p()},c.isEqual=function(t){return c.name===t.name&&c.originalFamily===t.originalFamily&&c.style===t.style&&c.size===t.size&&(c.color===t.color||c.color.toString()===t.color.toString())&&c.format===t.format}}(t,n,a,l,u,d)},n}angular.module(u,[]).factory(d,s),s.$inject=["$rootScope"],window.mainApp.factory(d,getConstructor(u,d,"factory"))},SWEh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n("IZAc"));for(var a=["030","033","036","039","03c","03f","090","093","096","099","09c","09f","0f0","0f3","0f6","0f9","0fc","0ff","330","333","336","339","33c","33f","390","393","396","399","39c","39f","3f0","3f3","3f6","3f9","3fc","3ff","630","633","636","639","63c","63f","690","693","696","699","69c","69f","6f0","6f3","6f6","6f9","6fc","6ff","930","933","936","939","93c","93f","990","993","996","999","99c","99f","9f0","9f3","9f6","9f9","9fc","9ff","c30","c33","c36","c39","c3c","c3f","c90","c93","c96","c99","c9c","c9f","ccf020","cf3","cf6","cf9","cfc","cff","f30","f33","f36","f39","f3c","f3f","f90","f93","f96","f99","f9c","f9f","ff0","ff3","ff6","ff9","ffc","fff","f00","f03","f06","f09","f0c","f0f","f60","f63","f66","f69","f6c","f6f","ffc020","fc3","fc6","fc9","fcc","fcf","c00","c03","c06","c09","c0c","c0f","c60","c63","c66","c69","c6c","c6f","cc0","cc3","cc6","cc9","ccc","ccf","900","903","906","909","90c","90f","960","963","966","969","96c","96f","9c0","9c3","9c6","9c9","9cc","9cf","600","603","606","609","60c","60f","660","663","666","669","66c","66f","6c0","6c3","6c6","6c9","6cc","6cf","300","303","306","309","30c","30f","360","363","366","369","36c","36f","3c0","3c3","3c6","3c9","3cc","3cf","000","003","006","009","00c","00f","060","063","066","069","06c","06f","0c0","0c3","0c6","0c9","0cc","0cf"],o=[a.length],i=0;i<a.length;++i){var l=a[i],u=null;if(3===l.length){var d=l[0],s=l[1],c=l[2];u="#ff"+d+d+s+s+c+c}else u="#ff"+l;o[i]=r.default.createInstance(u)}e.default={rgbaColors:o}},Trxo:function(t,e,n){"use strict";var r=l(n("kHBY")),a=l(n("IZAc")),o=l(n("b8L+")),i=l(n("C3UN"));function l(t){return t&&t.__esModule?t:{default:t}}n("VVVL");var u="form-scrollbar-factory";function d(t){var e={},n=function(e){var n,l,u,d,s,c=this,f="FFFEFEFE",p="FFAAAAAA",g="7FE0E0E0",h=e,y=0,m=100,v=1,T=0,P=180,b=!1,M=!1;c.setScrollPos=function(t){T=Math.max(y,Math.min(m-v,t))},c.getScrollPos=function(){return T},c.setPageSize=function(t){v=t,c.setScrollPos(T)},c.setScrollRange=function(t,e){t>e&&(e=[t,t=e][0]),y=t,m=e,c.setScrollPos(T)},c.draw=function(e){!function(e){if(b){if(n.isAreaEmpty())return;var r=o.default.point(n.left,n.bottom),l=o.default.rotationMatrix(-o.default.degreeToRadian(P),r).mapRect(n),u=o.default.rotationMatrix(o.default.degreeToRadian(P),r),d=10,s=l.getHeight()/4;d>s&&(d=s);var c=6,h=Math.min(s,l.getWidth())/2;c>h&&(c=h);var M=o.default.rotationMatrix(o.default.degreeToRadian(P)),B=.5*c,L=M.mapPoint(o.default.point(-B,0)),S=M.mapPoint(o.default.point(B,0)),x=M.mapPoint(o.default.point(0,-B)),k=M.mapPoint(o.default.point(0,B)),R=a.default.createInstance(g),F=(a.default.createInstance(p),l.copy());F.bottom=l.bottom-(1+d),F.top=l.top+(1+d),(F=u.mapRect(F)).sort(),e.fillRect(F,R);var A=a.default.createInstance(p),C=a.default.createInstance(f),E=a.default.createInstance(p),_={};_.lineCap=i.default.GLineCap.kGLineCapRound,_.lineJoin=i.default.GLineJoin.kGLineJoinMiter,_.miterLimit=10;var I=l.copy();I.bottom=l.top+d,(I=u.mapRect(I)).sort(),e.fillRect(I,C),e.strokeRect(I,E,0,null);var O=I.getCenter(),w=o.default.point(0,B/2),N=o.default.point(O.x-w.x,O.y-w.y),H=o.default.point(N.x+L.x,N.y+L.y),D=o.default.point(N.x+x.x,N.y+x.y),j=o.default.point(N.x+S.x,N.y+S.y),G=t.createGeometry();G.beginFigure(H),G.lineTo(D),G.lineTo(j),G.endFigure(),e.strokeGeometry(G,A,1,_);var U=l.copy();U.top=l.bottom-d,(U=u.mapRect(U)).sort(),e.fillRect(U,C),e.strokeRect(U,E,0,null),O=U.getCenter(),w=o.default.point(0,B/2);var z=o.default.point(O.x+w.x,O.y+w.y),V=o.default.point(z.x+L.x,z.y+L.y),q=o.default.point(z.x+k.x,z.y+k.y),Z=o.default.point(z.x+S.x,z.y+S.y),W=t.createGeometry();W.beginFigure(V),W.lineTo(q),W.lineTo(Z),W.endFigure(),e.strokeGeometry(W,A,1,_);var K=l.copy(),$=m-v-y,Q=m-y,J=(l.getHeight()-2*d)/Q,X=J*(Q-$),Y=d+J*T+X;K.top=K.bottom-Y,K.bottom=K.top+X,(K=u.mapRect(K)).sort(),e.fillRect(K,C),e.strokeRect(K,E,0,null)}}(e)},c.setVisible=function(t){b=t},c.isVisible=function(){return b},c.setPlacement=function(t,e){n=t,P=(e+180)%360},c.mouseMove=function(t,e){if(n.isAreaEmpty())return!1;var a=o.default.point(n.left,n.bottom),l=o.default.rotationMatrix(-o.default.degreeToRadian(P),a),d=l.mapRect(n),c=l.mapPoint(t);if(!M&&!d.containsPoint(c))return!1;if(e&&M){var f=10,p=d.getHeight()/4;f>p&&(f=p);var g=m-v-y,T=m-y,b=(d.getHeight()-2*f)/T,B=c.y-d.top-u,L=parseInt((f-B)/b+g);L=Math.max(y,Math.min(m-v,L)),s&&s(r.default.SBCode.kSB_THUMBPOSITION,L)}return h.setCursor(i.default.BLCursorType.kBLCursorArrow),!0},c.mouseDown=function(t){if(n.isAreaEmpty())return!1;var e=o.default.point(n.left,n.bottom),a=o.default.rotationMatrix(-o.default.degreeToRadian(P),e),i=a.mapRect(n),f=a.mapPoint(t);if(!i.containsPoint(f))return!1;var p=10,g=i.getHeight()/4;p>g&&(p=g),l=f.y-i.top;var h=m-v-y,b=m-y,B=(i.getHeight()-2*p)/b,L=p+B*(h-T),S=L+B*(b-h);return l>0&&l<=p?s&&s(r.default.SBCode.kSB_LINEDOWN,0):l>p&&l<L?s&&s(r.default.SBCode.kSB_PAGEDOWN,0):l>=L&&l<=S?(clearInterval(d),d=null,M=!0,u=l-L):l>S&&l<i.getHeight()-p?s&&s(r.default.SBCode.kSB_PAGEUP,0):l>=i.getHeight()-p&&l<i.getHeight()&&s&&s(r.default.SBCode.kSB_LINEUP,0),M||d||(d=setInterval(function(){c.mouseDown(o.default.point(n.left,n.top+l))},150)),!0},c.mouseUp=function(t){return clearInterval(d),d=null,M=!1,!1},c.setOnScrollCallBack=function(t){s=t}};return e.createInstance=function(t){return new n(t)},e}angular.module("form-scrollbar-factory-module",["geometry-factory-module"]).factory(u,d),d.$inject=["geometry-factory"],window.mainApp.factory(u,getConstructor("form-scrollbar-factory-module",u,"factory"))},U49B:function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("oRGr"));function o(t){return t&&t.__esModule?t:{default:t}}n("UKIy");var i="bl-ocr-idrs-layout-factory";angular.module("bl-ocr-idrs-layout-module",["bl-ocr-idrs-scroll-module"]).factory(i,["$q","$rootScope","bl-ocr-idrs-scroll-factory",function(t,e,n){var o=a.default.BLZoomType,i=a.default.BLScrollType,l=(a.default.BLScrollBarType,a.default.BLScrollEvent,a.default.PAGE_HALF_MARGIN,a.default.PAGE_MARGIN),u=[.0625,.125,.25,.33,.5,.66,.75,.88,1,1.25,1.5,1.75,2,3,4,6,8,12,16,24,32,64],d=function(t,e){return t.mapPoint(e)},s=function(t,e){return t.mapRect(e)},c=function(t,e){return t.mapQuad(e)},f=function(t,e,n){var a=r.default.size(t*n.width,t*n.height);return 90!=e&&270!=e||(a.width=[a.height,a.height=a.width][0]),a.round()},p=function(){var t=this,a=1,p=o.kBLZoomValue,g=0,h=n.createInstance(),y=r.default.size(),m=r.default.size(),v={onZoomChanged:function(t){e.$broadcast("idrs-layout-zoom-changed",t)},onRotationChanged:function(t){e.$broadcast("idrs-layout-rotation-changed",t)},onZoomTypeChanged:function(t){e.$broadcast("idrs-layout-zoomtype-changed",t)}};t.events=function(){return v};var T=function(){var t=i.kScrollNone;switch(p){case o.kBLZoomFitPage:t=i.kScrollVert|i.kScrollHorz;break;case o.kBLZoomFitWidth:t=i.kScrollVert;break;case o.kBLZoomFitHeight:t=i.kScrollHorz;break;case o.kBLZoomValue:t=i.kScrollNone;break;default:console.log("Unknown zoom type")}h.setScrollState(t),y.isAreaEmpty()||h.resizeView(y),m.isAreaEmpty()||h.resizeContent(f(a,g,m).round())},P=function(t,e){var n=t/a,o=h.getScrollPos();(o=r.default.point((o.x+e.x)*n,o.y+e.y*n)).offset(-e.x,-e.y),h.setScrollPos(o),a=t,T(),v.onZoomChanged(a)},b=function(t){if(p!=o.kBLZoomValue){var e=y.width-2*l,n=y.height-2*l,r=function(t,e){return f(1,t,e)}(g,m),a=(e-2)/r.width,i=(n-2)/r.height;switch(p){case o.kBLZoomFitPage:P(Math.min(a,i),t);break;case o.kBLZoomFitWidth:P(a,t);break;case o.kBLZoomFitHeight:P(i,t);break;case o.kBLZoomValue:break;default:console.log("Unknown zoom type")}}};t.getZoomType=function(){return p},t.setZoomType=function(t){p!=t&&(v.onZoomTypeChanged(p=t),b(B()))},t.zoomIncrease=function(){var e=function(t){var e=u.indexOf(t);return e<0?Math.min(t+.01,u[u.length-1]):e===u.length-1?u[u.length-1]:u[e+1]}(a);t.setZoom(e)},t.zoomDecrease=function(){var e=function(t){var e=u.indexOf(t);return e<0?Math.max(t-.01,u[0]):0===e?u[0]:u[e-1]}(a);t.setZoom(e)},t.getZoom=function(){return a},t.setZoom=function(t){t<.01&&(t=.01),t>64&&(t=64),p!=o.kBLZoomValue&&(p=o.kBLZoomValue,v.onZoomTypeChanged(p)),P(t,B())},t.zoomTo=function(t,e){t<.01&&(t=.01),t>64&&(t=64),p!=o.kBLZoomValue&&(p=o.kBLZoomValue,v.onZoomTypeChanged(p)),P(t,e)},t.getRotate=function(){return g},t.setRotate=function(){g=rotate,p!=o.kBLZoomValue&&b(B()),T(),v.onRotationChanged(g)},t.resizeView=function(t){y.isEqual(t)||(y=t,p!=o.kBLZoomValue&&b(B()),T())},t.resizeContent=function(t){m.isEqual(t)||(m=t,p!=o.kBLZoomValue&&b(B()),T())},t.getScroll=function(){return h};var M=function(t,e){var n=m.copy();switch(e%360){case 90:return r.default.matrix(0,t,-t,0,t*n.height,0);case 180:return r.default.matrix(-t,0,0,-t,t*n.width,t*n.height);case 270:return r.default.matrix(0,-t,t,0,0,t*n.width);default:return r.default.matrix(t,0,0,t,0,0)}};t.getTransform=function(){return M(a,g).multiply(function(){var t=h.getScrollPos();return r.default.translationMatrix(-1*t.x+l,-1*t.y+l)}())};t.mapPointToContent=function(t){return function(t){var e=M(a,g).invert();if(e){var n=t.copy(),o=h.getScrollPos(),i=r.default.point(l,l);return n.offset(o.x,o.y),n.offset(-i.x,-i.y),d(e,n)}return t}(t)};var B=function(){return r.default.rect(0,0,y.width,y.height).getCenter()};t.mapRectToContent=function(t){return function(t){var e=M(a,g).invert();if(e){var n=t.copy(),o=h.getScrollPos(),i=r.default.point(l,l);return n.offset(o.x,o.y),n.offset(-i.x,-i.y),s(e,n)}return t}(t)};t.mapQuadToContent=function(t){return function(t){var e=M(a,g).invert();if(e){var n=t.copy(),o=h.getScrollPos(),i=r.default.point(l,l);return n.offset(o.x,o.y),n.offset(-i.x,-i.y),c(e,n)}return t}(t)};t.mapPointToView=function(t){return function(t){var e=M(a,g),n=d(e,t).floor(),o=h.getScrollPos(),i=r.default.point(l,l);return n.offset(-o.x,-o.y),n.offset(i.x,i.y),n}(t)};t.mapRectToView=function(t){return function(t){var e=M(a,g),n=s(e,t).floor(),o=h.getScrollPos(),i=r.default.point(l,l);return n.offset(-o.x,-o.y),n.offset(i.x,i.y),n}(t)};t.mapQuadToView=function(t){return function(t){var e=M(a,g),n=c(e,t),o=h.getScrollPos(),i=r.default.point(l,l);return n.offset(-o.x,-o.y),n.offset(i.x,i.y),n}(t)}};return{createInstance:function(){return new p}}}]),window.mainApp.factory(i,getConstructor("bl-ocr-idrs-layout-module",i,"factory"))},"UF/7":function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("IZAc"));function o(t){return t&&t.__esModule?t:{default:t}}n("VVVL");var i="bl-text-edit-renderer-service-module",l="bl-text-edit-renderer-service";function u(t,e){return{getPageToViewMatrix:o,getViewToPageMatrix:function(t,e){return o(t,e).invert()},getPageToDevSpaceMatrix:n,drawField:function(t,e){if(!t||!e)return;var n=e.getRect();if(n.isAreaEmpty())return;t.pushState();var r=e.getPhrases(),o=r.any(function(t){return t.isFontColorWhite()})?"FFBBBBBB":"FFFFFFFF";t.fillRect(n,a.default.createInstance(o)),r.forEach(function(e){var r=e.getFont(),a=e.getRect();t.pushState(),t.clipRect(n),t.translateCTM(a.left,a.bottom-e.getBottomOffset()),t.fillText(r.getRenderFontStr(),e.getText(),r.color),t.popState()}),t.popState()}};function n(t,e){var n=e%360,a=t.getPageBox(),o=t.getUserUnitSize();switch(n){case 90:return r.default.matrix(0,o,o,0,o*-a.bottom,o*-a.left);case 180:return r.default.matrix(-o,0,0,o,o*a.right,o*-a.bottom);case 270:return r.default.matrix(0,-o,-o,0,o*a.top,o*a.right);default:return r.default.matrix(o,0,0,-o,o*-a.left,o*a.top)}}function o(t,e){return n(t.getDocument().getPage(e),0)}}angular.module(i,["geometry-factory-module"]).service(l,u),u.$inject=["$translate","geometry-factory"],window.mainApp.service(l,getConstructor(i,l,"service"))},UKIy:function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("oRGr"));function o(t){return t&&t.__esModule?t:{default:t}}var i="bl-ocr-idrs-scroll-factory";angular.module("bl-ocr-idrs-scroll-module",[]).factory(i,["$q","$rootScope",function(t,e){a.default.BLZoomType;var n=a.default.BLScrollType,o=a.default.BLScrollBarType,i=a.default.BLScrollEvent,l=(a.default.PAGE_HALF_MARGIN,a.default.PAGE_MARGIN),u=function(){var t=n.kScrollNone,a=r.default.point(),u=r.default.size(),d=r.default.size(),s={onScrollSizeChanged:function(t,n){e.$broadcast("idrs-scroll-size-changed",{bar:t,pos:n})},onScrollRangeChanged:function(t,n){e.$broadcast("idrs-scroll-range-changed",{bar:t,pos:n})},onScrollPositionChanged:function(t,n){e.$broadcast("idrs-scroll-position-changed",{bar:t,pos:n})},onScrollVisibilityChanged:function(t,n){e.$broadcast("idrs-scroll-visibility-changed",{bar:t,bool:n})},onScrollChanged:function(t,n){e.$broadcast("idrs-scroll-changed",{bar:t,state:n})}},c=function(){return u.copy()},f=function(){var t=d.copy();return t.width+=2*l,t.height+=2*l,t},p=function(t){var e=c(),n=f();return t==o.kBLScrollBarHorz?n.width<e.width?0:n.width-e.width:n.height<e.height?0:n.height-e.height},g=function(t){return t==o.kBLScrollBarHorz?a.x:a.y},h=function(t){var e=c();return t==o.kBLScrollBarHorz?e.width:e.height},y=function(t,e){var n=p(t);if(0==n)return!1;var r=Math.min(Math.max(e,0),n);return g(t)!=r&&(function(t,e){t==o.kBLScrollBarHorz?a.x=e:a.y=e}(t,r),m(),s.onScrollPositionChanged(t,r),!0)},m=function(){var t=function(){var t=c(),e=f();return e.width<t.width?(t.width-e.width)/2:0}(),e=function(){var t=c(),e=f();return e.width<t.width?(e.width-t.width)/2:e.width-t.width}();a.x=Math.min(Math.max(a.x,t),e);var n=function(){var t=c(),e=f();return e.height<t.height?(t.height-e.height)/2:0}(),r=function(){var t=c(),e=f();return e.height<t.height?(e.height-t.height)/2:e.height-t.height}();a.y=Math.min(Math.max(a.y,n),r)},v=function(){var e=c(),r=f();if(r.width>e.width){s.onScrollVisibilityChanged(o.kBLScrollBarHorz,!0),s.onScrollRangeChanged(o.kBLScrollBarHorz,r.width),s.onScrollSizeChanged(o.kBLScrollBarHorz,e.width),s.onScrollPositionChanged(o.kBLScrollBarHorz,a.x);var i={pos:a.x,size:e.width,range:r.width};s.onScrollChanged(o.kBLScrollBarHorz,i)}else t&n.kScrollHorz?(s.onScrollVisibilityChanged(o.kBLScrollBarHorz,!0),s.onScrollRangeChanged(o.kBLScrollBarHorz,1),s.onScrollSizeChanged(o.kBLScrollBarHorz,1),s.onScrollPositionChanged(o.kBLScrollBarHorz,0)):s.onScrollVisibilityChanged(o.kBLScrollBarHorz,!1),s.onScrollVisibilityChanged(o.kBLScrollBarHorz,!1);if(r.height>e.height){s.onScrollVisibilityChanged(o.kBLScrollBarVert,!0),s.onScrollRangeChanged(o.kBLScrollBarVert,r.height),s.onScrollSizeChanged(o.kBLScrollBarVert,e.height),s.onScrollPositionChanged(o.kBLScrollBarVert,a.y);var l={pos:a.y,size:e.height,range:r.height};s.onScrollChanged(o.kBLScrollBarVert,l)}else t&n.kScrollVert?(s.onScrollRangeChanged(o.kBLScrollBarVert,!0),s.onScrollRangeChanged(o.kBLScrollBarVert,1),s.onScrollSizeChanged(o.kBLScrollBarVert,1),s.onScrollPositionChanged(o.kBLScrollBarVert,0)):s.onScrollVisibilityChanged(o.kBLScrollBarVert,!1)};this.resizeView=function(t){u.isEqual(t)||(u=t,m(),v())},this.resizeContent=function(t){d.isEqual(t)||(d=t,m(),v())},this.events=function(){return s},this.getScrollState=function(e){if(isUndefinedOrNull(e))return t;var n=c(),r=f();return o.kBLScrollBarHorz==e?{pos:a.x,size:n.width,range:r.width}:o.kBLScrollBarVert==e?{pos:a.y,size:n.height,range:r.height}:{pos:0,size:0,range:0}},this.setScrollState=function(e){t==e&&(t=e,v())},this.getScrollPos=function(t){return isUndefinedOrNull(t)?a:g(t)},this.setScrollPos=function(t,e){isUndefinedOrNull(e)?a=t:y(t,e)},this.processScrollEvent=function(t,e,n){switch(e){case i.kBLScrollHome:y(t,0);break;case i.kBLScrollEnd:y(t,p(t));break;case i.kBLScrollStepPlus:y(t,g(t)+h(t)/10);break;case i.kBLScrollStepMinus:y(t,g(t)-h(t)/10);break;case i.kBLScrollPagePlus:y(t,g(t)+h(t));break;case i.kBLScrollPageMinus:y(t,g(t)-h(t));break;case i.kBLScrollPos:case i.kBLScrollSliderReleased:y(t,n)}}};return{createInstance:function(){return new u}}}]),window.mainApp.factory(i,getConstructor("bl-ocr-idrs-scroll-module",i,"factory"))},UYNB:function(t,e,n){"use strict";var r=o(n("C3UN")),a=o(n("b8L+"));function o(t){return t&&t.__esModule?t:{default:t}}n("sVJW");var i="bl-redaction-create-inputhandler-module",l="bl-redaction-create-inputhandler-factory";angular.module(i,["pdf-manager-module","ui-helper-module","bl-views-frametracker-module"]).factory(l,["$rootScope","$q","pdf-manager-factory","ui-helper-factory","bl-views-frametracker-factory",function(t,e,n,o,i){var l="#FFFF0000",u=function(t,e){this.mouseDown=function(t){return!1},this.mouseUp=function(t){return!1},this.mouseMove=function(t){return!1},this.getPageRange=function(){return{startPage:-1,endPage:-1}},this.getQuads=function(t){return[]},this.reset=function(){return[]}};u.hitTestChar=function(t,e){return!1};var d={};return d.createInstance=function(t,o){return new function(t){var o=t,d=!1,s=null,c=null,f=!1;function p(e,r,a){var o={documentId:t.document.id,pageIndex:e,params:{T:"Redact",rect:r.asArray(),color:l}};return n.documentCreateRedactions(t.document,o)}this.initialize=function(t){var e=a.default.size(0,0);s&&s.dispose(),s=i.createInstance(e,o,"#000000","#000000"),c=new u(o,"#000000"),this.onDraw=function(t,e){s&&s.draw(t,e)}},this.terminate=function(){s&&s.dispose(),s=null,o=null},this.getToolName=function(){return"RedactionCreate"},this.isFinished=function(){return!1},this.handleEvent=function(t){switch(t.type){case r.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===r.default.BLPointerButton.kBLPointerButtonLeft)return this.onMouseDown(t.pointerArgs.position,t.pointerArgs.flags);break;case r.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===r.default.BLPointerButton.kBLPointerButtonLeft)return this.onMouseUp(t.pointerArgs.position,t.pointerArgs.flags);break;case r.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onMouseDown=function(t,e){return!!f||(d=!0,!!c.mouseDown(t)||!!s.onMouseDown(t))},this.onMouseUp=function(t,n){if(f)return!0;if(d=!1,c.mouseUp(t)){var r;if((r=c.getPageRange()).startPage<0||r.endPage<0)return!1;o.getDocument(),f=!0;for(var a=[],i=r.startPage;i<=r.endPage;++i){var l=c.getQuads(i),u=getRect(l);a.push(function(t,e,n){return function(){return p(t,e)}}(i,u,quad))}return a.reduce(function(t,e){return t.then(function(){return e()})},e.when()).finally(function(){c.reset(),f=!1,o.invalidate()}),!0}if(s.onMouseUp(t)){var g=s.getPageIndex(),h=s.getRect();return f=!0,p(g,h).finally(function(){s.reset(),f=!1,o.invalidate()}),!0}return!1},this.onMouseMove=function(t,e){if(f)return!0;if(!d){var n=u.hitTestChar(o,t);return o.setCursor(n?r.default.BLCursorType.kBLCursorIBeam:r.default.BLCursorType.kBLCursorCross),!0}return c.mouseMove(t)?(o.setCursor(r.default.BLCursorType.kBLCursorIBeam),!0):!!s.onMouseMove(t)&&(o.setCursor(r.default.BLCursorType.kBLCursorCross),!0)}}(o)},d}]),window.mainApp.factory(l,getConstructor(i,l,"factory"))},VBGi:function(t,e,n){"use strict";var r=i(n("C3UN")),a=i(n("b8L+")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}n("VVVL"),n("Ij0n"),n("5UMD");var l="bl-textmarkup-objectpicker-module",u="bl-textmarkup-objectpicker-factory";angular.module(l,["bl-edit-utilites-module","geometry-factory-module","transformer-painter-module"]).factory(u,["$rootScope","bl-edit-utilites-service","geometry-factory","transformer-painter-service",function(t,e,n,i){var l=function(t,e,n,r){var o=n,i=t.getPage(e).textBlocks[n.blockIndex],l=i?i.rotate:0,u=a.default.rotationMatrix(l,o.boundRect.getCenter()).mapQuad(a.default.quadFromRect(o.boundRect));this.getBounds=function(){return u},this.hitTestRect=function(t){return this.getBounds().hasIntersectionRect(t)},this.isEqual=function(t){return t===this}},u=function(t,e,r){var l,u=t.document,d=e,s=!1,c=[],f=a.default.point(),p=a.default.point();l=r;var g=function(t){return c&&c.indexOf(t)<0};this.getDoc=function(){return u},this.getPageIndex=function(){return d},this.getQuads=function(){for(var t=[],e=0;e<c.length;e++)t.push(c[e].getBounds());return t},this.selectEqual=function(t){var e=t.length;if(-1!=e)for(var n=null,r=0;r<l.length;r++)for(var a=l[r],o=0;o<e;++o)n=t.get(o),a.isEqual(n)&&g(a)&&c.push(a),n=null,!1},this.begin=function(t){!s&&t&&(f=t.copy(),p=t.copy(),s=!0)},this.continue=function(t){p.isEqual(t)||(p=t.copy(),function(t){c=[];for(var e=0;e<l.length;e++){var n=l[e];n.hitTestRect(t)&&c.push(n)}}(a.default.rect(f.x,f.y,p.x,p.y)))},this.end=function(){return s=!1,c.length>0};this.draw=function(t){var e=o.default.LookAndFeel.EDIT_PICKER_SELECTED_COLOR,r=function(t,e){if(isUndefinedOrNull(e)&&(e=!0),!isArray(t)||0===t.length)return null;for(var r=n.createGeometry(),o=a.default.rect(),i=0,l=0;l<t.length;l++){var u=t[l].getBounds();if(u.isRect()){var d=u.getBound();0===i?o=d.copy():e&&a.default.isRectsOnSameLine(o,d,1)?o.right=d.right:(r.rectangle(o),o=d.copy(),i=1),++i}else{var s=o.copy();r.rectangle(s),o=a.default.rect(),i=0,r.beginFigure(u.tl),r.lineTo(u.tr),r.lineTo(u.br),r.lineTo(u.bl),r.endFigureClose()}}if(i>0){var c=o.copy();r.rectangle(c)}return r}(c);r&&t.fillGeometry(r,e);var l=a.default.rect(f.x,f.y,p.x,p.y),u=a.default.quadFromRect(l),d=o.default.LookAndFeel.EDIT_PICKER_FRAME_FILL_COLOR,s=o.default.LookAndFeel.EDIT_PICKER_FRAME_STROKE_COLOR;i.drawFrame(t,u,d,s)}},d={};return d.createTextmarkupObjectPicker=function(t,n){if(!t||-1==n)return null;var a=t.document,o=[],i=a.getPage(n).content;return i&&function t(n,a,o,i){for(var u=o.length,d=0;d<u;++d){var s=o[d];switch(s.type){case r.default.PDEElementType.kPDEElementContainer:e.shouldSkipContainer(s)||s.isVisible&&t(n,a,s.content,i);break;case r.default.PDEElementType.kPDEElementText:if(s.isVisible,s){var c=s.items;if(isArray(c))for(var f=0;f<c.length;f++){var p=c[f];p&&i.push(new l(n,a,p,s.matrix))}}}}}(a,n,i,o),new u(t,n,o)},d}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},W6JU:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("C3UN"));n("mC++"),n("5UMD");var a="bl-edit-compositeeditobject-item-graphics-module",o="bl-edit-compositeeditobject-item-graphics-factory";angular.module(a,["bl-edit-graphicseditobject-module","bl-edit-utilites-module"]).factory(o,["$rootScope","bl-edit-graphicseditobject-factory","bl-edit-utilites-service",function(t,e,n){var a={};return a.createCompositeEditObjectForPage=function(t,a,o){if(!t||-1==a)return null;var i=t.getPage(a).content;return i&&function t(a,o,i,l){for(var u=i.length,d=0;d<u;++d){var s=i[d];switch(s.type){case r.default.PDEElementType.kPDEElementContainer:n.shouldSkipContainer(s)||s.isVisible&&t(a,o,s.content,l);break;case r.default.PDEElementType.kPDEElementXObject:s.isVisible,l.push(e.createGraphicsEditObject(a,o,s));break;case r.default.PDEElementType.kPDEElementPath:case r.default.PDEElementType.kPDEElementInlineImage:case r.default.PDEElementType.kPDEElementShading:l.push(e.createGraphicsEditObject(a,o,s))}}}(t,a,i,o),o},a.getSelectedObjectsOnPage=function(t,e){return null},a}]),window.mainApp.factory(o,getConstructor(a,o,"factory"))},WaUD:function(t,e,n){"use strict";var r=l(n("Xxa5")),a=l(n("exGp")),o=l(n("b8L+")),i=l(n("C3UN"));function l(t){return t&&t.__esModule?t:{default:t}}var u="bl-edit-clip-create-inputhandler-module",d="bl-edit-clip-create-inputhandler-factory";angular.module(u,[]).factory(d,["$rootScope",function(t){var e={},n=function(t,e,n){return t.mapPointToPage(e,n)};return e.createInstance=function(t,e){return new function(t){var e=t,l=!1,u=!1,d=o.default.point(),s=o.default.point(),c=null,f=function(){var t=o.default.rect(d.x,d.y,s.x,s.y);return t.sort(),t};this.initialize=function(t){c=t,this.onDraw=function(t,e){if(u&&c.getPageIndex()===e){var n=f();t.fillRect(n,"rgba(160, 10, 10, 0.2)")}}},this.terminate=function(){e=null,u=!1},this.getToolName=function(){return"ClipCreate"},this.isFinished=function(){return l},this.handleEvent=function(t){if(l)return!1;switch(t.type){case i.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case i.default.BLInputEventType.kBLInputEventPointerDoubleClicked:return this.onDoubleClicked(t.pointerArgs.position,t.pointerArgs.flags)}return!1},this.restoreSelection=function(){l||e.setSelectionNamed("ClipCreate",c)},this.onLButtonDown=function(){var t=(0,a.default)(r.default.mark(function t(a,o){var l,f,p,g;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=n(e,c.getPageIndex(),a),!(f=c.getClipObjectAtPoint(l))){t.next=16;break}return f.setCollection(c),e.setHighlight(null),t.next=7,e.setSelectionAndTool("ClipEdit",f);case 7:p=t.sent,(g={pointerArgs:{}}).type=i.default.BLInputEventType.kBLInputEventPointerPressed,g.pointerArgs.button=i.default.BLPointerButton.kBLPointerButtonLeft,g.pointerArgs.position=a,g.pointerArgs.flags=0,p.handleEvent(g),t.next=19;break;case 16:d=l.copy(),s=l.copy(),u=!0;case 19:return t.abrupt("return",!0);case 20:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),this.onLButtonUp=function(t,n){if(u){if(!d.isEqual(s)){var r=c.newClipObject(f());r&&(r.setCollection(c),e.setSelectionAndTool("ClipEdit",r))}u=!1}return!0},this.onRButtonDown=function(){var t=(0,a.default)(r.default.mark(function t(a,o){var l,u,d,s;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=n(e,c.getPageIndex(),a),!(u=c.getClipObjectAtPoint(l))){t.next=14;break}return u.setCollection(c),e.setHighlight(null),t.next=7,e.setSelectionAndTool("ClipEdit",u);case 7:d=t.sent,(s={pointerArgs:{}}).type=i.default.BLInputEventType.kBLInputEventPointerPressed,s.pointerArgs.button=i.default.BLPointerButton.kBLPointerButtonRight,s.pointerArgs.position=a,s.pointerArgs.flags=0,d.handleEvent(s);case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),this.onRButtonUp=function(t,e){return!0},this.onMouseMove=function(t,r){var a=n(e,c.getPageIndex(),t);if(u)s=a,e.setCursor(i.default.BLCursorType.kBLCursorCross),e.invalidate();else{var o=c.getClipObjectAtPoint(a);o?(o.setCollection(c),e.setHighlightNamed("ClipEditHighlight",o),e.setCursor(i.default.BLCursorType.kBLCursorMove)):(e.setHighlight(null),e.setCursor(i.default.BLCursorType.kBLCursorCross))}return!0},this.onDoubleClicked=function(t,e){return l=!0,!0}}(e)},e}]),window.mainApp.factory(d,getConstructor(u,d,"factory"))},WtRA:function(t,e,n){"use strict";var r=u(n("C3UN")),a=u(n("b8L+")),o=u(n("IZAc")),i=u(n("kHBY")),l=u(n("eWOG"));function u(t){return t&&t.__esModule?t:{default:t}}n("Trxo");var d="bl-widget-listbox-view-factory-module",s="bl-widget-listbox-view-factory";function c(t,e,n){var u={},d=function(u,d){var s,c,f=u,p=d,g=!1,h=!1,y=o.default.createInstance("#FF000000"),m=[2];this.getPageIndex=function(){return p.getPageIndex()},this.getRect=function(){return p.getRect()},this.hitTest=function(t,e){return this.getPageIndex()==t&&this.getRect().containsPoint(e)},this.mouseDown=function(t,e){var n=b(t);if(p.getRect().containsPoint(n)){if(s&&s.mouseDown(n))h=!0;else{g=!0;var r=p.hitTestLine(n);-1!=r&&(p.setSelection(r),P())}return f.invalidate(),!0}return!1},this.mouseUp=function(t,e){if(h){h=!1;var n=b(t);s&&s.mouseUp(n)}return g&&(g=!1,c&&c(p.getSelection())),!1},this.mouseMove=function(t,e){var n=b(t);if(g){var a=p.hitTestLine(n);return-1!=a&&(p.setSelection(a),P()),f.setCursor(r.default.BLCursorType.kBLCursorLinkHand),f.invalidate(),!0}return!(!s||!s.mouseMove(n,h))||!!p.getRect().containsPoint(n)&&(f.setCursor(r.default.BLCursorType.kBLCursorLinkHand),f.invalidate(),!0)},this.mouseWheel=function(t,e){var n=b(t);return!(!p.doesNeedScroll()||!this.hitTest(p.getPageIndex(),n))&&(e<0&&T(i.default.SBCode.kSB_LINEDOWN,0),e>0&&T(i.default.SBCode.kSB_LINEUP,0),!0)},this.keyDown=function(t,e){switch(t){case r.default.kBLKey.kBLKey_LEFT:case r.default.kBLKey.kBLKey_HOME:p.selectFirst();break;case r.default.kBLKey.kBLKey_RIGHT:case r.default.kBLKey.kBLKey_END:p.selectLast();break;case r.default.kBLKey.kBLKey_UP:p.selectPrev();break;case r.default.kBLKey.kBLKey_DOWN:p.selectNext()}return P(),f.invalidate(),!0},this.keyUp=function(t,e){return!0},this.draw=function(e,r){if(e===p.getPageIndex()){var o=t.getViewToPageMatrix(f,e),i=p.getRect();r.pushState(),r.concatCTM(o),window.deviceDetect.isPhone()&&function(t,e){e&&n.drawFrame(t,a.default.quadFromRect(e),null,y,m)}(r,i),this.drawAsComboDropdownList(e,r),r.popState()}},this.drawAsComboDropdownList=function(t,e){if(t==p.getPageIndex()){var n=p.getRect(),i=p.getWidget(),u=p.getSelection(),d=o.default.createInstance(l.default.field.getBackground());e.pushState(),e.clipRect(n),e.fillRect(n,d);var c=l.default.listBox.getMargin(),f=l.default.listBox.getFontSize()*l.default.listBox.getLineHeightFactor(),g=i.options&&i.options.items?i.options.items:[];s&&(u-=s.getScrollPos());var h=e.createFontFace(l.default.field.getFontName(!0),r.default.GFontStyle.kGFontStyleRegular,l.default.listBox.getFontSize()),y=e.createFontFace(l.default.field.getFontName(!1),r.default.GFontStyle.kGFontStyleRegular,l.default.listBox.getFontSize());if(u>=0&&u<g.length){var m=o.default.createInstance(l.default.listBox.getSelectionColor()),T=g[u],P=v(R=y,T),b=a.default.point(n.left+c,n.top+c+u*f),M=a.default.size(n.getWidth()-2*c,P.height),B=a.default.rect(b.x,b.y,b.x+M.width,b.y+M.height);e.fillRect(B,m)}var L=n.left+c,S=n.top+c;s&&(S-=s.getScrollPos()*f);for(var x=o.default.createInstance("FF000000"),k=0;k<g.length;k++){var R;T=g[k],P=v(R=h,T);e.pushState(),e.translateCTM(L,S+P.height),e.fillText(R,T,x),e.popState(),S+=P.height*l.default.listBox.getLineHeightFactor()}var F=o.default.createInstance(l.default.listBox.getBorderColor());e.strokeRect(n,F,1,null),e.popState(),s&&s.draw(e)}},this.canUndo=function(){return p.canUndo()},this.canRedo=function(){return p.canRedo()},this.undo=function(){p.undo(),P(),f.invalidate()},this.redo=function(){p.redo(),P(),f.invalidate()},this.finalize=function(t){p.clearUndoRedoStack(),t&&p.commitChanges()||p.cancelChanges()},this.setOnSelectionChangedCallBack=function(t){c=t};var v=function(t,e){var n=a.default.size();return e&&(n=function t(e,n){var r=(t.calculateTextBoundCanvas||(t.calculateTextBoundCanvas=document.createElement("canvas"))).getContext("2d");r.font=e;var o=r.measureText(n);return a.default.size(o.width,parseInt(e.match(/\d+/)[0]))}(t,e)),n},T=function(t,e){var n=p.getTopLine(),r=p.getNumLines()-p.getNumVisibleLines();switch(t){case i.default.SBCode.kSB_TOP:n=0;break;case i.default.SBCode.kSB_BOTTOM:n=r;break;case i.default.SBCode.kSB_ENDSCROLL:break;case i.default.SBCode.kSB_LINEDOWN:case i.default.SBCode.kSB_PAGEDOWN:n<r&&++n;break;case i.default.SBCode.kSB_LINEUP:case i.default.SBCode.kSB_PAGEUP:n>0&&--n;break;case i.default.SBCode.kSB_THUMBPOSITION:case i.default.SBCode.kSB_THUMBTRACK:n=e}p.setTopLine(n),s&&s.setScrollPos(n),f.invalidate()},P=function(){if(!p.doesNeedScroll())return s&&s.setOnScrollCallBack(null),void(s=null);if(!s){s=e.createInstance(f);var t=1*p.getRotate(),n=p.getRect(),o=n.left_bottom(),i=a.default.rotationMatrix(a.default.degreeToRadian(t),o),l=i.invert(),u=p.getBorderStyle(),d=n.getHeight()<2*u.width||n.getWidth()<2*u.width,c=n;c.inflate(-u.width,-u.width),u.style!=r.default.PDAnnotBorderStyle.kPDAnnotBorderStyleBeveled&&u.style!=r.default.PDAnnotBorderStyle.kPDAnnotBorderStyleInset||c.inflate(-1,-1),c=i.mapRect(c);var g=12;if(d)g=0;else{var h=c.getWidth()/1.5;g>h&&(g=h)}var y=c;y.left=y.right-g,(y=l.mapRect(y)).inflate(-1,-1),s&&s.setPlacement(y,t)}s&&(s.setScrollRange(0,p.getNumLines()),s.setPageSize(p.getNumVisibleLines()),s.setScrollPos(p.getTopLine())),s.setOnScrollCallBack(null),s.setOnScrollCallBack(T),s&&s.setVisible(!0)},b=function(e){var n=f.mapPointToPage(p.getPageIndex(),e);return n=t.getPageToViewMatrix(f,p.getPageIndex()).mapPoint(n)};P()};return u.createInstance=function(t,e){return new d(t,e)},u}angular.module(d,[]).factory(s,c),c.$inject=["bl-widget-renderer-service","form-scrollbar-factory","transformer-painter-service"],window.mainApp.factory(s,getConstructor(d,s,"factory"))},YKqI:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}var l="bl-edit-image-crop-inputhandler-module",u="bl-edit-image-crop-inputhandler-factory";angular.module(l,[]).factory(u,["$rootScope","ui-helper-factory",function(t,e){var n=e.ondemand.getInsertModuleService,i={},l=function(t,e,n){var a=r.default.point(t.x-e.x,t.y-e.y);return n*n>=a.x*a.x+a.y*a.y},u=function(t,e,n){return t.mapPointToPage(e,n)},d=function(t,e,n){return t.mapPointToDevice(e,n)},s=function(t){var e=t,i=null,s=a.default.AnchorPlace.ANCHOR_NONE,c=r.default.point(),f=function(t){a.default.TransformType.TRANSFORM_NONE,a.default.AnchorPlace.ANCHOR_NONE,r.default.point();var n,s=i.getPageIndex();if(!((n=e.getVisibleRange()).startPage<=s&&s<=n.endPage))return!1;var c=o.default.LookAndFeel.TransformerScaleZoneRadius,f=function(t,e,n){var a=d(t,e,n.tl),o=d(t,e,n.tr),i=d(t,e,n.bl),l=d(t,e,n.br);return r.default.quadFromPoints(a,o,i,l)}(e,s,i.getBounds());if(i.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&l(t,f.top_left(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP_LEFT,active:f.top_left()};if(i.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&l(t,f.top_right(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:f.top_right()};if(i.hasAnyCurrentEditMode(a.default.EditModes.Move)&&l(t,f.top_right(),c))return{type:a.default.TransformType.TRANSFORM_MOVE,anchor:a.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:f.top_right()};if(i.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&l(t,f.bottom_left(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:f.bottom_left()};if(i.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&l(t,f.bottom_right(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:f.bottom_right()};if(i.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&l(t,f.top_center(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_TOP,active:f.top_center()};if(i.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&l(t,f.bottom_center(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_BOTTOM,active:f.bottom_center()};if(i.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&l(t,f.center_left(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_LEFT,active:f.center_left()};if(i.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&l(t,f.center_right(),c))return{type:a.default.TransformType.TRANSFORM_SCALE,anchor:a.default.AnchorPlace.ANCHOR_RIGHT,active:f.center_right()};var p=u(e,s,t);return i.hitTest(p)?{type:i.hasAnyCurrentEditMode(a.default.EditModes.Move)?a.default.TransformType.TRANSFORM_MOVE:a.default.TransformType.TRANSFORM_NONE,anchor:a.default.AnchorPlace.ANCHOR_NONE,active:t}:null},p=function(t,n,o){var l=a.default.BLCursorType.kBLCursorArrow;switch(t){case a.default.TransformType.TRANSFORM_MOVE:l=a.default.BLCursorType.kBLCursorMove;break;case a.default.TransformType.TRANSFORM_ROTATE:l=a.default.BLCursorType.kBLCursorRotate;break;case a.default.TransformType.TRANSFORM_SCALE:for(var u=[6,0,2,4,7,1,5,3][n],d=e.document,s=i.getPageIndex(),c=d.getPage(s).getRotate(0),f=e.getPagesRotation(),p=r.default.degreeToRadian(f)+r.default.degreeToRadian(c)+function(t){var e=Math.sqrt(t.a*t.a+t.b*t.b),n=t.b/e,r=t.a/e;return Math.atan2(n,r)}(i.getTransform());p>=Math.PI;)p-=Math.PI;var g=r.default.degreeToRadian(45);(u=(u-(p>0?r.default.castFloatToInt(p/g+.5):r.default.castFloatToInt(p/g-.5)))%8)<0&&(u+=8),l=(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?a.default.BLCursorType.kBLCursorScaleProportional_N:a.default.BLCursorType.kBLCursorScale_N)+u}e.setCursor(l)},g=function(t,n){!function(t,n){var a=i.getTransform(),o=c.copy(),l=t.copy();if(!o.isEqual(l)){var u=r.default.point(l.x-o.x,l.y-o.y),d=a.multiply(r.default.translationMatrix(u.x,u.y)),s=a.invert();if(!s)return;d=d.multiply(s);var f=i.getCropRect(),p=i.getImageWidth(),g=i.getImageHeight(),h=r.default.rect(f.left/p,f.top/g,f.right/p,f.bottom/g);h=d.mapRect(h),f=r.default.rect(r.default.castFloatToInt(h.left*p),r.default.castFloatToInt(h.top*g),r.default.castFloatToInt(h.right*p),r.default.castFloatToInt(h.bottom*g)),i.setOperationCropRect(f),e.invalidate()}}(t,a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),p(a.default.TransformType.TRANSFORM_MOVE,s,n)},h=function(t,n){!function(t,n){var o=i.getTransform().invert();if(o){var l=o.mapPoint(t),u=i.getImageWidth(),d=i.getImageHeight(),c=i.getCropRect(),f=r.default.rect(c.left/u,c.top/d,c.right/u,c.bottom/d),p=f.getWidth(),g=f.getHeight();if(!r.default.floatEq(p,0)&&!r.default.floatEq(g,0)){var h=f.getOrigin(),y=f.getCenter(),m=2*(l.x-h.x)/p,v=2*(l.y-h.y)/g;l.offset(-h.x,-h.y);var T=l.x/p,P=l.y/g,b=null;switch(s){case a.default.AnchorPlace.ANCHOR_LEFT:b=a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-T,1-T,h).multiply(r.default.translationMatrix(l.x,T*g/2)):a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-m,1-m,y):r.default.scalingMatrix(1-T,1,h).multiply(r.default.translationMatrix(l.x,0));break;case a.default.AnchorPlace.ANCHOR_TOP:b=a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(P,P,h).multiply(r.default.translationMatrix((1-P)*p/2,0)):a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(v-1,v-1,y):r.default.scalingMatrix(1,P,h);break;case a.default.AnchorPlace.ANCHOR_RIGHT:b=a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(T,T,h).multiply(r.default.translationMatrix(0,(1-T)*g/2)):a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(m-1,m-1,y):r.default.scalingMatrix(T,1,h);break;case a.default.AnchorPlace.ANCHOR_BOTTOM:b=a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-P,1-P,h).multiply(r.default.translationMatrix(P*p/2,l.y)):a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-v,1-v,y):r.default.scalingMatrix(1,1-P,h).multiply(r.default.translationMatrix(0,l.y));break;case a.default.AnchorPlace.ANCHOR_TOP_LEFT:if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var M=Math.min(1-T,P);b=r.default.scalingMatrix(M,M,h).multiply(r.default.translationMatrix((1-M)*p,0))}else if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var B=Math.min(1-m,v-1);b=r.default.scalingMatrix(B,B,y)}else b=r.default.scalingMatrix(1-T,P,h).multiply(r.default.translationMatrix(l.x,0));break;case a.default.AnchorPlace.ANCHOR_TOP_RIGHT:if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var L=Math.min(T,P);b=r.default.scalingMatrix(L,L,h)}else if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var S=Math.min(m-1,v-1);b=r.default.scalingMatrix(S,S,y)}else b=r.default.scalingMatrix(T,P,h);break;case a.default.AnchorPlace.ANCHOR_BOTTOM_LEFT:if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var x=Math.min(1-T,1-P);b=r.default.scalingMatrix(x,x,h).multiply(r.default.translationMatrix((1-x)*p,(1-x)*g))}else if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var k=Math.min(1-m,1-v);b=r.default.scalingMatrix(k,k,y)}else b=r.default.scalingMatrix(1-T,1-P,h).multiply(r.default.translationMatrix(l.x,l.y));break;case a.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT:if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var R=Math.min(T,1-P);b=r.default.scalingMatrix(R,R,h).multiply(r.default.translationMatrix(0,(1-R)*g))}else if(a.default.BLFlagIsSet(n,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var F=Math.min(m-1,1-v);b=r.default.scalingMatrix(F,F,y)}else b=r.default.scalingMatrix(T,1-P,h).multiply(r.default.translationMatrix(0,l.y))}var A=b.copy(),C=i.getCropRect(),E=i.getImageWidth(),_=i.getImageHeight(),I=r.default.rect(C.left/E,C.top/_,C.right/E,C.bottom/_);I=A.mapRect(I),C=r.default.rect(r.default.castFloatToInt(I.left*E),r.default.castFloatToInt(I.top*_),r.default.castFloatToInt(I.right*E),r.default.castFloatToInt(I.bottom*_)),i.setOperationCropRect(C),e.invalidate()}}}(t,n),p(a.default.TransformType.TRANSFORM_SCALE,s,n)};this.initialize=function(t){i=t},this.terminate=function(){},this.getToolName=function(){return"ImageCrop"},this.isFinished=function(){return!1},this.handleEvent=function(t){switch(t.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onMouseDown(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onMouseUp(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case a.default.BLInputEventType.kBLInputEventPointerDoubleClicked:return this.onDoubleClicked(t.pointerArgs.position,t.pointerArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onMouseDown=function(t,n){u(e,i.getPageIndex(),t);var o=f(t);if(!o)return e.setCursor(a.default.BLCursorType.kBLCursorNo),!0;s=o.anchor,i.startOperation(o.type);var l=r.default.point(r.default.castFloatToInt(o.active.x),r.default.castFloatToInt(o.active.y));return c=u(e,i.getPageIndex(),l),!0},this.onMouseUp=function(t,n){i.isPerformingOperation()&&(i.endOperation(),e.invalidate());var r=f(t);return r?(p(r.type,r.anchor,n),e.invalidate(),!0):(e.setCursor(a.default.BLCursorType.kBLCursorNo),!1)},this.onMouseMove=function(t,n){var r=u(e,i.getPageIndex(),t);switch(i.getOperationType()){case a.default.TransformType.TRANSFORM_NONE:var o=f(t);return o?(e.setHighlight(null),p(o.type,o.anchor,n)):e.setCursor(a.default.BLCursorType.kBLCursorNo),!0;case a.default.TransformType.TRANSFORM_MOVE:g(r,n);break;case a.default.TransformType.TRANSFORM_SCALE:h(r,n)}return!0},this.onDoubleClicked=function(t,r){return n().then(function(t){t.toggleImageCropMode(e)}),!0}};return i.createInstance=function(t,e){return new s(e)},i}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},YuTg:function(t,e,n){"use strict";var r=i(n("C3UN")),a=i(n("b8L+")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}n("Ij0n"),n("tQXD"),n("F1Q0");var l="bl-edit-texteditselection-module",u="bl-edit-texteditselection-factory";angular.module(l,["transformer-painter-module"]).factory(u,["$rootScope","transformer-painter-service","bl-edit-textblocktransformer-factory","bl-object-properties-factory",function(t,e,n,i){var l=function(){var t=null,r=o.default.LookAndFeel.TextTransformerHighlightColor;this.init=function(e,n){e,t=n},this.getType=function(){return"TextEditHighlight"},this.getSelectionData=function(){return t},this.drawHighlight=function(a,o){var i=t.getPosition();i&&(o==i.getPageIndex()&&function(a){var o=t.getPosition(),i=o.getTextBlock(),l=o.getPageIndex(),u=t.getDoc(),d=n.createInstance(u,l,i).getBounds();e.drawFrame(a,d,null,r)}(a))},this.draw=function(t,e){},this.hitTest=function(t,e){return!1},this.getDestination=function(){var e={},n=t.getPosition();e.pPageIndex=n.getPageIndex();var r=n.getQuad();return e.pRect=r.getBound(),e}},u=function(){var t=null,n=null,l=(o.default.LookAndFeel.TextEditSelectionColor,o.default.LookAndFeel.TextTransformerFrameColor),u=o.default.LookAndFeel.SnapLinesColor;this.init=function(e,r){if(t=e,n=r){n.getTextBlockTransformer().getBounds();deviceDetect.isPhone()}},this.getType=function(){return"TextEdit"},this.getSelectionData=function(){return n},this.draw=function(i,d){var s=n.getSelectedRange();if(s){s.begin.getPageIndex(),s.end.getPageIndex();n.draw(i,d),function(i,d){var s=n.getTextBlockTransformer(),c=s.getAllActionButtons();if(d==s.getPageIndex()){var f=void 0;if(s.isPerformingOperation()){var p=s.getBounds();e.drawFrame(i,p,null,l,[10]),f=s.getOperationBounds();var g=a.default.quadFromRect(s.getSnapOperationBounds().getBound());e.drawFrame(i,g,null,u);var h=s.getSnapInfo();h&&e.drawSnapInfo(i,h,u)}else f=s.getBounds();e.drawFrame(i,f,null,l);var y=o.default.LookAndFeel.TransformerAnchorRadius;if(s.isPerformingOperation()){var m=f.getCenter(),v=o.default.LookAndFeel.TransformerOriginRadius;switch(s.getOperationType()){case r.default.TransformType.TRANSFORM_MOVE:break;default:e.drawOrigin(i,"#FFFFFF",l,m,y,v)}}else{if(s.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&e.drawMarker(i,"#FFFFFF",l,f.top_left(),y),s.hasAnyCurrentEditMode(r.default.EditModes.Move|r.default.EditModes.Resize|r.default.EditModes.Rotate))if(deviceDetect.isPhone()){var T={fillColor:"#3688dc",anchorRadius:y+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};s.hasAnyCurrentEditMode(r.default.EditModes.Move)?T.text="":s.hasAnyCurrentEditMode(r.default.EditModes.Resize)?T.text="":s.hasAnyCurrentEditMode(r.default.EditModes.Rotate)&&(T.text=""),e.drawMarker(i,T.fillColor,l,f.top_right(),T.anchorRadius,T)}else e.drawMarker(i,"#FFFFFF",l,f.top_right(),y);if(s.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&(e.drawMarker(i,"#FFFFFF",l,f.bottom_right(),y),e.drawMarker(i,"#FFFFFF",l,f.bottom_left(),y)),c)for(var P in c)if(c.hasOwnProperty(P)){var b=c[P];b&&e.drawMarker(i,b.fillColor,l,b.getPosition(),b.anchorRadius,b)}var M=t.mapRectToDevice(d,f.getBound()),B=a.default.quadFromRect(M),L=o.default.LookAndFeel.TransformerScaleZoneRadius;s.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&a.default.pointsDistance(B.center_right(),B.center_left())>=3*L&&(e.drawMarker(i,"#FFFFFF",l,f.top_center(),y),e.drawMarker(i,"#FFFFFF",l,f.bottom_center(),y)),s.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&a.default.pointsDistance(B.top_center(),B.bottom_center())>=3*L&&(e.drawMarker(i,"#FFFFFF",l,f.center_right(),y),e.drawMarker(i,"#FFFFFF",l,f.center_left(),y))}}}(i,d)}},this.getProperties=function(){var t=n.getTextBlockTransformer(),e=t.getRotation_PropertyTest(),a=t.getPosition_PropertyTest(),o=t.getBounds().getBound(),l=i.createMainGroup(function(t){});return function(){var t=i.createPropValue("Text Block","T"),n=i.createProperty(r.default.objectPropertyType.textlabel,t,"Type"),u=i.createSubGroup("Type",[n]);l.addToTabGroup(r.default.objectPropertyGroupType.general,u);var d=Math.ceil(1e4*e)/1e4,s=i.createPropValue(d,"r"),c=i.createProperty(r.default.objectPropertyType.textlabel,s,"Rotation"),f=Math.ceil(1e4*a.x)/1e4,p=i.createPropValue(f,"xp"),g=i.createProperty(r.default.objectPropertyType.textlabel,p,"X Position"),h=Math.ceil(1e4*a.y)/1e4,y=i.createPropValue(h,"yp"),m=i.createProperty(r.default.objectPropertyType.textlabel,y,"Y Position"),v=Math.ceil(1e4*o.getWidth())/1e4,T=i.createPropValue(v,"wdth"),P=i.createProperty(r.default.objectPropertyType.textlabel,T,"Width"),b=Math.ceil(1e4*o.getHeight())/1e4,M=i.createPropValue(b,"hght"),B=i.createProperty(r.default.objectPropertyType.textlabel,M,"Height"),L=i.createSubGroup("Information",[g,m,c,P,B]);l.addToTabGroup(r.default.objectPropertyGroupType.general,L)}(),l.defaultTab=0,l},this.hitTest=function(t,e){return!1},this.getDestination=function(){var t={},e=n.getPosition();t.pPageIndex=e.getPageIndex();var r=e.getQuad();return t.pRect=r.getBound(),t}};return{createTextEditSelection:function(){return new u},createTextEditHighlightSelection:function(){return new l}}}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},ZqXQ:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("b8L+"));n("5UMD");var a="bl-edit-editobject-factory";angular.module("bl-edit-editobject-module",["bl-edit-utilites-module"]).factory(a,["$rootScope","bl-edit-utilites-service",function(t,e){var n={};return n.createInstance=function(t,n){return new function(t,n){var a=this,o=t,i=n,l=o.getPage(i),u=null;a.getDoc=function(){return o},a.getPageIndex=function(){return i},a.isEqual=function(t){return!!t&&t.getObjectType()==a.getObjectType()&&t.getDoc()==o&&t.getPageIndex()==i&&a.compareInternals(t)},a.getBounds=function(){var t=a.getCTM(),e=a.getObjectSpaceRect();return t.mapQuad(r.default.quadFromRect(e))},a.setEditCTM=function(t){return(u=e.correctCTMToRespectPageBox(l.getCropBox(),a.getObjectSpaceRect(),t))!=t},a.getEditBounds=function(){var t=a.getObjectSpaceRect();return u.mapQuad(r.default.quadFromRect(t))}}(t,n)},n}]),window.mainApp.factory(a,getConstructor("bl-edit-editobject-module",a,"factory"))},a2o8:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}n("Ij0n"),n("lii2"),n("mC++"),n("Kopg"),n("5UMD");var l="bl-edit-objectpicker-factory";angular.module("bl-edit-objectpicker-module",["transformer-painter-module","bl-edit-compositeeditobject-module","bl-edit-graphicseditobject-module","bl-edit-texteditobject-module","bl-edit-utilites-module"]).factory(l,["$rootScope","transformer-painter-service","bl-edit-compositeeditobject-factory","bl-edit-graphicseditobject-factory","bl-edit-texteditobject-factory","bl-edit-utilites-service",function(t,e,n,i,l,u){var d=[i,l],s=function(t,a,i){var l=t.document,u=a,d=[],s=!1,c=[],f=r.default.point(),p=r.default.point();n.copyFromCompositeToEditObjectStore(i,d);var g=function(t){return c&&c.indexOf(t)<0};this.getDoc=function(){return l},this.getPageIndex=function(){return u},this.getSelectedObjects=function(){return n.createCompositeEditObjectByData(c)},this.selectEqual=function(t){var e=t.getCount();if(-1!=e)for(var n=null,r=0;r<d.length;r++)for(var a=d[r],o=0;o<e;++o)n=t.get(o),a.isEqual(n)&&g(a)&&c.push(a),n=null,!1},this.begin=function(t){!s&&t&&(f=t.copy(),p=t.copy(),s=!0)},this.continue=function(t){p.isEqual(t)||(p=t.copy(),function(t){c=[];for(var e=0;e<d.length;e++){var n=d[e];n.hitTestRect(t)&&c.push(n)}}(r.default.rect(f.x,f.y,p.x,p.y)))},this.end=function(){return s=!1,c.length>0},this.draw=function(t,n){for(var a=o.default.LookAndFeel.EDIT_PICKER_OBJECT_COLOR,i=void 0,l=0;l<d.length;l++){var u=d[l];g(u)&&(i=u.getBounds(),e.drawFrame(t,i,null,a))}for(var s=o.default.LookAndFeel.EDIT_PICKER_SELECTED_COLOR,h=0;h<c.length;h++){i=c[h].getBounds(),e.drawFrame(t,i,s)}var y=r.default.rect(f.x,f.y,p.x,p.y),m=r.default.quadFromRect(y),v=o.default.LookAndFeel.EDIT_PICKER_FRAME_FILL_COLOR,T=o.default.LookAndFeel.EDIT_PICKER_FRAME_STROKE_COLOR;e.drawFrame(t,m,v,T)}},c={createEditObjectPicker:function(t,e){if(!t||-1==e)return null;var r=t.document,a=n.createCompositeEditObjectForPage(r,e);return new s(t,e,a)}};return c.createEditObjectByPagePoint=function(t,e,n){if(!t||e<0||!n)return null;var r=t.document.getPage(e);return r.isLoaded?function t(e,n,r,o){for(var i=null,l=e.document,s=r.length;s>0;--s){var c=r[s-1];if(c)switch(c.type){case a.default.PDEElementType.kPDEElementContainer:if(!u.shouldSkipContainer(c)&&c.isVisible&&(i=t(e,n,c.content,o)))return i;break;default:for(var f=0;f<d.length;f++){var p=d[f].createEditObjectByPagePoint(l,n,c,o);if(p)return p}}}return null}(t,e,r.getReadContent(),n):null},c.createEditObject=function(t,e,n){return null},c}]),window.mainApp.factory(l,getConstructor("bl-edit-objectpicker-module",l,"factory"))},aP0f:function(t,e,n){"use strict";var r=o(n("C3UN")),a=(o(n("b8L+")),o(n("VmtT")));function o(t){return t&&t.__esModule?t:{default:t}}n("Ij0n");var i="bl-edit-clip-edit-selection-module",l="bl-edit-clip-edit-selection-factory";angular.module(i,["transformer-painter-module"]).factory(l,["$rootScope","transformer-painter-service",function(t,e){return{createClipEditHighlight:function(){return new function(){var t=null,n=null;this.init=function(e,r){t=r,n=a.default.LookAndFeel.ClipEditTransformerHighlightColor},this.getType=function(){return"ClipEdit"},this.getSelectionData=function(){return t},this.drawHighlight=function(r,a){if(a==t.getPageIndex()){var o=t.getBounds();e.drawFrame(r,o,null,n)}},this.hitTest=function(e,n){return e==t.getPageIndex()&&t.hitTest(n)},this.getDestination=function(){var e={};return e.pPageIndex=t.getPageIndex(),e.pRect=t.getBound(),e}}},createClipEditSelection:function(){return new function(){var t=null,n=null,o=null,i=null;this.init=function(e,r){t=r,n=a.default.LookAndFeel.ClipEditTransformerObjectColor,o=a.default.LookAndFeel.ClipEditTransformerHighlightColor,i=a.default.LookAndFeel.ClipCreationFrameColor},this.getType=function(){return"ClipEdit"},this.getSelectionData=function(){return t},this.draw=function(l,u){if(u==t.getPageIndex()){var d=t.getElement();l.paintClipGeometries(n,d.clip);var s=d.getQuad();e.drawFrame(l,s,null,i);var c=void 0;if(t.isPerformingOperation()){var f=t.getBounds();e.drawFrame(l,f,null,o,[10]),c=t.getOperationBounds()}else c=t.getBounds();e.drawFrame(l,c,null,o);var p=c.getCenter(),g=a.default.LookAndFeel.TransformerAnchorRadius,h=a.default.LookAndFeel.TransformerOriginRadius;if(t.isPerformingOperation())switch(t.getOperationType()){case r.default.TransformType.TRANSFORM_MOVE:break;case r.default.TransformType.TRANSFORM_ROTATE:case r.default.TransformType.TRANSFORM_SCALE:e.drawOrigin(l,"#FFFFFF",o,p,g,h)}else{var y=[];if(t.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&y.push(c.top_left()),t.hasAnyCurrentEditMode(r.default.EditModes.Move|r.default.EditModes.Resize|r.default.EditModes.Rotate))if(deviceDetect.isPhone()){var m={fillColor:"#3688dc",anchorRadius:g+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};t.hasAnyCurrentEditMode(r.default.EditModes.Move)?m.text="":t.hasAnyCurrentEditMode(r.default.EditModes.Resize)?m.text="":t.hasAnyCurrentEditMode(r.default.EditModes.Rotate)&&(m.text=""),e.drawMarker(l,m.fillColor,o,c.top_right(),m.anchorRadius,m)}else e.drawMarker(l,"#FFFFFF",o,c.top_right(),g);t.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&(y.push(c.bottom_right()),y.push(c.bottom_left()),y.push(c.top_center()),y.push(c.center_right()),y.push(c.bottom_center()),y.push(c.center_left()));for(var v=0,T=y.length;v<T;++v)e.drawMarker(l,"#FFFFFF",o,y[v],g)}}},this.hitTest=function(e,n){return e==t.getPageIndex()&&t.hitTest(n)},this.getDestination=function(){var e={};return e.pPageIndex=t.getPageIndex(),e.pRect=t.getBound(),e}}}}}]),window.mainApp.factory(l,getConstructor(i,l,"factory"))},aqxP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n("HSQo"));e.default={createSnapInfo:function(t,e,n){return new function(t,e,n){var a=t,o=e,i=n;(0,r.default)(this,{guides:{get:function(){return saveSlice(a)}},distances:{get:function(){return saveSlice(o)}},scales:{get:function(){return saveSlice(i)}}})}(t,e,n)}}},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n("C4MV"));e.default=function(t,e,n){return e in t?(0,r.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},bcZM:function(t,e,n){"use strict";var r=d(n("HSQo")),a=d(n("C3UN")),o=d(n("b8L+")),i=d(n("VmtT")),l=d(n("IZAc")),u=d(n("Jrzz"));function d(t){return t&&t.__esModule?t:{default:t}}n("ibtX"),n("iMU4"),n("Ij0n"),n("F1Q0"),n("v1ab");var s="bl-edit-polylineannoteditselection-module",c="bl-edit-polylineannoteditselection-factory";angular.module(s,["bl-edit-baseannoteditselection-module","bl-edit-polylineannoteditobject-module","transformer-painter-module","bl-edit-module","bl-object-properties-module","pdf-manager-module"]).factory(c,["$rootScope","bl-edit-baseannoteditselection-factory","bl-edit-polylineannoteditobject-factory","transformer-painter-service","bl-edit-service","bl-object-properties-factory","pdf-manager-factory",function(t,e,n,d,s,c,f){var p=i.default.LookAndFeel.AnnotTransformerFrameColor,g=i.default.LookAndFeel.SnapLinesColor,h=l.default.createInstance("#FFFFFFFF");return{createInstance:function(){var t=e.createInstance();return t.draw=function(e,r){var l=t.AnnotEditObject_;if(l&&r==l.getPageIndex()){var s=null;if(l.getOperation()==n.TransformType.kTransformNone)s=o.default.quadFromRect(l.getRect());else{if(l.getOperation()!==n.TransformType.kTransformMovePoint){var c=o.default.quadFromRect(l.getRect());d.drawFrame(e,c,null,p,[10])}if(s=l.getOperationBounds(),l.getOperation()!==n.TransformType.kTransformMovePoint){var f=o.default.quadFromRect(s.getBound());d.drawFrame(e,f,null,g)}var y=l.getSnapInfo();y&&d.drawSnapInfo(e,y,g),function(t,e,n,r){if(t&&window.isArray(e)){for(var o=0;o<e.length-1;o++){var i=u.default.verticeToPoint(e[o]),l=u.default.verticeToPoint(e[o+1]);t.strokeLine(i,l,n,0)}if(r===a.default.pdfAnnotationType.polygon){var d=u.default.verticeToPoint(e.first()),s=u.default.verticeToPoint(e.last());t.strokeLine(d,s,n,0)}}}(e,l.getMovedVertices(),p,l.getAnnotSubtype()),function(t,e,n,r,o){if(r!==u.default.invalidIndex&&t&&window.isArray(e)){var i=u.default.verticeToPoint(e[r]);if(i){var l=void 0,d=void 0;r===e.length-1?(d=u.default.verticeToPoint(e[r-1]),o===a.default.pdfAnnotationType.polygon&&(l=u.default.verticeToPoint(e.first()))):0===r?(d=u.default.verticeToPoint(e[r+1]),o===a.default.pdfAnnotationType.polygon&&(l=u.default.verticeToPoint(e.last()))):(l=u.default.verticeToPoint(e[r-1]),d=u.default.verticeToPoint(e[r+1])),l&&t.strokeLine(l,i,n,0),d&&t.strokeLine(d,i,n,0)}}}(e,l.getVertices(),p,l.getMovedVertexIndex(),l.getAnnotSubtype())}l.getOperation()!==n.TransformType.kTransformMovePoint&&d.drawFrame(e,s,null,p);var m=i.default.LookAndFeel.TransformerAnchorRadius;if(l.getOperation()!==n.TransformType.kTransformNone){var v=s.getCenter(),T=i.default.LookAndFeel.TransformerOriginRadius;switch(l.getOperation()){case n.TransformType.kTransformMove:break;case n.TransformType.kTransformRotate:case n.TransformType.kTransformScale:d.drawOrigin(e,h,p,v,m,T)}}else{if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&d.drawMarker(e,h,p,s.top_left(),m),l.hasAnyCurrentEditMode(a.default.EditModes.Move|a.default.EditModes.Resize|a.default.EditModes.Rotate))if(window.deviceDetect.isPhone()){var P={fillColor:"#3688dc",anchorRadius:m+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};l.hasAnyCurrentEditMode(a.default.EditModes.Move)?P.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Resize)?P.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&(P.text=""),d.drawMarker(e,P.fillColor,p,s.top_right(),P.anchorRadius,P)}else d.drawMarker(e,h,p,s.top_right(),m);l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&d.drawMarker(e,h,p,s.bottom_right(),m),l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&d.drawMarker(e,h,p,s.bottom_left(),m);var b=e.getCTM().mapQuad(s),M=i.default.LookAndFeel.TransformerScaleZoneRadius;o.default.pointsDistance(b.center_right(),b.center_left())>=3*M&&l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&(d.drawMarker(e,h,p,s.top_center(),m),d.drawMarker(e,h,p,s.bottom_center(),m)),o.default.pointsDistance(b.top_center(),b.bottom_center())>=3*M&&l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&(d.drawMarker(e,h,p,s.center_right(),m),d.drawMarker(e,h,p,s.center_left(),m)),l.hasAnyCurrentEditMode(a.default.EditModes.MovePoint)&&function(t,e,n,r,a){if(window.isArray(e))for(var o=0;o<e.length;o++)d.drawMarker(t,n,r,u.default.verticeToPoint(e[o]),a)}(e,l.getVertices(),h,p,m)}}},t.getProperties=function(){var e=this.getSelectionData().getAnnot(),n=this.getSelectionData().getAnnotSubtype(),o=c.createMainGroup(function(n){return f.changeAnnotationProperties(t.DocumentView_.getDocument(),e,t.AnnotEditObject_.getPageIndex(),n)}),i={flags:e.flags,getFullPropData:function(){return this.flags}};return(0,r.default)(i,{locked:{get:function(){return 0!=(this.flags&a.default.pdfAnnotationFlag.Locked)},set:function(t){t?this.flags|=a.default.pdfAnnotationFlag.Locked:this.flags&=~a.default.pdfAnnotationFlag.Locked}}}),function(){var t=e.type,n=c.createPropValue(t,"T"),r=c.createProperty(a.default.objectPropertyType.textlabel,n,"Type"),l=c.createSubGroup("Type",[r]);if(o.addToTabGroup(a.default.objectPropertyGroupType.general,l),!e.isLink()){var u=e.titleText,d=c.createPropValue(u,"Tx"),s=c.createProperty(a.default.objectPropertyType.textedit,d,"Author"),f=e.subjectText,p=c.createPropValue(f,"SJ"),g=c.createProperty(a.default.objectPropertyType.textedit,p,"Subject"),h=c.createSubGroup("Info",[s,g]);o.addToTabGroup(a.default.objectPropertyGroupType.general,h)}var y=new Date(e.modificationDate),m=c.createPropValue(y,"MD"),v=c.createProperty(a.default.objectPropertyType.textlabel,m,"Modified",a.default.objectPropertyStyle.dateTime),T=c.createPropValue(i,"F",["locked"]),P=c.createProperty(a.default.objectPropertyType.select,T,"Locked",a.default.objectPropertyStyle.bool),b=c.createSubGroup("Modify",[v,P]);o.addToTabGroup(a.default.objectPropertyGroupType.general,b)}(),function(){if(n!==a.default.pdfAnnotationType.text){if(n!==a.default.pdfAnnotationType.highlight&&n!==a.default.pdfAnnotationType.underline&&n!==a.default.pdfAnnotationType.strikeOut&&n!==a.default.pdfAnnotationType.text){var t={W:e.borderStyle.width,S:e.borderStyle.style,D:e.borderStyle.dashPattern},r=c.createPropValue(t,"BS",["W"]),i=c.createProperty(a.default.objectPropertyType.number,r,"Width"),u=c.createPropValue(t,"BS",["S"]),d=c.createProperty(a.default.objectPropertyType.select,u,"Style",a.default.objectPropertyStyle.borderStyle),s=e.isMarkup()?"Line":"Border",f=c.createSubGroup(s,[d,i]);o.addToTabGroup(a.default.objectPropertyGroupType.appearance,f)}var p={color:e.color,getFullPropData:function(){return this.color.toString(!0)}},g=c.createPropValue(p,"C",["color"]),h=c.createProperty(a.default.objectPropertyType.color,g,"Color","annot-color"),y=c.createSubGroup("Color",[h]);if(o.addToTabGroup(a.default.objectPropertyGroupType.appearance,y),n===a.default.pdfAnnotationType.polygon||n===a.default.pdfAnnotationType.polyLine||n===a.default.pdfAnnotationType.square||n===a.default.pdfAnnotationType.circle){var m={color:e.interiorColor,getFullPropData:function(){return this.color.toString(!0)}};Object.defineProperty(m,"fillInterior",{get:function(){return"none"!==this.color&&this.color.toString(!0)!==l.default.createInstance("#00000000").toString(!0)},set:function(t){this.color=l.default.createInstance(!1===t?"#00000000":"#FFFFFFFF")}});var v=c.createPropValue(m,"IC",["fillInterior"]),T=c.createProperty(a.default.objectPropertyType.select,v,"Fill Interior",a.default.objectPropertyStyle.bool),P=c.createPropValue(m,"IC",["color"]);P.isNone=e.isNoneIC;var b=c.createProperty(a.default.objectPropertyType.color,P,"Color","fill-color"),M=c.createSubGroup("Interior Color",[T,b]);o.addToTabGroup(a.default.objectPropertyGroupType.appearance,M)}e.isLink()||function(){var t={propType:a.default.objectPropertyType.opacity,val:e.opacity},n=c.createPropValue(t,"CA"),r=c.createProperty(a.default.objectPropertyType.opacity,n,"Opacity"),i=c.createSubGroup("Opacity",[r]);o.addToTabGroup(a.default.objectPropertyGroupType.appearance,i)}()}}(),function(){if(e.isLink()){var t={actions:pdfAction.createInstanceCollection(e.linkActions),getFullPropData:function(){return pdfAction.toJsonData(this.actions)}},n=c.createPropValue(t,"a",["actions"]),r=c.createProperty(a.default.objectPropertyType.action,n,"Action"),i=c.createSubGroup("Link Events",[r]);o.addToTabGroup(a.default.objectPropertyGroupType.events,i)}}(),e.isLink()&&(o.defaultTab=3),o},t},select:function(t,e,r,o){var i=null;if(!t||e<0||!r)return null;var l=null;o||(l=s.collectAnnotSnapData(t,e,r));var u=n.createInstance(t.document,e,r,l);return o?t.setHighlightNamed(a.default.pdfAnnotationType.polyLine,u):i=t.setSelectionAndTool(a.default.pdfAnnotationType.polyLine,u),i}}}]),window.mainApp.factory(c,getConstructor(s,c,"factory"))},bh7I:function(t,e,n){"use strict";var r=d(n("HSQo")),a=d(n("C3UN")),o=d(n("b8L+")),i=d(n("VmtT")),l=d(n("IZAc")),u=d(n("7mWT"));function d(t){return t&&t.__esModule?t:{default:t}}n("spXM"),n("iMU4"),n("Ij0n"),n("F1Q0");var s="bl-edit-annoteditselection-module",c="bl-edit-annoteditselection-factory";angular.module(s,["bl-edit-baseannoteditselection-module","bl-edit-annoteditobject-module","transformer-painter-module","bl-object-properties-module","pdf-manager-module"]).factory(c,["$rootScope","bl-edit-baseannoteditselection-factory","bl-edit-annoteditobject-factory","transformer-painter-service","bl-object-properties-factory","pdf-manager-factory",function(t,e,n,d,s,c){var f=i.default.LookAndFeel.AnnotTransformerFrameColor,p=i.default.LookAndFeel.SnapLinesColor,g=l.default.createInstance("#FFFFFFFF");return{createInstance:function(){var t=e.createInstance();return t.draw=function(e,r){var l=t.AnnotEditObject_;if(r==l.getPageIndex()){var u=null;if(l.getOperation()==n.TransformType.kTransformNone)u=o.default.quadFromRect(l.getRect());else{var s=o.default.quadFromRect(l.getRect());d.drawFrame(e,s,null,f,[10]),u=o.default.quadFromRect(l.getOperationRect());var c=l.getSnapInfo();c&&d.drawSnapInfo(e,c,p)}if(d.drawFrame(e,u,null,f),(l.getAnnotSubtype()!=a.default.pdfAnnotationType.text||deviceDetect.isPhone())&&l.getOperation()==n.TransformType.kTransformNone){var h=i.default.LookAndFeel.TransformerAnchorRadius;if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&d.drawMarker(e,g,f,u.top_left(),h),l.hasAnyCurrentEditMode(a.default.EditModes.Move|a.default.EditModes.Resize|a.default.EditModes.Rotate))if(deviceDetect.isPhone()){var y={fillColor:"#3688dc",anchorRadius:h+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};l.hasAnyCurrentEditMode(a.default.EditModes.Move)?y.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Resize)?y.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&(y.text=""),d.drawMarker(e,y.fillColor,f,u.top_right(),y.anchorRadius,y)}else d.drawMarker(e,g,f,u.top_right(),h);l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&d.drawMarker(e,g,f,u.bottom_right(),h),l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&d.drawMarker(e,g,f,u.bottom_left(),h);var m=e.getCTM().mapQuad(u),v=i.default.LookAndFeel.TransformerScaleZoneRadius;o.default.pointsDistance(m.center_right(),m.center_left())>=3*v&&l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&(d.drawMarker(e,g,f,u.top_center(),h),d.drawMarker(e,g,f,u.bottom_center(),h)),o.default.pointsDistance(m.top_center(),m.bottom_center())>=3*v&&l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&(d.drawMarker(e,g,f,u.center_right(),h),d.drawMarker(e,g,f,u.center_left(),h))}}},t.getProperties=function(){var e=this.getSelectionData().getAnnot(),n=this.getSelectionData().getAnnotSubtype(),o=s.createMainGroup(function(n){return c.changeAnnotationProperties(t.DocumentView_.getDocument(),e,t.AnnotEditObject_.getPageIndex(),n)}),i={flags:e.flags,getFullPropData:function(){return this.flags}};return(0,r.default)(i,{locked:{get:function(){return 0!=(this.flags&a.default.pdfAnnotationFlag.Locked)},set:function(t){t?this.flags|=a.default.pdfAnnotationFlag.Locked:this.flags&=~a.default.pdfAnnotationFlag.Locked}}}),function(){var t=e.type,n=s.createPropValue(t,"T"),r=s.createProperty(a.default.objectPropertyType.textlabel,n,"Type"),l=s.createSubGroup("Type",[r]);if(o.addToTabGroup(a.default.objectPropertyGroupType.general,l),!e.isLink()){var u=e.titleText,d=s.createPropValue(u,"Tx"),c=s.createProperty(a.default.objectPropertyType.textedit,d,"Author"),f=e.subjectText,p=s.createPropValue(f,"SJ"),g=s.createProperty(a.default.objectPropertyType.textedit,p,"Subject"),h=s.createSubGroup("Info",[c,g]);o.addToTabGroup(a.default.objectPropertyGroupType.general,h)}var y=new Date(e.modificationDate),m=s.createPropValue(y,"MD"),v=s.createProperty(a.default.objectPropertyType.textlabel,m,"Modified",a.default.objectPropertyStyle.dateTime),T=s.createPropValue(i,"F",["locked"]),P=s.createProperty(a.default.objectPropertyType.select,T,"Locked",a.default.objectPropertyStyle.bool),b=s.createSubGroup("Modify",[v,P]);o.addToTabGroup(a.default.objectPropertyGroupType.general,b)}(),function(){if(n!==a.default.pdfAnnotationType.text){if(n!==a.default.pdfAnnotationType.highlight&&n!==a.default.pdfAnnotationType.underline&&n!==a.default.pdfAnnotationType.strikeOut&&n!==a.default.pdfAnnotationType.text){var t={W:e.borderStyle.width,S:e.borderStyle.style,D:e.borderStyle.dashPattern},r=s.createPropValue(t,"BS",["W"]),i=s.createProperty(a.default.objectPropertyType.number,r,"Width"),u=s.createPropValue(t,"BS",["S"]),d=s.createProperty(a.default.objectPropertyType.select,u,"Style",a.default.objectPropertyStyle.borderStyle),c=e.isMarkup()?"Line":"Border",f=s.createSubGroup(c,[d,i]);o.addToTabGroup(a.default.objectPropertyGroupType.appearance,f)}var p={color:e.color,getFullPropData:function(){return this.color.toString(!0)}},g=s.createPropValue(p,"C",["color"]),h=s.createProperty(a.default.objectPropertyType.color,g,"Color","annot-color"),y=s.createSubGroup("Color",[h]);if(o.addToTabGroup(a.default.objectPropertyGroupType.appearance,y),n===a.default.pdfAnnotationType.polygon||n===a.default.pdfAnnotationType.polyLine||n===a.default.pdfAnnotationType.square||n===a.default.pdfAnnotationType.circle){var m={color:e.interiorColor,getFullPropData:function(){return this.color.toString(!0)}};Object.defineProperty(m,"fillInterior",{get:function(){return"none"!==this.color&&this.color.toString(!0)!==l.default.createInstance("#00000000").toString(!0)},set:function(t){this.color=l.default.createInstance(!1===t?"#00000000":"#FFFFFFFF")}});var v=s.createPropValue(m,"IC",["fillInterior"]),T=s.createProperty(a.default.objectPropertyType.select,v,"Fill Interior",a.default.objectPropertyStyle.bool),P=s.createPropValue(m,"IC",["color"]);P.isNone=e.isNoneIC;var b=s.createProperty(a.default.objectPropertyType.color,P,"Color","fill-color"),M=s.createSubGroup("Interior Color",[T,b]);o.addToTabGroup(a.default.objectPropertyGroupType.appearance,M)}e.isLink()||function(){var t={propType:a.default.objectPropertyType.opacity,val:e.opacity},n=s.createPropValue(t,"CA"),r=s.createProperty(a.default.objectPropertyType.opacity,n,"Opacity"),i=s.createSubGroup("Opacity",[r]);o.addToTabGroup(a.default.objectPropertyGroupType.appearance,i)}()}}(),function(){if(e.isLink()){var t={actions:u.default.createInstanceCollection(e.linkActions),getFullPropData:function(){return u.default.toJsonData(this.actions)}},n=s.createPropValue(t,"a",["actions"]),r=s.createProperty(a.default.objectPropertyType.action,n,"Action"),i=s.createSubGroup("Link Events",[r]);o.addToTabGroup(a.default.objectPropertyGroupType.events,i)}}(),e.isLink()&&(o.defaultTab=3),o},t}}}]),window.mainApp.factory(c,getConstructor(s,c,"factory"))},c4if:function(t,e,n){"use strict";n("Kopg"),n("tQXD"),n("v1ab");var r=function(t){return t&&t.__esModule?t:{default:t}}(n("b8L+"));angular.module("bl-edit-caret-module",["bl-edit-textblocktransformer-module","bl-edit-module"]).factory("bl-edit-caret-factory",["$rootScope","bl-edit-textblocktransformer-factory","bl-edit-service",function(t,e,n){var a=function(t,a){var o=t,i=!1,l=null,u=null,d=null,s=a,c=function(){},f=function(t){return r.default.quad()};this.isSelecting=function(){return i},this.startSelecting=function(){i=!0},this.endSelecting=function(){i=!1},this.hasSelection=function(){return l&&!l.isEqual(u)},this.getSelectedRange=function(){return{begin:u,end:l}},this.getSelectionStart=function(){return u},this.setSelectionStart=function(t){u=t},this.getPosition=function(){return l},this.setPosition=function(t){if(l=t){var n=l.getPageIndex(),r=null;d&&(r=d.getTextBlock());var a=l.getTextBlock();!r||a&&!a.isEqual(r)?d=e.createInstance(o,n,a):d.updateTransform()}},this.getCurrentPage=function(){var t=this.getPosition();return t?t.getPageIndex():0},this.moveTo=function(t){this.setPosition(t),i||this.setSelectionStart(t)},this.selectRange=function(t,e){this.setSelectionStart(t),this.setPosition(e)},this.getDoc=function(){return o},this.getTextBlockTransformer=function(){return d},this.canMergeTextBlocks=function(){return!!u},this.updateTextBlockTransformerSnapData=function(t,e){if(d){var r=d.getSnapData();if(!r){l.getPageIndex();r=n.collectObjectSnapData(t,e),d.setSnapData(r)}}},this.delete=function(){d.delete()},this.isTextBlockEmpty=function(){return function(t,e){try{l.getPageIndex();var n=l.getTextBlock().lines;return n&&n.some(function(t,e){return!!t.text})}catch(t){return!0}}()},this.notifyPositionChanged=function(){!function(){try{if(!s)return;if(!l)return;var t=l.getPageIndex();if(-1==t)return;var e={};if(hideCaret_)e.pageIndex=-1;else{e.pageIndex=t;var n=l,r=f(n);n==l?(e.top=r.tl,e.bottom=r.bl):(e.top=r.tr,e.bottom=r.br)}c(e)}catch(t){}}()},this.canMoveTextBlockFront=function(){return!1},this.canMoveTextBlockBack=function(){return!1},this.draw=function(t,e){if(this.handler&&this.handler.selection)return this.handler.selection.draw(t,e)},this.handleEvent=function(t){if(this.handler&&this.handler.inputHandler)return this.handler.inputHandler.handleEvent(t)},this.terminate=function(){this.handler&&this.handler.inputHandler&&this.handler.inputHandler.terminate()},this.getModel=function(){if(!this.handler||!this.handler.selection)return null;var t=this.handler.selection.getSelectionData();return t&&t.getModel?t.getModel():null}},o={createInstance:function(t){return new a(t)}};return o}]),window.mainApp.factory("bl-edit-caret-factory",getConstructor("bl-edit-caret-module","bl-edit-caret-factory","factory"))},cHYF:function(t,e,n){"use strict";var r=u(n("Xxa5")),a=u(n("exGp")),o=u(n("C3UN")),i=u(n("b8L+")),l=u(n("7mWT"));function u(t){return t&&t.__esModule?t:{default:t}}n("Bs4f"),n("wSJj"),n("cOfO"),n("cSmK"),n("BZtS"),n("wEXG"),n("PaWa"),n("WtRA");var d="bl-widget-manager-factory";function s(t,e,n,u,d,s,c,f,p,g){var h={},y=null,m=null,v=o.default.pdfAcroformType,T=function(t,e){return-1!==e?d.getPageToViewMatrix(t,e):i.default.matrix()},P=function(t){return 0!=(t&o.default.pdfAcroformFlag.kAFPDFieldFlagReadOnly)},b=function(e,n,r){return!!t.documentRequestPermissions(e,o.default.BLPermReqObj.kBLPermReqObjForm,o.default.BLPermReqOp.kBLPermReqOpFillIn,r)&&(!!n&&!P(n.fieldFlags))},M=function(e,n,r,a){if(e){var o=e.acroform;if(o&&(a||o.type!==v.text)){var i=!1;window.isStringEmpty(r)||(i=r!==o.value),b(n,o,i)?window.isUndefinedOrNull(r)||r===o.value?(o.type===v.text||a)&&(e.widget=null):t.changeAcroformValue(n,o,r).finally(function(){o.type===v.text&&(e.widget=null)}):e.widget=null}}},B=function(t,e){M(y,m,t,e)},L=function(t,e,n){return t>e?t<n?t:n:e},S=function(t,e){var n=g.collectSnapData(t,e);return function(t,e,n){if(t&&n){var r=t.getDocument();if(r){var a=r.getPage(e);if(a){var o=a.annotations;if(o)for(var i=d.getViewToPageMatrix(t,e),l=0;l<o.length;l++){var u=o[l];u&&n.addRect(i.mapRect(u.rect),!1)}}}}}(t,e,n),n},x=function(){var t=(0,a.default)(r.default.mark(function t(a,o,i,l){var u,d,g,h,y,m,T,P;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a&&i&&l){t.next=2;break}return t.abrupt("return",null);case 2:if(u=a.getDocument()){t.next=5;break}return t.abrupt("return",null);case 5:if(d=null,i.type!==v.text){t.next=14;break}return g=e.createInstance(u,o,l),h=n.createInstance(a,g),t.next=11,a.setSelectionAndTool("WidgetTextField",h);case 11:d=t.sent,t.next=28;break;case 14:if(i.type!==v.choice){t.next=28;break}if(!i.iCombo){t.next=23;break}return y=c.createInstance(u,o,l),m=s.createInstance(a,y),t.next=20,a.setSelectionAndTool("WidgetComboBox",m);case 20:d=t.sent,t.next=28;break;case 23:return T=f.createInstance(u,o,l),P=p.createInstance(a,T),t.next=27,a.setSelectionAndTool("WidgetListBox",P);case 27:d=t.sent;case 28:return t.abrupt("return",d);case 29:case"end":return t.stop()}},t,this)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),k=function(t,e){var n=l.default.createInstanceCollection(e);n.length>0&&t.runActions(n)};return h.isRedonly=P,h.isPerimet=b,h.setValue=M,h.changeValue=B,h.getInputHandler=x,h.runActions=k,h.getPageToViewMatrix=T,h.createWidget=function(t,e,n,r){if(!n)return null;var a=u.createInstance();a.pageIndex=e,a.onChangeValueCallback=B,a.fieldType=n.type,a.defaultValue=n.value,a.annotRect=r;var o=r.copy();!function(t,e,n){if(-1!==n){var r=function(t,e){var n=t.getDocument();return n?n.getPage(e):null}(t,n);if(r){var a=r.getCropBox();e.left=L(e.left,0,a.max_x()),e.right=L(e.right,0,a.max_x()),e.top=L(e.top,0,a.max_y()),e.bottom=L(e.bottom,0,a.max_y())}}}(t,o,e);var l=S(t,e);if(l){var s=i.default.point(),c=function(t){var e=1,n=!1;return t&&(e=t.getZoom(),n=t.isGridEnabled()),{zoom:e,snapToGrid:n}}(t),f=l.snapMove(o,s,c);f&&(s=f.snappedAnchor),o.offset(s.x,s.y)}var p=T(t,e).mapRect(o);if(d.setFieldRect(a,p),n.type===v.text)a.options={isMultiline:n.ismultiline};else if(n.type===v.choice){if(a.options={items:[]},n.items)for(var g=0;g<n.items.length;g++){var h=n.items[g];h&&a.options.items.push(h.name)}n.iCombo&&(a.iCombo=n.iCombo)}return a},h.init=function(t,e){y=t,m=e},h.draw=function(t,e,n,r){if(e&&r){var a=e.document;window.isUndefinedOrNull(a.pageSelectedIndex)||(t.pushState(),t.concatCTM(d.getViewToPageMatrix(e,a.pageSelectedIndex)),d.drawField(t,r.fieldType,r,e.getSelection()),t.popState())}},h.mouseUp=function(e,n,r){if(k(e,r.mouseupActions),r.acroform&&"Btn"===r.acroform.type){if(!r.acroform.isPush()){var a=null;if(!t.currentDocumentRequestPermissions(o.default.BLPermReqObj.kBLPermReqObjForm,o.default.BLPermReqOp.kBLPermReqOpFillIn,!0))return!0;r.acroform.isRadio()?r.value!==r.acroform.value&&(a=r.value):a=r.value!==r.acroform.value?r.value:"",r.acroform.isReadOnly()||null===a||t.changeAcroformValue(e.document,r.acroform,a)}k(e,r.clickActions)}return!0},h}angular.module("bl-widget-manager-module",[]).factory(d,s),s.$inject=["pdf-manager-factory","bl-widget-textfield-obj-factory","bl-widget-textfield-view-factory","bl-widget-object-factory","bl-widget-renderer-service","bl-widget-combobox-view-factory","bl-widget-combobox-obj-factory","bl-widget-listbox-obj-factory","bl-widget-listbox-view-factory","bl-edit-service"],window.mainApp.factory(d,getConstructor("bl-widget-manager-module",d,"factory"))},cOfO:function(t,e,n){"use strict";var r=o(n("C3UN")),a=o(n("eWOG"));function o(t){return t&&t.__esModule?t:{default:t}}n("6Drf");var i="bl-widget-textfield-obj-factory-module",l="bl-widget-textfield-obj-factory";function u(t,e){var n={};return n.createInstance=function(n,o,i){return new function(n,o,i){var l,u,d,s,c=0,f=0,p=this,g=o,h=i,y=r.default.pdfAcroformType;this.getPageIndex=function(){return g},this.getBorderStyle=function(){return{width:1,style:r.default.PDAnnotBorderStyle.kPDAnnotBorderStyleSolid,dashArrayLen:0,dashArray:0}},this.getRotate=function(){return 0},this.getWidget=function(){return h},this.canUndo=function(){return!1},this.canRedo=function(){return!1},this.undo=function(){},this.redo=function(){},this.clearUndoRedoStack=function(){},this.getRect=function(){return t.getFieldRect(h)},this.setText=function(t){u.getText()!=t&&(u.setText(t),u.update())},this.getText=function(){return u.getText()},this.getNumChars=function(){return u.getText().length},this.isMultiline=function(){return u.isMultiline()},this.isComb=function(){return!1},this.isPassword=function(){return!1},this.doesNeedScroll=function(){return this.getNumLines()>this.getNumVisibleLines()&&!this.isComb()},this.getNumLines=function(){return u.getLinesCount()},this.getNumVisibleLines=function(){return u.getMaxLinesCount()},this.setTopLine=function(t){t<u.getLinesCount()&&(u.setTopLine(t),u.update()),s&&s(t),d&&d(f,c)},this.getTopLine=function(){return u.getTopLine()},this.getLineWithChar=function(t){return u.getLineWithSymbol(t)},this.getFirstCharOnLine=function(t){return u.getFirstSymbol(t)},this.getLastCharOnLine=function(t){if(t==this.getNumLines()-1)return this.getNumChars();var e=this.getFirstCharOnLine(t+1);return--e},this.getCharQuad=function(t){return u.getCharQuad(t)},this.selectAll=function(){this.setSelectorPosition(0),this.setCaretPosition(this.getNumChars())},this.setSelAtPoint=function(t){var e=u.getSymbolAtPoint(t);this.setSelectorPosition(e),this.setCaretPosition(e)},this.setSelectorAtPoint=function(t){var e=u.getSymbolAtPoint(t);this.setSelectorPosition(e)},this.setCaretAtPoint=function(t){var e=u.getSymbolAtPoint(t);this.setCaretPosition(e)},this.setCaretPosition=function(t){if(c!=t){c=t;var e=this.getLineWithChar(t),n=this.getNumVisibleLines(),r=this.getTopLine();e<r?this.setTopLine(e):e>r+n-1&&this.setTopLine(e-n+1),d&&d(f,c)}},this.setSelectorPosition=function(t){f!=t&&(f=t,d&&d(f,c))},this.hasSelection=function(){return f!=c},this.getSelectedText=function(){var t;if(this.hasSelection()){var e=f,n=c;e>n&&(n=[e,e=n][0]),t=this.getText().spliceSlice(e,n-e)}return t},this.getSelectorPosition=function(){return f},this.getCaretPosition=function(){return c},this.goLeft=function(t){var e=this.getCaretPosition();e>0&&this.setCaretPosition(--e),t||this.setSelectorPosition(e)},this.goRight=function(t){var e=this.getCaretPosition();e<this.getNumChars()&&this.setCaretPosition(++e),t||this.setSelectorPosition(e)},this.goUp=function(t){var e=this.getLineWithChar(c);--e;var n=this.getNumLines();if(e>=0&&e<n){var r=this.getCharQuad(c).bottom_left();r.y-=u.getLineHeight(),this.setCaretAtPoint(r),t||this.setSelectorPosition(c)}},this.goDown=function(t){var e=this.getLineWithChar(c);++e;var n=this.getNumLines();if(e>=0&&e<n){var r=this.getCharQuad(c).bottom_left();r.y+=u.getLineHeight(),this.setCaretAtPoint(r),t||this.setSelectorPosition(c)}},this.goToFirst=function(t){this.setCaretPosition(0),t||this.setSelectorPosition(0)},this.goToLast=function(t){var e=this.getNumChars();this.setCaretPosition(e),t||this.setSelectorPosition(e)},this.goToHome=function(t){if(this.isComb())this.goToFirst(t);else{var e=c,n=this.getLineWithChar(e);e=this.getFirstCharOnLine(n),this.setCaretPosition(e),t||this.setSelectorPosition(e)}},this.goToEnd=function(t){if(this.isComb())this.goToLast(t);else{var e=c,n=this.getLineWithChar(e);e=this.getLastCharOnLine(n),this.setCaretPosition(e),t||this.setSelectorPosition(e)}},this.keyStroke=function(t,e,n){"number"==typeof t&&"number"==typeof e?(u.keyStroke(t,e,n),u.update(),h.setValue(this.getText())):m(n)},this.delete=function(t){var e=this.getSelectorPosition(),n=this.getCaretPosition();n<e&&(e=[n,n=e][0]),n==e&&(t?n>0&&this.setCaretPosition(n-1):this.setCaretPosition(n+1)),m("")},this.commitChanges=function(){var t=this.getText();return h.setValue(t,!0),!0},this.cancelChanges=function(){h.setValue(l),this.setText(l)},this.onModify=function(){return!0},this.setOnSelChangedCallBack=function(t){d=t},this.setOnScrollChangedCallBack=function(t){s=t};var m=function(t){var e=f,n=c,r=p.getText().length;(e=Math.min(e,r))>(n=Math.min(n,r))&&(n=[e,e=n][0]),p.keyStroke(e,n,t),n=e+t.length,p.setSelectorPosition(n),p.setCaretPosition(n)};l=h.getValue();var v=this.getRect(),T=h.getStyle();y.text===T?(h.options&&h.options.isMultiline?(v.inflate(-a.default.textArea.getMargin(),-a.default.textArea.getMargin()),(u=e.createInstance(a.default.textArea.getFontSize())).setWordWrap(!0),u.setMultiline(!0),u.setLineHeightFactor(a.default.textArea.getLineHeightFactor())):(v.inflate(-a.default.textField.getMargin(),-a.default.textField.getMargin()),(u=e.createInstance(a.default.textField.getFontSize())).setWordWrap(!1),u.setMultiline(!1)),h.options&&h.options.maxLength&&u.setMaxLen(h.options.maxLength),u.setText(l),u.setComb(!1),u.setBound(v),u.update()):console.error("Unsupported field type.")}(n,o,i)},n}angular.module(i,[]).factory(l,u),u.$inject=["bl-widget-renderer-service","form-textlayout-factory"],window.mainApp.factory(l,getConstructor(i,l,"factory"))},cSmK:function(t,e,n){"use strict";var r=u(n("b8L+")),a=u(n("C3UN")),o=u(n("VmtT")),i=u(n("IZAc")),l=u(n("kHBY"));function u(t){return t&&t.__esModule?t:{default:t}}n("Trxo");var d="bl-widget-textfield-view-factory-module",s="bl-widget-textfield-view-factory";function c(t,e,n,u,d){var s={},c=function(s,c){var f,p=s,g=c,h=!1,y=!1,m=i.default.createInstance("#FF000000"),v=[2],T=this;this.getModel=function(){return g},this.getPageIndex=function(){return g.getPageIndex()},this.getRect=function(){return g.getRect()},this.hitTest=function(t,e){return this.getPageIndex()==t&&this.getRect().containsPoint(e)},this.mouseDown=function(t,e){var n=L(t);return!!g.getRect().containsPoint(n)&&(f&&f.mouseDown(n)?y=!0:(h=!0,e&a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed?g.setCaretAtPoint(n):g.setSelAtPoint(n)),p.invalidate(),!0)},this.mouseUp=function(t,e){if(y){y=!1;var n=L(t);f&&f.mouseUp(n)}return h&&(h=!1),!1},this.mouseMove=function(t,e){var n=L(t);return h?(g.setCaretAtPoint(n),p.setCursor(a.default.BLCursorType.kBLCursorIBeam),p.invalidate(),!0):!(!f||!f.mouseMove(n,y))||!!g.getRect().containsPoint(n)&&(p.setCursor(a.default.BLCursorType.kBLCursorIBeam),!0)},this.mouseWheel=function(t,e){var n=L(t);return!(!g.doesNeedScroll()||!T.hitTest(g.getPageIndex(),n))&&(e<0&&P(l.default.SBCode.kSB_LINEDOWN,0),e>0&&P(l.default.SBCode.kSB_LINEUP,0),!0)},this.keyDown=function(t,e){var n=S(e,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed),r=S(e,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed);switch(t){case a.default.kBLKey.kBLKey_LEFT:g.goLeft(n);break;case a.default.kBLKey.kBLKey_RIGHT:g.goRight(n);break;case a.default.kBLKey.kBLKey_UP:g.goUp(n);break;case a.default.kBLKey.kBLKey_DOWN:g.goDown(n);break;case a.default.kBLKey.kBLKey_HOME:r?g.goToFirst(n):g.goToHome(n);break;case a.default.kBLKey.kBLKey_END:r?g.goToLast(n):g.goToEnd(n);break;case a.default.kBLKey.kBLKey_BACK:g.onModify()&&g.delete(!0);break;case a.default.kBLKey.kBLKey_DELETE:g.onModify()&&g.delete(!1);break;case a.default.kBLKey.kBLKey_A:r&&g.selectAll()}return b(),p.invalidate(),!0},this.keyUp=function(t,e){return!0},this.charReceived=function(t){if("\r"==t){if(!g.isMultiline())return!1;t="\n"}else if(t<" ")return!1;var e="";return e+=t,g.onModify(e)&&(g.keyStroke(null,null,e),p.invalidate()),!0},this.cut=function(){this.copy(),this.delete()},this.copy=function(){if(g.hasSelection()&&!g.isPassword())g.getSelectedText(),document.execCommand("copy")},this.paste=function(){},this.delete=function(){g.onModify()&&(g.delete(!1),p.invalidate())},this.hasSelection=function(){return g.hasSelection()},this.draw=function(t,n){if(t==g.getPageIndex()){var a=g.getRect();n.pushState();var o=e.getViewToPageMatrix(p,t);n.concatCTM(o),M(n),window.deviceDetect.isPhone()&&function(t,e){e&&d.drawFrame(t,r.default.quadFromRect(e),null,m,v)}(n,a),f&&f.draw(n),n.popState()}},this.canUndo=function(){return g.canUndo()},this.canRedo=function(){return g.canRedo()},this.undo=function(){g.undo(),b(),p.invalidate()},this.redo=function(){g.redo(),b(),p.invalidate()},this.finalize=function(e){void 0===e&&(e=!0),g.clearUndoRedoStack(),e&&g.commitChanges()||g.cancelChanges(),p.setSelection(null),t.$emit("event:widget-textfield-view-create",null)};var P=function(t,e){var n=g.getTopLine(),r=g.getNumLines()-g.getNumVisibleLines();switch(t){case l.default.SBCode.kSB_TOP:n=0;break;case l.default.SBCode.kSB_BOTTOM:n=r;break;case l.default.SBCode.kSB_ENDSCROLL:break;case l.default.SBCode.kSB_LINEDOWN:case l.default.SBCode.kSB_PAGEDOWN:n<r&&++n;break;case l.default.SBCode.kSB_LINEUP:case l.default.SBCode.kSB_PAGEUP:n>0&&--n;break;case l.default.SBCode.kSB_THUMBPOSITION:case l.default.SBCode.kSB_THUMBTRACK:n=e}g.setTopLine(n),p.invalidate()},b=function(){if(!g.doesNeedScroll())return f&&f.setOnScrollCallBack(null),void(f=null);if(!f){f=u.createInstance(p);var t=1*g.getRotate(),e=g.getRect(),n=e.left_bottom(),o=r.default.rotationMatrix(r.default.degreeToRadian(t),n),i=o.invert(),l=g.getBorderStyle(),d=e.getHeight()<2*l.width||e.getWidth()<2*l.width,s=e;s.inflate(-l.width,-l.width),l.style!=a.default.PDAnnotBorderStyle.kPDAnnotBorderStyleBeveled&&l.style!=a.default.PDAnnotBorderStyle.kPDAnnotBorderStyleInset||s.inflate(-1,-1),s=o.mapRect(s);var c=12;if(d)c=0;else{var h=s.getWidth()/1.5;c>h&&(c=h)}var y=s;y.left=y.right-c,(y=i.mapRect(y)).inflate(-1,-1),f&&f.setPlacement(y,t)}f&&(f.setScrollRange(0,g.getNumLines()),f.setPageSize(g.getNumVisibleLines()),f.setScrollPos(g.getTopLine())),f.setOnScrollCallBack(null),f.setOnScrollCallBack(P),f&&f.setVisible(!0)},M=function(t){var e=B();if(e){t.pushState();var n=g.getRect();t.clipRect(n);var r=o.default.LookAndFeel.TextCopySelectionColor;t.fillGeometry(e,r),t.popState()}},B=function(){var t=g.getSelectorPosition(),e=g.getCaretPosition();if(t==e)return null;t>e&&(e=[t,t=e][0]);for(var a=n.createGeometry(),o=r.default.rect(),i=0,l=t;l<e;l++){var u=g.getCharQuad(l);if(u.isRect()){var d=u.getBound();if(0==i)o=d;else if(r.default.isRectsOnSameLine(o,d,1))o.right=d.right;else{var s=o.copy();a.rectangle(s),o=d,i=1}++i}else{s=o.copy();a.rectangle(s),o=r.default.rect(),i=0,a.beginFigure(u.top_left()),a.lineTo(u.top_right()),a.lineTo(u.bottom_right()),a.lineTo(u.bottom_left()),a.endFigureClose()}}if(0!=i){s=o.copy();a.rectangle(s)}return a},L=function(t){var n=p.mapPointToPage(g.getPageIndex(),t);return n=e.getPageToViewMatrix(p,g.getPageIndex()).mapPoint(n)},S=function(t,e){return 0!=(t&e)};if(g.setOnSelChangedCallBack(function(t,n){p.invalidate();var o=g.getCharQuad(n),i=r.default.rect(o.top_left().x,o.top_left().y,o.bottom_left().x,o.bottom_left().y),l=g.getBorderStyle(),u=g.getRect();u.inflate(-l.width,-l.width),l.style!=a.default.PDAnnotBorderStyle.kPDAnnotBorderStyleBeveled&&l.style!=a.default.PDAnnotBorderStyle.kPDAnnotBorderStyleInset||u.inflate(-1,-1),i=r.default.intersectRects(i,u,!0),i=e.getViewToPageMatrix(p,g.getPageIndex()).mapRect(i);var d={};d.pageIndex=T.getPageIndex(),d.top=i.left_top(),d.bottom=i.right_bottom(),p.onCaretPositionChanged(d),a.default.BLSelectionOperations.kBLSelectionAllowPaste,t!=n?(a.default.BLSelectionOperations.kBLSelectionAllowCopy,a.default.BLSelectionOperations.kBLSelectionAllowCut):(~a.default.BLSelectionOperations.kBLSelectionAllowCopy,~a.default.BLSelectionOperations.kBLSelectionAllowCut)}),g.setOnScrollChangedCallBack(function(t){f&&f.setScrollPos(t)}),b(),window.deviceDetect.isPhone()){var x=g.getWidget();x&&t.$emit("event:widget-textfield-view-create",{view:p,widget:x,pageIndex:this.getPageIndex(),isMultiline:g.isMultiline()})}};return s.createInstance=function(t,e){return new c(t,e)},s}angular.module(d,[]).factory(s,c),c.$inject=["$rootScope","bl-widget-renderer-service","geometry-factory","form-scrollbar-factory","transformer-painter-service"],window.mainApp.factory(s,getConstructor(d,s,"factory"))},eWOG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n("C3UN"));e.default={coordinate:{getViewRatio:function(){return 1}},signature:{getFontName:function(t){return'"Segoe UI", "MS Gothic", sans-serif'},getLineHieghtSpaceRatio:function(){return.7/1.3},getMaxFontSize:function(){return 12/1.3},getMinFontSize:function(){return 7/1.3},getFontDecreaseStep:function(){return.5/1.3},getBottomMargin:function(){return 9/1.3},getStrokeParams:function(){var t={};return t.lineCap=r.default.GLineCap.kGLineCapRound,t.lineJoin=r.default.GLineJoin.kGLineJoinRound,t.miterLimit=0,t.dashPattern=[2],t},caption:{getDelta:function(){return 5/1.3},getMargin:function(){return 6/1.3},getFontSize:function(){return 11/1.3}}},field:{getMargin:function(){return 9/1.3},getFontSize:function(){return 12/1.3},getFontName:function(t){return'"Segoe UI", "MS Gothic", sans-serif'},getBackground:function(){return"FFFFFFFF"}},textField:{getMargin:function(){return 2/1.3},getFontSize:function(){return 12/1.3}},textArea:{getMargin:function(){return 2/1.3},getFontSize:function(){return 12/1.3},getLineHeightFactor:function(){return 1.5/1.3}},listBox:{getMargin:function(){return 2/1.3},getFontSize:function(){return 12/1.3},getLineHeightFactor:function(){return 1.5/1.3},getBorderColor:function(){return"33000000"},getSelectionColor:function(){return"22000000"}},comboBox:{getMargin:function(){return 2/1.3},getFontSize:function(){return 12/1.3},getComboBoxButtonWidth:function(){return 15/1.3}},radioButton:{getRatio:function(){return.25/1.3}},checkBox:{getMargin:function(){return 2/1.3},getRatio:function(){return.3/1.3}}}},gT1Z:function(t,e,n){"use strict";var r="bl-ocr-idrs-commandStack-module",a="bl-ocr-idrs-commandStack-factory";angular.module(r,[]).factory(a,["$q","$rootScope",function(t,e){return{createInstance:function(){return new function(){var t=[],e=-1;this.do=function(n){try{n.do(),e++,t.splice(e),t.push(n)}catch(t){}},this.undo=function(){if(t.length>0&&e>=0){var n=t[e];try{n.undo(),--e}catch(t){}}},this.redo=function(){if(t.length>0){var n=t[e+1];if(n)try{n.do(),++e}catch(t){}}}}}}}]),window.mainApp.factory(a,getConstructor(r,a,"factory"))},ggKL:function(t,e,n){"use strict";var r=l(n("C3UN")),a=l(n("b8L+")),o=l(n("VmtT")),i=l(n("oRGr"));function l(t){return t&&t.__esModule?t:{default:t}}n("xfDw");var u="bl-ocr-idrs-transformerInputHandler-module",d="bl-ocr-idrs-transformerInputHandler-factory";angular.module(u,["bl-ocr-idrs-selection-module"]).factory(d,["$rootScope","bl-ocr-idrs-selection-factory",function(t,e){var n={},l=function(t,e,n){var r=a.default.point(t.x-e.x,t.y-e.y);return n*n>=r.x*r.x+r.y*r.y},u=function(t,e){return t.getLayout().mapPointToContent(e)},d=function(n,d){var s=n,c=d,f=!1,p=r.default.AnchorPlace.ANCHOR_NONE,g=null,h=0,y=a.default.point(),m=a.default.point(),v=null,T=function(t){v=t,s.invalidate()};T(e.createInstance(s,c));var P=t.$on("idrs-view-ondraw",function(t,e){M(e)});this.terminate=function(){P()},this.getHandleType=function(){return i.default.InputHandlerType.kHandleEditZone},this.isUndeletable=function(){return!1},this.handleEvent=function(t){var e={isHandlerFinished:f,isHandled:!1};return e.isHandled=b(t),e};var b=function(t){switch(t.type){case r.default.BLInputEventType.kBLInputEventCommand:return B(t.commandArgs.command);case r.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===r.default.BLPointerButton.kBLPointerButtonLeft)return x(t.pointerArgs.position,0!=(t.pointerArgs.flags&r.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed));break;case r.default.BLInputEventType.kBLInputEventPointerReleased:switch(t.pointerArgs.button){case r.default.BLPointerButton.kBLPointerButtonLeft:return k(t.pointerArgs.position,0!=(t.pointerArgs.flags&r.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed));case r.default.BLPointerButton.kBLPointerButtonRight:return R(t.pointerArgs.position)}break;case r.default.BLInputEventType.kBLInputEventPointerMoved:return L(t.pointerArgs.position,0!=(t.pointerArgs.flags&r.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed));case r.default.BLInputEventType.kBLInputEventKeyPressed:return F(t.keyArgs.keycode,0!=(t.pointerArgs.flags&r.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed));case r.default.BLInputEventType.kBLInputEventKeyReleased:return A(t.keyArgs.keycode,0!=(t.pointerArgs.flags&r.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed));default:return!1}return!1},M=function(t){t&&(t.pushState(),v&&v.draw(t),t.popState())},B=function(t){return"Delete"==t&&(T(null),c.deleteZone(),f=!0,!0)},L=function(t,e){var n=u(s,t);switch(g=e,c.getOperationType()){case r.default.TransformType.TRANSFORM_NONE:var a=S(t);return!!a&&(w(a.type,a.anchor,e),!0);case r.default.TransformType.TRANSFORM_MOVE:_(n);break;case r.default.TransformType.TRANSFORM_SCALE:O(n);break;case r.default.TransformType.TRANSFORM_ROTATE:I(n)}return!0},S=function(t){r.default.TransformType.TRANSFORM_NONE,r.default.AnchorPlace.ANCHOR_NONE,a.default.point();var e=o.default.LookAndFeel.TransformerScaleZoneRadius,n=function(t,e){return t.getLayout().mapQuadToView(e)}(s,c.getBounds());if(l(t,n.top_left(),e))return{type:r.default.TransformType.TRANSFORM_SCALE,anchor:r.default.AnchorPlace.ANCHOR_TOP_LEFT,active:n.top_left()};if(l(t,n.top_right(),e))return{type:r.default.TransformType.TRANSFORM_SCALE,anchor:r.default.AnchorPlace.ANCHOR_TOP_RIGHT,active:n.top_right()};if(l(t,n.bottom_left(),e))return{type:r.default.TransformType.TRANSFORM_SCALE,anchor:r.default.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:n.bottom_left()};if(l(t,n.bottom_right(),e))return{type:r.default.TransformType.TRANSFORM_SCALE,anchor:r.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:n.bottom_right()};if(l(t,n.top_center(),e))return{type:r.default.TransformType.TRANSFORM_SCALE,anchor:r.default.AnchorPlace.ANCHOR_TOP,active:n.top_center()};if(l(t,n.center_left(),e))return{type:r.default.TransformType.TRANSFORM_SCALE,anchor:r.default.AnchorPlace.ANCHOR_LEFT,active:n.center_left()};if(l(t,n.bottom_center(),e))return{type:r.default.TransformType.TRANSFORM_SCALE,anchor:r.default.AnchorPlace.ANCHOR_BOTTOM,active:n.bottom_center()};if(l(t,n.center_right(),e))return{type:r.default.TransformType.TRANSFORM_SCALE,anchor:r.default.AnchorPlace.ANCHOR_RIGHT,active:n.center_right()};var i=u(s,t);return c.hitTest(i)?{type:r.default.TransformType.TRANSFORM_MOVE,anchor:r.default.AnchorPlace.ANCHOR_NONE,active:t}:null},x=function(t,e){var n=S(t);if(!n)return T(null),f=!0,!1;p=n.anchor,m=c.getRotationOrigin(),h=c.getRotation_PropertyTest(),c.startOperation(n.type);var r=a.default.point(a.default.castFloatToInt(n.active.x),a.default.castFloatToInt(n.active.y));return y=u(s,r),g=e,!0},k=function(t,e){c.isPerformingOperation()&&(c.endOperation(),s.invalidate());var n=S(t);return!!n&&(w(n.type,n.anchor,e),s.invalidate(),!0)},R=function(t){return!!S(t)},F=function(t,e){switch(t){case kBLKey_LEFT:return C(a.default.point(-10,0)),!0;case r.default.kBLKey.kBLKey_RIGHT:return C(a.default.point(10,0)),!0;case r.default.kBLKey.kBLKey_UP:return C(a.default.point(0,-10)),!0;case r.default.kBLKey.kBLKey_DOWN:return C(a.default.point(0,10)),!0}return!1},A=function(t,e){return t==r.default.kBLKey.kBLKey_DELETE&&B("Delete")},C=function(t){p=r.default.AnchorPlace.ANCHOR_NONE,m=c.getRotationOrigin(),h=c.getRotation_PropertyTest(),c.startOperation(r.default.TransformType.TRANSFORM_MOVE);var e=a.default.point(0,0);y=u(s,e),g=!1,e.offset(t.x,t.y);var n=u(View(),e);E(n,!1),c.endOperation()},E=function(t,e){isUndefinedOrNull(e)&&(e=!0);var n=c.getTransform(),r=y.copy(),o=t.copy();if(!r.isEqual(o)){var i=a.default.point(o.x-r.x,o.y-r.y);c.setOperationTransform(n.multiply(a.default.translationMatrix(i.x,i.y))),s.invalidate()}},_=function(t){E(t,!g),w(r.default.TransformType.TRANSFORM_MOVE,p,g)},I=function(t){var e=c.getTransform(),n=m.copy(),o=y.copy(),i=t.copy(),l=a.default.point(o.x-n.x,o.y-n.y),u=a.default.point(i.x-n.x,i.y-n.y),d=a.default.vecAngleBetween(l,u);if(g){var f=h+d,v=a.default.degreeToRadian(45);d=(f=(f>0?a.default.castFloatToInt(f/v+.5):a.default.castFloatToInt(f/v-.5))*v)-h}c.setOperationTransform(e.multiply(a.default.rotationMatrix(d,n))),s.invalidate(),w(r.default.TransformType.TRANSFORM_ROTATE,p,g)},O=function(t){!function(t){var e=c.getTransform(),n=e.invert();if(n){var o=n.mapPoint(t),i=c.getUserSpaceRect(),l=i.getWidth(),u=i.getHeight();if(!a.default.floatEq(l,0)&&!a.default.floatEq(u,0)){var d=i.getOrigin();i.getCenter(),o.x,d.x,o.y,d.y,o.offset(-d.x,-d.y);var f=o.x/l,h=o.y/u,y=null;switch(p){case r.default.AnchorPlace.ANCHOR_LEFT:y=g?a.default.scalingMatrix(1-f,1-f,d).multiply(a.default.translationMatrix(o.x,f*u/2)):a.default.scalingMatrix(1-f,1,d).multiply(a.default.translationMatrix(o.x,0));break;case r.default.AnchorPlace.ANCHOR_BOTTOM:y=g?a.default.scalingMatrix(h,h,d).multiply(a.default.translationMatrix((1-h)*l/2,0)):a.default.scalingMatrix(1,h,d);break;case r.default.AnchorPlace.ANCHOR_RIGHT:y=g?a.default.scalingMatrix(f,f,d).multiply(a.default.translationMatrix(0,(1-f)*u/2)):a.default.scalingMatrix(f,1,d);break;case r.default.AnchorPlace.ANCHOR_TOP:y=g?a.default.scalingMatrix(1-h,1-h,d).multiply(a.default.translationMatrix(h*l/2,o.y)):a.default.scalingMatrix(1,1-h,d).multiply(a.default.translationMatrix(0,o.y));break;case r.default.AnchorPlace.ANCHOR_BOTTOM_LEFT:if(g){var m=Math.min(1-f,h);y=a.default.scalingMatrix(m,m,d).multiply(a.default.translationMatrix((1-m)*l,0))}else y=a.default.scalingMatrix(1-f,h,d).multiply(a.default.translationMatrix(o.x,0));break;case r.default.AnchorPlace.ANCHOR_BOTTOM_RIGHT:if(g){var v=Math.min(f,h);y=a.default.scalingMatrix(v,v,d)}else y=a.default.scalingMatrix(f,h,d);break;case r.default.AnchorPlace.ANCHOR_TOP_LEFT:if(g){var T=Math.min(1-f,1-h);y=a.default.scalingMatrix(T,T,d).multiply(a.default.translationMatrix((1-T)*l,(1-T)*u))}else y=a.default.scalingMatrix(1-f,1-h,d).multiply(a.default.translationMatrix(o.x,o.y));break;case r.default.AnchorPlace.ANCHOR_TOP_RIGHT:if(g){var P=Math.min(f,1-h);y=a.default.scalingMatrix(P,P,d).multiply(a.default.translationMatrix(0,(1-P)*u))}else y=a.default.scalingMatrix(f,1-h,d).multiply(a.default.translationMatrix(0,o.y))}y&&(e=y.multiply(e),c.setOperationTransform(e)),s.invalidate()}}}(t),w(r.default.TransformType.TRANSFORM_SCALE,p,g)},w=function(t,e,n){var o=r.default.BLCursorType.kBLCursorArrow;switch(t){case r.default.TransformType.TRANSFORM_MOVE:o=r.default.BLCursorType.kBLCursorMove;break;case r.default.TransformType.TRANSFORM_ROTATE:o=r.default.BLCursorType.kBLCursorRotate;break;case r.default.TransformType.TRANSFORM_SCALE:var i=c.getRotation_PropertyTest(),l=a.default.degreeToRadian(45),u=0;u=i>0?a.default.castFloatToInt(i/l+.5):a.default.castFloatToInt(i/l-.5);var d=[6,0,2,4,7,1,5,3][e];(d=(d-u)%8)<0&&(d+=8),o=(n?r.default.BLCursorType.kBLCursorScaleProportional_N:r.default.BLCursorType.kBLCursorScale_N)+d}s.setCursor(o)}};return n.createInstance=function(t,e){return new d(t,e)},n}]),window.mainApp.factory(d,getConstructor(u,d,"factory"))},h2bM:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("IZAc"));function i(t){return t&&t.__esModule?t:{default:t}}var l="bl-widget-combobox-button-factory-module",u="bl-widget-combobox-button-factory";function d(t,e){var n={},i=function(){var n="8FFFFFFF",i="8F000000";this.draw=function(l,u,d,s){!function(l,u,d){console.log("ComboBoxButton->draw");var s=t.getFieldRect(l);if(!(s.getHeight()<2||s.getWidth()<2)){s.inflate(-1,-1);var c=12,f=s.getWidth()/1.5;c>f&&(c=f);var p=s;p.left=p.right-c;var g=r.default.rect(p.left,p.bottom,p.right,p.top),h=o.default.createInstance(n);u.fillRect(g,h);var y=g.getCenter(),m=6,v=Math.min(g.getHeight(),c)/2;m>v&&(m=v);var T=.5*m,P=r.default.point(y.x+-T,y.y+T/2),b=r.default.point(y.x+0,y.y+-T/2),M=r.default.point(y.x+T,y.y+T/2),B=e.createGeometry();B.beginFigure(P),B.lineTo(b),B.lineTo(M),B.endFigure();var L=o.default.createInstance(i),S={};S.lineCap=a.default.GLineCap.kGLineCapRound,S.lineJoin=a.default.GLineJoin.kGLineJoinMiter,S.miterLimit=10,u.strokeGeometry(B,L,1,S)}}(u,s)},this.hitTest=function(e,n){var r=t.getFieldRect(e);if(r.getHeight()<2||r.getWidth()<2)return!1;r.inflate(-1);var a=12,o=r.getWidth()/1.5;a>o&&(a=o);var i=r;return i.left=i.right-a,i.containsPoint(n)}};return n.createInstance=function(){return new i},n}angular.module(l,[]).factory(u,d),d.$inject=["bl-widget-renderer-service","geometry-factory"],window.mainApp.factory(u,getConstructor(l,u,"factory"))},h8UB:function(t,e,n){"use strict";var r=l(n("C3UN")),a=l(n("b8L+")),o=l(n("VmtT")),i=l(n("IZAc"));function l(t){return t&&t.__esModule?t:{default:t}}n("Ij0n"),n("F1Q0");var u="bl-edit-transformerselection-module",d="bl-edit-transformerselection-factory";angular.module(u,["transformer-painter-module","bl-object-properties-module"]).constant("TransformerTypeDescription",{image:"Image",form:"Form",xps:"Post Script",container:"Container",place:"Place",path:"Path",text:"Text",shading:"Shading",unknown:"Unknown"}).factory(d,["$rootScope","TransformerTypeDescription","transformer-painter-service","bl-object-properties-factory",function(t,e,n,l){var u=o.default.LookAndFeel.SnapLinesColor,d=i.default.createInstance("#FFFFFFFF"),s=function(){var t=null,i=null;this.init=function(e,n){t=e,i=n},this.getType=function(){return"Transform"},this.getNumQuads=function(){return 1},this.getQuadPoints=function(){return i.getBounds()},this.getSelectionData=function(){return i},this.drawHighlight=function(t,e){if(e==i.getPageIndex()){var r=o.default.LookAndFeel.ImageTransformerHighlightColor,a=i.getBounds();n.drawFrame(t,a,null,r)}},this.draw=function(e,l){if(l==i.getPageIndex()){!function(t,e){var n=e.clip;n&&t.paintClipGeometries(o.default.LookAndFeel.ImageTransformerClippingColor,n)}(e,i.getElement());var s=o.default.LookAndFeel.ImageTransformerFrameColor,c=null;if(i.isPerformingOperation()){var f=i.getBounds();n.drawFrame(e,f,null,s,[10]),c=i.getOperationBounds();var p=a.default.quadFromRect(c.getBound());n.drawFrame(e,p,null,u);var g=i.getSnapInfo();g&&n.drawSnapInfo(e,g,u)}else c=i.getBounds();n.drawFrame(e,c,null,s);var h=o.default.LookAndFeel.TransformerAnchorRadius,y=o.default.LookAndFeel.TransformerOriginRadius,m=c.getCenter();if(i.isPerformingOperation())switch(i.getOperationType()){case r.default.TransformType.TRANSFORM_MOVE:break;case r.default.TransformType.TRANSFORM_ROTATE:case r.default.TransformType.TRANSFORM_SCALE:n.drawOrigin(e,d,s,m,h,y)}else{if(deviceDetect.isPhone()&&i.hasAnyCurrentEditMode(r.default.EditModes.Resize)&&n.drawOrigin(e,d,s,m,h,y),i.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&n.drawMarker(e,d,s,c.top_left(),h),i.hasAnyCurrentEditMode(r.default.EditModes.Move|r.default.EditModes.Resize|r.default.EditModes.Rotate))if(deviceDetect.isPhone()){var v={fillColor:"#3688dc",anchorRadius:h+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};i.hasAnyCurrentEditMode(r.default.EditModes.Move)?v.text="":i.hasAnyCurrentEditMode(r.default.EditModes.Resize)?v.text="":i.hasAnyCurrentEditMode(r.default.EditModes.Rotate)&&(v.text=""),n.drawMarker(e,v.fillColor,s,c.top_right(),v.anchorRadius,v)}else n.drawMarker(e,d,s,c.top_right(),h);i.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&(n.drawMarker(e,d,s,c.bottom_right(),h),n.drawMarker(e,d,s,c.bottom_left(),h));var T=t.mapRectToDevice(l,c.getBound()),P=a.default.quadFromRect(T),b=o.default.LookAndFeel.TransformerScaleZoneRadius;i.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&a.default.pointsDistance(P.center_right(),P.center_left())>=3*b&&(n.drawMarker(e,d,s,c.top_center(),h),n.drawMarker(e,d,s,c.bottom_center(),h)),i.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&a.default.pointsDistance(P.top_center(),P.bottom_center())>=3*b&&(n.drawMarker(e,d,s,c.center_right(),h),n.drawMarker(e,d,s,c.center_left(),h))}}},this.getProperties=function(){var t=i.getRotation_PropertyTest(),n=i.getPosition_PropertyTest(),a=i.getBounds().getBound(),o=l.createMainGroup(function(t){});return function(){var u=function(){var t=i.getElement();if(t.type===r.default.PDEElementType.kPDEElementXObject){if(!isUndefinedOrNull(t.xObjectType))switch(t.xObjectType){case r.default.PDEXObjectType.kPDEXObjectImage:return e.image;case r.default.PDEXObjectType.kPDEXObjectForm:return e.form;case r.default.PDEXObjectType.kPDEXObjectPostScript:return e.xps;default:return e.unknown}}else switch(t.type){case r.default.PDEElementType.kPDEElementContainer:return e.container;case r.default.PDEElementType.kPDEElementPlace:return e.place;case r.default.PDEElementType.kPDEElementPath:return e.path;case r.default.PDEElementType.kPDEElementText:return e.text;case r.default.PDEElementType.kPDEElementInlineImage:return e.image;case r.default.PDEElementType.kPDEElementShading:return e.shading;default:return e.unknown}return""}(),d=l.createPropValue(u,"T"),s=l.createProperty(r.default.objectPropertyType.textlabel,d,"PDF Page Element"),c=l.createSubGroup("Type",[s]);o.addToTabGroup(r.default.objectPropertyGroupType.general,c);var f=Math.ceil(1e4*t)/1e4,p=l.createPropValue(f,"r"),g=l.createProperty(r.default.objectPropertyType.textlabel,p,"Rotation"),h=Math.ceil(1e4*n.x)/1e4,y=l.createPropValue(h,"xp"),m=l.createProperty(r.default.objectPropertyType.textlabel,y,"X Position"),v=Math.ceil(1e4*n.y)/1e4,T=l.createPropValue(v,"yp"),P=l.createProperty(r.default.objectPropertyType.textlabel,T,"Y Position"),b=Math.ceil(1e4*a.getWidth())/1e4,M=l.createPropValue(b,"wdth"),B=l.createProperty(r.default.objectPropertyType.textlabel,M,"Width"),L=Math.ceil(1e4*a.getHeight())/1e4,S=l.createPropValue(L,"hght"),x=l.createProperty(r.default.objectPropertyType.textlabel,S,"Height"),k=l.createSubGroup("Information",[m,P,g,B,x]);o.addToTabGroup(r.default.objectPropertyGroupType.general,k)}(),o.defaultTab=0,o},this.hitTest=function(t,e){return t==i.getPageIndex()&&i.hitTest(e)},this.getDestination=function(){var t={};return t.pPageIndex=i.getPageIndex(),t.pRect=i.getBBox(),t}};return{createInstance:function(){return new s}}}]),window.mainApp.constant("TransformerTypeDescription",getConstructor(u,"TransformerTypeDescription","constant")),window.mainApp.factory(d,getConstructor(u,d,"factory"))},hfco:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}n("ibFd");var l="bl-edit-stampannotedit-inputhandler-module",u="bl-edit-stampannotedit-inputhandler-factory";angular.module(l,["bl-edit-stampannoteditobject-module"]).factory(u,["$rootScope","bl-edit-stampannoteditobject-factory",function(t,e){var n={},i=function(t){var n=t,i=!1,l=null,u=!1,d=e.HandleType.kHandleNone,s=r.default.point(),c=function(){var t=l?l.getAnnot():null;return t&&t.isLocked},f=function(t){var i,u=l.getPageIndex();if(!((i=n.getVisibleRange()).startPage<=u&&u<=i.endPage))return!1;var d=o.default.LookAndFeel.TransformerScaleZoneRadius,s=function(t,e,n){var a=t.mapPointToDevice(e,n.tl),o=t.mapPointToDevice(e,n.tr),i=t.mapPointToDevice(e,n.bl),l=t.mapPointToDevice(e,n.br);return r.default.quadFromPoints(a,o,i,l)}(n,u,r.default.quadFromRect(l.getRect()));if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.top_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopLeft,active:s.top_left()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.top_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopRight,active:s.top_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Move)&&r.default.circleContainsPoint(t,s.top_right(),d))return{type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleNone,active:s.top_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.bottom_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomLeft,active:s.bottom_left()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.bottom_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomRight,active:s.bottom_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.top_center(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopMiddle,active:s.top_center()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.center_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleLeftMiddle,active:s.center_left()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.bottom_center(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomMiddle,active:s.bottom_center()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.center_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleRightMiddle,active:s.center_right()};var c=n.mapPointToPage(u,t);if(l.hitTest(c))return l.hasAnyCurrentEditMode(a.default.EditModes.Move)?{type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleNone,active:t}:{type:e.TransformType.kTransformNone,handle:e.HandleType.kHandleNone,active:t};var f=o.default.LookAndFeel.TransformerRotateZoneRadius;return l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.circleContainsPoint(t,s.top_left(),f)?{type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopLeft,active:s.top_left()}:l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.circleContainsPoint(t,s.top_right(),f)?{type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopRight,active:s.top_right()}:l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.circleContainsPoint(t,s.bottom_left(),f)?{type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomLeft,active:s.bottom_left()}:l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.circleContainsPoint(t,s.bottom_right(),f)?{type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomRight,active:s.bottom_right()}:l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.circleContainsPoint(t,s.top_center(),f)?{type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopMiddle,active:s.top_center()}:l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.circleContainsPoint(t,s.center_left(),f)?{type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleLeftMiddle,active:s.center_left()}:l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.circleContainsPoint(t,s.bottom_center(),f)?{type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomMiddle,active:s.bottom_center()}:l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&r.default.circleContainsPoint(t,s.center_right(),f)?{type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleRightMiddle,active:s.center_right()}:null},p=function(t,r,o){var i=a.default.BLCursorType.kBLCursorArrow;switch(t){case e.TransformType.kTransformMove:i=a.default.BLCursorType.kBLCursorMove;break;case e.TransformType.kTransformRotate:i=a.default.BLCursorType.kBLCursorRotate;break;case e.TransformType.kTransformScale:var u=n.getPagesRotation(),d=n.document,s=l.getPageIndex(),c=[[0,7,1,3,5,0,2,4,6],[0,5,7,1,3,6,0,2,4],[0,3,5,7,1,4,6,0,2],[0,1,3,5,7,2,4,6,0]][d.getPage(s).getRotate(u)/90][r];i=(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?a.default.BLCursorType.kBLCursorScaleProportional_N:a.default.BLCursorType.kBLCursorScale_N)+c}n.setCursor(i)},g=function(t,o){!function(t,e){var a=l.getRect(),o=s.copy(),i=t.copy();if(!o.isEqual(i)){l.setSnapInfo(null);var u=r.default.point(i.x-o.x,i.y-o.y),d=a.copy();if(d.offset(u.x,u.y),l.setOperationRect(d),e){var c=l.getSnapData();if(c){var f;f=n.getZoom();var p=l.getOperationRect(),g=null,h=r.default.point(),y={zoom:f,snapToGrid:n.isGridEnabled()},m=c.snapMove(p,i,y);if(m&&(g=m.snapInfo,h=m.snappedAnchor),l.setSnapInfo(g),!h.isEqual(i)){var v=r.default.point(h.x-o.x,h.y-o.y),T=a.copy();T.offset(v.x,v.y),l.setOperationRect(T)}}}n.invalidate()}}(t,!a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),p(e.TransformType.kTransformMove,d,o)};this.initialize=function(t){l=t},this.terminate=function(){},this.getToolName=function(){return"edit"},this.isFinished=function(){return u},this.handleEvent=function(t){switch(t.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case a.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonDown=function(t,e){if(i)return!0;var r=l.getPageIndex(),o=(n.mapPointToPage(r,t),f(t));if(!o)return u=!0,!1;if(c())return!!o;if(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpModify,!0)){l.setOperation(o.type),d=o.handle;var p=o.active.floor();s=n.mapPointToPage(r,p),n.invalidate()}return!0},this.onLButtonUp=function(t,r){if(i)return!0;if(l.getOperation()==e.TransformType.kTransformNone)return!1;if(c())return!0;var a=f(t);return a&&p(a.type,a.handle,r),i=!0,l.endOperation().finally(function(){i=!1,n.invalidate()}),!0},this.onRButtonDown=function(t,e){return!!f(t)},this.onRButtonUp=function(t,e){return!!f(t)&&(n.showContextMenu(a.default.ContextMenuType.Annotation,t,a.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|a.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations),!0)},this.onMouseMove=function(t,o){if(i)return!0;if(c())return!!f(t);var u=n.mapPointToPage(l.getPageIndex(),t);switch(l.getOperation()){case e.TransformType.kTransformNone:var h=f(t);return!!h&&(n.setHighlight(null),p(h.type,h.handle,o),!0);case e.TransformType.kTransformMove:g(u,o);break;case e.TransformType.kTransformRotate:!function(t,o){var i=l.getRect().getCenter(),u=s.copy(),c=t.copy(),f=r.default.point(u.x-i.x,u.y-i.y),g=r.default.point(c.x-i.x,c.y-i.y),h=r.default.vecAngleBetween(f,g);if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var y=h,m=r.default.degreeToRadian(45);h=y=(y>0?r.default.castFloatToInt(y/m+.5):r.default.castFloatToInt(y/m-.5))*m}l.setOperationRotate(h),n.invalidate(),p(e.TransformType.kTransformRotate,d,o)}(u,o);break;case e.TransformType.kTransformScale:!function(t,o){var i=t.copy(),u=l.getRect(),s=Math.abs(u.getWidth()),c=Math.abs(u.getHeight());if(!r.default.floatEq(s,0)&&!r.default.floatEq(c,0)){var f=r.default.point(u.left,u.bottom),g=u.getCenter(),h=2*(i.x-f.x)/s,y=2*(i.y-f.y)/c;i.offset(-f.x,-f.y);var m=i.x/s,v=i.y/c,T=null;switch(d){case e.HandleType.kHandleLeftMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-m,1-m,f).multiply(r.default.translationMatrix(i.x,m*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-h,1-h,g):r.default.scalingMatrix(1-m,1,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(v,v,f).multiply(r.default.translationMatrix((1-v)*s/2,0)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(y-1,y-1,g):r.default.scalingMatrix(1,v,f);break;case e.HandleType.kHandleRightMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(m,m,f).multiply(r.default.translationMatrix(0,(1-m)*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(h-1,h-1,g):r.default.scalingMatrix(m,1,f);break;case e.HandleType.kHandleBottomMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-v,1-v,f).multiply(r.default.translationMatrix(v*s/2,i.y)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-y,1-y,g):r.default.scalingMatrix(1,1-v,f).multiply(r.default.translationMatrix(0,i.y));break;case e.HandleType.kHandleTopLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var P=Math.min(1-m,v);T=r.default.scalingMatrix(P,P,f).multiply(r.default.translationMatrix((1-P)*s,0))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var b=Math.min(1-h,y-1);T=r.default.scalingMatrix(b,b,g)}else T=r.default.scalingMatrix(1-m,v,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var M=Math.min(m,v);T=r.default.scalingMatrix(M,M,f)}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var B=Math.min(h-1,y-1);T=r.default.scalingMatrix(B,B,g)}else T=r.default.scalingMatrix(m,v,f);break;case e.HandleType.kHandleBottomLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var L=Math.min(1-m,1-v);T=r.default.scalingMatrix(L,L,f).multiply(r.default.translationMatrix((1-L)*s,(1-L)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var S=Math.min(1-h,1-y);T=r.default.scalingMatrix(S,S,g)}else T=r.default.scalingMatrix(1-m,1-v,f).multiply(r.default.translationMatrix(i.x,i.y));break;case e.HandleType.kHandleBottomRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var x=Math.min(m,1-v);T=r.default.scalingMatrix(x,x,f).multiply(r.default.translationMatrix(0,(1-x)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var k=Math.min(h-1,1-y);T=r.default.scalingMatrix(k,k,g)}else T=r.default.scalingMatrix(m,1-v,f).multiply(r.default.translationMatrix(0,i.y))}T&&l.setOperationRect(T.mapRect(u)),n.invalidate(),p(e.TransformType.kTransformScale,d,o)}}(u,o)}return!0},this.onKeyUp=function(t){return t==a.default.kBLKey.kBLKey_DELETE&&function(t){return!!i||!c()&&"Delete"==t&&(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpDelete,!0)&&(n.setSelection(null),l.delete(),u=!0),!0)}("Delete")}};return n.createInstance=function(t,e){return new i(e)},n}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},iMU4:function(t,e,n){"use strict";var r=i(n("HSQo")),a=i(n("b8L+")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}n("Ij0n");var l="bl-edit-baseannoteditselection-module",u="bl-edit-baseannoteditselection-factory";angular.module(l,["transformer-painter-module"]).factory(u,["$rootScope","transformer-painter-service",function(t,e){var n=o.default.LookAndFeel.AnnotTransformerHighlightColor;return{createInstance:function(){return new function(){var t=null,o=null;(0,r.default)(this,{DocumentView_:{get:function(){return t}},AnnotEditObject_:{get:function(){return o}}}),this.init=function(e,n){t=e,o=n},this.getType=function(){return"AnnotEdit"},this.getSelectionData=function(){return o},this.drawHighlight=function(t,r){if(r==o.getPageIndex()){var i=o.getRect(),l=a.default.quadFromRect(i);e.drawFrame(t,l,null,n)}},this.hitTest=function(t,e){return t==o.getPageIndex()&&o.getRect().containsPoint(e)}}}}}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},ibFd:function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("C3UN"));function o(t){return t&&t.__esModule?t:{default:t}}n("5UMD");var i="bl-edit-stampannoteditobject-module",l="bl-edit-stampannoteditobject-factory";angular.module(i,["bl-edit-utilites-module","pdf-manager-module"]).factory(l,["$rootScope","$q","bl-edit-utilites-service","pdf-manager-factory",function(t,e,n,o){var i={kTransformNone:0,kTransformMove:1,kTransformScale:2,kTransformRotate:3};return{createInstance:function(t,l,u,d){return new function(t,l,u,d){var s=this,c=t,f=l,p=u,g=d,h=null,y=0,m=i.kTransformNone,v=r.default.rect();p&&p.rect&&(v=p.rect.copy());var T=c.getPage(f);s.getDoc=function(){return c},s.getPageIndex=function(){return f},s.getAnnot=function(){return p},s.getRect=function(){return p?p.rect:null},s.hitTest=function(t){var e=s.getRect();return!!e&&e.containsPoint(t)},s.setOperation=function(t){m=t},s.getOperation=function(){return m},s.setOperationRect=function(t){v=n.correctRectToRespectPageBox(T.getCropBox(),t)},s.getOperationRect=function(){return v},s.setOperationRotate=function(t){y=t},s.getOperationRotate=function(){return y},s.endOperation=function(){if(h=null,m==i.kTransformRotate){if(0!=y)return o.changeAnnotationProperties(c,p,f,{rotation:y}).finally(function(){y=0,v=s.getRect(),m=i.kTransformNone})}else{var t=s.getRect();if(v&&!v.isEqual(t)){var n=v.copy();return n.top<n.bottom&&(n.bottom=[n.top,n.top=n.bottom][0]),o.changeAnnotationProperties(c,p,f,{R:n.asArray()}).finally(function(){v=p.rect.copy(),m=i.kTransformNone})}}return m=i.kTransformNone,e.when()},s.delete=function(){return o.deleteAnnotation(c,p,f)},s.getSnapData=function(){return g},s.setSnapInfo=function(t){h=t},s.getSnapInfo=function(){return h};var P=a.default.EditModes.Properties|a.default.EditModes.Move|a.default.EditModes.Rotate|a.default.EditModes.Resize|a.default.EditModes.Remove;p.isMarkup()&&p.type!==a.default.pdfAnnotationType.freeText&&(P|=a.default.EditModes.Comment);var b=deviceDetect.isPhone()?a.default.EditModes.Move:P;s.setCurrentEditMode=function(t){b=t},s.hasAnyCurrentEditMode=function(t){return!!(b&t)},s.hasAnyEditMode=function(t){return!!(P&t)}}(t,l,u,d)},TransformType:i,HandleType:{kHandleNone:0,kHandleTopLeft:1,kHandleTopRight:2,kHandleBottomRight:3,kHandleBottomLeft:4,kHandleTopMiddle:5,kHandleRightMiddle:6,kHandleBottomMiddle:7,kHandleLeftMiddle:8}}}]),window.mainApp.factory(l,getConstructor(i,l,"factory"))},ibtX:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("Jrzz"));function i(t){return t&&t.__esModule?t:{default:t}}n("5UMD");var l="bl-edit-polylineannoteditobject-module",u="bl-edit-polylineannoteditobject-factory";angular.module(l,["bl-edit-utilites-module","pdf-manager-module"]).factory(u,["$rootScope","$q","bl-edit-utilites-service","pdf-manager-factory",function(t,e,n,i){var l={kTransformNone:0,kTransformMove:1,kTransformScale:2,kTransformRotate:3,kTransformMovePoint:4};return{createInstance:function(u,d,s,c){return new function(u,d,s,c){var f=this,p=u,g=d,h=s,y=c,m=null,v=l.kTransformNone,T=r.default.rect();h&&h.rect&&(T=h.rect.copy());var P=p.getPage(g),b=o.default.getPolygonAnnotationVertices(h&&h.vertices),M=void 0,B=void 0,L=P&&P.getCropBox(),S=!1,x=void 0;f.getDoc=function(){return p},f.getPageIndex=function(){return g},f.getAnnot=function(){return h},f.getAnnotSubtype=function(){return h.type},f.getRect=function(){return h?h.rect:null},f.hitTest=function(t){var e=f.getRect();return!!e&&e.containsPoint(t)},f.setOperation=function(t){v=t,B=r.default.quadFromRect(f.getRect())},f.getOperation=function(){return v},f.setOperationRect=function(t){T=n.correctRectToRespectPageBox(P.getCropBox(),t)},f.getOperationRect=function(){return T},f.getOperationBounds=function(){return B},f.endOperation=function(){return S?(m=null,window.isArray(M)&&M.length>0&&(b=M.slice(),M=null),i.changeAnnotationProperties(p,h,g,{V:b}).finally(function(){T=h.rect.copy(),v=l.kTransformNone,S=!1,x=o.default.invalidIndex,B=r.default.quadFromRect(f.getRect())})):(v=l.kTransformNone,e.when())},f.delete=function(){return i.deleteAnnotation(p,h,g).then(function(e){t.$emit("event:delete-annotation",e)})},f.getSnapData=function(){return y},f.setSnapInfo=function(t){m=t},f.getSnapInfo=function(){return m},f.getVertices=function(){return b},f.getMovedVertices=function(){return M},f.oneVertexLeftOnPage=function(t){if(!window.isArray(b))return!0;for(var e=0;e<b.length;e++)if(e!==t&&L.containsPoint(o.default.verticeToPoint(b[e])))return!1;return!0},f.moveVertice=function(t,e){!L.containsPoint(e)&&f.oneVertexLeftOnPage(t)||(b[t]=[e.x,e.y],x=t,S=!0)},f.getMovedVertexIndex=function(){return x},f.transrormObject=function(t){if(t&&window.isArray(b)){for(var e=b.length,n=[],a=0;a<b.length;a++){var i=t.mapPoint(o.default.verticeToPoint(b[a]));if(!L.containsPoint(i)&&!--e)return;i&&n.push([i.x,i.y])}B=t.mapQuad(r.default.quadFromRect(f.getRect())),M=n.slice(),S=!0}};var k=a.default.EditModes.Properties|a.default.EditModes.Move|a.default.EditModes.MovePoint|a.default.EditModes.Remove;h.type!==a.default.pdfAnnotationType.text&&(k|=a.default.EditModes.Resize),h.isMarkup()&&h.type!==a.default.pdfAnnotationType.freeText&&(k|=a.default.EditModes.Comment);var R=deviceDetect.isPhone()?a.default.EditModes.MovePoint:k;f.setCurrentEditMode=function(t){R=t},f.hasAnyCurrentEditMode=function(t){return!!(R&t)},f.hasAnyEditMode=function(t){return!!(k&t)}}(u,d,s,c)},TransformType:l,HandleType:{kHandleNone:0,kHandleTopLeft:1,kHandleTopRight:2,kHandleBottomRight:3,kHandleBottomLeft:4,kHandleTopMiddle:5,kHandleRightMiddle:6,kHandleBottomMiddle:7,kHandleLeftMiddle:8}}}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},itZ0:function(t,e,n){"use strict";var r=o(n("Xxa5")),a=o(n("exGp"));function o(t){return t&&t.__esModule?t:{default:t}}n("3cyn"),n("LYHW");var i="bl-edit-content-service";angular.module("bl-edit-content-module",["bl-selecteditobjectservice-insert-module","bl-selecteditobjectservice-edit-module"]).factory(i,["$rootScope","bl-selecteditobjectservice-insert-factory","bl-selecteditobjectservice-edit-factory",function(t,e,n){var o={Transform:e,TextEdit:n},i={};return i.selectObject=function(){var t=(0,a.default)(r.default.mark(function t(e,n,a){var i,l,u;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i={selected:!1,inputHandler:null},e&&n){t.next=3;break}return t.abrupt("return",i);case 3:if(a||e.resetSelection(!0),l=n.getObjectType(),!(u=o[l])){t.next=10;break}return t.next=9,u.selectObject(e,n,a);case 9:return t.abrupt("return",t.sent);case 10:return t.abrupt("return",i);case 11:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),i.addObjectToSelection=function(t,e){var n=t.getSelection();if(!n)return i.selectObject(t,e,!1);var r=n.getType();return o[r]?{selected:!1,inputHandler:null}:i.selectObject(t,e,!1)},i}]),window.mainApp.factory(i,getConstructor("bl-edit-content-module",i,"factory"))},iuAc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.module=void 0,n("rL2z");var r="user-management-links-service",a=angular.module("user-management-links-module",["authentication-module","paygw-module"]);function o(t,e,n){var r=function(t){var e=a();t(isUndefinedOrNull(e)?"":e.id)},a=function(){return isUndefinedOrNull(e.authentication)||isUndefinedOrNull(e.authentication.products)?null:e.authentication.products.getAssignedProduct()},o=function(t,e,r){n.goToLink(t,e,r)},i=function(t,e){o("custom",t,e)},l=function(t,e){var n=function(t,e){var n={};e&&(n.id=e),i(t,n)};e?n(t,e):r(function(e){n(t,e)})},u={goToJoin:function(t,e,n){r(function(r){var a={};a.checkoutT=n,r&&(a.id=r),t&&(a.mkey3=t),e&&(a.license=e),o("join",null,a)})},goToUpgrade:function(t,e){r(function(n){var r={};n&&(r.id=n),t&&(r.mkey3=t),e&&(r.license=e),o("upgrade",null,r)})},goToJoin_vId:function(t,e,n){var r={};t&&(r.id=t),e&&(r.mkey3=e),n&&(r.license=n),o("join",null,r)},goToJoin_vTobuy:function(t,e,n){r(function(r){var a={};r&&(a.id=r),e&&(a.mkey3=e),n&&(a.license=n),o("join",t,a)})},goOnline:function(){i("saas")},goKnowledgeBase:function(){i("knowledge-base")},goAssignLearnMore:function(){i("assign-learn-more")},renewProduct:function(t,e,n){var r={};t&&(r.id=t),e&&(r.mkey3=e),n&&(r.license=n),i("renew-product",r)},goBuyESign:function(t,e){var n={};t&&(n.id=t),e&&(n.mkey3=e),i("buy-e-sign",n)},goToBuyPartner:function(t){u.goToJoin(null,t,!0)},goBuyESignExt:function(t){i("buy-e-sign",t=t||{})},goBuyOCR:function(t,e){var n={};t&&(n.id=t),e&&(n.mkey3=e),i("buy-ocr",n)},goBuyOCRAdvanced:function(t,e){var n={};t&&(n.id=t),e&&(n.mkey3=e),i("upgrade-ocr",n)},addLicenses:function(t,e){var n={};t&&(n.id=t),e&&(n.mkey3=e),i("add-licenses",n)},switchProduct:function(t,e){var n={};t&&(n.id=t),e&&(n.mkey3=e),i("switch-product",n)},turnOnRenew:function(t){l("turn-on-renew",t)},paymentFailed:function(t){l("payment-failed",t)},resetLicense:function(t){l("logoff-product",t)},logoffProduct:function(t){l("logoff-product",t)},goManageAccount:function(){i("online-account")},goToChangePassword:function(){i("online-changepassword")},goToRecoverPasswordLink:function(){i("online-recoverpassword")},goToTermsAndConditionsLink:function(){i("online-terms")},goToContactSalesLink:function(){i("contact-sales")},goToESignHelp:function(){i("e-sign-user-guide")},goChangeCreditCardInfo:function(){i("payment-information")},viewAllProducts:function(){i("view-all-products")},goMyAccountPortal:function(){i("my-account-portal")}};return u}e.module=a,a.service(r,o),o.$inject=["$rootScope","authentication-service","paygw-factory"],window.mainApp&&window.mainApp.service(r,getConstructor("user-management-links-module",r,"service"))},jUNb:function(t,e,n){"use strict";var r=i(n("C3UN")),a=i(n("VmtT")),o=i(n("IZAc"));function i(t){return t&&t.__esModule?t:{default:t}}n("Ij0n");var l="bl-edit-imagecropselection-module",u="bl-edit-imagecropselection-factory";angular.module(l,["transformer-painter-module"]).factory(u,["$rootScope","transformer-painter-service",function(t,e){var n=o.default.createInstance("#FFFFFFFF");return{createInstance:function(){return new function(){var t=null,o=null;this.init=function(e,n){t=e,o=n},this.getType=function(){return"ImageCrop"},this.getSelectionData=function(){return o},this.draw=function(i,l){if(l==o.getPageIndex()){var u=a.default.LookAndFeel.ImageCropTransformerFrameColor,d=a.default.LookAndFeel.ImageCropTransformerObjectColor,s=a.default.LookAndFeel.ImageCropTransformerAreaColor,c=o.getImageBounds(),f=null;f=o.isPerformingOperation()?o.getOperationBounds():o.getBounds();var p=i.getCTM();if(i.setCTM(null),i.cropRegions(t.mapQuadToDevice(l,c),t.mapQuadToDevice(l,f),s),i.setCTM(p),e.drawFrame(i,c,null,d,[10]),e.drawFrame(i,f,null,u),f.getCenter(),!o.isPerformingOperation()){var g=[],h=a.default.LookAndFeel.TransformerAnchorRadius;if(o.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&g.push(f.top_left()),o.hasAnyCurrentEditMode(r.default.EditModes.Move|r.default.EditModes.Resize|r.default.EditModes.Rotate))if(deviceDetect.isPhone()){var y={fillColor:"#3688dc",anchorRadius:h+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};o.hasAnyCurrentEditMode(r.default.EditModes.Move)?y.text="":o.hasAnyCurrentEditMode(r.default.EditModes.Resize)?y.text="":o.hasAnyCurrentEditMode(r.default.EditModes.Rotate)&&(y.text=""),e.drawMarker(i,y.fillColor,u,f.top_right(),y.anchorRadius,y)}else e.drawMarker(i,n,u,f.top_right(),h);o.hasAnyCurrentEditMode(r.default.EditModes.Resize|r.default.EditModes.Rotate)&&(g.push(f.bottom_right()),g.push(f.bottom_left()),g.push(f.top_center()),g.push(f.center_right()),g.push(f.bottom_center()),g.push(f.center_left()));for(var m=0;m<g.length;++m)e.drawMarker(i,n,u,g[m],h)}}},this.hitTest=function(t,e){return t==o.getPageIndex()&&o.hitTest(e)},this.getDestination=function(){var t={};return t.pPageIndex=o.getPageIndex(),t.pRect=o.getBBox(),t}}}}}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},"k+uf":function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("C3UN"));function o(t){return t&&t.__esModule?t:{default:t}}n("5UMD");var i="bl-edit-chariterator-factory";angular.module("bl-edit-chariterator-module",["bl-edit-utilites-module"]).factory(i,["$rootScope","bl-edit-utilites-service",function(t,e){var n={},o=function(t,e,n){var a=t,o=e,i=n;this.getTextBlock=function(){return o.textBlocks[i.blockIndex]},this.getQuad=function(){return r.default.quadFromRect(i.boundRect)},this.getPageIndex=function(){return a.getPageIndex(o)},this.isEqual=function(t){return t&&this.getQuad().isEqual(t.getQuad())}},i=function(t,e){for(var n=t.items,r=0;r<n.length;++r){var a=n[r];if(a&&a.blockIndex==e)return a}};return n.createCharIteratorForItemAtPoint=function(t,e,n,r){return new o(t,e,n)},n.createCharIteratorForItem=function(t,e,n){return new o(t,e,n)},n.createBeginCharIteratorForTextBlock=function(t,r,o,l){var u=function t(n,r){for(var o=n.length,l=0;l<o;++l){var u=n[l];switch(u.type){case a.default.PDEElementType.kPDEElementContainer:if(!e.shouldSkipContainer(u)&&u.isVisible){var d=t(u.content,r);if(d)return d}break;case a.default.PDEElementType.kPDEElementText:u.isVisible;var s=i(u,r);if(s)return s}}return null}(o,l);return u?n.createCharIteratorForItem(t,r,u):null},n}]),window.mainApp.factory(i,getConstructor("bl-edit-chariterator-module",i,"factory"))},kHBY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={SBCode:{kSB_TOP:0,kSB_BOTTOM:1,kSB_ENDSCROLL:2,kSB_LINEDOWN:3,kSB_LINEUP:4,kSB_PAGEDOWN:5,kSB_PAGEUP:6,kSB_THUMBPOSITION:7,kSB_THUMBTRACK:8}}},ldO7:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("C3UN"));n("r1RI");var a="bl-edit-typetext-inputhandler-module",o="bl-edit-typetext-inputhandler-factory";angular.module(a,["bl-editmodule-module"]).factory(o,["$rootScope","bl-editmodule-service",function(t,e){var n={};return n.createInstance=function(t,n){return new function(t){var n=t,a=!1;this.initialize=function(){n.setCursor(r.default.BLCursorType.kBLCursorIBeam)},this.terminate=function(){},this.getToolName=function(){return"TypeText"},this.isFinished=function(){return a},this.handleEvent=function(t){switch(t.type){case r.default.BLInputEventType.kBLInputEventPointerReleased:return t.pointerArgs.button!==r.default.BLPointerButton.kBLPointerButtonLeft||this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);case r.default.BLInputEventType.kBLInputEventPointerPressed:return t.pointerArgs.button!==r.default.BLPointerButton.kBLPointerButtonRight||this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);case r.default.BLInputEventType.kBLInputEventPointerMoved:return!0}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonUp=function(t,r){try{return e.setupTextEditTool(n,t),a=!0,!0}catch(t){}return!1},this.onRButtonUp=function(t,e){return n.showContextMenu(r.default.ContextMenuType.Text,t,r.default.BLSelectionOperations.kBLSelectionAllowPaste),!0},this.onMouseMove=function(t,e){return!0},this.onKeyUp=function(t){}}(n)},n}]),window.mainApp.factory(o,getConstructor(a,o,"factory"))},lii2:function(t,e,n){"use strict";n("W6JU"),n("NBi1"),n("Jqpr");var r="bl-edit-compositeeditobject-module",a="bl-edit-compositeeditobject-factory";angular.module(r,["bl-edit-compositeeditobject-item-graphics-module","bl-edit-compositeeditobject-item-text-module","bl-edit-compositeeditobject-item-multiselect-module"]).factory(a,["$rootScope","bl-edit-compositeeditobject-item-graphics-factory","bl-edit-compositeeditobject-item-text-factory","bl-edit-compositeeditobject-item-multiselect-factory",function(t,e,n,r){var a={Transform:e,TextEdit:n,MultiSelect:r},o=function(t){var e=[];isUndefinedOrNull(t)||(e=t);this.getCount=function(){return e.length},this.get=function(t){return t>=0&&e.length>t?e[t]:null},this.push=function(t){e.push(t)}},i=function(t,e){var n=[];for(var r in a){var o=a[r],i=l.newCompositeEditObject();o.createCompositeEditObjectForPage(t,e,i),i&&l.copyFromCompositeToEditObjectStore(i,n)}return n},l={};return l.createCompositeEditObjectForPage=function(t,e){return l.createCompositeEditObjectByData(function(t,e){return i(t,e)}(t,e))},l.createCompositeEditObjectByData=function(t){return new o(t)},l.createCompositeEditObject=function(){return new o},l.newCompositeEditObject=function(){return l.createCompositeEditObject()},l.getSelectedObjectsOnPage=function(t,e){var n=t.getSelection();if(!n)return null;var r=n.getType(),o=a[r];return o?o.getSelectedObjectsOnPage(t,e):null},l.copyFromCompositeToEditObjectStore=function(t,e){var n=t.getCount();if(!(n<0))for(var r=0;r<n;++r){var a=t.get(r);e.push(a)}},l}]),window.mainApp.factory(a,getConstructor(r,a,"factory"))},"mC++":function(t,e,n){"use strict";var r=o(n("C3UN")),a=o(n("b8L+"));function o(t){return t&&t.__esModule?t:{default:t}}n("ZqXQ");var i="bl-edit-graphicseditobject-module",l="bl-edit-graphicseditobject-factory";angular.module(i,["bl-edit-editobject-module"]).factory(l,["$rootScope","bl-edit-editobject-factory",function(t,e){var n={};return n.createGraphicsEditObject=function(t,n,r){return new function(t,n,r){var o=this,i=r;o.prototype=e.createInstance(t,n),o.getPageIndex=function(){return o.prototype.getPageIndex()},o.getObjectType=function(){return"Transform"},o.getElement=function(){return i},o.hitTestPoint=function(t){return o.getBounds().containsPoint(t)},o.hitTestRect=function(t){return o.getBounds().hasIntersectionRect(t)},o.getObjectSpaceRect=function(){var t=i.getQuad();return o.getCTM().invert().mapQuad(t).getBound()},o.getCTM=function(){return i.matrix},o.applyEdit=function(){alert("graphicsEditObject - applyEdit")},o.delete=function(){alert("graphicsEditObject - delete")},o.getData=function(){return o},o.getPDEElement=function(){return i},o.getBounds=function(){var t=o.getCTM(),e=o.getObjectSpaceRect();return t.mapQuad(a.default.quadFromRect(e))},o.compareInternals=function(t){return t&&t.getPDEElement()===o.getPDEElement()}}(t,n,r)},n.createEditObjectByPagePoint=function(t,e,a,o){switch(a.type){case r.default.PDEElementType.kPDEElementXObject:if(a.isVisible)if(a.hitTest(o))return n.createGraphicsEditObject(t,e,a);break;case r.default.PDEElementType.kPDEElementPath:if(a.hitTest(o))return n.createGraphicsEditObject(t,e,a);break;case r.default.PDEElementType.kPDEElementInlineImage:case r.default.PDEElementType.kPDEElementShading:if(a.hitTest(o))return n.createGraphicsEditObject(t,e,a)}return null},n}]),window.mainApp.factory(l,getConstructor(i,l,"factory"))},oRGr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={BLZoomType:{kBLZoomValue:0,kBLZoomFitPage:1,kBLZoomFitWidth:2,kBLZoomFitHeight:3},BLScrollType:{kScrollNone:0,kScrollVert:2,kScrollHorz:4},BLScrollBarType:{kBLScrollBarHorz:0,kBLScrollBarVert:1},BLScrollEvent:{kBLScrollHome:0,kBLScrollEnd:1,kBLScrollStepPlus:2,kBLScrollStepMinus:3,kBLScrollPagePlus:4,kBLScrollPageMinus:5,kBLScrollPos:6,kBLScrollSliderReleased:7},PAGE_HALF_MARGIN:3,PAGE_MARGIN:6,OcrZoneSeparatorType:{kOcrZoneHorzSeparator:0,kOcrZoneVertSeparator:1},OcrZoneType:{kOcrZoneText:0,kOcrZoneGraphic:1,kOcrZoneTable:2,kOcrZoneBarcode:3,kOcrZoneHand:4},OcrZoneColor:{kNoneAreaColor:"#F0F0F0",kTextAreaColor:"#FB0303",kGraphicAreaColor:"#025FBE",kTableAreaColor:"#9954C9",kBarcodeAreaColor:"#FB6002",kHandAreaColor:"#028F37"},InputHandlerType:{kHandle:0,kHandleSelectZone:1,kHandleEditZone:2,kHandleAddTextZone:3,kHandleAddGraphicsZone:4,kHandleAddBarcodeZone:5,kHandleAddTableZone:6,kHandleAddHandZone:7,kHandleRemoveZone:8,kHandleAddVertSeparatorZone:9,kHandleAddHorzSeparatorZone:10,kHandleRemoveSeparatorZone:11}}},ozWS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.module=void 0,n("iuAc");var r="user-management-actions-service",a=angular.module("user-management-actions-module",["ui-helper-module","user-management-links-module"]);function o(t,e,n){var r={},a=e.ondemand.getInAppTrackingFactory(),o=e.ondemand.getAuthenticationUiProxyService();return r.openSignInPanel=function(e){e||a.then(function(t){var e=t.getInstance();e&&e.onUMAction("ViewSignInSignUp")}),t.$state.includes("signin")||t.$state.go("sitemenu-account-signin",{param1:"signin"})},r.openSignUpPanel=function(e){e||a.then(function(t){var e=t.getInstance();e&&e.onUMAction("ViewSignInSignUp")}),t.$state.includes("signup")||t.$state.go("sitemenu-account-signin",{param1:"signup"})},r.openAccountManagePanel=function(e){e||a.then(function(t){var e=t.getInstance();e&&e.onUMAction("ViewManageAccount")}),t.$state.go("sitemenu-account-manage")},r.openProductsPanel=function(e){e||a.then(function(t){var e=t.getInstance();e&&e.onUMAction("ViewProducts")}),t.$state.go("sitemenu-account-myproducts")},r.joinLink=function(t,e,r,o){isUndefinedOrNull(t)&&(t=""),e?(a.then(function(t){var n=t.getInstance();n&&n.onUMAction("JoinLink",{tobuy:e})}),n.goToJoin_vTobuy(e,t,o)):r?(a.then(function(t){var e=t.getInstance();e&&e.onUMAction("JoinLink",{product:r})}),n.goToJoin_vId(r,t,o)):(a.then(function(t){var e=t.getInstance();e&&e.onUMAction("JoinLink")}),n.goToJoin(t,o))},r.goKnowledgeBase=function(){a.then(function(t){var e=t.getInstance();e&&e.onUMAction("GoKnowledgeBase")}),n.goKnowledgeBase()},r.renewProduct=function(t,e,r){isUndefinedOrNull(t)&&(t=""),isUndefinedOrNull(e)&&(e=""),a.then(function(e){var n=e.getInstance();n&&n.onUMAction("RenewProduct",{"product-id":t})}),n.renewProduct(t,e,r)},r.goBuyESign=function(t,e){isUndefinedOrNull(t)&&(t=""),isUndefinedOrNull(e)&&(e=""),a.then(function(e){var n=e.getInstance();n&&n.onUMAction("BuyESign",{"product-id":t})}),n.goBuyESign(t,e)},r.goBuyESignExt=function(t,e,r){isUndefinedOrNull(e)&&(e=""),isUndefinedOrNull(r)&&(r=""),t?a.then(function(e){var n=e.getInstance();n&&n.onUMAction("BuyESign",{tobuy:t})}):e?a.then(function(t){var n=t.getInstance();n&&n.onUMAction("BuyESign",{product:e})}):a.then(function(t){var e=t.getInstance();e&&e.onUMAction("BuyESign")});var o=o||{};r&&(o.mkey3=r),e&&(o.id=e),n.goBuyESignExt(o)},r.goBuyOCR=function(t,e){isUndefinedOrNull(t)&&(t=""),isUndefinedOrNull(e)&&(e=""),a.then(function(e){var n=e.getInstance();n&&n.onUMAction("BuyOCR",{"product-id":t})}),n.goBuyOCR(t,e)},r.goBuyOCRAdvanced=function(t,e){isUndefinedOrNull(t)&&(t=""),isUndefinedOrNull(e)&&(e=""),a.then(function(e){var n=e.getInstance();n&&n.onUMAction("BuyOCRAdvanced",{"product-id":t})}),n.goBuyOCRAdvanced(t,e)},r.addLicenses=function(t,e){isUndefinedOrNull(t)&&(t=""),isUndefinedOrNull(e)&&(e=""),a.then(function(e){var n=e.getInstance();n&&n.onUMAction("AddLicenses",{"product-id":t})}),n.addLicenses(t,e)},r.goSwitchProduct=function(t,e){isUndefinedOrNull(t)&&(t=""),isUndefinedOrNull(e)&&(e=""),a.then(function(e){var n=e.getInstance();n&&n.onUMAction("GoSwitchProduct",{"product-id":t})}),n.switchProduct(t,e)},r.buyPremiumBrowserExtention=function(t){n.goToBuyPartner(t)},r.turnOnRenew=function(t){isUndefinedOrNull(t)&&(t=""),a.then(function(e){var n=e.getInstance();n&&n.onUMAction("TurnOnRenew",{"product-id":t})}),n.turnOnRenew(t)},r.paymentFailed=function(t){isUndefinedOrNull(t)&&(t=""),a.then(function(e){var n=e.getInstance();n&&n.onUMAction("PaymentFailed",{"product-id":t})}),n.paymentFailed(t)},r.goManageAccount=function(){a.then(function(t){var e=t.getInstance();e&&e.onUMAction("GoManageAccount")}),n.goManageAccount()},r.goToChangePassword=function(){n.goToChangePassword()},r.goToRecoverPassword=function(){n.goToRecoverPasswordLink()},r.goChangeCreditCardInfo=function(){n.goChangeCreditCardInfo()},r.viewAllProducts=function(){n.viewAllProducts()},r.goMyAccountPortal=function(){n.goMyAccountPortal()},r.termsAndConditions=function(){a.then(function(t){var e=t.getInstance();e&&e.onUMAction("GoToTermsAndConditions")}),n.goToTermsAndConditionsLink()},r.goToESignHelp=function(){n.goToESignHelp()},o.then(function(t){t.subscribe(r)}),r}e.module=a,a.service(r,o),o.$inject=["$rootScope","ui-helper-factory","user-management-links-service"],window.mainApp&&window.mainApp.service(r,getConstructor("user-management-actions-module",r,"service"))},q3gF:function(t,e,n){n("JWAb"),t.exports=n("FeBl").Math.trunc},qpno:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("b8L+"));var a="bl-ocr-idrs-rectSelection-module",o="bl-ocr-idrs-rectSelection-factory";angular.module(a,[]).factory(o,["$q","$rootScope",function(t,e){return{createInstance:function(){return new function(){var t=this,e=r.default.point(),n=r.default.point(),a=r.default.point();t.beginSelection=function(t){e=t.copy(),n=t.copy()},t.endSelection=function(e){t.moveSelection(e),a.isAreaEmpty()&&a.inflate(.001,.001)},t.moveSelection=function(t){n=t.copy(),a=r.default.rect(Math.min(e.x,n.x),Math.min(e.y,n.y),Math.max(n.x,e.x),Math.max(n.y,e.y))},t.getRect=function(){return a.copy()},t.isAreaEmpty=function(){return e.isEqual(n)},t.getStartPoint=function(){return e.copy()},t.getEndPoint=function(){return n.copy()}}}}}]),window.mainApp.factory(o,getConstructor(a,o,"factory"))},"r/7/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("C3UN")),a=o(n("Csog"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={borderStyle:[{id:"solid",text:"Solid",value:"S"},{id:"dashed",text:"Dashed",value:"D"},{id:"beveled",text:"Beveled",value:"B"},{id:"inset",text:"Inset",value:"I"},{id:"underline",text:"Underline",value:"U"}],modifier:[{id:"regular",text:"Regular",value:r.default.FontStyle.Regular},{id:"italic",text:"Italic",value:r.default.FontStyle.Italic},{id:"bold",text:"Bold",value:r.default.FontStyle.Bold},{id:"boldItalic",text:"Bold-Italic",value:r.default.FontStyle.BoldItalic}],bool:[{id:"no",text:"No",value:!1},{id:"yes",text:"Yes",value:!0}],checked:[{id:"unchecked",text:"Unchecked",value:!1},{id:"checked",text:"Checked",value:!0}],alignment:[{id:"left",text:"Left",value:r.default.TextJustification.Left},{id:"center",text:"Center",value:r.default.TextJustification.Center},{id:"right",text:"Right",value:r.default.TextJustification.Right}],highlight:[{id:"none",text:"None",value:"N"},{id:"invert",text:"Invert",value:"I"},{id:"outline",text:"Outline",value:"O"},{id:"push",text:"Push",value:"P"},{id:"toggle",text:"Toggle",value:"T"}],rotate:[{id:"rotate_0",text:"0",value:0},{id:"rotate_90",text:"90",value:90},{id:"rotate_180",text:"180",value:180},{id:"rotate_270",text:"270",value:270}],eslSignatureType:[{id:a.default.FieldStyle.Signature,text:"Signature",value:a.default.FieldStyle.Signature},{id:a.default.FieldStyle.Initials,text:"Initials",value:a.default.FieldStyle.Initials}],eslFieldType:[{id:a.default.FieldStyle.CheckBox,text:"Check Box",value:a.default.FieldStyle.CheckBox},{id:a.default.FieldStyle.RadioButton,text:"Radio Button",value:a.default.FieldStyle.RadioButton},{id:a.default.FieldStyle.TextInput,text:"Text Field",value:a.default.FieldStyle.TextInput},{id:a.default.FieldStyle.DropDown,text:"List",value:a.default.FieldStyle.DropDown},{id:a.default.FieldStyle.Title,text:"Signer Title",value:a.default.FieldStyle.Title},{id:a.default.FieldStyle.Company,text:"Signer Company",value:a.default.FieldStyle.Company},{id:a.default.FieldStyle.Name,text:"Signer Name",value:a.default.FieldStyle.Name},{id:a.default.FieldStyle.Email,text:"Signer E-Mail",value:a.default.FieldStyle.Email},{id:a.default.FieldStyle.Date,text:"Signing Date",value:a.default.FieldStyle.Date}]}},r1RI:function(t,e,n){"use strict";var r=i(n("Xxa5")),a=i(n("exGp")),o=i(n("C3UN"));function i(t){return t&&t.__esModule?t:{default:t}}n("v1ab"),n("k+uf"),n("c4if"),n("JARy");angular.module("bl-editmodule-module",["bl-edit-module","bl-edit-chariterator-module","bl-edit-caret-module","pdf-manager-module","ui-viewer-textedit-module"]).factory("bl-editmodule-service",["$rootScope","bl-edit-service","bl-edit-chariterator-factory","bl-edit-caret-factory","pdf-manager-factory","ui-viewer-textedit-factory","ui-helper-factory",function(t,e,n,i,l,u,d){var s=this,c={},f=d.ondemand.getUiViewerActionsFactory();return c.createAndSetCaret=function(){var t=(0,a.default)(r.default.mark(function t(e,n,a){var o,l,u,d,c;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null,e&&n){t.next=3;break}return t.abrupt("return",o);case 3:if(l=e.document){t.next=6;break}return t.abrupt("return",o);case 6:if(!a){t.next=12;break}(u=i.createInstance(l)).moveTo(n),e.setHighlightNamed("TextEditHighlight",u),t.next=19;break;case 12:return e.setHighlight(null),d={},(c=i.createInstance(l,d)).moveTo(n),t.next=18,e.setSelectionAndTool("TextEdit",c);case 18:o=t.sent;case 19:return t.abrupt("return",o);case 20:case"end":return t.stop()}},t,s)}));return function(e,n,r){return t.apply(this,arguments)}}(),c.setupTextEditTool=function(t,e){var r=t.document,a=t.getPageAtPoint(e),d=r.getPage(a),s=t.mapPointToPage(a,e),c=u.getSelectedFont(r),p=o.default.FontStyle.Regular;c.isItalic&&c.isBold?p=o.default.FontStyle.BoldItalic:c.isItalic?p=o.default.FontStyle.Italic:c.isBold&&(p=o.default.FontStyle.Bold),l.createTextBlock(r.id,a,s.x,s.y,c.descriptor.text,c.size.id,c.color,p,c.descriptor.value.format).then(function(e){if(e){var a=d.textBlocks.indexOf(e);if(!(a<0)){var o=n.createBeginCharIteratorForTextBlock(r,d,d.content,a),l=i.createInstance(r,{});l.moveTo(o),t.setSelectionAndTool("TextEdit",l,function(){f.then(function(e){window.deviceDetect.isPhone()&&e.switchPopupTextEditVisibilityExt(t)})})}}})},c}]),window.mainApp.factory("bl-editmodule-service",getConstructor("bl-editmodule-module","bl-editmodule-service","factory"))},rJ5S:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("C3UN"));n("spXM"),n("KcDN"),n("tOuE"),n("FEK/"),n("bcZM"),n("v1ab"),n("XT+9");angular.module("bl-edit-annot-module",["bl-edit-annoteditobject-module","bl-edit-lineannoteditselection-module","bl-edit-stampannoteditselection-module","bl-edit-widgetannoteditselection-module","bl-edit-module","pdf-feature-module","bl-edit-polylineannoteditselection-module"]).service("bl-edit-annot-service",["$rootScope","bl-edit-annoteditobject-factory","bl-edit-lineannoteditselection-factory","bl-edit-stampannoteditselection-factory","bl-edit-widgetannoteditselection-factory","bl-edit-service","pdf-feature-factory","bl-edit-polylineannoteditselection-factory",function(t,e,n,a,o,i,l,u){var d=function(t,e){return l.isFeaturePermitted(t,e)},s={};return s.select=function(t,l,s,c){if(!t||l<0||!s)return null;if(c||t.resetSelection(!0),l>=t.document.getPagesCount())return null;if(!c&&!function(t,e,n){var a=e.type;if(a===r.default.pdfAnnotationType.widget){var o="Forms.Common";if(e.acroform&&e.acroform.type===r.default.pdfAcroformType.signature&&(o="Secure.Common"),d(o,n))return!0}else if(a===r.default.pdfAnnotationType.link){if(d("Edit.Common",n))return!0}else if(d("Comment.Common",n))return!0;return!1}(0,s,!0))return null;switch(s.type){case r.default.pdfAnnotationType.line:return n.select(t,l,s,c);case r.default.pdfAnnotationType.stamp:return a.select(t,l,s,c);case r.default.pdfAnnotationType.widget:return o.select(t,l,s,c);case r.default.pdfAnnotationType.polygon:case r.default.pdfAnnotationType.polyLine:return u.select(t,l,s,c);default:return function(t,n,r,a){var o=null;if(!t||n<0||!r)return null;var l=t.document,u=null;a||(u=i.collectAnnotSnapData(t,n,r));var d=e.createInstance(l,n,r,u);return a?t.setHighlightNamed("AnnotEdit",d):o=t.setSelectionAndTool("AnnotEdit",d),o}(t,l,s,c)}},s}]),window.mainApp.service("bl-edit-annot-service",getConstructor("bl-edit-annot-module","bl-edit-annot-service","service"))},rL2z:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.module=void 0;var r=i(n("Xxa5")),a=i(n("exGp")),o=i(n("7t+N"));function i(t){return t&&t.__esModule?t:{default:t}}var l=angular.module("paygw-module",["authentication-module","ui-usersettings-module"]);function u(t,e,n,i,l,u){var d={appName:i.appName,partner:""},s=function(t){return i.paygw+t+"/soda pdf online"},c=function(){var t=(0,a.default)(r.default.mark(function t(e,n,a){var i,c,f,p,g,h,y;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getUserSettingsFactory();case 2:return i=t.sent,c=s(e),a&&a.id&&(f=isUndefinedOrNull(l.authentication)||isUndefinedOrNull(l.authentication.products)?null:l.authentication.products.getAssignedProduct(),a.productstatus=isUndefinedOrNull(f)?"":f.status),p=void 0,jTracking.ready&&jTracking.ready(function(t){p=!0===a.checkoutT?t.getCheckoutTracking():t.getTracking()}),a&&(p=o.default.extend({},p,a)),d.partner&&(p=o.default.extend({},p,{partner:d.partner})),p.lang=i.settings.language,(g=l.hasAuthenticatedRefreshTokenValue())&&(p.refresh_token=g,p.userstatus=l.authentication.status),isUndefinedOrNull(l.pgwtrailer)||(p.pgwtrailer=l.pgwtrailer),"join"===e?(n&&(p.tobuy=n),p.license||(h=isUndefinedOrNull(l.authentication)||isUndefinedOrNull(l.authentication.products)?null:l.authentication.products.getAssignedProduct(),(y=isUndefinedOrNull(h)?"":h.unitName)&&(p.license=y))):"custom"===e&&(p.customvalue=n),c+="/?",c+=o.default.param(p),t.abrupt("return",c);case 17:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}();return d.goToLink=function(){var t=(0,a.default)(r.default.mark(function t(e,n,a){var o,i,l,u;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return o=n||"",i=a||{},t.next=6,c(e,o,i);case 6:l=t.sent,(u=window.open(l,"_blank"))?u.focus():alert("Please allow popups for this site");case 9:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),d.downloadApp=function(){return u.getUserSettingsFactory().then(function(t){var e="http://desktop.sodapdf.com/download.ashx?productcode=sodapdf$params=",n=t.settings.language,r=void 0;jTracking.ready&&jTracking.ready(function(t){r=t.getTracking()}),r.language=n,e+=o.default.param(r),e+="$dwld=desktop.sodapdf.com/";var a=window.open(e,"_blank");a?a.focus():alert("Please allow popups for this site")}),!1},u.itemLazyLoader.makeReady("paygw-factory"),d}e.module=l,l.factory("paygw-factory",u),u.$inject=["$rootScope","$http","$q","GLOBAL","authentication-service","ui-helper-factory"],window.mainApp&&mainApp.factory("paygw-factory",getConstructor("paygw-module","paygw-factory","factory"))},sVJW:function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("VmtT"));function o(t){return t&&t.__esModule?t:{default:t}}n("v1ab"),n("Ij0n");var i="bl-views-frametracker-factory";angular.module("bl-views-frametracker-module",["bl-edit-module","transformer-painter-module"]).factory(i,["$rootScope","transformer-painter-service","bl-edit-service",function(t,e,n){var o=a.default.LookAndFeel.SnapLinesColor,i=function(t,a,i,l){var u=t,d=a,s=i,c=l,f=!1,p=-1,g={x:0,y:0},h={x:0,y:0},y=!1,m=null,v=null;this.reset=function(){f=!1,p=-1,g={x:0,y:0},h={x:0,y:0},y=!1,m=null,v=null};var T=this;T.getRect=function(){var t=[];t[0]=Math.min(g.x,h.x),t[1]=Math.max(g.y,h.y),t[2]=Math.max(g.x,h.x),t[3]=Math.min(g.y,h.y);var e=r.default.rect(t[0],t[1],t[2],t[3]),n=d.mapRectToDevice(p,e),a=e.left_bottom(),o=e.getSize(),i=r.default.rect(0,o.height,o.width,0);if(m=null,n.getWidth()<5||n.getHeight()<5){var l=d.document,s=l.getPage(p),c=r.default.rect(-u.width,u.height,0,0),f=s.getRotate(l.rotate);if(c=r.default.rotationMatrix(r.default.degreeToRadian(f)).mapRect(c),(i=r.default.unionRects(i,c)).offset(a.x,a.y),v){var y=l.zoom,T=r.default.point(0,0),P={zoom:y,snapToGrid:d.isGridEnabled()},b=v.snapMove(i,T,P);if(b){m=b.snapInfo;var M=b.snappedAnchor;i.offset(M.x,M.y)}}}else i.offset(a.x,a.y);return i},this.getPageIndex=function(){return p},this.onMouseDown=function(t){var e=d.getPageAtPoint(t);if(-1!=e){var n=d.mapPointToPage(e,t);return p=e,g=n,h=n,f=!0,!0}return!1},this.onMouseUp=function(t){if(f){var e=d.mapPointToPage(p,t);return h=e,f=!1,y=!0,d.invalidate(),!0}return!1},this.onMouseMove=function(t){if(f){var e=d.mapPointToPage(p,t);h=e,d.invalidate()}else{var r=d.getPageAtPoint(t);if(-1==r)return p=-1,d.invalidate(),!1;var a=d.mapPointToPage(r,t);p!=r&&(p=r,y=!0),y&&(-1!=p&&(v=n.collectSnapData(d,p)),y=!1),g=a,h=a,d.invalidate()}return!0},this.draw=function(t,n){if(n===p){var a=T.getRect();e.drawFrame(t,r.default.quadFromRect(a),c,s),function(t){m&&e.drawSnapInfo(t,m,o)}(t)}},this.dispose=function(){}};return{createInstance:function(t,e,n,r){return new i(t,e,n,r)}}}]),window.mainApp.factory(i,getConstructor("bl-views-frametracker-module",i,"factory"))},spXM:function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("C3UN"));function o(t){return t&&t.__esModule?t:{default:t}}n("5UMD");var i="bl-edit-annoteditobject-factory";angular.module("bl-edit-annoteditobject-module",["bl-edit-utilites-module","pdf-manager-module"]).factory(i,["$rootScope","$q","bl-edit-utilites-service","pdf-manager-factory",function(t,e,n,o){var i={kTransformNone:0,kTransformMove:1,kTransformScale:2,kTransformRotate:3};return{createInstance:function(l,u,d,s){return new function(l,u,d,s){var c=this,f=l,p=u,g=d,h=s,y=null,m=i.kTransformNone,v=r.default.rect();g&&g.rect&&(v=g.rect.copy());var T=f.getPage(p);c.getDoc=function(){return f},c.getPageIndex=function(){return p},c.getAnnot=function(){return g},c.getAnnotSubtype=function(){return g.type},c.getRect=function(){return g?g.rect:null},c.hitTest=function(t){var e=c.getRect();return!!e&&e.containsPoint(t)},c.setOperation=function(t){m=t},c.getOperation=function(){return m},c.setOperationRect=function(t){v=n.correctRectToRespectPageBox(T.getCropBox(),t)},c.getOperationRect=function(){return v},c.endOperation=function(){y=null;var t=c.getRect();if(v&&!v.isEqual(t)){var n=v.copy();return n.top<n.bottom&&(n.bottom=[n.top,n.top=n.bottom][0]),o.changeAnnotationProperties(f,g,p,{R:n.asArray()}).finally(function(){v=g.rect.copy(),m=i.kTransformNone})}return m=i.kTransformNone,e.when()},c.delete=function(){return o.deleteAnnotation(f,g,p).then(function(e){t.$emit("event:delete-annotation",e)})},c.getSnapData=function(){return h},c.setSnapInfo=function(t){y=t},c.getSnapInfo=function(){return y};var P=a.default.EditModes.Properties|a.default.EditModes.Move|a.default.EditModes.Remove;g.type!==a.default.pdfAnnotationType.text&&(P|=a.default.EditModes.Resize),g.isMarkup()&&g.type!==a.default.pdfAnnotationType.freeText&&(P|=a.default.EditModes.Comment);var b=deviceDetect.isPhone()?a.default.EditModes.Move:P;c.setCurrentEditMode=function(t){b=t},c.hasAnyCurrentEditMode=function(t){return!!(b&t)},c.hasAnyEditMode=function(t){return!!(P&t)}}(l,u,d,s)},TransformType:i,HandleType:{kHandleNone:0,kHandleTopLeft:1,kHandleTopRight:2,kHandleBottomRight:3,kHandleBottomLeft:4,kHandleTopMiddle:5,kHandleRightMiddle:6,kHandleBottomMiddle:7,kHandleLeftMiddle:8}}}]),window.mainApp.factory(i,getConstructor("bl-edit-annoteditobject-module",i,"factory"))},tOuE:function(t,e,n){"use strict";var r=u(n("HSQo")),a=u(n("C3UN")),o=u(n("b8L+")),i=u(n("VmtT")),l=u(n("IZAc"));function u(t){return t&&t.__esModule?t:{default:t}}n("ibFd"),n("iMU4"),n("Ij0n"),n("F1Q0"),n("v1ab");var d="bl-edit-stampannoteditselection-module",s="bl-edit-stampannoteditselection-factory";angular.module(d,["bl-edit-baseannoteditselection-module","bl-edit-stampannoteditobject-module","transformer-painter-module","bl-edit-module","bl-object-properties-module","pdf-manager-module"]).factory(s,["$rootScope","bl-edit-baseannoteditselection-factory","bl-edit-stampannoteditobject-factory","transformer-painter-service","bl-edit-service","bl-object-properties-factory","pdf-manager-factory",function(t,e,n,u,d,s,c){var f=i.default.LookAndFeel.AnnotTransformerFrameColor,p=i.default.LookAndFeel.SnapLinesColor,g=l.default.createInstance("#FFFFFFFF");return{createInstance:function(){var t=e.createInstance();return t.draw=function(e,r){var l=t.AnnotEditObject_;if(r==l.getPageIndex()){var d=null;if(l.getOperation()==n.TransformType.kTransformNone)d=o.default.quadFromRect(l.getRect());else{var s=o.default.quadFromRect(l.getRect());if(u.drawFrame(e,s,null,f,[10]),d=o.default.quadFromRect(l.getOperationRect()),l.getOperation()==n.TransformType.kTransformRotate){var c=l.getOperationRotate();d=o.default.rotationMatrix(c,d.getCenter()).mapQuad(d)}else{var h=l.getSnapInfo();h&&u.drawSnapInfo(e,h,p)}}if(u.drawFrame(e,d,null,f),l.getOperation()==n.TransformType.kTransformNone){var y=i.default.LookAndFeel.TransformerAnchorRadius,m=[];if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&m.push(d.top_left()),l.hasAnyCurrentEditMode(a.default.EditModes.Move|a.default.EditModes.Resize|a.default.EditModes.Rotate))if(deviceDetect.isPhone()){var v={fillColor:"#3688dc",anchorRadius:y+5,shadow:!0,font:"19px icomoon",textColor:"#ffffff",textOffsetX:-9,textOffsetY:8};l.hasAnyCurrentEditMode(a.default.EditModes.Move)?v.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Resize)?v.text="":l.hasAnyCurrentEditMode(a.default.EditModes.Rotate)&&(v.text=""),u.drawMarker(e,v.fillColor,f,d.top_right(),v.anchorRadius,v)}else u.drawMarker(e,g,f,d.top_right(),y);l.hasAnyCurrentEditMode(a.default.EditModes.Resize|a.default.EditModes.Rotate)&&(m.push(d.bottom_right()),m.push(d.bottom_left()),m.push(d.top_center()),m.push(d.center_right()),m.push(d.bottom_center()),m.push(d.center_left()));for(var T=0;T<m.length;++T)u.drawMarker(e,g,f,m[T],y)}}},t.getProperties=function(){var e=this.getSelectionData().getAnnot(),n=s.createMainGroup(function(n){return c.changeAnnotationProperties(t.DocumentView_.getDocument(),e,t.AnnotEditObject_.getPageIndex(),n)}),o={flags:e.flags,getFullPropData:function(){return this.flags}};return(0,r.default)(o,{locked:{get:function(){return 0!=(this.flags&a.default.pdfAnnotationFlag.Locked)},set:function(t){t?this.flags|=a.default.pdfAnnotationFlag.Locked:this.flags&=~a.default.pdfAnnotationFlag.Locked}}}),function(){var t=s.createPropValue("Stamp","T"),r=s.createProperty(a.default.objectPropertyType.textlabel,t,"Type"),i=s.createSubGroup("Type",[r]);n.addToTabGroup(a.default.objectPropertyGroupType.general,i);var l=e.titleText,u=s.createPropValue(l,"Tx"),d=s.createProperty(a.default.objectPropertyType.textedit,u,"Author"),c=e.subjectText,f=s.createPropValue(c,"SJ"),p=s.createProperty(a.default.objectPropertyType.textedit,f,"Subject"),g=s.createSubGroup("Info",[d,p]);n.addToTabGroup(a.default.objectPropertyGroupType.general,g);var h=new Date(e.modificationDate),y=s.createPropValue(h,"MD"),m=s.createProperty(a.default.objectPropertyType.textlabel,y,"Modified",a.default.objectPropertyStyle.dateTime),v=s.createPropValue(o,"F",["locked"]),T=s.createProperty(a.default.objectPropertyType.select,v,"Locked",a.default.objectPropertyStyle.bool),P=s.createSubGroup("Modify",[m,T]);n.addToTabGroup(a.default.objectPropertyGroupType.general,P)}(),n.defaultTab=0,n},t},select:function(t,e,r,a){var o=null;if(!t||e<0||!r)return null;var i=t.document,l=null;a||(l=d.collectAnnotSnapData(t,e,r));var u=n.createInstance(i,e,r,l);return a?t.setHighlightNamed("StampAnnotEdit",u):o=t.setSelectionAndTool("StampAnnotEdit",u),o}}}]),window.mainApp.factory(s,getConstructor(d,s,"factory"))},tQXD:function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("C3UN"));function o(t){return t&&t.__esModule?t:{default:t}}n("5UMD");var i="bl-edit-textblocktransformer-module",l="bl-edit-textblocktransformer-factory";angular.module(i,["bl-edit-utilites-module","pdf-manager-module"]).factory(l,["$q","$rootScope","bl-edit-utilites-service","pdf-manager-factory",function(t,e,n,o){var i=function(t){var e=r.default.identityMatrix();e=e.multiply(r.default.scalingMatrix(t.size.width,t.size.height));var n=r.default.scalingMatrix((t.size.width+10)/t.size.width,(t.size.height+4)/t.size.height).multiply(r.default.translationMatrix(-5,2));return e=e.multiply(n),t.reflect&&(e=e.multiply(r.default.reflectYMatrix())),e=(e=e.multiply(r.default.rotationMatrix(t.rotation))).multiply(r.default.translationMatrix(t.position.x,t.position.y))},l=function(t){var e={position:r.default.point(),size:r.default.size(),rotation:0,reflect:!1};e.size.width=Math.sqrt(t.a*t.a+t.b*t.b);var n=t.b/e.size.width,a=t.a/e.size.width;e.rotation=Math.atan2(n,a),e.size.height=t.d*a-t.c*n,e.size.height<0?(e.size.height=-e.size.height,e.reflect=!0):e.reflect=!1,e.size.width-=10,e.size.height-=4,e.position.x=0,e.position.y=0;var o=i(e).invert();return o=o.multiply(t),e.position.x=o.e,e.position.y=o.f,e},u=function(t,e){var n=r.default.quad();return n.tl=t.mapPoint(r.default.point(e.left,e.top)),n.tr=t.mapPoint(r.default.point(e.right,e.top)),n.bl=t.mapPoint(r.default.point(e.left,e.bottom)),n.br=t.mapPoint(r.default.point(e.right,e.bottom)),n};return{createInstance:function(e,d,s){return new function(e,d,s){var c=e,f=d,p=c.getPage(f),g=s,h=null,y=null,m=a.default.TransformType.TRANSFORM_NONE,v=r.default.identityMatrix(),T=r.default.identityMatrix(),P={},b=this;b.updateTransform=function(){var t={position:r.default.point(),size:r.default.size(),rotation:0,reflect:!1};t.position=g.rect.left_top(),t.size=g.rect.getSize(),t.rotation=g.rotate,t.reflect=g.reflect,v=i(t)},b.updateTransform(),b.getDocument=function(){return c},b.getTextBlock=function(){return g},b.getPageIndex=function(){return f},b.getBBox=function(){var t=b.getUserSpaceRect();return v.mapRect(t)},b.isPerformingOperation=function(){return m!=a.default.TransformType.TRANSFORM_NONE},b.getOperationType=function(){return m},b.startOperation=function(t){m=t,T=v.copy()},b.endOperation=function(e){if(y=null,!v.isEqual(T)){var n=l(T),i=m;switch(i){case a.default.TransformType.TRANSFORM_MOVE:case a.default.TransformType.TRANSFORM_ROTATE:case a.default.TransformType.TRANSFORM_SCALE:case a.default.TransformType.TRANSFORM_RESIZE_BLOCK:var u=r.default.rect(n.position.x,n.position.y,n.position.x+n.size.width,n.position.y+n.size.height);return m=a.default.TransformType.TRANSFORM_NONE,e||(e=t.when),e().then(function(){return o.transformTextBlock(c,f,g,u,n.rotation,n.reflect,i===a.default.TransformType.TRANSFORM_SCALE).then(function(){b.updateTransform()})})}}return m=a.default.TransformType.TRANSFORM_NONE,t.reject()},b.delete=function(){o.deleteTextBlock(c,f,g)},b.getTransform=function(){return v},b.setOperationTransform=function(t){var e=p.getCropBox();T=n.correctCTMToRespectPageBox(e,b.getUserSpaceRect(),t)},b.getOperationTransform=function(){return T},b.getRotationOrigin=function(){return b.getBounds().getCenter()},b.getUserSpaceRect=function(){return r.default.rect(0,0,1,-1)},b.getSnapOperationBounds=function(){var t=l(T),e=r.default.scalingMatrix(t.size.width,t.size.height);return t.reflect&&(e=e.multiply(r.default.reflectYMatrix)),e=(e=e.multiply(r.default.rotationMatrix(t.rotation))).multiply(r.default.translationMatrix(t.position.x,t.position.y)),u(e,b.getUserSpaceRect())},b.getOperationBounds=function(){return u(T,b.getUserSpaceRect())},b.getBounds=function(){return u(v,b.getUserSpaceRect())};var M=function(t,e,n){var a=r.default.pointsSquareDistance(t,e);if(0==a)return r.default.pointsDistance(n,t);var o=r.default.vecDotProduct(r.default.point(n.x-t.x,n.y-t.y),r.default.point(e.x-t.x,e.y-t.y))/a;return o<0?r.default.pointsDistance(n,t):o>1?r.default.pointsDistance(n,e):r.default.pointsDistance(n,r.default.point(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y)))};b.hitTest=function(t){var e=b.getBounds();return 3>=M(e.tl,e.tr,t)||3>=M(e.bl,e.br,t)||3>=M(e.tl,e.bl,t)||3>=M(e.tr,e.br,t)},b.getPosition_PropertyTest=function(){var t=m===a.default.TransformType.TRANSFORM_NONE?v.copy():T.copy();return l(t).position},b.getRotation_PropertyTest=function(){var t=m===a.default.TransformType.TRANSFORM_NONE?v.copy():T.copy();return l(t).rotation},b.getScaling_PropertyTest=function(){var t=m===a.default.TransformType.TRANSFORM_NONE?v.copy():T.copy();return l(t).scaling},b.setSnapData=function(t){h=t},b.getSnapData=function(){return h},b.setSnapInfo=function(t){y=t},b.getSnapInfo=function(){return y};var B=a.default.EditModes.Properties|a.default.EditModes.Move|a.default.EditModes.Rotate|a.default.EditModes.Resize|a.default.EditModes.Remove,L=deviceDetect.isPhone()?a.default.EditModes.Move:B;b.setCurrentEditMode=function(t){L=t},b.hasAnyCurrentEditMode=function(t){return!!(L&t)},b.hasAnyEditMode=function(t){return!!(B&t)},b.addActionButton=function(t,e){P[t]=e},b.getAllActionButtons=function(){return P},b.getActionButtonById=function(t){return P[t]}}(e,d,s)}}}]),window.mainApp.factory(l,getConstructor(i,l,"factory"))},tZNd:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("Jrzz"));function i(t){return t&&t.__esModule?t:{default:t}}n("5UMD");var l="bl-edit-lineannoteditobject-module",u="bl-edit-lineannoteditobject-factory";angular.module(l,["pdf-manager-module"]).factory(u,["$rootScope","$q","pdf-manager-factory","bl-edit-utilites-service","ui-usersettings-factory",function(t,e,n,i,l){var u={kTransformNone:0,kTransformMove:1,kTransformScale:2,kTransformRotate:3,kTransformMovePoint:4},d=function(t){return t?t.vecNormal().vecNormalized():null};return{createInstance:function(t,s,c){return new function(t,s,c){var f=this,p=t,g=s,h=c,y=u.kTransformNone,m=r.default.rect(),v=void 0,T=r.default.point();h&&h.startPoint&&(T=h.startPoint.copy());var P=r.default.point();h&&h.endPoint&&(P=h.endPoint.copy());var b=p.getPage(g),M=void 0,B=1;f.getDoc=function(){return p},f.getPageIndex=function(){return g},f.getAnnot=function(){return h},f.getAnnotSubtype=function(){return h.type},f.getStartPoint=function(){return h.startPoint},f.getEndPoint=function(){return h.endPoint},f.getRect=function(){return h?h.rect:null},f.hitTest=function(t){var e=f.getRect();return!!e&&e.containsPoint(t)},f.setOperation=function(t){y=t,B=h.leaderLineLength,M=r.default.quadFromRect(f.getRect())},f.getOperation=function(){return y},f.setOperationHandle=function(t){v=t},f.getOperationHandle=function(){return v},f.getOperationBounds=function(){return M},f.setOperationStartPoint=function(t){var e=b.getCropBox();T=e.containsPoint(P)||e.containsPoint(t)?t:f.getStartPoint()},f.getOperationStartPoint=function(){return T},f.setOperationEndPoint=function(t){var e=b.getCropBox();P=e.containsPoint(T)||e.containsPoint(t)?t:f.getEndPoint()},f.getOperationEndPoint=function(){return P},f.endOperation=function(){var t=r.default.point();h&&h.startPoint&&(t=h.startPoint.copy());var a=r.default.point();if(h&&h.endPoint&&(a=h.endPoint.copy()),T&&!T.isEqual(t)||P&&!P.isEqual(a)){var i=f.getOperationStartPoint(),d=f.getOperationEndPoint(),s={L:[T.x,T.y,P.x,P.y]};if(h.enableMeasurement){var c=o.default.makeDistanceFormatString(r.default.point(d.x-i.x,d.y-i.y),h.measure,l.settings.layout.units);s.c=c}return n.changeAnnotationProperties(p,h,g,s).finally(function(){T=h.startPoint.copy(),P=h.endPoint.copy(),y=u.kTransformNone})}var m=h.leaderLineLength;return B!==m?n.changeAnnotationProperties(p,h,g,{LL:m}).finally(function(){B=h.leaderLineLength,y=u.kTransformNone}):(y=u.kTransformNone,e.when())},f.delete=function(){return n.deleteAnnotation(p,h,g)},f.transrormObject=function(t){var e=b.getCropBox(),n=!1,a=t.mapPoint(f.getStartPoint());e.containsPoint(a)&&(n=!0);var o=!1,i=t.mapPoint(f.getEndPoint());e.containsPoint(i)&&(o=!0),(n||o)&&(T=a,P=i,M=t.mapQuad(r.default.quadFromRect(f.getRect())))},f.getLeaderLineStartPoint=function(){var t=f.getStartPoint(),e=f.getEndPoint();if(deviceDetect.isPhone()){var n=Math.abs(r.default.pointsDistance(e,t));t=x(t,e,Math.floor(n/3))}var a=d(r.default.point(e.x-t.x,e.y-t.y));return r.default.point(t.x+a.x*h.leaderLineLength,t.y+a.y*h.leaderLineLength)},f.getLeaderLineEndPoint=function(){var t=f.getStartPoint(),e=f.getEndPoint();if(deviceDetect.isPhone()){var n=Math.abs(r.default.pointsDistance(e,t));e=x(t,e,Math.floor(n-n/3))}var a=d(r.default.point(e.x-t.x,e.y-t.y));return r.default.point(e.x+a.x*h.leaderLineLength,e.y+a.y*h.leaderLineLength)},f.setLeaderLinePosition=function(t){if(h){var e=f.getStartPoint(),n=f.getEndPoint(),a=d(r.default.point(n.x-e.x,n.y-e.y)),o=r.default.vecDotProduct(a,t);h.leaderLineLength=o}},f.setOperationRect=function(t){m=i.correctRectToRespectPageBox(b.getCropBox(),t)},f.getOperationRect=function(){return m};var L=a.default.EditModes.Properties|a.default.EditModes.Move|a.default.EditModes.MovePoint|a.default.EditModes.Resize|a.default.EditModes.Remove;h.isMarkup()&&h.type!==a.default.pdfAnnotationType.freeText&&(L|=a.default.EditModes.Comment);var S=deviceDetect.isPhone()?a.default.EditModes.MovePoint:L;function x(t,e,n){var a=Math.abs(r.default.pointsDistance(e,t)),o=1/a*((a-n)*t.x+n*e.x),i=1/a*((a-n)*t.y+n*e.y);return r.default.point(o,i)}f.setCurrentEditMode=function(t){S=t},f.hasAnyCurrentEditMode=function(t){return!!(S&t)},f.hasAnyEditMode=function(t){return!!(L&t)}}(t,s,c)},TransformType:u,HandleType:{kHandleNone:0,kHandleTopLeft:1,kHandleTopRight:2,kHandleBottomRight:3,kHandleBottomLeft:4,kHandleTopMiddle:5,kHandleRightMiddle:6,kHandleBottomMiddle:7,kHandleLeftMiddle:8,kHandleStartPoint:9,kHandleEndPoint:10,kHandleLeaderLineStartPoint:11,kHandleLeaderLineEndPoint:12}}}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))},tneH:function(t,e,n){"use strict";var r=l(n("b8L+")),a=l(n("C3UN")),o=l(n("VmtT")),i=l(n("Jrzz"));function l(t){return t&&t.__esModule?t:{default:t}}n("tZNd");var u="bl-edit-lineannotedit-inputhandler-module",d="bl-edit-lineannotedit-inputhandler-factory";angular.module(u,["bl-edit-lineannoteditobject-module"]).factory(d,["$rootScope","bl-edit-lineannoteditobject-factory","authentication-service",function(t,e,n){n.defaultPreferences;var l={},u=function(t){var n=t,l=!1,u=null,d=!1,s=e.HandleType.kHandleNone,c=r.default.point(),f=void 0,p=void 0,g=function(){var t=u?u.getAnnot():null;return t&&t.isLocked},h=function(t,n,a,o){return function(t,e,n){return r.default.circleContainsPoint(t,e,n)}(n,a,o)?function(t,n){return{type:e.TransformType.kTransformMovePoint,handle:t,active:n}}(t,a):null},y=function(t,r,a){return function(t,r,a){return h(e.HandleType.kHandleStartPoint,r,n.mapPointToDevice(t,u.getStartPoint()),a)}(t,r,a)||function(t,r,a){return h(e.HandleType.kHandleEndPoint,r,n.mapPointToDevice(t,u.getEndPoint()),a)}(t,r,a)||function(t,r,a){return u&&u.getAnnot().enableMeasurement?h(e.HandleType.kHandleLeaderLineStartPoint,r,n.mapPointToDevice(t,u.getLeaderLineStartPoint()),a):null}(t,r,a)||function(t,r,a){return u&&u.getAnnot().enableMeasurement?h(e.HandleType.kHandleLeaderLineEndPoint,r,n.mapPointToDevice(t,u.getLeaderLineEndPoint()),a):null}(t,r,a)},m=function(t){var i,l=void 0,d=u.getPageIndex();if(!((i=n.getVisibleRange()).startPage<=d&&d<=i.endPage))return!1;var s=o.default.LookAndFeel.TransformerScaleZoneRadius;if(u.hasAnyCurrentEditMode(a.default.EditModes.MovePoint)&&(l=y(d,t,s)),l)return l;var c=function(t,e,n){var a=t.mapPointToDevice(e,n.tl),o=t.mapPointToDevice(e,n.tr),i=t.mapPointToDevice(e,n.bl),l=t.mapPointToDevice(e,n.br);return r.default.quadFromPoints(a,o,i,l)}(n,d,r.default.quadFromRect(u.getRect()));if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,c.top_left(),s))return l={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopLeft,active:c.top_left()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,c.top_right(),s))return l={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopRight,active:c.top_right()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Move)&&r.default.circleContainsPoint(t,c.top_right(),s))return l={type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleNone,active:c.top_right()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,c.bottom_left(),s))return l={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomLeft,active:c.bottom_left()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,c.bottom_right(),s))return l={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomRight,active:c.bottom_right()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(c.center_right(),c.center_left())>=3*s){if(r.default.circleContainsPoint(t,c.top_center(),s))return l={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopMiddle,active:c.top_center()};if(r.default.circleContainsPoint(t,c.bottom_center(),s))return l={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomMiddle,active:c.bottom_center()}}if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(c.top_center(),c.bottom_center())>=3*s){if(r.default.circleContainsPoint(t,c.center_left(),s))return l={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleLeftMiddle,active:c.center_left()};if(u.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,c.center_right(),s))return l={type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleRightMiddle,active:c.center_right()}}if(u.hasAnyCurrentEditMode(a.default.EditModes.Rotate)){var f=o.default.LookAndFeel.TransformerRotateZoneRadius;if(r.default.circleContainsPoint(t,c.top_left(),f))return l={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopLeft,active:c.top_left()};if(r.default.circleContainsPoint(t,c.top_right(),f))return l={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopRight,active:c.top_right()};if(r.default.circleContainsPoint(t,c.bottom_left(),f))return l={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomLeft,active:c.bottom_left()};if(r.default.circleContainsPoint(t,c.bottom_right(),f))return l={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomRight,active:c.bottom_right()};if(r.default.pointsDistance(c.center_right(),c.center_left())>=3*s){if(r.default.circleContainsPoint(t,c.top_center(),f))return l={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleTopMiddle,active:c.top_center()};if(r.default.circleContainsPoint(t,c.bottom_center(),f))return l={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleBottomMiddle,active:c.bottom_center()}}if(r.default.pointsDistance(c.top_center(),c.bottom_center())>=3*s){if(r.default.circleContainsPoint(t,c.center_left(),f))return l={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleLeftMiddle,active:c.center_left()};if(r.default.circleContainsPoint(t,c.center_right(),f))return l={type:e.TransformType.kTransformRotate,handle:e.HandleType.kHandleRightMiddle,active:c.center_right()}}}var p=function(t,e){var r=e;return n.mapPointToPage(t,r)}(d,t);return u.hitTest(p)?{type:u.hasAnyCurrentEditMode(a.default.EditModes.Move)?e.TransformType.kTransformMove:e.TransformType.kTransformNone,handle:e.HandleType.kHandleNone,active:t}:null},v=function(t,r,o){var i=a.default.BLCursorType.kBLCursorArrow;switch(t){case e.TransformType.kTransformMove:i=a.default.BLCursorType.kBLCursorMove;break;case e.TransformType.kTransformRotate:u.getAnnotSubtype()!==a.default.pdfAnnotationType.text&&(i=a.default.BLCursorType.kBLCursorRotate);break;case e.TransformType.kTransformScale:var l=n.getPagesRotation(),d=n.document,s=u.getPageIndex(),c=[[0,7,1,3,5,0,2,4,6],[0,5,7,1,3,6,0,2,4],[0,3,5,7,1,4,6,0,2],[0,1,3,5,7,2,4,6,0]][d.getPage(s).getRotate(l)/90][r];i=(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?a.default.BLCursorType.kBLCursorScaleProportional_N:a.default.BLCursorType.kBLCursorScale_N)+c}n.setCursor(i)},T=function(t,a){g()||(!function(t){if(!c.isEqual(t)){var e=r.default.point(t.x-c.x,t.y-c.y);u.transrormObject(r.default.translationMatrix(e.x,e.y)),n.invalidate()}}(t),v(e.TransformType.kTransformMove,s,a))},P=function(t,o){g()||function(t,o){var i=t.copy(),l=u.getRect(),d=Math.abs(l.getWidth()),c=Math.abs(l.getHeight());if(!r.default.floatEq(d,0)&&!r.default.floatEq(c,0)){var f=r.default.point(l.left,l.bottom),p=l.getCenter(),g=2*(i.x-f.x)/d,h=2*(i.y-f.y)/c;i.offset(-f.x,-f.y);var y=i.x/d,m=i.y/c,T=null;switch(s){case e.HandleType.kHandleLeftMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-y,1-y,f).multiply(r.default.translationMatrix(i.x,y*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-g,1-g,p):r.default.scalingMatrix(1-y,1,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(m,m,f).multiply(r.default.translationMatrix((1-m)*d/2,0)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(h-1,h-1,p):r.default.scalingMatrix(1,m,f);break;case e.HandleType.kHandleRightMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(y,y,f).multiply(r.default.translationMatrix(0,(1-y)*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(g-1,g-1,p):r.default.scalingMatrix(y,1,f);break;case e.HandleType.kHandleBottomMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-m,1-m,f).multiply(r.default.translationMatrix(m*d/2,i.y)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-h,1-h,p):r.default.scalingMatrix(1,1-m,f).multiply(r.default.translationMatrix(0,i.y));break;case e.HandleType.kHandleTopLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var P=Math.min(1-y,m);T=r.default.scalingMatrix(P,P,f).multiply(r.default.translationMatrix((1-P)*d,0))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var b=Math.min(1-g,h-1);T=r.default.scalingMatrix(b,b,p)}else T=r.default.scalingMatrix(1-y,m,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var M=Math.min(y,m);T=r.default.scalingMatrix(M,M,f)}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var B=Math.min(g-1,h-1);T=r.default.scalingMatrix(B,B,p)}else T=r.default.scalingMatrix(y,m,f);break;case e.HandleType.kHandleBottomLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var L=Math.min(1-y,1-m);T=r.default.scalingMatrix(L,L,f).multiply(r.default.translationMatrix((1-L)*d,(1-L)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var S=Math.min(1-g,1-h);T=r.default.scalingMatrix(S,S,p)}else T=r.default.scalingMatrix(1-y,1-m,f).multiply(r.default.translationMatrix(i.x,i.y));break;case e.HandleType.kHandleBottomRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var x=Math.min(y,1-m);T=r.default.scalingMatrix(x,x,f).multiply(r.default.translationMatrix(0,(1-x)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var k=Math.min(g-1,1-h);T=r.default.scalingMatrix(k,k,p)}else T=r.default.scalingMatrix(y,1-m,f).multiply(r.default.translationMatrix(0,i.y))}T&&(u.setOperationRect(T.mapRect(l)),u.transrormObject(T)),v(e.TransformType.kTransformScale,s,o),n.invalidate()}}(t,o)},b=function(t,a){g()||c.isEqual(t)||(!function(t){var a=u.getStartPoint().copy(),o=u.getEndPoint().copy(),i=c,l=t;if(!i.isEqual(l)){var d=r.default.point(l.x-i.x,l.y-i.y);switch(s){case e.HandleType.kHandleNone:u.setOperationStartPoint(r.default.point(a.x+d.x,a.y+d.y)),u.setOperationEndPoint(r.default.point(o.x+d.x,o.y+d.y));break;case e.HandleType.kHandleStartPoint:u.setOperationStartPoint(r.default.point(a.x+d.x,a.y+d.y));break;case e.HandleType.kHandleEndPoint:u.setOperationEndPoint(r.default.point(o.x+d.x,o.y+d.y));break;case e.HandleType.kHandleLeaderLineStartPoint:case e.HandleType.kHandleLeaderLineEndPoint:u.setLeaderLinePosition(r.default.point(t.x-a.x,t.y-a.y))}n.invalidate()}}(t),v(e.TransformType.kTransformMovePoint,s,a))};this.initialize=function(t){u=t,n.setMagnifierEnabled(u&&u.getAnnot().enableMeasurement)},this.terminate=function(){n.setMagnifierEnabled(!1)},this.getToolName=function(){return"edit"},this.isFinished=function(){return d},this.handleEvent=function(t){switch(t.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerMoved:return n.isMagnifierEnabled()&&n.onMagnifierPositionChanged(t.pointerArgs.position),this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case a.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonDown=function(t,e){if(l)return!0;var r=u.getPageIndex(),o=m(t);if(!o)return d=!0,!1;if(g())return!!o;if(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpModify,!0)){u.setOperation(o.type),u.setOperationHandle(o.handle),s=o.handle,o.anchor,o.verticeIndex,p=u.getRect().getCenter(),f=0;var i=o.active.floor();c=n.mapPointToPage(r,i),n.invalidate()}return!0},this.onLButtonUp=function(t,r){if(l)return!0;if(u.getOperation()==e.TransformType.kTransformNone)return!1;var a=m(t);return a&&v(a.type,a.handle,r),!!g()||(l=!0,u.endOperation().finally(function(){l=!1,i.default.invalidIndex,n.invalidate()}),!0)},this.onRButtonDown=function(t,e){return!!m(t)},this.onRButtonUp=function(t,e){return!!m(t)&&(n.showContextMenu(a.default.ContextMenuType.Annotation,t,a.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|a.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations),!0)},this.onMouseMove=function(t,o){if(l)return!0;if(g())return!!m(t);var i=n.mapPointToPage(u.getPageIndex(),t);switch(u.getOperation()){case e.TransformType.kTransformNone:var d=m(t);return!!d&&(n.setHighlight(null),v(d.type,d.handle,o),!0);case e.TransformType.kTransformScale:P(i,o);break;case e.TransformType.kTransformMove:T(i,o);break;case e.TransformType.kTransformRotate:!function(t,o){if(!g()&&u){var i=p,l=c,d=t,h=r.default.point(l.x-i.x,l.y-i.y),y=r.default.point(d.x-i.x,d.y-i.y),m=r.default.vecAngleBetween(h,y);if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var T=f+m,P=r.default.degreeToRadian(45);m=(T=(T>0?T/P+.5:T/P-.5)*P)-f}var b=u.getRect().copy();b.offset(y.x,y.y),u.setOperationRect(b),u.transrormObject(r.default.rotationMatrix(m,i)),v(e.TransformType.kTransformRotate,s,o),n.invalidate()}}(i,o);break;case e.TransformType.kTransformMovePoint:b(i,o)}return!0},this.onKeyUp=function(t){return t==a.default.kBLKey.kBLKey_DELETE&&function(t){return!!l||!g()&&"Delete"==t&&(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpDelete,!0)&&(n.setSelection(null),u.delete(),d=!0),!0)}("Delete")}};return l.createInstance=function(t,e){return new u(e)},l}]),window.mainApp.factory(d,getConstructor(u,d,"factory"))},"v+Fc":function(t,e,n){"use strict";var r=o(n("b8L+")),a=o(n("C3UN"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={};return e.createInstance=function(t,e){return new function(t,e){var n=this,o=0,i=0,l=e;n._text="",n.bound=function(){var t=r.default.size(0,l);return n._text.length>0&&(t=u(d,n._text)),r.default.rect(o,i,o+t.width,i+t.height)},n.getRect=function(){return n.bound()},n.getSymbolRect=function(t){var e=r.default.rect();if(n._text.length>t){var a=0;if(t>0){var l=n._text.spliceSlice(0,t);a=(s=u(d,l)).width}l=n._text.spliceSlice(t,1);var s=u(d,l);return r.default.rect(a+o,i,a+o+s.width,i+s.height)}return e},n.getSymbolQuad=function(t){var e=n.getSymbolRect(t);return r.default.quadFromRect(e)},n.scale=function(t){},n.translate=function(t,e){o+=t,i+=e};var u=function t(e,n){var a=(t.calculateTextBoundCanvas||(t.calculateTextBoundCanvas=document.createElement("canvas"))).getContext("2d");a.font=e;var o=a.measureText(n);return r.default.size(o.width,parseInt(e.match(/\d+/)[0]))},d=function(t,e,n){var r="";switch(e){case a.default.GFontStyle.kGFontStyleRegular:r="";break;case a.default.GFontStyle.kGFontStyleBold:r="bold ";break;case a.default.GFontStyle.kGFontStyleItalic:r="italic ";break;case a.default.GFontStyle.kGFontStyleBoldItalic:r="italic bold "}return r+n+"pt "+t}(t,a.default.GFontStyle.kGFontStyleRegular,l)}(t,e)},e}angular.module("form-phrase-factory-module",[]).factory("form-phrase-factory",i),i.$inject=["$rootScope"],window.mainApp.factory("form-phrase-factory",getConstructor("form-phrase-factory-module","form-phrase-factory","factory"))},v1ab:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("b8L+"));n("3Gts"),n("lii2");angular.module("bl-edit-module",["bl-edit-compositeeditobject-module","bl-edit-input-snapdata-module"]).service("bl-edit-service",["$rootScope","bl-edit-compositeeditobject-factory","bl-edit-input-snapdata-factory",function(t,e,n){var a=function(t,a,o,i){var l=t.document;if(!l||-1==a)return null;var u=n.createInstance(),d=l.getPage(a),s=d.annotations;if(!isUndefinedOrNull(s))for(var c=0;c<s.length;++c){var f=s[c];if(i!==f){var p=f.rect;u.addRect(p,!1)}}var g=e.createCompositeEditObjectForPage(t.document,a),h=g.getCount();for(c=0;c<h;++c){var y=g.get(c),m=!1;if(o&&(m=o.compareInternals(y)),!m){var v=y.getBounds().getBound();u.addRect(v,!1)}}var T=d.getPageBox();u.setPageBox(T);var P=t.getPagesRotation(),b=d.getPageToDevSpaceMatrix(1,P),M=b.invert(),B=b.mapRect(T),L=t.getHorzGuideCoords();if(isArray(L)&&L.length>0){c=0;for(var S=L.length;c<S;++c){var x=B.getHeight()-L[c],k=r.default.rect(B.left,x,B.right,x);k=M.mapRect(k),u.addRect(k,!0)}}var R=t.getVertGuideCoords();if(isArray(R)&&R.length>0)for(c=0,S=R.length;c<S;++c){x=R[c],k=r.default.rect(x,B.top,x,B.bottom);k=M.mapRect(k),u.addRect(k,!0)}return u},o={collectSnapData:function(t,e){return a(t,e)},collectObjectSnapData:function(t,e){var n=e.getPageIndex();return a(t,n,e)},collectAnnotSnapData:function(t,e,n){return a(t,e,null,n)}};return o}]),window.mainApp.service("bl-edit-service",getConstructor("bl-edit-module","bl-edit-service","service"))},wEXG:function(t,e,n){"use strict";var r=l(n("b8L+")),a=l(n("C3UN")),o=l(n("IZAc")),i=l(n("eWOG"));function l(t){return t&&t.__esModule?t:{default:t}}n("h2bM"),n("WtRA"),n("PaWa");var u="bl-widget-combobox-view-factory-module",d="bl-widget-combobox-view-factory";function s(t,e,n,l,u,d,s){var c={},f=function(c,f){var p,g=c,h=f,y=!1,m=!1,v=o.default.createInstance("#FF000000"),T=[2],P=this;this.getPageIndex=function(){return h.getPageIndex()},this.getRect=function(){return h.getRect()},this.hitTest=function(t,e){return this.getPageIndex()==t&&(!!(m&&p&&p.hitTest(t,e))||this.getRect().containsPoint(e))},this.mouseDown=function(t,e){if(m&&p&&p.mouseDown(t,e))return!0;var n=x(t);return!!h.getRect().containsPoint(n)&&(h.isEditable()&&!B(n)?(y=!0,e&a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed?h.setCaretAtPoint(n):h.setSelAtPoint(n)):m=!m,g.invalidate(),!0)},this.mouseUp=function(t,e){return!!(m&&p&&p.mouseUp(t,e))||(y&&(y=!1),!1)},this.mouseMove=function(t,e){var n=x(t);return y?(h.setCaretAtPoint(n),g.setCursor(a.default.BLCursorType.kBLCursorIBeam),g.invalidate(),!0):!!(m&&p&&p.mouseMove(t,e))||!!h.getRect().containsPoint(n)&&(h.isEditable()&&!B(n)?g.setCursor(a.default.BLCursorType.kBLCursorIBeam):g.setCursor(a.default.BLCursorType.kBLCursorLinkHand),g.invalidate(),!0)},this.mouseWheel=function(t,e){return!!(m&&p&&p.mouseWheel(t,e))},this.keyDown=function(t,e){var n=k(e,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed),r=k(e,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed);switch(t){case a.default.kBLKey.kBLKey_LEFT:h.goLeft(n);break;case a.default.kBLKey.kBLKey_RIGHT:h.goRight(n);break;case a.default.kBLKey.kBLKey_UP:h.selectPrev(),b();break;case a.default.kBLKey.kBLKey_DOWN:h.selectNext(),b();break;case a.default.kBLKey.kBLKey_HOME:h.goToFirst(n);break;case a.default.kBLKey.kBLKey_END:h.goToLast(n);break;case a.default.kBLKey.kBLKey_BACK:h.isEditable()&&h.onModify()&&h.delete(!0);break;case a.default.kBLKey.kBLKey_DELETE:h.isEditable()&&h.onModify()&&h.delete(!1);break;case a.default.kBLKey.kBLKey_A:r&&h.selectAll()}return g.invalidate(),!0},this.keyUp=function(t,e){return!0},this.charReceived=function(t){if(h.isEditable()){if(t<" ")return!1;var e;e+=t,h.onModify(e)&&(h.keyStroke(null,null,e),g.invalidate())}return!0},this.cut=function(){h.isEditable()&&(this.copy(),this.delete())},this.copy=function(){if(h.hasSelection()&&h.isEditable())h.getSelectedText(),document.execCommand("copy")},this.paste=function(){},this.delete=function(){h.isEditable()&&h.onModify()&&(h.delete(!1),g.invalidate())},this.isEditable=function(){return h.isEditable()},this.hasSelection=function(){return h.hasSelection()},this.draw=function(e,n){if(e==h.getPageIndex()){var a=t.getViewToPageMatrix(g,e),o=h.getRect();n.pushState(),n.concatCTM(a),L(n),window.deviceDetect.isPhone()&&function(t,e){e&&s.drawFrame(t,r.default.quadFromRect(e),null,v,T)}(n,o),m&&p&&p.drawAsComboDropdownList(e,n),n.popState()}},this.canUndo=function(){return h.canUndo()},this.canRedo=function(){return h.canRedo()},this.undo=function(){h.undo(),g.invalidate()},this.redo=function(){h.redo(),g.invalidate()},this.finalize=function(t){void 0===t&&(t=!0),h.clearUndoRedoStack(),t&&h.commitChanges()||h.cancelChanges()};var b=function(){p&&p.setOnSelectionChangedCallBack(null);var e=h.getWidget(),n=h.getPageIndex(),a=d.createInstance(e),o=1+(e.options&&e.options.items?e.options.items:[]).length*i.default.listBox.getFontSize()*i.default.listBox.getLineHeightFactor();o=function(t,e,n){return t>e?t<n?t:n:e}(o,5,100);var s=t.getFieldRect(e),c=r.default.rect(s.min_x(),s.max_y(),s.min_x()+s.getWidth(),s.max_y()+o);t.setFieldRect(a,c);var f=g.getDocument(),y=u.createInstance(f,n,a);(p=l.createInstance(g,y)).setOnSelectionChangedCallBack(M)},M=function(t){h.setSelection(t),h.isEditable()&&h.selectAll(),m=!1,g.invalidate()},B=function(t){var e=h.getWidget();return n.createInstance().hitTest(e,t)},L=function(t){if(h.isEditable()){var e=S();t.fillGeometry(e,backgroudBrush)}},S=function(){var t=h.getSelectorPosition(),n=h.getCaretPosition();t>n&&(n=[t,t=n][0]);for(var a,o=e.createGeometry(),i=0,l=t;l<n;l++){var u=h.getCharQuad(l);if(u.isRect()){var d=u.getBound();0==i?a=d:r.default.isRectsOnSameLine(a,d,1)?a.right=d.right:(a=d,i=1),++i}else a=r.default.rect(),i=0,o.beginFigure(u.top_left()),o.lineTo(u.top_right()),o.lineTo(u.bottom_right()),o.lineTo(u.bottom_left()),o.endFigureClose()}return o},x=function(e){var n=g.mapPointToPage(h.getPageIndex(),e);return n=t.getPageToViewMatrix(g,h.getPageIndex()).mapPoint(n)},k=function(t,e){return 0!=(t&e)};h.setOnSelChangedCallBack(function(e,n){g.invalidate();var o=h.getCharQuad(n),i=r.default.rect(o.top_left().x,o.top_left().y,o.bottom_left().x,o.bottom_left().y),l=h.getBorderStyle(),u=h.getRect();u.inflate(-l.width,-l.width),l.style!=a.default.PDAnnotBorderStyle.kPDAnnotBorderStyleBeveled&&l.style!=a.default.PDAnnotBorderStyle.kPDAnnotBorderStyleInset||u.inflate(-1,-1),i=r.default.intersectRects(i,u,!0),i=t.getViewToPageMatrix(g,h.getPageIndex()).mapRect(i);var d={};d.pageIndex=P.getPageIndex(),d.top=i.left_top(),d.bottom=i.right_bottom(),g.onCaretPositionChanged(d),a.default.BLSelectionOperations.kBLSelectionAllowPaste,e!=n?(a.default.BLSelectionOperations.kBLSelectionAllowCopy,a.default.BLSelectionOperations.kBLSelectionAllowCut):(~a.default.BLSelectionOperations.kBLSelectionAllowCopy,~a.default.BLSelectionOperations.kBLSelectionAllowCut)}),b()};return c.createInstance=function(t,e){return new f(t,e)},c}angular.module(u,[]).factory(d,s),s.$inject=["bl-widget-renderer-service","geometry-factory","bl-widget-combobox-button-factory","bl-widget-listbox-view-factory","bl-widget-listbox-obj-factory","bl-widget-object-factory","transformer-painter-service"],window.mainApp.factory(d,getConstructor(u,d,"factory"))},wSJj:function(t,e,n){"use strict";var r=l(n("b8L+")),a=l(n("C3UN")),o=(l(n("VmtT")),l(n("IZAc"))),i=l(n("eWOG"));function l(t){return t&&t.__esModule?t:{default:t}}n("VVVL");var u="bl-widget-renderer-service-module",d="bl-widget-renderer-service";function s(t,e){var n=1,l="#ffabadd3",u=a.default.pdfAcroformType;return{setFieldRect:function(t,e){if(!t||!e)return;t.setPosition(e.min_x(),e.min_y()),t.setSize(e.getWidth(),e.getHeight())},getFieldRect:s,getPageToViewMatrix:f,getViewToPageMatrix:function(t,e){return f(t,e).invert()},getPageToDevSpaceMatrix:c,drawField:function(t,c,f,h){if(!t||!f)return;var y=s(f);if(y.isAreaEmpty())return;t.pushState();var m=f.fieldType;m===u.choice?f.iCombo&&function(t,u,d,s){var c=u.toString(16),f=o.default.createInstance(c),p=o.default.createInstance(i.default.field.getBackground());t.fillRect(d,p);var h=t.createFontFace(i.default.field.getFontName(),a.default.GFontStyle.kGFontStyleRegular,i.default.field.getFontSize());if(s&&s.length>0){var y=i.default.field.getMargin(),m=g(h,s),v=d.left+y,T=d.top+y;t.pushState(),t.clipRect(d),t.translateCTM(v,T+m.height*i.default.coordinate.getViewRatio()),t.fillText(h,s,f),t.popState()}if(d.getHeight()>2&&d.getWidth()>2){var P=i.default.comboBox.getComboBoxButtonWidth(),b=d.getWidth()/1.5;P>b&&(P=b);var M=d.copy();M.left=M.right-P;var B=268435455&u,L=B.toString(16),S=o.default.createInstance(L);t.fillRect(M,S);var x=M.getCenter(),k=6,R=Math.min(M.getHeight(),P)/2;k>R&&(k=R);var F=.5*k,A=r.default.point(x.x+-F,x.y+-F/2),C=r.default.point(x.x+0,x.y+F/2),E=r.default.point(x.x+F,x.y+-F/2),_=e.createGeometry();_.beginFigure(A),_.lineTo(C),_.lineTo(E),_.endFigure();var I={};I.lineCap=a.default.GLineCap.kGLineCapRound,I.lineJoin=a.default.GLineJoin.kGLineJoinRound,I.miterLimit=10,t.strokeGeometry(_,f,1,I)}f=o.default.createInstance(l),t.strokeRect(d,f,n,null)}(t,"",y,f.getValue()):m===u.text&&(f.options&&f.options.isMultiline?function(t,e,r,u,d){var s=e.toString(16),c=o.default.createInstance(s),f=o.default.createInstance(i.default.field.getBackground());t.fillRect(r,f);var h=t.createFontFace(i.default.field.getFontName(),a.default.GFontStyle.kGFontStyleRegular,i.default.textArea.getFontSize());if(u&&u.length>0){for(var y=u.replace("\r\n","\n"),m=y.split("\n"),v=i.default.textArea.getMargin(),T=r.getWidth()-2*v,P=[],b=0;b<m.length;b++){for(var M=m[b],B=p(M,h,T),L=0;L<B.length;L++){var S=B[L];P.push(S)}B&&0!==B.length||P.push("")}d&&(P=P.slice(d.getTopLine()));for(var x=r.left+v,k=r.top+v,b=0;b<P.length;b++){var M=P[b];if(M){var R=g(h,M);t.pushState(),t.clipRect(r),t.translateCTM(x,k+R.height*i.default.coordinate.getViewRatio()),t.fillText(h,M,c),t.popState()}k+=i.default.textArea.getLineHeightFactor()*i.default.textArea.getFontSize()}}c=o.default.createInstance(l),t.strokeRect(r,c,n,null)}(t,"",y,f.getValue(),d(f,h)):function(t,e,r,u,d){var s=e.toString(16),c=o.default.createInstance(s),f=o.default.createInstance(i.default.field.getBackground());t.fillRect(r,f);var p=t.createFontFace(i.default.field.getFontName(),a.default.GFontStyle.kGFontStyleRegular,i.default.textField.getFontSize());if(u&&u.length>0){var h=u,y=i.default.textField.getMargin(),m=g(p,h),v=r.getCenter(),T=r.left+y,P=Math.max(v.y-m.height/2,r.top+y);t.pushState(),t.clipRect(r),t.translateCTM(T,P+m.height*i.default.coordinate.getViewRatio()),t.fillText(p,h,c),t.popState()}c=o.default.createInstance(l),t.strokeRect(r,c,n,null)}(t,"",y,f.getValue(),d(f,h)));t.popState()}};function d(t,e){if(e&&"TextField"===e.getType()){var n=e.getSelectionData(),r=n.getModel?n.getModel():null;if(r){var a=r.getWidget?r.getWidget():null;if(a&&a===t)return r}}return null}function s(t){return r.default.rect(t.getX(),t.getY(),t.getX()+t.getWidth(),t.getY()+t.getHeight())}function c(t,e){var n=(t.rotate+e)%360,a=t.getPageBox(),o=t.getUserUnitSize();switch(n){case 90:return r.default.matrix(0,o,o,0,o*-a.bottom,o*-a.left);case 180:return r.default.matrix(-o,0,0,o,o*a.right,o*-a.bottom);case 270:return r.default.matrix(0,-o,-o,0,o*a.top,o*a.right);default:return r.default.matrix(o,0,0,-o,o*-a.left,o*a.top)}}function f(t,e){return c(t.getDocument().getPage(e),0)}function p(t,e,n){var r=[];if(!t)return r;for(var a=0,o="",i=0;i<t.length;i++){var l=t[i],u=g(e,l);o?a+u.width<n?a=g(e,o+=l).width:(r.push(o),o=l,a=u.width):(o=l,a=u.width)}return o&&r.push(o),r}function g(t,e){var n=r.default.size();return e&&(n=h(t,e)),n}function h(t,e){var n=(h.calculateTextBoundCanvas||(h.calculateTextBoundCanvas=document.createElement("canvas"))).getContext("2d");n.font=t;var a=n.measureText(e);return r.default.size(a.width,parseInt(t.match(/\d+/)[0]))}}angular.module(u,["geometry-factory-module"]).service(d,s),s.$inject=["$translate","geometry-factory"],window.mainApp.service(d,getConstructor(u,d,"service"))},x5r3:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n("VmtT"));n("Ij0n");var a="bl-edit-clip-create-selection-module",o="bl-edit-clip-create-selection-factory";angular.module(a,["transformer-painter-module"]).factory(o,["$rootScope","transformer-painter-service",function(t,e){return{createInstance:function(){return new function(){var t=null,n=null,a=null;this.init=function(e,o){t=o,n=r.default.LookAndFeel.ClipEditTransformerObjectColor,a=r.default.LookAndFeel.ClipCreationFrameColor},this.getType=function(){return"ClipCreate"},this.getSelectionData=function(){return t},this.draw=function(r,o){if(o==t.getPageIndex()){var i=t.getElement();r.paintClipGeometries(n,i.clip);var l=i.getQuad();e.drawFrame(r,l,null,a)}},this.hitTest=function(e,n){return e==t.getPageIndex()&&t.hitTest(n)},this.getDestination=function(){var e={};return e.pPageIndex=t.getPageIndex(),e.pRect=t.getBound(),e}}}}}]),window.mainApp.factory(o,getConstructor(a,o,"factory"))},xfDw:function(t,e,n){"use strict";var r=i(n("C3UN")),a=i(n("b8L+")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}n("5QSM"),n("Ij0n");var l="bl-ocr-idrs-selection-factory";angular.module("bl-ocr-idrs-selection-module",["bl-ocr-idrs-zone-factory-module","transformer-painter-module"]).factory(l,["$q","$rootScope","bl-ocr-idrs-zone-factory","transformer-painter-service",function(t,e,n,i){return{createInstance:function(t,e){return new function(t,e){var l=t,u=e,d=u.getZone(),s=n.getZoneColor(d.getType());this.draw=function(t){var e=s,n=s,d=null;if(u.isPerformingOperation()){var c=u.getBounds();c=l.getLayout().mapQuadToView(c),i.drawFrame(t,c,null,e,[10]),d=u.getOperationBounds(),d=l.getLayout().mapQuadToView(d);var f=a.default.quadFromRect(d.getBound());i.drawFrame(t,f,null,n)}else d=u.getBounds(),d=l.getLayout().mapQuadToView(d);i.drawFrame(t,d,null,e);var p=[d.top_left(),d.top_right(),d.bottom_right(),d.bottom_left(),d.top_center(),d.center_right(),d.bottom_center(),d.center_left()],g=d.getCenter(),h=o.default.LookAndFeel.TransformerAnchorRadius,y=o.default.LookAndFeel.TransformerOriginRadius;if(u.isPerformingOperation())switch(u.getOperationType()){case r.default.TransformType.TRANSFORM_MOVE:break;case r.default.TransformType.TRANSFORM_ROTATE:case r.default.TransformType.TRANSFORM_SCALE:i.drawOrigin(t,"#FFFFFF",e,g,h,y)}else for(var m=0;m<p.length;++m)i.drawMarker(t,"#FFFFFF",e,p[m],h)},this.drawHighlight=function(t){var e=o.default.LookAndFeel.ImageTransformerHighlightColor,n=u.getBounds();n=l.getLayout().mapQuadToView(n),i.drawFrame(t,n,null,e,null)},this.getQuad=function(){return u.getBounds()},this.hitTest=function(t){return u.hitTest(t)}}(t,e)}}}]),window.mainApp.factory(l,getConstructor("bl-ocr-idrs-selection-module",l,"factory"))},zNji:function(t,e,n){"use strict";var r=i(n("b8L+")),a=i(n("C3UN")),o=i(n("VmtT"));function i(t){return t&&t.__esModule?t:{default:t}}n("spXM");var l="bl-edit-annotedit-inputhandler-module",u="bl-edit-annotedit-inputhandler-factory";angular.module(l,["bl-edit-annoteditobject-module"]).factory(u,["$rootScope","bl-edit-annoteditobject-factory",function(t,e){var n={},i=function(t){var n=t,i=!1,l=null,u=!1,d=e.HandleType.kHandleNone,s=r.default.point(),c=function(){var t=l?l.getAnnot():null;return t&&t.isLocked},f=function(t){var i,u=l.getPageIndex();if(!((i=n.getVisibleRange()).startPage<=u&&u<=i.endPage))return!1;var d=o.default.LookAndFeel.TransformerScaleZoneRadius,s=function(t,e,n){var a=t.mapPointToDevice(e,n.tl),o=t.mapPointToDevice(e,n.tr),i=t.mapPointToDevice(e,n.bl),l=t.mapPointToDevice(e,n.br);return r.default.quadFromPoints(a,o,i,l)}(n,u,r.default.quadFromRect(l.getRect()));if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.top_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopLeft,active:s.top_left()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.top_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopRight,active:s.top_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Move)&&r.default.circleContainsPoint(t,s.top_right(),d))return{type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleNone,active:s.top_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.bottom_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomLeft,active:s.bottom_left()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.bottom_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomRight,active:s.bottom_right()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(s.center_right(),s.center_left())>=3*d){if(r.default.circleContainsPoint(t,s.top_center(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleTopMiddle,active:s.top_center()};if(r.default.circleContainsPoint(t,s.bottom_center(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleBottomMiddle,active:s.bottom_center()}}if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.pointsDistance(s.top_center(),s.bottom_center())>=3*d){if(r.default.circleContainsPoint(t,s.center_left(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleLeftMiddle,active:s.center_left()};if(l.hasAnyCurrentEditMode(a.default.EditModes.Resize)&&r.default.circleContainsPoint(t,s.center_right(),d))return{type:e.TransformType.kTransformScale,handle:e.HandleType.kHandleRightMiddle,active:s.center_right()}}var c=n.mapPointToPage(u,t);return l.hitTest(c)?l.hasAnyCurrentEditMode(a.default.EditModes.Move)?{type:e.TransformType.kTransformMove,handle:e.HandleType.kHandleNone,active:t}:{type:e.TransformType.kTransformNone,handle:e.HandleType.kHandleNone,active:t}:null},p=function(){return function(){if(l.getAnnotSubtype()===a.default.pdfAnnotationType.widget){var t=l.getAnnot();return t&&t.acroform&&t.acroform.type===a.default.pdfAcroformType.signature}return!1}()?a.default.ContextMenuType.Signature:l.getAnnotSubtype()===a.default.pdfAnnotationType.link?a.default.ContextMenuType.Link:a.default.ContextMenuType.Annotation},g=function(t,r,o){var i=a.default.BLCursorType.kBLCursorArrow;switch(t){case e.TransformType.kTransformMove:i=a.default.BLCursorType.kBLCursorMove;break;case e.TransformType.kTransformRotate:l.getAnnotSubtype()!=a.default.pdfAnnotationType.text&&(i=a.default.BLCursorType.kBLCursorRotate);break;case e.TransformType.kTransformScale:if(l.getAnnotSubtype()!=a.default.pdfAnnotationType.text){var u=n.getPagesRotation(),d=n.document,s=l.getPageIndex(),c=[[0,7,1,3,5,0,2,4,6],[0,5,7,1,3,6,0,2,4],[0,3,5,7,1,4,6,0,2],[0,1,3,5,7,2,4,6,0]][d.getPage(s).getRotate(u)/90][r];i=(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?a.default.BLCursorType.kBLCursorScaleProportional_N:a.default.BLCursorType.kBLCursorScale_N)+c}}n.setCursor(i)},h=function(t,o){!function(t,e){var a=l.getRect(),o=s.copy(),i=t.copy();if(!o.isEqual(i)){l.setSnapInfo(null);var u=r.default.point(i.x-o.x,i.y-o.y),d=a.copy();if(d.offset(u.x,u.y),l.setOperationRect(d),e){var c=l.getSnapData();if(c){var f;f=n.getZoom();var p=l.getOperationRect(),g=null,h=r.default.point(),y={zoom:f,snapToGrid:n.isGridEnabled()},m=c.snapMove(p,i,y);if(m&&(g=m.snapInfo,h=m.snappedAnchor),l.setSnapInfo(g),!h.isEqual(i)){var v=r.default.point(h.x-o.x,h.y-o.y),T=a.copy();T.offset(v.x,v.y),l.setOperationRect(T)}}}n.invalidate()}}(t,!a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),g(e.TransformType.kTransformMove,d,o)};this.initialize=function(t){l=t},this.terminate=function(){},this.getToolName=function(){return"edit"},this.isFinished=function(){return u},this.handleEvent=function(t){switch(t.type){case a.default.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===a.default.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case a.default.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case a.default.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonDown=function(t,e){if(i)return!0;var r=l.getPageIndex(),o=(n.mapPointToPage(r,t),f(t));if(!o)return u=!0,!1;if(c())return!!o;if(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpModify,!0)){l.setOperation(o.type),d=o.handle;var p=o.active.floor();s=n.mapPointToPage(r,p),n.invalidate()}return!0},this.onLButtonUp=function(t,r){if(i)return!0;if(l.getOperation()==e.TransformType.kTransformNone)return!1;if(c())return!0;i=!0;var a=f(t);return a&&g(a.type,a.handle,r),l.endOperation().finally(function(){i=!1,n.invalidate()}),!0},this.onRButtonDown=function(t,e){return!!f(t)},this.onRButtonUp=function(t,e){return!!f(t)&&(n.showContextMenu(p(),t,a.default.BLSelectionOperations.kBLSelectionAllowClipboardOperations|a.default.BLSelectionOperations.kBLSelectionAllowRollCmdOperations),!0)},this.onMouseMove=function(t,o){if(i)return!0;if(c())return!!f(t);var u=n.mapPointToPage(l.getPageIndex(),t);switch(l.getOperation()){case e.TransformType.kTransformNone:var s=f(t);return!!s&&(n.setHighlight(null),g(s.type,s.handle,o),!0);case e.TransformType.kTransformMove:h(u,o);break;case e.TransformType.kTransformScale:l.getAnnotSubtype()!=a.default.pdfAnnotationType.text&&function(t,o){var i=t.copy(),u=l.getRect(),s=Math.abs(u.getWidth()),c=Math.abs(u.getHeight());if(!r.default.floatEq(s,0)&&!r.default.floatEq(c,0)){var f=r.default.point(u.left,u.bottom),p=u.getCenter(),h=2*(i.x-f.x)/s,y=2*(i.y-f.y)/c;i.offset(-f.x,-f.y);var m=i.x/s,v=i.y/c,T=null;switch(d){case e.HandleType.kHandleLeftMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-m,1-m,f).multiply(r.default.translationMatrix(i.x,m*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-h,1-h,p):r.default.scalingMatrix(1-m,1,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(v,v,f).multiply(r.default.translationMatrix((1-v)*s/2,0)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(y-1,y-1,p):r.default.scalingMatrix(1,v,f);break;case e.HandleType.kHandleRightMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(m,m,f).multiply(r.default.translationMatrix(0,(1-m)*c/2)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(h-1,h-1,p):r.default.scalingMatrix(m,1,f);break;case e.HandleType.kHandleBottomMiddle:T=a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)?r.default.scalingMatrix(1-v,1-v,f).multiply(r.default.translationMatrix(v*s/2,i.y)):a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?r.default.scalingMatrix(1-y,1-y,p):r.default.scalingMatrix(1,1-v,f).multiply(r.default.translationMatrix(0,i.y));break;case e.HandleType.kHandleTopLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var P=Math.min(1-m,v);T=r.default.scalingMatrix(P,P,f).multiply(r.default.translationMatrix((1-P)*s,0))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var b=Math.min(1-h,y-1);T=r.default.scalingMatrix(b,b,p)}else T=r.default.scalingMatrix(1-m,v,f).multiply(r.default.translationMatrix(i.x,0));break;case e.HandleType.kHandleTopRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var M=Math.min(m,v);T=r.default.scalingMatrix(M,M,f)}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var B=Math.min(h-1,y-1);T=r.default.scalingMatrix(B,B,p)}else T=r.default.scalingMatrix(m,v,f);break;case e.HandleType.kHandleBottomLeft:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var L=Math.min(1-m,1-v);T=r.default.scalingMatrix(L,L,f).multiply(r.default.translationMatrix((1-L)*s,(1-L)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var S=Math.min(1-h,1-y);T=r.default.scalingMatrix(S,S,p)}else T=r.default.scalingMatrix(1-m,1-v,f).multiply(r.default.translationMatrix(i.x,i.y));break;case e.HandleType.kHandleBottomRight:if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var x=Math.min(m,1-v);T=r.default.scalingMatrix(x,x,f).multiply(r.default.translationMatrix(0,(1-x)*c))}else if(a.default.BLFlagIsSet(o,a.default.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var k=Math.min(h-1,1-y);T=r.default.scalingMatrix(k,k,p)}else T=r.default.scalingMatrix(m,1-v,f).multiply(r.default.translationMatrix(0,i.y))}T&&l.setOperationRect(T.mapRect(u)),n.invalidate(),g(e.TransformType.kTransformScale,d,o)}}(u,o)}return!0},this.onKeyUp=function(t){return t==a.default.kBLKey.kBLKey_DELETE&&function(t){return!!i||!c()&&"Delete"==t&&(n.requestPermissions(a.default.BLPermReqObj.kBLPermReqObjAnnot,a.default.BLPermReqOp.kBLPermReqOpDelete,!0)&&(n.setSelection(null),l.delete(),u=!0),!0)}("Delete")}};return n.createInstance=function(t,e){return new i(e)},n}]),window.mainApp.factory(u,getConstructor(l,u,"factory"))}});